<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Tan Li Hau]]></title><description><![CDATA[Tan Li Hau is a frontend engineer who is currently working in Shopee]]></description><link>https://lihautan.com</link><generator>RSS for Node</generator><lastBuildDate>Sat, 16 Mar 2019 08:26:03 GMT</lastBuildDate><item><title><![CDATA[Codemod with babel]]></title><description><![CDATA[A general template that I used: WIP  I am going to explain how it works and how to use it.]]></description><link>https://lihautan.com/codemod-with-babel/</link><guid isPermaLink="false">https://lihautan.com/codemod-with-babel/</guid><pubDate>Wed, 13 Mar 2019 08:00:00 GMT</pubDate><content:encoded>&lt;p&gt;A general template that I used:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; babel &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;@babel/core&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; promisify &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;util&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; writeFile &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;promisify&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;fs&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;writeFile&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; code &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; babel&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;transformFileAsync&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filename&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    plugins&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token function&quot;&gt;manipulateOptions&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;opts&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; parserOpts&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;/*
             add to parserOpts.plugins to enable the syntax
             eg: 
              jsx, flow, typescript, objectRestSpread, pipelineOperator, 
              throwExpressions, optionalChaining, nullishCoalescingOperator, 
              exportDefaultFrom, dynamicImport, ...
            */&lt;/span&gt;
            parserOpts&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;plugins&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
              &lt;span class=&quot;token string&quot;&gt;&apos;classProperties&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
              &lt;span class=&quot;token string&quot;&gt;&apos;classPrivateProperties&apos;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          visitor&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// fill in a transformer here&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;writeFile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filename&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; code&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;utf-8&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;[WIP] I am going to explain how it works and how to use it.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[My eslint doesn’t work with for flow 0.85’s explicit type argument syntax]]></title><description><![CDATA[Today  Wei Gao  posed an interesting question: She was upgrading Flow to v0.85,  which requires her to explicitly type the argument of the…]]></description><link>https://lihautan.com/eslint-for-flow-explicit-type-argument-syntax/</link><guid isPermaLink="false">https://lihautan.com/eslint-for-flow-explicit-type-argument-syntax/</guid><pubDate>Thu, 17 Jan 2019 08:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Today &lt;a href=&quot;https://dev.wgao19.cc/&quot;&gt;Wei Gao&lt;/a&gt; posed an interesting question:&lt;/p&gt;
&lt;p&gt;She was upgrading Flow to v0.85, &lt;a href=&quot;https://medium.com/flow-type/asking-for-required-annotations-64d4f9c1edf8&quot;&gt;which requires her to explicitly type the argument of the function call&lt;/a&gt;. However, when she saved the file, our &lt;a href=&quot;https://github.com/prettier/prettier&quot;&gt;eslint-prettier&lt;/a&gt; automatically format the code into a weird syntax:&lt;/p&gt;
&lt;p&gt;So, when she wrote:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;fooFunction&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Bar&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;With &lt;a href=&quot;https://github.com/prettier/eslint-plugin-prettier&quot;&gt;eslint-plugin-prettier&lt;/a&gt;, eslint &lt;em&gt;“fixed”&lt;/em&gt; the code into:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;fooFunction &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; Bar &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It felt like eslint sees &lt;code class=&quot;language-text&quot;&gt;&amp;lt;&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;&amp;gt;&lt;/code&gt; as the comparison operator, rather than &lt;code class=&quot;language-text&quot;&gt;&amp;lt;Type&amp;gt;&lt;/code&gt; as a whole!&lt;/p&gt;
&lt;p&gt;To confirm with my hypothesis, I opened up my favourite tool for inspecting &lt;a href=&quot;https://en.wikipedia.org/wiki/Abstract_syntax_tree&quot;&gt;AST&lt;/a&gt;: &lt;a href=&quot;https://astexplorer.net/&quot;&gt;astexplorer.net&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;You can paste your code into &lt;a href=&quot;https://astexplorer.net/&quot;&gt;astexplorer.net&lt;/a&gt; and see how different parser “sees” your code in terms of a AST (Abstract Syntax Tree).&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/17844d464c6fad0985e078b84dca8afd/940da/ast-explorer.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 57.182576459684896%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABDklEQVQoz42R62rDMAyF+/6v15alGc1NtmTZsnuFsEDSKQl0+ZGyHAthjD8fSd51P93j9hyG4fXWtGXnqrLSfLteo4gBIMSmrpsa8gyyr6qpadd1Xdu2I6xrUt/3CgPA8XAozmcJQeEkEueIckljpCi71wepZ11VUaVACN77EEJaviJr8NwCNM0py2ZYzRu0hlB59l5DpYcfYSL6znPPnBQPAR0Rs2Ka3bQJq/Bf2WWZRufo2ZEpvCMgkqny9E/ZAGVRXJLORdSsNECO46LhdXiWdqV/o7BGkkCEfhpY3DIwtJhnJ+WtMWQte0be4PyGj/s9KuYcWbBQIuHWsh/3u36ujJdiYIdVxs5GiUv4F+Itbmu8PVBFAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;You can choose different a parser!&quot;
        title=&quot;&quot;
        src=&quot;/static/17844d464c6fad0985e078b84dca8afd/623ee/ast-explorer.png&quot;
        srcset=&quot;/static/17844d464c6fad0985e078b84dca8afd/816c5/ast-explorer.png 148w,
/static/17844d464c6fad0985e078b84dca8afd/c766b/ast-explorer.png 295w,
/static/17844d464c6fad0985e078b84dca8afd/623ee/ast-explorer.png 590w,
/static/17844d464c6fad0985e078b84dca8afd/e5345/ast-explorer.png 885w,
/static/17844d464c6fad0985e078b84dca8afd/940da/ast-explorer.png 1079w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;As you can see from the picture above, you can choose from different parsers:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;acorn&lt;/strong&gt; — the parser used by webpack after the loaders, webpack uses acorn’s AST to find &lt;code class=&quot;language-text&quot;&gt;import&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;require()&lt;/code&gt; syntax to know generate the dependency tree of your project, as well as provide an entry for plugins like &lt;a href=&quot;https://webpack.js.org/plugins/define-plugin/&quot;&gt;DefinePlugin&lt;/a&gt; to transform the transpiled code.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;babylon&lt;/strong&gt;— the &lt;a href=&quot;https://github.com/babel/babel/&quot;&gt;babel&lt;/a&gt; parser, now it’s called &lt;a href=&quot;https://babeljs.io/docs/en/babel-parser&quot;&gt;@babel/parser&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;flow&lt;/strong&gt;, &lt;strong&gt;typescript&lt;/strong&gt;, &lt;strong&gt;uglify-js&lt;/strong&gt;— the parsers that each of the library uses&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;esprima&lt;/strong&gt; — the default eslint parser&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;babel-eslint&lt;/strong&gt; — a wrapper of babel parser for eslint, which is also the one we used, because we have a ton of babel plugins configured, so by using babel-eslint we don’t have to reconfigure the same plugins for eslint.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;So I copied our code into astexplorer, and selected the “flow” parser:&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/ab7413e038ae94283f26d86d612275bc/e5345/flow-ast.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 28.926553672316384%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAAA3ElEQVQY03WQ2U7DMBBF8/+/wi/wggqtKFuQkKBqmjrexsuM27RKwkNb4xqCBALP8X271hkXMZ4yse969J4QKY0FUZXN+u25am5f65eVcM4R+p9gEcfTd91YTpcUZ1JCI42Q4CwGaje0C4mQM1O0pNvWHo/vQz+gd19lJCPmwCeseVjzUqlS65RPCVCPSt6BvnemLLZU7ffscBjOZfdZ9ohBsSuxuAB+uaqvl/WUy7nIgJ4ZuHFmatTsb21vQQumFWgbCLeEZ+fNaEvf2vH0+8NSJn/0Jr2RF/H/8QF/4EmHPEuiHwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;flow ast&quot;
        title=&quot;&quot;
        src=&quot;/static/ab7413e038ae94283f26d86d612275bc/623ee/flow-ast.png&quot;
        srcset=&quot;/static/ab7413e038ae94283f26d86d612275bc/816c5/flow-ast.png 148w,
/static/ab7413e038ae94283f26d86d612275bc/c766b/flow-ast.png 295w,
/static/ab7413e038ae94283f26d86d612275bc/623ee/flow-ast.png 590w,
/static/ab7413e038ae94283f26d86d612275bc/e5345/flow-ast.png 885w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;I can see the type annotation is being parsed as “TypeParameterInstantiation”, however when I changed the parser to “babel-eslint8”,&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/d80586ce912511f29235c3518598301c/bfa8e/babel-eslint-8-ast.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 39.44387229660144%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAAA4UlEQVQY03WQ3W6DMAyFef9H2gOslXazq6lsDEISYju2oVJvgdXpj7Ru5ejISqLzRbarn7vWdZ2mSZhVREUhNH3vPppwaMOAJHJ9f3C1BQuB7+o2Dm5IPiX5R27DqmywqwFSRpjsfkmPN+zWRZWREcbxeFqW+fgLzgShaxqH3w4RpZjUKpFytlj5rprneVlX82Pbo7An/xLjK8Ab415ox1Sq0H7knXCwzObMBD0O74hfmRrOn3K3nZVrZbTMc9iEsQs+tEG7IDEpgE1XmqfLCJzZkn/hQjJzznpV2c1Tl4WdAeWrvB3eiGzDAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;babel eslint 8 ast&quot;
        title=&quot;&quot;
        src=&quot;/static/d80586ce912511f29235c3518598301c/623ee/babel-eslint-8-ast.png&quot;
        srcset=&quot;/static/d80586ce912511f29235c3518598301c/816c5/babel-eslint-8-ast.png 148w,
/static/d80586ce912511f29235c3518598301c/c766b/babel-eslint-8-ast.png 295w,
/static/d80586ce912511f29235c3518598301c/623ee/babel-eslint-8-ast.png 590w,
/static/d80586ce912511f29235c3518598301c/e5345/babel-eslint-8-ast.png 885w,
/static/d80586ce912511f29235c3518598301c/bfa8e/babel-eslint-8-ast.png 971w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;I get a Binary Expression and a SequenceExpression!&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;Binary Expression&lt;/strong&gt; is a way to express logical expression and mathematical expression, eg: &lt;code class=&quot;language-text&quot;&gt;a + b&lt;/code&gt; , &lt;code class=&quot;language-text&quot;&gt;a &amp;amp;&amp;amp; b&lt;/code&gt; , &lt;code class=&quot;language-text&quot;&gt;a &amp;lt;= b&lt;/code&gt;, etc.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Sequence Expression&lt;/strong&gt; on the other hand is something you don’t see people write that often, you can look up how it works in &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Comma_Operator&quot;&gt;Comma operator (MDN)&lt;/a&gt;, basically you can write expressions as a expression by joining them with a comma operator (&lt;code class=&quot;language-text&quot;&gt;,&lt;/code&gt;), and the expression returns the value of the last expression, eg: result = &lt;code class=&quot;language-text&quot;&gt;(a++, b++, c -= 2, d.push(e), --f)&lt;/code&gt;, you increment &lt;code class=&quot;language-text&quot;&gt;a&lt;/code&gt; , &lt;code class=&quot;language-text&quot;&gt;b&lt;/code&gt; , decrement &lt;code class=&quot;language-text&quot;&gt;c&lt;/code&gt; by 2, and pushed &lt;code class=&quot;language-text&quot;&gt;e&lt;/code&gt; into &lt;code class=&quot;language-text&quot;&gt;d&lt;/code&gt; and decrement &lt;code class=&quot;language-text&quot;&gt;f&lt;/code&gt; and set result to the new value of &lt;code class=&quot;language-text&quot;&gt;f&lt;/code&gt;. Wow, that’s a lot in one statement! It’s confusing to read, but you see this often in a minified code.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Now this explains why prettier will try to add space in between &lt;code class=&quot;language-text&quot;&gt;&amp;lt;&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;&amp;gt;&lt;/code&gt; .&lt;/p&gt;
&lt;p&gt;I saw that there’s a babel-eslint9, and I gave it a try, and…&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/ab7413e038ae94283f26d86d612275bc/e5345/babel-eslint-9-ast.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 28.926553672316384%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAAA3ElEQVQY03WQ2U7DMBBF8/+/wi/wggqtKFuQkKBqmjrexsuM27RKwkNb4xqCBALP8X271hkXMZ4yse969J4QKY0FUZXN+u25am5f65eVcM4R+p9gEcfTd91YTpcUZ1JCI42Q4CwGaje0C4mQM1O0pNvWHo/vQz+gd19lJCPmwCeseVjzUqlS65RPCVCPSt6BvnemLLZU7ffscBjOZfdZ9ohBsSuxuAB+uaqvl/WUy7nIgJ4ZuHFmatTsb21vQQumFWgbCLeEZ+fNaEvf2vH0+8NSJn/0Jr2RF/H/8QF/4EmHPEuiHwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;babel eslint 9 ast&quot;
        title=&quot;&quot;
        src=&quot;/static/ab7413e038ae94283f26d86d612275bc/623ee/babel-eslint-9-ast.png&quot;
        srcset=&quot;/static/ab7413e038ae94283f26d86d612275bc/816c5/babel-eslint-9-ast.png 148w,
/static/ab7413e038ae94283f26d86d612275bc/c766b/babel-eslint-9-ast.png 295w,
/static/ab7413e038ae94283f26d86d612275bc/623ee/babel-eslint-9-ast.png 590w,
/static/ab7413e038ae94283f26d86d612275bc/e5345/babel-eslint-9-ast.png 885w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;It seems like the bug was fixed on &lt;code class=&quot;language-text&quot;&gt;babel-eslint9&lt;/code&gt;, so I plowed through the release notes of babel-eslint, and I found this &lt;a href=&quot;https://github.com/babel/babel-eslint/pull/444&quot;&gt;merge commit&lt;/a&gt;. So it seems like upgrading babel-eslint to v9 will solve the issue! 🎉&lt;/p&gt;</content:encoded></item><item><title><![CDATA[The `ascii_only` option in uglify-js]]></title><description><![CDATA[The background story I was working on a chrome extension, and trying to add some emojis 😍😀😎 into the extension, however I realised the…]]></description><link>https://lihautan.com/uglify-ascii-only/</link><guid isPermaLink="false">https://lihautan.com/uglify-ascii-only/</guid><pubDate>Sat, 27 Oct 2018 08:00:00 GMT</pubDate><content:encoded>&lt;p&gt;The background story&lt;/p&gt;
&lt;p&gt;I was working on a chrome extension, and trying to add some emojis 😍😀😎 into the extension, however I realised the 😍😀😎 are not rendered correctly!&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/ff2b81e03b2f2d9068a97743adcb69c8/5e68e/problem.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 66.32911392405065%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAAZElEQVQoz+2NwQqAIAyGff837FBIJJubmrm8ZuvQPfIWfbCf8Y+PGe89eppmN4zWLrA4h4hElFICgBgjM4cQmFh3ANTUq6aWpta65rwV0Smyi4g27RmmdXDJx80buevzL39fPgFFRwLqWPWYuwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;The 😍😍😀😀isn’t rendered correctly in chrome extension&quot;
        title=&quot;&quot;
        src=&quot;/static/ff2b81e03b2f2d9068a97743adcb69c8/623ee/problem.png&quot;
        srcset=&quot;/static/ff2b81e03b2f2d9068a97743adcb69c8/816c5/problem.png 148w,
/static/ff2b81e03b2f2d9068a97743adcb69c8/c766b/problem.png 295w,
/static/ff2b81e03b2f2d9068a97743adcb69c8/623ee/problem.png 590w,
/static/ff2b81e03b2f2d9068a97743adcb69c8/e5345/problem.png 885w,
/static/ff2b81e03b2f2d9068a97743adcb69c8/7a439/problem.png 1180w,
/static/ff2b81e03b2f2d9068a97743adcb69c8/5e68e/problem.png 1580w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;And so I inspect the source code loaded into the chrome extension, it wasn’t loaded correctly as well!&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/1d6b5e9c1ff4877c011da49ac7779e01/daa55/problem-2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 52.05158264947245%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAAAYUlEQVQoz+3MuxJAMBSE4bz/CyqMwi0Rl8E5J8sEwQOg0Sh8xXb/qrZu8rTMCh3FidGm0rq3lrvOiYAZ507XiEh5753DSATAi8zDuBCtzJvDJrwCIYT9htpfUA/Hf/yp+AB7gVDwv+I1sAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;problem with the source too&quot;
        title=&quot;&quot;
        src=&quot;/static/1d6b5e9c1ff4877c011da49ac7779e01/623ee/problem-2.png&quot;
        srcset=&quot;/static/1d6b5e9c1ff4877c011da49ac7779e01/816c5/problem-2.png 148w,
/static/1d6b5e9c1ff4877c011da49ac7779e01/c766b/problem-2.png 295w,
/static/1d6b5e9c1ff4877c011da49ac7779e01/623ee/problem-2.png 590w,
/static/1d6b5e9c1ff4877c011da49ac7779e01/e5345/problem-2.png 885w,
/static/1d6b5e9c1ff4877c011da49ac7779e01/7a439/problem-2.png 1180w,
/static/1d6b5e9c1ff4877c011da49ac7779e01/daa55/problem-2.png 1706w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;And so I think, probably the encoding issue was caused by the webpack compilation, but, my compiled code looks exactly fine!&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/2601fef3b9c18ade62977ec25a16beda/f6193/source.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 48.95688456189152%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAAA/UlEQVQoz+WLwU6EMBRF+QAZpQwOhcwApS1QYSptYQCFAAsTXbhxYVyZ+Amz8PstM8bErVuTk5dzb941nuaP95fP18fj0L8h0WMxxmIkcsJyInImp5vIiUpdjnE5RrcjXh4WjDDmCJecdoLfp1zRRMj9mNEay4bUd1h1advT/U0hc5SyACGWYT9ElhsAGBhX7vbC8XZJUdRDXvWim0U7R7TM64pViimlhiYTgjdVfqjaA39+KLkqnYDBiBnACy8daMHA9mOg8ZDlofUWAw/b/oIFY33B2X2ygtrJ9Y5qlrFpu6u1a9obzUq77Zpgc46n5pd/R7DwM4Z/4D+OvwBmxkQr7YPD0AAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;The compiled code seems okay!&quot;
        title=&quot;&quot;
        src=&quot;/static/2601fef3b9c18ade62977ec25a16beda/623ee/source.png&quot;
        srcset=&quot;/static/2601fef3b9c18ade62977ec25a16beda/816c5/source.png 148w,
/static/2601fef3b9c18ade62977ec25a16beda/c766b/source.png 295w,
/static/2601fef3b9c18ade62977ec25a16beda/623ee/source.png 590w,
/static/2601fef3b9c18ade62977ec25a16beda/e5345/source.png 885w,
/static/2601fef3b9c18ade62977ec25a16beda/7a439/source.png 1180w,
/static/2601fef3b9c18ade62977ec25a16beda/f6193/source.png 1438w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;So, most likely is a decoding issue when the emoji code get loaded into chrome extension. So I manually changed the emoji in the compiled code to &lt;code class=&quot;language-text&quot;&gt;\ud83d\ude0d&lt;/code&gt; (unicode for 😍). Guess what? The emoji is showing correctly in the chrome extension!&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/c3d91cd8d55265438e63eb08b5570a4d/c2902/expectation.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 53.37423312883436%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAAAWklEQVQoz+2LOw6AIBBEuf/9tFESFcIi+6OxsAHhBiaWMsVLZibPxBgdnLPdpsWu+0HM3ntR7RTpr3NZNYTQKgAgYkqpjzkbIkJmFm28L62l1Ncx9UOG/A/5AYJKiv/XIO9rAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;😍!&quot;
        title=&quot;&quot;
        src=&quot;/static/c3d91cd8d55265438e63eb08b5570a4d/623ee/expectation.png&quot;
        srcset=&quot;/static/c3d91cd8d55265438e63eb08b5570a4d/816c5/expectation.png 148w,
/static/c3d91cd8d55265438e63eb08b5570a4d/c766b/expectation.png 295w,
/static/c3d91cd8d55265438e63eb08b5570a4d/623ee/expectation.png 590w,
/static/c3d91cd8d55265438e63eb08b5570a4d/e5345/expectation.png 885w,
/static/c3d91cd8d55265438e63eb08b5570a4d/7a439/expectation.png 1180w,
/static/c3d91cd8d55265438e63eb08b5570a4d/c2902/expectation.png 1304w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;So I changed my source code to manually type in the unicode, and compiled it using webpack. To my surprise, the unicode was compiled back into the emoji (😍) it represents!&lt;/p&gt;
&lt;p&gt;I googled around and I found &lt;a href=&quot;https://github.com/babel/babel/pull/4478&quot;&gt;this fix for babel-generator&lt;/a&gt;:&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/89e01cd1223b85be658c2ea05cfbd0ab/5be9e/babel-issue.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 41.375%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABBklEQVQY031Ry07EMAzM/38IEgf+AQ7ADQkEFM50d1W1TdPEcd4p0+3CcmFHqWNHGo89Fe/P7cfrbtbaGGPZEjFZNkRmjcfEGO+9Y7xbZi6lLD8QT7fdy0NHRM45BpuDtsH5YDjOBApeXa11+YO61BxjzVmwNzhENoR4jAHtoYGSV6rLpWQAiqVuyCWzmpK14ubquu/HUc6DVFJpOc1rVFoT+5hdSLhQzppciH0/4Jz0axXBe/RNKSHWWlKM5+Hqed4ta5rmq223EhSBzPuw2x8mpeEQO7/8D6wjJ4X5t+YrGevtD90wTpb9ZTJk8F+geXIbH3y6u398az7XbaW6QIZ/cPS3/AZH589NEecGCQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;babel issue&quot;
        title=&quot;&quot;
        src=&quot;/static/89e01cd1223b85be658c2ea05cfbd0ab/623ee/babel-issue.png&quot;
        srcset=&quot;/static/89e01cd1223b85be658c2ea05cfbd0ab/816c5/babel-issue.png 148w,
/static/89e01cd1223b85be658c2ea05cfbd0ab/c766b/babel-issue.png 295w,
/static/89e01cd1223b85be658c2ea05cfbd0ab/623ee/babel-issue.png 590w,
/static/89e01cd1223b85be658c2ea05cfbd0ab/e5345/babel-issue.png 885w,
/static/89e01cd1223b85be658c2ea05cfbd0ab/7a439/babel-issue.png 1180w,
/static/89e01cd1223b85be658c2ea05cfbd0ab/5be9e/babel-issue.png 1600w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;I checked my babel version, and it had included this fix. So what went wrong?&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;My colleague reminded me that during webpack compilation, there are 2 phases, the &lt;strong&gt;transpilation&lt;/strong&gt; (via babel) and the &lt;strong&gt;minification&lt;/strong&gt; (via uglify plugin).&lt;/p&gt;
&lt;p&gt;So I disabled the optimisation in webpack config, and noticed that my compiled code contains the original unicode string (&lt;code class=&quot;language-text&quot;&gt;\ud83d\ude0d&lt;/code&gt;), instead of the emoji (😍) string. So the unicode string was converted to emoji string during minification!&lt;/p&gt;
&lt;p&gt;So I went to my favourite &lt;a href=&quot;https://skalman.github.io/UglifyJS-online/&quot;&gt;Online JavaScript Minifier&lt;/a&gt; (by &lt;a href=&quot;https://github.com/skalman&quot;&gt;skalman&lt;/a&gt;) to try it out.&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3c362481f7109a36963627eb1ab37cf3/560b9/uglify.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 21.19521912350598%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAkklEQVQI12OYvGb95NXr5u/aO3PT1nk7d8/YuGXmxq1ztu4EMtacPrvmxIk1R4+uO3Fi3cmTa48d23T27PbLl7ddugRBDG8+f//248evv3//////D4yArL//gPT/+28+3Hr69O+vn79+gwCQ/PPnz18kwPDl5x+INmTwD6z54ZsPj96+hXMxAcPnH79xaX5ASDMA2CDb/Ms6D0sAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;online javasript minifier&quot;
        title=&quot;&quot;
        src=&quot;/static/3c362481f7109a36963627eb1ab37cf3/623ee/uglify.png&quot;
        srcset=&quot;/static/3c362481f7109a36963627eb1ab37cf3/816c5/uglify.png 148w,
/static/3c362481f7109a36963627eb1ab37cf3/c766b/uglify.png 295w,
/static/3c362481f7109a36963627eb1ab37cf3/623ee/uglify.png 590w,
/static/3c362481f7109a36963627eb1ab37cf3/e5345/uglify.png 885w,
/static/3c362481f7109a36963627eb1ab37cf3/7a439/uglify.png 1180w,
/static/3c362481f7109a36963627eb1ab37cf3/84fe0/uglify.png 1770w,
/static/3c362481f7109a36963627eb1ab37cf3/560b9/uglify.png 2510w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;After some googling, I &lt;a href=&quot;https://github.com/mishoo/UglifyJS2/issues/490&quot;&gt;found this issue&lt;/a&gt; which described my scenario perfectly.&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7080b1d2cff0afacdf72b3196c9d5a13/d40b5/babel-issue-2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 42.30396902226525%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABKElEQVQY031Qu1LDMBD0/38IDRVDT0dBQQNDSWCw4jixLVnW86STzDrJwNBws9KcpF3t3TVS634c21b0/VGI/TCMXXcATqcTjoe+33fdV9sO4AhhrF3X9ejHm929cH0z7D7Fy5uc5GKM1ou1zhhwEM46F2L0wTvnich7z8wQR6YPI3wOjXl8Gm7vQAEPAVJKiSLFEC/Uf6J5eH59HxR85sXMeoOxnjJT4kg5UAqUkfhAPpLzHnXVWq/i46SVNlIqqeaMgB2XUtdSK3bQuFRc8Pk+hLAsBslVjIU3pZdJzTBXs56kQg7IWUulHUxTjgn/FrSdUv4tGytzPgvt1aEUEDfwtuOISgBUgclhNn/EeIcDrFD/pPQ4SrSXmLfOt+bzBSnDGWOlH/E3Ub3LvmAYyTcAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;why uglifyjs always compress unicode characters to utf8&quot;
        title=&quot;&quot;
        src=&quot;/static/7080b1d2cff0afacdf72b3196c9d5a13/623ee/babel-issue-2.png&quot;
        srcset=&quot;/static/7080b1d2cff0afacdf72b3196c9d5a13/816c5/babel-issue-2.png 148w,
/static/7080b1d2cff0afacdf72b3196c9d5a13/c766b/babel-issue-2.png 295w,
/static/7080b1d2cff0afacdf72b3196c9d5a13/623ee/babel-issue-2.png 590w,
/static/7080b1d2cff0afacdf72b3196c9d5a13/e5345/babel-issue-2.png 885w,
/static/7080b1d2cff0afacdf72b3196c9d5a13/7a439/babel-issue-2.png 1180w,
/static/7080b1d2cff0afacdf72b3196c9d5a13/84fe0/babel-issue-2.png 1770w,
/static/7080b1d2cff0afacdf72b3196c9d5a13/d40b5/babel-issue-2.png 2066w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;Turned out there is a &lt;code class=&quot;language-text&quot;&gt;ascii_only&lt;/code&gt; for &lt;a href=&quot;https://github.com/mishoo/UglifyJS2#output-options&quot;&gt;output options&lt;/a&gt;, and it is default to &lt;code class=&quot;language-text&quot;&gt;false&lt;/code&gt;. So I set &lt;code class=&quot;language-text&quot;&gt;ascii_only&lt;/code&gt; to &lt;code class=&quot;language-text&quot;&gt;true&lt;/code&gt;, ran webpack, and checked my compiled code, it contained the unicode string (&lt;code class=&quot;language-text&quot;&gt;\ud83d\ude0d&lt;/code&gt;)! And even when I wrote emoji string (😍) in my source code, it got compiled to unicode as well.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; UglifyJsPlugin &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;uglifyjs-webpack-plugin&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

module&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exports &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;//...&lt;/span&gt;
  optimization&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    minimizer&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UglifyJsPlugin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      uglifyOptions&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;        output&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;          &lt;span class=&quot;token comment&quot;&gt;// true for `ascii_only`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;          ascii_only&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;/span&gt;      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;
&lt;h2&gt;TIL: UglifyJs ascii_only option, use it when you want to escape Unicode characters.&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;Why is there a &lt;code class=&quot;language-text&quot;&gt;ascii_only&lt;/code&gt; option?&lt;/p&gt;
&lt;p&gt;My guess is that it takes less space for a unicode character (16–17bit) than the escaped ascii characters (6 * 8 bit — 12 * bit), that’s why using unicode character is the default option (&lt;code class=&quot;language-text&quot;&gt;ascii_only=false&lt;/code&gt;).&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Dead-code elimination]]></title><description><![CDATA[Imagine you have the code below: after passing this code through  uglify-js , you will get the code below: uglify-js  will do dead code…]]></description><link>https://lihautan.com/dead-code-elimination/</link><guid isPermaLink="false">https://lihautan.com/dead-code-elimination/</guid><pubDate>Wed, 24 Oct 2018 08:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Imagine you have the code below:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;foobar&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;after passing this code through &lt;a href=&quot;https://www.npmjs.com/package/uglify-js&quot;&gt;uglify-js&lt;/a&gt;, you will get the code below:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;foobar&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;uglify-js&lt;/strong&gt; will do dead code removal, ie: it will remove code that will not affect the program results. Since we defined &lt;code class=&quot;language-text&quot;&gt;a&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;b&lt;/code&gt; in the function &lt;code class=&quot;language-text&quot;&gt;foo&lt;/code&gt; and we are not using &lt;code class=&quot;language-text&quot;&gt;a&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;b&lt;/code&gt; within the &lt;code class=&quot;language-text&quot;&gt;foo&lt;/code&gt;, &lt;strong&gt;uglify-js&lt;/strong&gt; safely removes it from the uglified code.&lt;/p&gt;
&lt;p&gt;However, if you can see from the uglified code, &lt;code class=&quot;language-text&quot;&gt;foobar()&lt;/code&gt; is preserved. This is because calling &lt;code class=&quot;language-text&quot;&gt;foobar&lt;/code&gt; may have side effects on the program, so &lt;strong&gt;uglify-js&lt;/strong&gt; preserves foobar(). But since we do not need the return value of &lt;code class=&quot;language-text&quot;&gt;foobar()&lt;/code&gt;, which is assigned to &lt;code class=&quot;language-text&quot;&gt;a&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;a&lt;/code&gt; got removed by uglify-js.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;What if we know that &lt;code class=&quot;language-text&quot;&gt;foobar()&lt;/code&gt; will not caused any side effects?&lt;/p&gt;
&lt;p&gt;How do we tell &lt;strong&gt;uglify-js&lt;/strong&gt; that if we are not using the return value from &lt;code class=&quot;language-text&quot;&gt;foobar()&lt;/code&gt;, please remove it as well?&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Turns out that &lt;strong&gt;uglify-js&lt;/strong&gt; will treat a function call as “pure” if there is a comment annotation &lt;code class=&quot;language-text&quot;&gt;/*@__PURE__*/&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;/*#__PURE__*/&lt;/code&gt; immediately precedes the call.&lt;/p&gt;
&lt;p&gt;For example: &lt;code class=&quot;language-text&quot;&gt;/* @__PURE__ */ foobar()&lt;/code&gt; !&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// before uglify&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;/*@__PURE__*/&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;foobar&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// after uglify&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Note that now &lt;code class=&quot;language-text&quot;&gt;foobar()&lt;/code&gt; is being removed!&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;So, how is this useful?&lt;/p&gt;
&lt;p&gt;As a library author, you can write a babel plugin to mark your function to be pure, so that &lt;strong&gt;uglify-js&lt;/strong&gt; can drop the function call if the return value is not being used in the code. (There is a &lt;a href=&quot;https://babeljs.io/docs/en/next/babel-helper-annotate-as-pure.html&quot;&gt;util from babel&lt;/a&gt; to do just the job of marking function as pure 😎)&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Took me hours to realise why docker build ignores my .dockerignore]]></title><description><![CDATA[From the  official docs  of docker for .dockerignore: Before the docker CLI sends the context to the docker daemon, it looks for a file…]]></description><link>https://lihautan.com/why-docker-ignores-my-file/</link><guid isPermaLink="false">https://lihautan.com/why-docker-ignores-my-file/</guid><pubDate>Sun, 26 Nov 2017 08:00:00 GMT</pubDate><content:encoded>&lt;p&gt;From the &lt;a href=&quot;https://docs.docker.com/engine/reference/builder/#dockerignore-file&quot;&gt;official docs&lt;/a&gt; of docker for .dockerignore:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Before the docker CLI sends the context to the docker daemon, it looks for a file named &lt;code class=&quot;language-text&quot;&gt;.dockerignore&lt;/code&gt; in the root directory of the context. If this file exists, the CLI modifies the context to exclude files and directories that match patterns in it. This helps to avoid unnecessarily sending large or sensitive files and directories to the daemon and potentially adding them to images using &lt;code class=&quot;language-text&quot;&gt;ADD&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;COPY&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Docker CLI will only look for &lt;code class=&quot;language-text&quot;&gt;.dockerignore&lt;/code&gt; file in the &lt;strong&gt;root directory of the context&lt;/strong&gt;, if you have a monorepo of multiple packages, make sure &lt;code class=&quot;language-text&quot;&gt;.dockerignore&lt;/code&gt; file is on the root directory of your context, it will ignore it if it is somewhere in the subfolder.&lt;/p&gt;
&lt;p&gt;About pattern matching of the ignored file, &lt;code class=&quot;language-text&quot;&gt;*/temp&lt;/code&gt; will match &lt;code class=&quot;language-text&quot;&gt;a/temp&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;b/temp&lt;/code&gt; but not &lt;code class=&quot;language-text&quot;&gt;temp&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;a/b/temp&lt;/code&gt; from the root directory. To match 2 levels deep only, you need to write &lt;code class=&quot;language-text&quot;&gt;*/*/temp&lt;/code&gt; and for arbitrary levels, use &lt;code class=&quot;language-text&quot;&gt;**&lt;/code&gt; it will match any number of directory including zero, eg: &lt;code class=&quot;language-text&quot;&gt;**/temp&lt;/code&gt; matches &lt;code class=&quot;language-text&quot;&gt;temp&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;a/temp&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;a/b/temp&lt;/code&gt; !&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Further reading:&lt;/p&gt;
&lt;p&gt;To understand more why you &lt;strong&gt;should not ignore&lt;/strong&gt; &lt;code class=&quot;language-text&quot;&gt;.dockerignore&lt;/code&gt;, read &lt;a href=&quot;https://codefresh.io/docker-tutorial/not-ignore-dockerignore/&quot;&gt;this article&lt;/a&gt;. It gives a lot of insight why &lt;code class=&quot;language-text&quot;&gt;.dockerignore&lt;/code&gt; file is important.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Dynamically load reducers for code splitting in a React Redux application]]></title><description><![CDATA[This article assumes you have basic knowledge on React and Redux. If you like to learn more about React or Redux, you can go here to learn…]]></description><link>https://lihautan.com/dynamically-load-async-reducer-for-code-splitting-in-react/</link><guid isPermaLink="false">https://lihautan.com/dynamically-load-async-reducer-for-code-splitting-in-react/</guid><pubDate>Thu, 16 Nov 2017 08:00:00 GMT</pubDate><content:encoded>&lt;blockquote&gt;
&lt;p&gt;This article assumes you have basic knowledge on React and Redux. If you like to learn more about React or Redux, you can go here to learn more.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2&gt;Context&lt;/h2&gt;
&lt;p&gt;A common pattern to write a React Redux application is to have:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;a &lt;code class=&quot;language-text&quot;&gt;rootReducer&lt;/code&gt; that imports &lt;strong&gt;all the reducers&lt;/strong&gt; that will be used in the application&lt;/li&gt;
&lt;li&gt;a &lt;code class=&quot;language-text&quot;&gt;reduxStore&lt;/code&gt; that is created using &lt;code class=&quot;language-text&quot;&gt;rootReducer&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;the React application&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/reduxjs/react-redux&quot;&gt;react-redux&lt;/a&gt; that bridge React components and Redux together&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This is what its going to be look like in code:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// root.js&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Provider &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react-redux&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; store &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt;  &lt;span class=&quot;token string&quot;&gt;&apos;./store&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; CustomComponent &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./CustomComponent&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;App&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// react-redux provider to provide the store in React context&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Provider&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;store&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;store&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;CustomComponent&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;Provider&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// store.js&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; createStore&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; combineReducers &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;redux&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// import all your reducers here&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; reducerA &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./reducerA&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; reducerB &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./reducerB&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; reducerC &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./reducerC&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// combine all your reducers here&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; rootReducer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;combineReducers&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  reducerA&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; reducerA&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  reducerB&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; reducerB&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  reducerC&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; reducerC&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// create the redux store!&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; store &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createStore&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rootReducer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// CustomComponent.js&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; connect &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react-redux&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;CustomComponent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;mapStateToProps&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; state &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;mapDispatchToProps&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; dispatch &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;mapStateToProps&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; mapDispatchToProps&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;CustomComponent&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Problem&lt;/h2&gt;
&lt;p&gt;Everything seemed perfect, until your app size increases too fast…&lt;/p&gt;
&lt;p&gt;It takes much longer time to load your web app, and things got worse with a crappy internet speed…&lt;/p&gt;
&lt;h2&gt;Solution&lt;/h2&gt;
&lt;p&gt;I know you &lt;a href=&quot;http://lmgtfy.com/?q=code-splitting&quot;&gt;must have googled for the solution online.&lt;/a&gt; 😉&lt;/p&gt;
&lt;p&gt;So, lets talk about one of the solutions that you can do to make your app bundle smaller  — &lt;a href=&quot;https://webpack.js.org/guides/code-splitting/&quot;&gt; code splitting using webpack&lt;/a&gt;!&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Code splitting is one of the most compelling features of webpack. This feature allows you to split your code into various bundles which can then be loaded on demand or in parallel. It can be used to achieve smaller bundles and control resource load prioritization which, if used correctly, can have a major impact on load time. —&lt;a href=&quot;https://webpack.js.org/guides/code-splitting/&quot;&gt; webpack&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Great! Webpack provides &lt;a href=&quot;https://webpack.js.org/guides/code-splitting/#dynamic-imports&quot;&gt;import()&lt;/a&gt; syntax, that conforms to the &lt;a href=&quot;https://github.com/tc39/proposal-dynamic-import&quot;&gt;ECMAScript proposal&lt;/a&gt; for dynamic imports. Let’s try to split our code &lt;a href=&quot;https://github.com/ReactTraining/react-router/blob/master/packages/react-router-dom/docs/guides/code-splitting.md&quot;&gt;based on different entry points of your routes&lt;/a&gt;. This makes perfect sense, user that goes to &lt;code class=&quot;language-text&quot;&gt;mywebsite/foo&lt;/code&gt; do not need code that is written only for &lt;code class=&quot;language-text&quot;&gt;mywebsite/bar&lt;/code&gt;!&lt;/p&gt;
&lt;p&gt;By now, you should realise, reducer that is written only for &lt;code class=&quot;language-text&quot;&gt;mywebsite/bar&lt;/code&gt;, shouldn’t be imported or included when you are visiting &lt;code class=&quot;language-text&quot;&gt;mywebsite/foo&lt;/code&gt;!&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Then how do I dynamically load reducers for code splitting in a Redux application?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;That’s a &lt;a href=&quot;https://stackoverflow.com/questions/32968016/how-to-dynamically-load-reducers-for-code-splitting-in-a-redux-application&quot;&gt;StackOverflow thread&lt;/a&gt; that you should read about.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;There may be neater way of expressing this — I’m just showing the idea.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Yes, one of a neater way is to write a higher order component that takes care of dynamically loading of reducers.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; gameReducer &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./gameReducer&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; injectReducer &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;inducer&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CustomComponent&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// component logic here&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;injectReducer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  game&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; gameReducer
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;CustomComponent&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://www.npmjs.com/package/inducer&quot;&gt;inducer&lt;/a&gt; (read: &lt;strong&gt;In&lt;/strong&gt;ject Re&lt;strong&gt;ducer&lt;/strong&gt;) gives you a HOC that will add you reducer to the Redux store that is currently using during &lt;code class=&quot;language-text&quot;&gt;componentWillMount&lt;/code&gt; and remove it during &lt;code class=&quot;language-text&quot;&gt;componentWillUnmount&lt;/code&gt;. It’s that simple!&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;So, how does inducer actually works?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Firstly, inducer HOC gets the store from context, provided from the StoreProvider of &lt;code class=&quot;language-text&quot;&gt;react-redux&lt;/code&gt; .&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;InjectReducer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;contextTypes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  store&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; PropTypes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
     replaceReducer&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; PropTypes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;func&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isRequired&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Next, inducer HOC comes up with the new async root reducer that includes the reducer you want to include, and use &lt;a href=&quot;https://redux.js.org/api/store#replaceReducer&quot;&gt;replaceReducer&lt;/a&gt; from Redux to updates the reducer.&lt;/p&gt;
&lt;p&gt;When &lt;code class=&quot;language-text&quot;&gt;componentWillUnmount&lt;/code&gt; inducer will remove your reducer and call &lt;code class=&quot;language-text&quot;&gt;replaceReducer&lt;/code&gt; again!&lt;/p&gt;
&lt;p&gt;You can read the &lt;a href=&quot;https://github.com/tanhauhau/inducer/blob/master/src/index.js&quot;&gt;complete code&lt;/a&gt; here!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Random stuff that I’ve learned from a browser’s developer console]]></title><description><![CDATA[On one normal day, I opened up my browser’s developer console for no reason. The page I was on, at that moment, was Facebook. And I saw a…]]></description><link>https://lihautan.com/random-stuff-i-learned-from-browser-console/</link><guid isPermaLink="false">https://lihautan.com/random-stuff-i-learned-from-browser-console/</guid><pubDate>Wed, 20 Apr 2016 08:00:00 GMT</pubDate><content:encoded>&lt;p&gt;On one normal day, I opened up my browser’s developer console for no reason. The page I was on, at that moment, was Facebook. And I saw a big red “Stop” in the console, and followed by a big bolded text of “This is a browser feature intended for developers….”.&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/07810825ea3107a242fd0b5d9141f6d9/61f10/fb.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 55.58333333333333%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABoklEQVQoz4WSS2/TQBDH/Un5GHDkiASX3ipuFRIihwLHtiqUqqINxC5pabFdv5P4GWf92KcdJzZjcykSLb/DaDS7/53dnb90cqFfq75yM3uz/3Vn7+zF7uGzl++fPH33+ezStoy7AU3TjAFIfummqqqaqkJdUpzYCdAKYcbrrmvb7Wa9XuclFVxUVS0gDAghKKWEkEXKipJAhjGWdC/0/BhjCiWImFDKGGxtmqb7H1KG8mARRlGyTFEBDeumbdvNBvr/W9zeFzNKOSNlkaEkxGlQC1ZX4hHxX50Tz3DlT9bkxJh+0073nen50vqZBW4vbnseE9vjg8u9599HO8rxR/lwJH94/WP06vbo7Z/O7cP04tgzLeX0ajK+UibXijydXCxuxmXiEMctjr9Uc394aPvAh+UkTFbLNEtSlKTZCuWYim3XpXFsyoqjarP5fDbguq7v+5B4rhsGAUxPylFRMdoMbIHNtq5qzlgcx4ZjW7Z9p+u9UfQe0zTBKrZtR1EEe6WynyxHqMyKcpUhxjm4g1BGCIMj7iM4B5PAOlwYxgHO+Q0Pk2Acj5Ez5gAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;fb&quot;
        title=&quot;&quot;
        src=&quot;/static/07810825ea3107a242fd0b5d9141f6d9/623ee/fb.png&quot;
        srcset=&quot;/static/07810825ea3107a242fd0b5d9141f6d9/816c5/fb.png 148w,
/static/07810825ea3107a242fd0b5d9141f6d9/c766b/fb.png 295w,
/static/07810825ea3107a242fd0b5d9141f6d9/623ee/fb.png 590w,
/static/07810825ea3107a242fd0b5d9141f6d9/e5345/fb.png 885w,
/static/07810825ea3107a242fd0b5d9141f6d9/7a439/fb.png 1180w,
/static/07810825ea3107a242fd0b5d9141f6d9/84fe0/fb.png 1770w,
/static/07810825ea3107a242fd0b5d9141f6d9/61f10/fb.png 2400w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;I paused for a while, amazed by what I’ve discovered randomly. This is quite interesting and I have two questions come up to my mind.&lt;/p&gt;
&lt;h2&gt;1. Is Facebook the only site that leaves message in the console?&lt;/h2&gt;
&lt;p&gt;It turns out to be &lt;strong&gt;NO. It’s not just Facebook.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;This is what I found out after some random searches: Oculus and Coursera are hiring people through the console!&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/d9e733e21a2ce79b2415772c6199891c/61f10/oc.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 56.08333333333333%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABuElEQVQoz42Rz0sbQRTH9+/qob336qUglRgPHqMWxR+UoK30JHgRKUgJqFdF8CJCqsSb26bJ/shusj9mq9kfs9nZWXfNrBvS9Ll6KPQQPwxvHm/e4w3fL3dxcWkYBvawk+O6LsbYNJEsy6IoQpQk6SlRVFVq/Go0m01BFARBkmQOWgkhjPXjnCAIwjD0fT+Kon7OfU6SJFChUYS8mIT0MaeUs23b0PWD/cNa7Yrnf+zs7h4dH0M3Y2w0Du7s/PtB5bA0/2FpcaVQnJ18PzVdnKlWq39y/h/4t8SdnJ7tff22sba6sLBYnJktzZUKhUKlUoG34XA4ZnO320UI/eT5FqCoEEAekDDLsvHfJjmgAA1D0CDMgUqapuOHe70eLJfAilZLVVW4TdP0/R5j6Ys2wypwCDwDkz0PQ/5oHtEfXGFAOqPUGaX288nc0cAbPDgxNROKOE1ri6Jwfc0LjXpbVcA2Xdc6uubpcmyKd6gVG2Ki1e86dWZJQ4KywAhchTgK9drc9tbH5eW5V6/fvJt4u742v/m5vPnlU3mjzF/WmIOpdRtZNxGyKPpNDSu5te+xnzhuYjt9D/8FUddEjC/OipoAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;oc&quot;
        title=&quot;&quot;
        src=&quot;/static/d9e733e21a2ce79b2415772c6199891c/623ee/oc.png&quot;
        srcset=&quot;/static/d9e733e21a2ce79b2415772c6199891c/816c5/oc.png 148w,
/static/d9e733e21a2ce79b2415772c6199891c/c766b/oc.png 295w,
/static/d9e733e21a2ce79b2415772c6199891c/623ee/oc.png 590w,
/static/d9e733e21a2ce79b2415772c6199891c/e5345/oc.png 885w,
/static/d9e733e21a2ce79b2415772c6199891c/7a439/oc.png 1180w,
/static/d9e733e21a2ce79b2415772c6199891c/84fe0/oc.png 1770w,
/static/d9e733e21a2ce79b2415772c6199891c/61f10/oc.png 2400w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
Oculus hiring people through the console&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/b1a93a23ac37bd5e97430af57db415c4/61f10/coursera.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 55.75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAACA0lEQVQoz4WSy2sTURTG518QXLlzIRaKWtOMIkpduBHiQtyJLoqopQtBEdSAdCGxKt1VrMShKWIEF7FQbTZWghBdiNZpJvNIwuiYJjGZmbxn7tw7cycz3owoRXz8OBzO5XD4zuF+VL1WEwRR13XsIIQgxtjzPGgBRVFEUSwWi4VCQZKkUgApBUkSRPFHi5qfuzO2a+elydPv361lXq/kch/qjSq7nm23ddt24E8syzIMo9frb+qg2+sb/SFUZOLg2UOjj25HM2/Wlp8n06vL7Aa7uvJMU+u+75Mt/L9D7di+7fqZk5cvnpu7N7vI3F9KxNPplwlmvlL5+sfhrW9qdPfIqciJw+FQ9Ma1u7GZ2K2ZhYcPZmM3Zbn0f+Xpqano1SvTF84/eZxILjGLTDyVSjHxBUnkSXswcAOxrfFrA496mkwKee7T+keOy3M8z7IbHJd7m82yLBsMD/6lPB7aT4/tCe/be2Ti6LHjEZo+QI+H6HAo8+qF70PUVzFoDuwutlrQ0DDqDFwTwg4EbWR1qHarJZaUuqaXy9UvymalprVVuVKWVFXXGtVGvaqr34DRRdA0jI4FDBsNfw2APoKAIosh28Gui7HrOJiU2IEutjWtyfMCL4hcPi/Ln1VNc93fT6CaQ4jB9GYQJjBNExAXkExsQFxBUrfbIxAZL4CMOc7Qj98BPDwrKE3aC3kAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;coursera&quot;
        title=&quot;&quot;
        src=&quot;/static/b1a93a23ac37bd5e97430af57db415c4/623ee/coursera.png&quot;
        srcset=&quot;/static/b1a93a23ac37bd5e97430af57db415c4/816c5/coursera.png 148w,
/static/b1a93a23ac37bd5e97430af57db415c4/c766b/coursera.png 295w,
/static/b1a93a23ac37bd5e97430af57db415c4/623ee/coursera.png 590w,
/static/b1a93a23ac37bd5e97430af57db415c4/e5345/coursera.png 885w,
/static/b1a93a23ac37bd5e97430af57db415c4/7a439/coursera.png 1180w,
/static/b1a93a23ac37bd5e97430af57db415c4/84fe0/coursera.png 1770w,
/static/b1a93a23ac37bd5e97430af57db415c4/61f10/coursera.png 2400w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
Coursera did the same thing too!&lt;/p&gt;
&lt;p&gt;It seems like this is a good place to hire web stack developer. Since the only person who is going to look into the console of your page is a web developer, or a full stack developer, hiring them through your console isn’t a bad idea after all.&lt;/p&gt;
&lt;h2&gt;2. How did the Facebook printed out a styled text in the console?&lt;/h2&gt;
&lt;p&gt;Actually it turns out it is very simple indeed. You can follow &lt;a href=&quot;http://stackoverflow.com/a/22156044/1513547&quot;&gt;the StackOverflow thread&lt;/a&gt; to see how it is done.&lt;/p&gt;
&lt;h2&gt;3. So can the console print out images?&lt;/h2&gt;
&lt;p&gt;It’s a &lt;strong&gt;YES&lt;/strong&gt; again. But how?&lt;/p&gt;
&lt;p&gt;You can refer to this awesome &lt;a href=&quot;https://github.com/adriancooney/console.image&quot;&gt;console.image&lt;/a&gt; library developed by adriancooney. He will explain how he did it to you.&lt;/p&gt;
&lt;h2&gt;So, why not create an express middleware for this?&lt;/h2&gt;
&lt;p&gt;This was the random idea that came out from my mind after seeing websites leaving messages in the console. Why not have an express middleware that injects a script that prints to the console for each html pages served from the &lt;a href=&quot;http://expressjs.com/&quot;&gt;express server&lt;/a&gt;. It should have an simple intuitive API, and should not pollute to the global namespace at all.&lt;/p&gt;
&lt;p&gt;So, &lt;a href=&quot;https://www.npmjs.com/package/express-console-warning&quot;&gt;this is what I’ve come up&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I know, the name is mouthful and awkward. This is because initially I intended the middleware to just print out a warning message. After a bit of consideration, turns out that hiring in the console should be a good use case too. But the name of the package just stuck there.&lt;/p&gt;
&lt;p&gt;So, how do you use it?&lt;/p&gt;
&lt;p&gt;It’s simple. See the code snippet below:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; express &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;express&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        app &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;express&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	hr &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;express-console-warning&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	
app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;hr&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;LOG&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Hello world&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;This is a blue text&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;color&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;blue&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fontSize&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;x-large&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;and this is red&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;color&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;red&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fontSize&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;x-large&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;http://memesvault.com/wp-content/uploads/Best-Meme-Faces-14.png&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0.1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;express&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;client&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And there you go.&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/0d034d4c9a6d743fa5d4024b79e53a86/61f10/express-console-warning.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 55.75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAAAq0lEQVQoz7XRSw6DIBCAYe5/p8ZLNAo+NtpGW2KsDIwCCiWuTNTGLvy2k5/JBFIURVlWTfPyK9ZaSilb0EUaMBZTdk/SeBFGxO+Z53lYQUSllATBO3hwqaToewEA+7Fzzp9wTXymv2azEPARYKdpOzXW4IBaa3LwqON1X+b8XY92kw96aLtWgjyKPfJWVM+xg53Negyfp40hRwcnlN6iSCH+fXMAIPMsw5/xF1sNhL64xQjRAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;express-console-warning&quot;
        title=&quot;&quot;
        src=&quot;/static/0d034d4c9a6d743fa5d4024b79e53a86/623ee/express-console-warning.png&quot;
        srcset=&quot;/static/0d034d4c9a6d743fa5d4024b79e53a86/816c5/express-console-warning.png 148w,
/static/0d034d4c9a6d743fa5d4024b79e53a86/c766b/express-console-warning.png 295w,
/static/0d034d4c9a6d743fa5d4024b79e53a86/623ee/express-console-warning.png 590w,
/static/0d034d4c9a6d743fa5d4024b79e53a86/e5345/express-console-warning.png 885w,
/static/0d034d4c9a6d743fa5d4024b79e53a86/7a439/express-console-warning.png 1180w,
/static/0d034d4c9a6d743fa5d4024b79e53a86/84fe0/express-console-warning.png 1770w,
/static/0d034d4c9a6d743fa5d4024b79e53a86/61f10/express-console-warning.png 2400w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;&lt;em&gt;Disclaimer: I did not own the meme. I got the link from Google search just to try out the API.&lt;/em&gt;&lt;/p&gt;
&lt;h2&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;So, these are what I’ve learned from a random action (open the developer console) and what I’ve created from it (express-console-warning).&lt;/p&gt;
&lt;p&gt;express-console-warning &lt;a href=&quot;https://github.com/tanhauhau/express-console-warning&quot;&gt;github&lt;/a&gt; &lt;a href=&quot;http://npmjs.com/package/express-console-warning&quot;&gt;npm&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[5 Steps to build NodeJS using Travis CI]]></title><description><![CDATA[1. What is Travis CI Travis CI  is a  Continuous Integration  service used to build and test software projects hosted at  GitHub . Or in…]]></description><link>https://lihautan.com/5-steps-to-build-nodejs-using-travis-ci/</link><guid isPermaLink="false">https://lihautan.com/5-steps-to-build-nodejs-using-travis-ci/</guid><pubDate>Wed, 13 Apr 2016 08:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;1. What is Travis CI&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://travis-ci.org&quot;&gt;Travis CI&lt;/a&gt;&lt;/strong&gt; is a &lt;strong&gt;Continuous Integration&lt;/strong&gt; service used to build and test software projects hosted at &lt;a href=&quot;https://github.com&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Or in simple terms, when you push a commit to the master branch of your project hosted at GitHub, Travis CI will run tests and build the latest commit of your master branch.&lt;/p&gt;
&lt;p&gt;It’s that simple. You push a commit → Travis CI run tests and build. Automatically.&lt;/p&gt;
&lt;h2&gt;2. How do I use Travis CI&lt;/h2&gt;
&lt;p&gt;Go to &lt;a href=&quot;https://travis-ci.org&quot;&gt;Travis CI&lt;/a&gt;. Sign in using your GitHub account. You will be prompted to authorise Travis CI to your GitHub account. Approved that.&lt;/p&gt;
&lt;p&gt;When you see something like this:&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/6e3cf01ef134813445a2764dbe24357c/61f10/travis.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 55.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABj0lEQVQoz42P3WrCMBTH+x4iIvix1i61tSI6BrvyHVRcBZ9NmF4ovsDEx9jFNhgbY4P1KzZJ07Tdseo+upv9COGf9vxycqQPwLY9z3MzfN8nGUHGITDKGAl3J6DGcRyMsZQmSSxEHMdpCjGhhMA/27bBgQCXUkIfXx7u3bv0DxLmPOD8cAAZM0Ypg4aMsX1PxkQsAroLOP5yoFMYhkII6cl9xZQEIUmTlAr2jN/COAoiQiIaJ3u+nSSGskhECaQM6dV7349FApBBeHSf4Z0e9kPOwYQKcYJz7rgODAJtj/LPGZgI3+jH/v1pkv4DKXe+3Wxms9l8Pr/JmP9msVisVqv1er1cLrfbbV4eDUeFQkGW5VqtVqlUYK9Wq5UTpVKpXC7Dl2KxaFlWXp5Op42G3Ov1Li66pmkipDWOqLBkWVFVtd/vI4TG43FenkwmIF9edjsds9XS223DMJoQYBmG1mwiTUPttlmv10ajYV62rGtNU66uet2uaRio1UK6fq7rsCNVlRWlrihnYMJog8HgE1ed6sXP8zTtAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;travis&quot;
        title=&quot;&quot;
        src=&quot;/static/6e3cf01ef134813445a2764dbe24357c/623ee/travis.png&quot;
        srcset=&quot;/static/6e3cf01ef134813445a2764dbe24357c/816c5/travis.png 148w,
/static/6e3cf01ef134813445a2764dbe24357c/c766b/travis.png 295w,
/static/6e3cf01ef134813445a2764dbe24357c/623ee/travis.png 590w,
/static/6e3cf01ef134813445a2764dbe24357c/e5345/travis.png 885w,
/static/6e3cf01ef134813445a2764dbe24357c/7a439/travis.png 1180w,
/static/6e3cf01ef134813445a2764dbe24357c/84fe0/travis.png 1770w,
/static/6e3cf01ef134813445a2764dbe24357c/61f10/travis.png 2400w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;Voila. You have created a Travis CI account.&lt;/p&gt;
&lt;p&gt;Next thing you are going to do is to click the &lt;code class=&quot;language-text&quot;&gt;(+)&lt;/code&gt; button beside the &lt;em&gt;“My Repositories”&lt;/em&gt; on the left.&lt;/p&gt;
&lt;p&gt;You will then see a list of projects on your GitHub.&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/4bf79c589919e8f4fcacb7c8f4fda005/61f10/travis-2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 55.541666666666664%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABIElEQVQoz5WSu07DQBBF/ecUCIREiZQW+AYKSrqIwkBj2RayoIUEbO/b++bGG4wTEIJbrGbGe+bujJzFUcMwKKXip5AyiLIQQpwJyYtUT++tH+vZdBuaLjlrCe8JJ84aZ/Xl+UWe56g/3N+dLRZciXRtA6M9E1xrneLk9fj2/EpWwRqm6MHp4e1yieLVzfXRybG3+gv2MRDJpRDzRzLJKCXGaGM1lXRQ0hrNFBMSNsOOsxCCC4Gxkz+C9WrtnDOgtcYU274heu8nj+3MqQQBQNp1XVmWINFUSol1IMa5t78s7ip9BlxVFQA+CuaI557/gOEJMn7Tz3Df93VdW2sxPJ6dFvFXuG3boijAJOfN/0JpWsdvcBIhpGma5Dxpb2DoA1uffdH1gXVKAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;travis&quot;
        title=&quot;&quot;
        src=&quot;/static/4bf79c589919e8f4fcacb7c8f4fda005/623ee/travis-2.png&quot;
        srcset=&quot;/static/4bf79c589919e8f4fcacb7c8f4fda005/816c5/travis-2.png 148w,
/static/4bf79c589919e8f4fcacb7c8f4fda005/c766b/travis-2.png 295w,
/static/4bf79c589919e8f4fcacb7c8f4fda005/623ee/travis-2.png 590w,
/static/4bf79c589919e8f4fcacb7c8f4fda005/e5345/travis-2.png 885w,
/static/4bf79c589919e8f4fcacb7c8f4fda005/7a439/travis-2.png 1180w,
/static/4bf79c589919e8f4fcacb7c8f4fda005/84fe0/travis-2.png 1770w,
/static/4bf79c589919e8f4fcacb7c8f4fda005/61f10/travis-2.png 2400w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;If the list of repositories is empty, click “Sync account” to fetch all your repositories.&lt;/p&gt;
&lt;p&gt;Turn on one of your project for Continuous Integration!&lt;/p&gt;
&lt;p&gt;That’s all.&lt;/p&gt;
&lt;h2&gt;3. How to build a Node.js project using Travis CI&lt;/h2&gt;
&lt;p&gt;Create a file name &lt;code class=&quot;language-text&quot;&gt;.travis.yml&lt;/code&gt; at the root folder of your project.&lt;/p&gt;
&lt;p&gt;Copy this into the file.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;travis.yml:&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yml&quot;&gt;&lt;pre class=&quot;language-yml&quot;&gt;&lt;code class=&quot;language-yml&quot;&gt;language: node_js
node_js:
  - 4.2&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Commit and Push. That’s simple.&lt;/p&gt;
&lt;p&gt;Or if you are lazy, run this:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;curl https://gist.githubusercontent.com/tanhauhau/405e39884e80288615a7b51181fd5228/raw/9045c2e219547f0a228da630abff345d8add0c47/.travis.yml &amp;gt; .travis.yml&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The version of Node.js I am using is 4.2 at the time of writing this article. To be safe, you can run “node — version” on your command line to determine which version of Node.js you are running.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Make sure that you have all your dependencies persists to the package.json as Travis CI will install all the dependencies from it by calling npm install.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Another thing to take note is that if you wanna run your test script, make sure to include it in the &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/ea1fc213261bc9adc9f16d577d1cf7a3/cffd4/package-json.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 44.66145833333333%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABLklEQVQoz3WQ62rCQBCF8x657XVm9hpjjDGJim1BSqH91fd/lm5iQQSFj2XZ2TNz5mTKKrtDrhUEZbZAG6AWyloUFb9R1i/JXI/jd+wu3vVm+Az7a4AAAhSTgqmELNlrsR+ov/r24roPH0e7fbObk40TJQu2xzASV2qZ/6xFFg40/zRJ1r+n01CrFemi4HnO8pLlBSvKm3/2RFwLGY8URsOVtgP4GcNMYcZ4ojChnygekTqdXGCrU6MHMQULEaRVwkhFIFBykEwLruW6s+Ag6nX/SojyMb8s1ebfsP/ym4tpJl/VsigXh8uQauFp7BVbyCombQ8pYbfHeKY4k9lB8uwGcAf0I5oOwpGaMyXzfkI3pBQxlZKXzDQWG1BWK69qIe7IlfWe/v3f5f09zf8DUz9QL41BfhYAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;packagejson&quot;
        title=&quot;&quot;
        src=&quot;/static/ea1fc213261bc9adc9f16d577d1cf7a3/623ee/package-json.png&quot;
        srcset=&quot;/static/ea1fc213261bc9adc9f16d577d1cf7a3/816c5/package-json.png 148w,
/static/ea1fc213261bc9adc9f16d577d1cf7a3/c766b/package-json.png 295w,
/static/ea1fc213261bc9adc9f16d577d1cf7a3/623ee/package-json.png 590w,
/static/ea1fc213261bc9adc9f16d577d1cf7a3/cffd4/package-json.png 768w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;4. How do I use bower and install bower dependencies&lt;/h2&gt;
&lt;p&gt;If you are using bower, add a before_script for .travis.yml&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yml&quot;&gt;&lt;pre class=&quot;language-yml&quot;&gt;&lt;code class=&quot;language-yml&quot;&gt;language: node_js
node_js:
  - 4.2
before_script:
  - npm install -g bower
  - bower install&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Or likewise if you are lazy, copy and paste this to your command line.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sh&quot;&gt;&lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;curl https://gist.githubusercontent.com/tanhauhau/71998bf221810186f046db94cda10c4e/raw/d1e8aee0981a96c20f94de6db386da048face423/.travis.yml &amp;gt; .travis.yml&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;One thing to take note for bower is that when there is dependency conflict, bower will ask you to choose which version of the dependency to be installed interactively. In the case for Travis CI, Travis CI will not know which version to install it for you where you will see an error like this:&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a6db19b080c368076dded9856cdfc138/d6f10/bower.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 22.386483632523756%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAApUlEQVQI122PXQ6DIBCEPYmAgFLYxRQpuvh3AX3w/pcpaWLSJv0y2czDTna2Os/TAzz3XYbQez/PMxFt27YsS/GZKOccY3TOSSmbGyGEMaY6jgMAx5wfiN77kkwpres6TtNEVEYIYRiG/+FymTNmlDKy0VK2St36eK2kEHVdM8bEF5zzruuq67qcfdCY0ium0i8EsLYH8M6Vd9BZBFf22l+01oj4Bil2KiE8c67XAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;bower&quot;
        title=&quot;&quot;
        src=&quot;/static/a6db19b080c368076dded9856cdfc138/623ee/bower.png&quot;
        srcset=&quot;/static/a6db19b080c368076dded9856cdfc138/816c5/bower.png 148w,
/static/a6db19b080c368076dded9856cdfc138/c766b/bower.png 295w,
/static/a6db19b080c368076dded9856cdfc138/623ee/bower.png 590w,
/static/a6db19b080c368076dded9856cdfc138/e5345/bower.png 885w,
/static/a6db19b080c368076dded9856cdfc138/7a439/bower.png 1180w,
/static/a6db19b080c368076dded9856cdfc138/84fe0/bower.png 1770w,
/static/a6db19b080c368076dded9856cdfc138/d6f10/bower.png 1894w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Therefore, you will have to &lt;a href=&quot;https://jaketrent.com/post/bower-resolutions/&quot;&gt;persists the resolution to bower.json&lt;/a&gt; to avoid the build error.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;5. Include a Travis CI badge&lt;/h2&gt;
&lt;p&gt;To summarise, you have set up your Travis CI, copied and pasted the &lt;code class=&quot;language-text&quot;&gt;.travis.yml&lt;/code&gt; to your project, commited and pushed your project to GitHub, and Travis CI had built and tested your project.&lt;/p&gt;
&lt;p&gt;Now, it’s time to add a badge to your GitHub repository!&lt;/p&gt;
&lt;p&gt;Simply clicked the badge in Travis CI and choose for Markdown.&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7b58bf8025eb10e655b552d925bbdd74/7f37b/badge.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 48.854166666666664%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABTUlEQVQoz3VRS27CMBD1JbJhSRcgUFY5AIdAQpyABefgMKw4AMeoVKmq+pGqLiog8dhO4l+S9iUuASrxNHqKxzOeNy8sz/OyLIUQugOORVEgY7T5+Hp/oSffuJ87YESEzsPhoDocj0fOuVASzW+fr8/Z47/muq6rqgI3TcO8cwicjTHee7DznozFfV+NOnwEds5BFxh5ZtFQVejGXairz+gmVKhzWtd53ljbPxEKWGmMtO3QNn0HRmtJlCuFmVAXnmhlC46tCT5Jqf5CXUJIBQchwVob9uqXb5tTUt8nTkqTKgNzeYlMFG2SCI6ergBfoYLhz/Asg+FSSjDq4Dn+WXkGhmw2m9lsNp/PF4tF4OVyud/vGST5W9RnnwHcgtfrdRRFDx2m0+lwOIzjeLfbsTRN+S2yK0AhVl2tVoPBYDQajcfjJEkmkwle2W63v9wbEueK/QBpAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;badge&quot;
        title=&quot;&quot;
        src=&quot;/static/7b58bf8025eb10e655b552d925bbdd74/623ee/badge.png&quot;
        srcset=&quot;/static/7b58bf8025eb10e655b552d925bbdd74/816c5/badge.png 148w,
/static/7b58bf8025eb10e655b552d925bbdd74/c766b/badge.png 295w,
/static/7b58bf8025eb10e655b552d925bbdd74/623ee/badge.png 590w,
/static/7b58bf8025eb10e655b552d925bbdd74/e5345/badge.png 885w,
/static/7b58bf8025eb10e655b552d925bbdd74/7a439/badge.png 1180w,
/static/7b58bf8025eb10e655b552d925bbdd74/84fe0/badge.png 1770w,
/static/7b58bf8025eb10e655b552d925bbdd74/7f37b/badge.png 1920w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;Copy and paste the line into your README.md.&lt;/p&gt;
&lt;p&gt;Commit and Push.&lt;/p&gt;
&lt;p&gt;And now you have a Travis CI badge on your repo!&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/5b0b15e75e2202e4528806c42c473b35/513bc/badge-2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 65.41200406917599%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAA+klEQVQoz5WSyW6DMBCGef93aV+hpyj3HmgIQiEBgZFj43gHL+kkXOghMf0lS5Y93+xZjNEYo7U2K1lr5cR9dPe3yrz3P3leVdXxWJRl+bgUxeFQ7E5fdMZgAd5fwiGEruvatkUIvbF7CQ/D0DTNGo6L7glfGRyokFyvjDEpFedcCPGPyJTScRwJIfNTzrmtMDSsri/Vqa7PjXMenkKI4alkCyBynKY5Bh+8wxj3CEtthTQ3rrwPyZpjftafe/mxV7tvioceioDMYdhpGHJjwiJqe2Ipt8u+wAfUnoYhbSWlUUIKJvgN1muZ1UY4LH1aT3g7/LCLf7UR/gW3YfnzSWhGkQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;badge&quot;
        title=&quot;&quot;
        src=&quot;/static/5b0b15e75e2202e4528806c42c473b35/623ee/badge-2.png&quot;
        srcset=&quot;/static/5b0b15e75e2202e4528806c42c473b35/816c5/badge-2.png 148w,
/static/5b0b15e75e2202e4528806c42c473b35/c766b/badge-2.png 295w,
/static/5b0b15e75e2202e4528806c42c473b35/623ee/badge-2.png 590w,
/static/5b0b15e75e2202e4528806c42c473b35/e5345/badge-2.png 885w,
/static/5b0b15e75e2202e4528806c42c473b35/7a439/badge-2.png 1180w,
/static/5b0b15e75e2202e4528806c42c473b35/84fe0/badge-2.png 1770w,
/static/5b0b15e75e2202e4528806c42c473b35/513bc/badge-2.png 1966w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;</content:encoded></item></channel></rss>