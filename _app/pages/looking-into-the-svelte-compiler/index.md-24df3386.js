import{S as ev,i as tv,s as av,C as kd,w as Bf,x as Yf,y as Kf,z as ov,A as Gf,q as Qf,o as Zf,B as Xf,r as rv,R as Uf,k as c,e as l,t as o,m as h,c as s,a as i,h as r,d as n,b as d,Q as Vf,g as D,F as e,O as nv}from"../../chunks/vendor-569a3c5c.js";import{T as lv}from"../../chunks/TalkLayout-cd724f5b.js";import{T as sv}from"../../chunks/TableOfContent-dbc18cb8.js";import"../../chunks/stores-ee936cd4.js";import"../../chunks/WebMentions-968cc380.js";/* empty css                                */var iv="/_app/assets/hero-twitter-f463c0ae.jpg";function cv(ve){let u,T,y,j,f,P,V,J,Tt,z,sr,ir,E,Td,Ho,W,Pt,B,cr,hr,_,Pd,Ro,F,Ot,Y,dr,pr,K,ur,me,fr,vr,$o,t,Ct,Q,mr,wr,Z,gr,xt,br,yr,Er,At,_r,Sr,Dt,kr,Tr,jt,Pr,Or,Mt,It,Cr,xr,X,Ar,we,Dr,jr,Mr,Nt,Ir,Nr,ee,Hr,ge,Rr,$r,Jr,Ht,Wr,Fr,Rt,Lr,qr,te,Gr,$t,Ur,Vr,zr,ae,Br,be,Yr,Kr,Qr,Jt,Zr,Xr,Wt,en,tn,M,an,Ft,on,rn,Lt,nn,ln,sn,qt,cn,hn,Gt,dn,pn,Ut,un,fn,Vt,vn,mn,zt,wn,gn,Bt,bn,yn,oe,En,ye,_n,Sn,kn,Yt,Tn,Pn,re,On,Ee,Cn,xn,An,Kt,Dn,jn,_e,Qt,Mn,In,Nn,w,Hn,Se,Rn,$n,ke,Jn,Wn,Te,Fn,Ln,Pe,qn,Gn,Oe,Un,Vn,zn,Zt,Bn,Yn,Xt,Kn,Qn,Ce,Zn,ea,Xn,el,ta,aa,tl,al,oa,ol,rl,ra,nl,ll,na,sl,il,la,cl,hl,sa,dl,pl,ia,ul,fl,ca,vl,ml,ha,da,wl,gl,pa,bl,yl,ne,El,ua,_l,Sl,kl,fa,Tl,Pl,va,Ol,Cl,ma,xl,Al,wa,Dl,jl,ga,ba,Ml,Il,xe,Nl,ya,Hl,Rl,Ea,$l,Jl,_a,Sa,Wl,Fl,O,Ll,ka,Ae,ql,Gl,Ta,De,Ul,Vl,Pa,je,zl,Bl,Yl,le,Kl,Me,Ql,Zl,Xl,C,es,Ie,ts,as,Ne,os,rs,He,ns,ls,ss,Oa,is,cs,Ca,hs,ds,xa,ps,us,Aa,fs,vs,Da,ms,ws,ja,gs,bs,Ma,ys,Es,Ia,_s,Ss,Na,ks,Ts,Ha,Ps,Os,Ra,Cs,xs,$a,As,Ds,Ja,js,Ms,Wa,Is,Ns,Fa,Hs,Rs,La,$s,Js,qa,Ws,Fs,Ga,Ls,qs,Ua,Gs,Us,Va,Vs,zs,za,Bs,Ys,Ba,Ks,Qs,Ya,Zs,Xs,Ka,ei,ti,Qa,ai,oi,Za,ri,ni,Xa,li,si,eo,ii,ci,to,hi,di,ao,pi,ui,oo,fi,vi,ro,mi,wi,se,gi,Re,bi,yi,Ei,no,_i,Si,lo,ki,Ti,ie,Pi,$e,Oi,Ci,xi,so,Ai,Di,I,ji,Je,Mi,Ii,We,Ni,Hi,Ri,N,$i,Fe,Ji,Wi,Le,Fi,Li,qi,g,Gi,qe,Ui,Vi,Ge,zi,Bi,Ue,Yi,Ki,Ve,Qi,Zi,ze,Xi,ec,tc,io,ac,oc,H,rc,Be,nc,lc,Ye,sc,ic,cc,co,hc,dc,ho,pc,uc,po,fc,vc,uo,mc,wc,fo,gc,bc,vo,yc,Ec,mo,_c,Sc,wo,kc,Tc,go,Pc,Oc,v,Cc,Ke,xc,Ac,Qe,Dc,jc,Ze,Mc,Ic,Xe,Nc,Hc,et,Rc,$c,tt,Jc,Wc,at,Fc,Lc,ot,qc,Gc,Uc,bo,Vc,zc,x,Bc,rt,Yc,Kc,nt,Qc,Zc,lt,Xc,eh,th,yo,ah,oh,Eo,rh,nh,A,lh,st,sh,ih,it,ch,hh,ct,dh,ph,uh,_o,fh,vh,R,mh,ht,wh,gh,dt,bh,yh,Eh,So,_h,Sh,$,kh,pt,Th,Ph,ut,Oh,Ch,xh,ko,Ah,Dh,ce,jh,ft,Mh,Ih,Nh,he,Hh,vt,Rh,$h,Jh,To,Wh,Fh,de,Lh,Po,qh,Gh,Uh,pe,Vh,mt,zh,Bh,Yh,Oo,Kh,Qh,Co,Zh,Xh,xo,ed,td,ue,ad,wt,od,rd,nd,fe,ld,gt,sd,id,cd,Ao,hd,dd,Do,pd,ud,jo,fd,vd,Mo,md,wd,Io,gd,bd,No,yd,Jo;return u=new sv({props:{data:[{link:"recorded-talk",title:"Recorded talk",nested:[{link:"cityjs-conference-2020",title:"CityJS Conference 2020"},{link:"mmt-tech-meetup-sept-2020",title:"MMT Tech Meetup - Sept 2020"}]},{link:"slides",title:"Slides"},{link:"script",title:"Script"}]}}),{c(){Bf(u.$$.fragment),T=c(),y=l("section"),j=l("h2"),f=l("a"),P=o("Recorded talk"),V=c(),J=l("section"),Tt=l("h3"),z=l("a"),sr=o("CityJS Conference 2020"),ir=c(),E=l("iframe"),Ho=c(),W=l("section"),Pt=l("h3"),B=l("a"),cr=o("MMT Tech Meetup - Sept 2020"),hr=c(),_=l("iframe"),Ro=c(),F=l("section"),Ot=l("h2"),Y=l("a"),dr=o("Slides"),pr=c(),K=l("p"),ur=o("["),me=l("a"),fr=o("Link to slides"),vr=o("] (Left arrow and right arrow to navigate)"),$o=c(),t=l("section"),Ct=l("h2"),Q=l("a"),mr=o("Script"),wr=c(),Z=l("p"),gr=o("Modern web frameworks allow us to describe our "),xt=l("strong"),br=o("UI"),yr=o(" declaratively, as a function of state, of the application."),Er=c(),At=l("p"),_r=o("The function can be written in a form of template, or template-like syntax, which describes exactly how the view should look like, in all possible states."),Sr=c(),Dt=l("p"),kr=o("When the state change, the view should change as well."),Tr=c(),jt=l("p"),Pr=o("We don't need to describe how one view transition to another view. We don't need to describe what elements to be added, removed or modified."),Or=c(),Mt=l("p"),It=l("strong"),Cr=o("Modern Web Framework do that for us."),xr=c(),X=l("p"),Ar=o("The "),we=l("code"),Dr=o("framework_magic"),jr=o(" takes in 2 subsequent views and figure out how to transition from 1 to another."),Mr=c(),Nt=l("p"),Ir=o("Modern web frameworks like React and Vue do that using a technique called a virtual DOM."),Nr=c(),ee=l("p"),Hr=o("To handle all the possible scenarios, this "),ge=l("code"),Rr=o("framework_magic"),$r=o(" could be very huge in code size, and it is independent of the application it is supporting."),Jr=c(),Ht=l("p"),Wr=o("For react is 40kb gzipped and vue2 is 23kb gzipped, vue3 is 10kb."),Fr=c(),Rt=l("p"),Lr=o("and if your application is simple, it could disproportionately small in terms of code size relative to the framework library, which is shown in the gray portion of the chart."),qr=c(),te=l("p"),Gr=o("However, this doesnt have to be, "),$t=l("strong"),Ur=o("the only way"),Vr=o(" of doing things."),zr=c(),ae=l("p"),Br=o("What if we could shift all of the work done in the "),be=l("code"),Yr=o("framework_magic"),Kr=o(" from runtime to build time?"),Qr=c(),Jt=l("p"),Zr=o("We can analyse the code and figure out all the possible states and views, and the possible transitions between them, and generate just enough code to do just that?"),Xr=c(),Wt=l("p"),en=o("And that's the core idea of Svelte."),tn=c(),M=l("p"),an=o("The Svelte compiler compiles the Svelte code into "),Ft=l("strong"),on=o("optimised"),rn=o(" JavaScript code that "),Lt=l("strong"),nn=o("grows linearly"),ln=o(" along with your application code."),sn=c(),qt=l("p"),cn=o("and today we are going to look into the Svelte compiler."),hn=c(),Gt=l("p"),dn=o("Don't worry if you are not familiar with Svelte / compiler, I'll try my best to avoid the jargons and explain the general idea of the process."),pn=c(),Ut=l("p"),un=o("My name is Tan Li Hau, I am a software engineer at Shopee. Shopee is a e-commerce platform in South east asia that is based in Singapore."),fn=c(),Vt=l("p"),vn=o("I grew up in a lovely town called penang in malaysia, which has the best street food in malaysia, such as char koay teow, stir-fry flat rice noodles; rojak, a eclectic fruit salad with palm sugar, peanuts and chilli dressing, and dont get me started with food. Hopefully you guys can come visit Malaysia after this coronavirus pandemic is over."),mn=c(),zt=l("p"),wn=o("last but not the least, Im one of the maintainers of svelte"),gn=c(),Bt=l("p"),bn=o("Before we start talking about compilers, for the benefit of those who havn't have a chance to look into Svelte, lets take a look at how a svelte component looks like."),yn=c(),oe=l("p"),En=o("a svelte component is written in a file with a "),ye=l("code"),_n=o(".svelte"),Sn=o(" extension. Each file describes 1 svelte  component."),kn=c(),Yt=l("p"),Tn=o("You can add 1 script tag to the component. The script tag allows you to define variable, just like how you would in any javascript code,  and you can reference the variables in your html template, with a curly bracket."),Pn=c(),re=l("p"),On=o("To add event listener, you use a "),Ee=l("code"),Cn=o("on:"),xn=o(" directive, and you can update the variable just like this, and it will automatically updated in your DOM."),An=c(),Kt=l("p"),Dn=o("You can add a style tag and write some css to style your component. What's cool about it is that, the css is scoped within the component. so when i say button, background: red, only the button written in this component file has the background red. not the child component, not the parent component. just this component."),jn=c(),_e=l("p"),Qt=l("strong"),Mn=o("now"),In=o(", here is one of the most powerful, and somewhat controversial feature of svelte, reactive declarations."),Nn=c(),w=l("p"),Hn=o("here you have a "),Se=l("code"),Rn=o("double = count * 2"),$n=o(", with a dollar + colon sign in front of the statement. this means that the variable "),ke=l("code"),Jn=o("double"),Wn=o(" is always 2 times of "),Te=l("code"),Fn=o("count"),Ln=o(", whenever the value of "),Pe=l("code"),qn=o("count"),Gn=o(" has changed, the value of "),Oe=l("code"),Un=o("double"),Vn=o(" will update as well."),zn=c(),Zt=l("p"),Bn=o("This definitely feels weird in the beginning, but the more you use it, you'll ask yourself why didn't we have this earlier."),Yn=c(),Xt=l("p"),Kn=o("So, here we have 1 big red button, and a text of multiply equation as a Svelte component."),Qn=c(),Ce=l("p"),Zn=o("I am gonna pause here for a moment, and ask you this question, "),ea=l("strong"),Xn=o("how would you implement this, if you are not allowed to use any framework and you have to write it in Vanilla JavaScript?"),el=c(),ta=l("p"),aa=l("em"),tl=o("(pause)"),al=c(),oa=l("p"),ol=o("So, firstly we are going to start with the variable declaration."),rl=c(),ra=l("p"),nl=o("Next we create the text with document.createTextNode, and insert it to the parent"),ll=c(),na=l("p"),sl=o("Next we create the button, change the text, add event listener and insert it to the parent."),il=c(),la=l("p"),cl=o("To update the text when the count is updated, we create an update function, where we update the value of double and update the content of the text."),hl=c(),sa=l("p"),dl=o("Finally for the style tag, we create a style tag, set the content and insert into the head."),pl=c(),ia=l("p"),ul=o("To make sure that the button only targets this button that we just created, we add a class to the button."),fl=c(),ca=l("p"),vl=o("Here the class name is random, but it could be generated based on the hash of the style code, so you get consistent class name."),ml=c(),ha=l("p"),da=l("em"),wl=o("(CLICK TO VIEW JS OUTPUT)"),gl=c(),pa=l("p"),bl=o("In fact if you take a look at the svelte generated JS output, it is very similar to the code we just wrote."),yl=c(),ne=l("p"),El=o("So, this is just the code you need to "),ua=l("strong"),_l=o("create a button and a text"),Sl=o(". You don't need 40KB Virtual DOM library to recreate the same component."),kl=c(),fa=l("p"),Tl=o("Of course, you don't have to write all of these yourself."),Pl=c(),va=l("p"),Ol=o("The Svelte compiler will do it for you. It will analyse the code above, and generate the code below for you."),Cl=c(),ma=l("p"),xl=o('And now, if you try to choose "SSR" as the generated output, you can see now Svelte generates a function that returns a string composed using template literals.'),Al=c(),wa=l("p"),Dl=o("This is a few orders more performant than generating a tree object and serialising them into a HTML string."),jl=c(),ga=l("p"),ba=l("em"),Ml=o("(DONT MOVE)"),Il=c(),xe=l("p"),Nl=o("So, Let's take a few more examples of the Svelte syntax, and along the way, I hope you ask yourself this question, "),ya=l("strong"),Hl=o('"how do i convert this / write this in plain JavaScript?"'),Rl=c(),Ea=l("p"),$l=o("and don't worry, you can find this repl on the svelte website. and you can compare the input and the js output anyway you want."),Jl=c(),_a=l("p"),Sa=l("em"),Wl=o("(OKAY NOW MOVE)"),Fl=c(),O=l("p"),Ll=o("To express logics within the template, Svelte provides logic block, such as "),ka=l("strong"),Ae=l("code"),ql=o("{#if}"),Gl=o(", "),Ta=l("strong"),De=l("code"),Ul=o("{#await}"),Vl=o(", and "),Pa=l("strong"),je=l("code"),zl=o("{#each}"),Bl=o("."),Yl=c(),le=l("p"),Kl=o("To reduce the boilerplate code for binding a variable to an input, Svelte provides the "),Me=l("code"),Ql=o("bind:"),Zl=o(" directive."),Xl=c(),C=l("p"),es=o("To provide transition for elements coming into or out of the DOM, Svelte provides the "),Ie=l("code"),ts=o("transition"),as=o(", "),Ne=l("code"),os=o("in"),rs=o(" and "),He=l("code"),ns=o("out"),ls=o(" directive."),ss=c(),Oa=l("p"),is=o("To compose Components, Svelte provides slots and templates similar to the Web Component APIs."),cs=c(),Ca=l("p"),hs=o("There's so much I would like to share here, but I have to segue into the Svelte compiler, because that's the main topic of today's talk."),ds=c(),xa=l("p"),ps=o("Now, finally, let's take a look at the Svelte compiler."),us=c(),Aa=l("p"),fs=o("So, how does a compiler works?"),vs=c(),Da=l("p"),ms=o("A compiler first reads through your code, and break it down into smaller pieces, called tokens."),ws=c(),ja=l("p"),gs=o("The compiler then goes through this list of tokens and arrange them into a tree structure, according to the grammar of the language. The tree structure is what a compiler call \u201CAbstract syntax tree\u201D or AST for short."),bs=c(),Ma=l("p"),ys=o("An AST is a tree representation of the input code."),Es=c(),Ia=l("p"),_s=o(`And what the compiler sometimes do, is to analyse and apply transformation to the AST.
Using tree traversal algorithms, such as depth first search`),Ss=c(),Na=l("p"),ks=o("And finally, the compiler generates a code output based on the final AST."),Ts=c(),Ha=l("p"),Ps=o("In summary, a generic compilation process involves parsing the code to an AST, doing analysis, optimsiation or transformation on the AST, and then generate code out from the AST."),Os=c(),Ra=l("p"),Cs=o("Finally, let's take a look how Svelte compiler works."),xs=c(),$a=l("p"),As=o("Svelte parses the Svelte code into AST"),Ds=c(),Ja=l("p"),js=o("Svelte then analyses the AST, which we will explore in detailed later."),Ms=c(),Wa=l("p"),Is=o(`With the analysis, Svelte generates JavaScript code depending on the compile target, whether it's for SSR or it's for the browser.
Finally, js and css is generated, and can be written into a file or be consumed by your build process.`),Ns=c(),Fa=l("p"),Hs=o("So lets start from the beginning, the parsing."),Rs=c(),La=l("p"),$s=o("Here is a Svelte component that we are going to use throughout this talk."),Js=c(),qa=l("p"),Ws=o("Svelte, implements its own parser"),Fs=c(),Ga=l("p"),Ls=o("That parses the html syntax, as well as logic blocks, like each, if, and await"),qs=c(),Ua=l("p"),Gs=o(`Because js is a fairly complex language, whenever svelte encounters a script tag, or a curly brackets, it will hand it over to acorn, a lightweight JavaScript parser, to parse the JS content.
The same thing goes with css as well. svelte uses css-tree to parse CSS content in between the style tag.`),Us=c(),Va=l("p"),Vs=o("So, through the process, the svelte code is broken down into tokens, and is arranged into the Svelte AST."),zs=c(),za=l("p"),Bs=o("If you interested to see how the Svelte AST looks like, you can check them out at ASTExplorer.net."),Ys=c(),Ba=l("p"),Ks=o("The next step is to analyse the AST."),Qs=c(),Ya=l("p"),Zs=o("Here, our code is already in AST, BUT to help visualise the process, i'm going to show you the original code."),Xs=c(),Ka=l("p"),ei=o("The first thing Svelte do is to traverse through the script AST."),ti=c(),Qa=l("p"),ai=o("Whenever it encounters a variable, in this case, count, it will record down the variable name."),oi=c(),Za=l("p"),ri=o("here we record values and double."),ni=c(),Xa=l("p"),li=o('the "double" here, in this svelte code is a reactive declared variable. but to vanilla JavaScript, we are assigning value to this variable "double", which is not declared anywhere.'),si=c(),eo=l("p"),ii=o('in strict mode, this is a "assignment to undeclared variable" error.'),ci=c(),to=l("p"),hi=o('Svelte marks the variable, "double", as "injected", so the declaration of the variable will be injected later. other examples of injected variables are svelte magic global, such as $$props, or a $ prefix of a store variable.'),di=c(),ao=l("p"),pi=o('here we encounter "count" again, this time its being referenced, instead of being assinged to a value, and it is used to compute the value of double. so we draw a dependency relationship between count and double.so double is depending on count.'),ui=c(),oo=l("p"),fi=o("lets continue."),vi=c(),ro=l("p"),mi=o("here we see data. data is not declared at the top level scope, as it is within the curly bracket block scope. so we are not going to record it down."),wi=c(),se=l("p"),gi=o("same thing goes with "),Re=l("code"),bi=o("i"),yi=o("."),Ei=c(),no=l("p"),_i=o("here we encountered double again, so we mark it as referenced."),Si=c(),lo=l("p"),ki=o("Math, a js global, we are going to ignore it."),Ti=c(),ie=l("p"),Pi=o("here "),$e=l("code"),Oi=o("values"),Ci=o(" is mutated."),xi=c(),so=l("p"),Ai=o("now we reach the end of the script, the next step is to traverse the template AST."),Di=c(),I=l("p"),ji=o("we start from the "),Je=l("code"),Mi=o("input"),Ii=o(" element, which has a "),We=l("code"),Ni=o("bind:value"),Hi=o("."),Ri=c(),N=l("p"),$i=o("Here we are binding the value of the input to the variable "),Fe=l("code"),Ji=o("count"),Wi=o(". so we mark "),Le=l("code"),Fi=o("count"),Li=o(" as referenced from template and mutated."),qi=c(),g=l("p"),Gi=o("Now we encountered the each block. Here we are iterating through the variable "),qe=l("code"),Ui=o("values"),Vi=o(" and we are using the variable "),Ge=l("code"),zi=o("value"),Bi=o(" as each item. So the template within the each block will have a new scope, where "),Ue=l("code"),Yi=o("value"),Ki=o(" is declared. Also, we mark "),Ve=l("code"),Qi=o("values"),Zi=o(" as the dependency of the each block. This means that whenever "),ze=l("code"),Xi=o("values"),ec=o(" has changed, we are going to update the each block."),tc=c(),io=l("p"),ac=o("...and, we mark values as referenced too."),oc=c(),H=l("p"),rc=o("next, we move into the each block and the div element. Here we mark "),Be=l("code"),nc=o("value"),lc=o(" as referenced from the template, we encounter "),Ye=l("code"),sc=o("value"),ic=o(" again and we've reachead the end of the template."),cc=c(),co=l("p"),hc=o("and Svelte traverse through the script again, this time mainly for optimisation. figuring out which variables are not referenced, and does not need to be reactive."),dc=c(),ho=l("p"),pc=o("Similarly, if a reactive declaration's dependency will never change, by seeing whether their dependencies were marked as mutated, we can mark it as static, which is more efficient, and much smaller in code size."),uc=c(),po=l("p"),fc=o("Next, Svelte traverse through the style."),vc=c(),uo=l("p"),mc=o("for each selector, it will determine whether it will match any elements in the template, and if it does, svelte will add a svelte-hash class name to the selector as well as the matched eelement. Although this will increase the specificity of the selector, but it will make the selector scoped only to the current svelte component."),wc=c(),fo=l("p"),gc=o("At the end of this step, Svelte has figured out all the variables declared, their behavior and their relationship."),bc=c(),vo=l("p"),yc=o("With this, we are moving on to the rendering phase."),Ec=c(),mo=l("p"),_c=o(`This step is where svelte will generate the javascript code.
There are 2 different compile targets, 1 is DOM, for the client side, and another is ssr, for the server side.`),Sc=c(),wo=l("p"),kc=o("Lets first take a look at the dom render target."),Tc=c(),go=l("p"),Pc=o("Here we have the source code. and here is the outline of how a dom output looks like."),Oc=c(),v=l("p"),Cc=o("Here is what I called a fragment block. the create fragment function returns an object, that acts as a recipe to create the elements in the component. each method in the recipe object, represents a stage in the component lifecycle, here we have "),Ke=l("code"),xc=o("c"),Ac=o(" for "),Qe=l("code"),Dc=o("create"),jc=o(", "),Ze=l("code"),Mc=o("m"),Ic=o(" for "),Xe=l("code"),Nc=o("mounting"),Hc=o(", "),et=l("code"),Rc=o("p"),$c=o(" for "),tt=l("code"),Jc=o("update"),Wc=o(", and "),at=l("code"),Fc=o("d"),Lc=o(" for "),ot=l("code"),qc=o("destroy"),Gc=o("."),Uc=c(),bo=l("p"),Vc=o("next on, we have the instance function. here's where the state and component logic goes into."),zc=c(),x=l("p"),Bc=o("finally we have the svelte component class. so each svelte component is compiled into a class which is the default export. in the constructor, as you can see, calls the "),rt=l("code"),Yc=o("init"),Kc=o(" function which takes in the "),nt=l("code"),Qc=o("instance"),Zc=o(" and "),lt=l("code"),Xc=o("create_fragment"),eh=o(" function. and this is how the 3 different pieces of the svelte compoenent come together."),th=c(),yo=l("p"),ah=o("Now, svelte walks through the template again, and starts inserting code into output."),oh=c(),Eo=l("p"),rh=o("First we have the input element. we insert instructions to create the input element, mounting the element to the target, and remove the element from the target."),nh=c(),A=l("p"),lh=o("next we have the binding of the input value to the "),st=l("code"),sh=o("count"),ih=o(" variable. we need an input handler to listen to the input changes, so we can update the value of the "),it=l("code"),ch=o("count"),hh=o(" variable. here we pull out the variables list, and add "),ct=l("code"),dh=o("input_handler"),ph=o("."),uh=c(),_o=l("p"),fh=o("we set the input value based on the variable count and add event listener for input changes which we should remove event listener when we destroy the component."),vh=c(),R=l("p"),mh=o("and in the update phase, if the "),ht=l("code"),wh=o("count"),gh=o(" has changed, we need to update the value of the input based on the value of "),dt=l("code"),bh=o("count"),yh=o("."),Eh=c(),So=l("p"),_h=o("next we move on to the each block."),Sh=c(),$=l("p"),kh=o("we create a new fragment block for the each block, which contains the recipe for creating elements for 1 each item. And because in the each block we have a child scope that defines the variable "),pt=l("code"),Th=o("value"),Ph=o(", we have a "),ut=l("code"),Oh=o("get_each_context"),Ch=o(" function to emulate that."),xh=c(),ko=l("p"),Ah=o('Here we fast forward through the steps, where for each element, we insert code for how we create, mount, update and destroy them. If you are interested to know the details, you can check out my series of blog, called "Compile Svelte in your head".'),Dh=c(),ce=l("p"),jh=o("Now we look at how Svelte fills up the instance function. In most cases, Svelte just copies over whatever is written within the "),ft=l("code"),Mh=o("<script>"),Ih=o(" tag."),Nh=c(),he=l("p"),Hh=o("For reactive declarations, they were added inside the "),vt=l("code"),Rh=o("$$.update"),$h=o(" function, and for each statement, we add an if statement to check whether their dependency has changed, based on the dependency relationship we've drawn earlier."),Jh=c(),To=l("p"),Wh=o("Now we need to declare and add those injected variables."),Fh=c(),de=l("p"),Lh=o("Finally, we return the list of variables that are "),Po=l("strong"),qh=o("referenced by the template"),Gh=o(" only."),Uh=c(),pe=l("p"),Vh=o("Now, to make the variables actually reactive, we instruments the "),mt=l("code"),zh=o("$$invalidate"),Bh=o(" after each assignment statements, so that it will kickstart a next round of update cycle."),Yh=c(),Oo=l("p"),Kh=o("So here you have it, the compile output for the DOM target."),Qh=c(),Co=l("p"),Zh=o("Let's take a quick look at how things going for compiling to the SSR target."),Xh=c(),xo=l("p"),ed=o("The structure of the output code for the SSR target is much simpler. it is a function that returns a string."),td=c(),ue=l("p"),ad=o("Because there wont be any reactivity needed in the server, we can copy over the code verbatim from the script tag. same thing goes with reactive declarations, of course we need to remember to declare the injected variable, "),wt=l("code"),od=o("double"),rd=o("."),nd=c(),fe=l("p"),ld=o("as we traverse through the template, we add insert strings or expressions into the output template literal. For the each block, we iterate through the variable "),gt=l("code"),sd=o("values"),id=o(" and return the child elements as string."),cd=c(),Ao=l("p"),hd=o("And there you go, the output code of a svelte component for SSR."),dd=c(),Do=l("p"),pd=o("Finally, Svelte outputs the code in JS and CSS, with the code as string as well as the sourcemap."),ud=c(),jo=l("p"),fd=o("These can be written into file system directly, or be consumed by your module bundler, such as rollup-svelte-plugin in rollup or svelte-loader for webpack."),vd=c(),Mo=l("p"),md=o(`So lets review again the svelte compilation pipeline,
Svelte parses the code into ast, runs a series of steps to analsye the code, tracking the variable references and dependencies. Then svelte generates the code depending on the compile target, whether it's for the client side or server-side.
And the output of the render step is in terms of JS and CSS, which can be written into a file / consumed by your build tools.`),wd=c(),Io=l("p"),gd=o("Thank you so much for listening. If you like to learn more about svelte, or if you have any questions about svelte, you can follow me on twitter. I am Li Hau. hope you have fun with the talks throughout the conference."),bd=c(),No=l("p"),yd=o("See ya."),this.h()},l(p){Yf(u.$$.fragment,p),T=h(p),y=s(p,"SECTION",{});var b=i(y);j=s(b,"H2",{});var Od=i(j);f=s(Od,"A",{href:!0,id:!0});var Cd=i(f);P=r(Cd,"Recorded talk"),Cd.forEach(n),Od.forEach(n),b.forEach(n),V=h(p),J=s(p,"SECTION",{});var Wo=i(J);Tt=s(Wo,"H3",{});var xd=i(Tt);z=s(xd,"A",{href:!0,id:!0});var Ad=i(z);sr=r(Ad,"CityJS Conference 2020"),Ad.forEach(n),xd.forEach(n),ir=h(Wo),E=s(Wo,"IFRAME",{width:!0,height:!0,title:!0,src:!0,frameborder:!0,allow:!0}),i(E).forEach(n),Wo.forEach(n),Ho=h(p),W=s(p,"SECTION",{});var Fo=i(W);Pt=s(Fo,"H3",{});var Dd=i(Pt);B=s(Dd,"A",{href:!0,id:!0});var jd=i(B);cr=r(jd,"MMT Tech Meetup - Sept 2020"),jd.forEach(n),Dd.forEach(n),hr=h(Fo),_=s(Fo,"IFRAME",{width:!0,height:!0,title:!0,src:!0,frameborder:!0,allow:!0}),i(_).forEach(n),Fo.forEach(n),Ro=h(p),F=s(p,"SECTION",{});var Lo=i(F);Ot=s(Lo,"H2",{});var Md=i(Ot);Y=s(Md,"A",{href:!0,id:!0});var Id=i(Y);dr=r(Id,"Slides"),Id.forEach(n),Md.forEach(n),pr=h(Lo),K=s(Lo,"P",{});var qo=i(K);ur=r(qo,"["),me=s(qo,"A",{href:!0});var Nd=i(me);fr=r(Nd,"Link to slides"),Nd.forEach(n),vr=r(qo,"] (Left arrow and right arrow to navigate)"),qo.forEach(n),Lo.forEach(n),$o=h(p),t=s(p,"SECTION",{});var a=i(t);Ct=s(a,"H2",{});var Hd=i(Ct);Q=s(Hd,"A",{href:!0,id:!0});var Rd=i(Q);mr=r(Rd,"Script"),Rd.forEach(n),Hd.forEach(n),wr=h(a),Z=s(a,"P",{});var Go=i(Z);gr=r(Go,"Modern web frameworks allow us to describe our "),xt=s(Go,"STRONG",{});var $d=i(xt);br=r($d,"UI"),$d.forEach(n),yr=r(Go," declaratively, as a function of state, of the application."),Go.forEach(n),Er=h(a),At=s(a,"P",{});var Jd=i(At);_r=r(Jd,"The function can be written in a form of template, or template-like syntax, which describes exactly how the view should look like, in all possible states."),Jd.forEach(n),Sr=h(a),Dt=s(a,"P",{});var Wd=i(Dt);kr=r(Wd,"When the state change, the view should change as well."),Wd.forEach(n),Tr=h(a),jt=s(a,"P",{});var Fd=i(jt);Pr=r(Fd,"We don't need to describe how one view transition to another view. We don't need to describe what elements to be added, removed or modified."),Fd.forEach(n),Or=h(a),Mt=s(a,"P",{});var Ld=i(Mt);It=s(Ld,"STRONG",{});var qd=i(It);Cr=r(qd,"Modern Web Framework do that for us."),qd.forEach(n),Ld.forEach(n),xr=h(a),X=s(a,"P",{});var Uo=i(X);Ar=r(Uo,"The "),we=s(Uo,"CODE",{class:!0});var Gd=i(we);Dr=r(Gd,"framework_magic"),Gd.forEach(n),jr=r(Uo," takes in 2 subsequent views and figure out how to transition from 1 to another."),Uo.forEach(n),Mr=h(a),Nt=s(a,"P",{});var Ud=i(Nt);Ir=r(Ud,"Modern web frameworks like React and Vue do that using a technique called a virtual DOM."),Ud.forEach(n),Nr=h(a),ee=s(a,"P",{});var Vo=i(ee);Hr=r(Vo,"To handle all the possible scenarios, this "),ge=s(Vo,"CODE",{class:!0});var Vd=i(ge);Rr=r(Vd,"framework_magic"),Vd.forEach(n),$r=r(Vo," could be very huge in code size, and it is independent of the application it is supporting."),Vo.forEach(n),Jr=h(a),Ht=s(a,"P",{});var zd=i(Ht);Wr=r(zd,"For react is 40kb gzipped and vue2 is 23kb gzipped, vue3 is 10kb."),zd.forEach(n),Fr=h(a),Rt=s(a,"P",{});var Bd=i(Rt);Lr=r(Bd,"and if your application is simple, it could disproportionately small in terms of code size relative to the framework library, which is shown in the gray portion of the chart."),Bd.forEach(n),qr=h(a),te=s(a,"P",{});var zo=i(te);Gr=r(zo,"However, this doesnt have to be, "),$t=s(zo,"STRONG",{});var Yd=i($t);Ur=r(Yd,"the only way"),Yd.forEach(n),Vr=r(zo," of doing things."),zo.forEach(n),zr=h(a),ae=s(a,"P",{});var Bo=i(ae);Br=r(Bo,"What if we could shift all of the work done in the "),be=s(Bo,"CODE",{class:!0});var Kd=i(be);Yr=r(Kd,"framework_magic"),Kd.forEach(n),Kr=r(Bo," from runtime to build time?"),Bo.forEach(n),Qr=h(a),Jt=s(a,"P",{});var Qd=i(Jt);Zr=r(Qd,"We can analyse the code and figure out all the possible states and views, and the possible transitions between them, and generate just enough code to do just that?"),Qd.forEach(n),Xr=h(a),Wt=s(a,"P",{});var Zd=i(Wt);en=r(Zd,"And that's the core idea of Svelte."),Zd.forEach(n),tn=h(a),M=s(a,"P",{});var bt=i(M);an=r(bt,"The Svelte compiler compiles the Svelte code into "),Ft=s(bt,"STRONG",{});var Xd=i(Ft);on=r(Xd,"optimised"),Xd.forEach(n),rn=r(bt," JavaScript code that "),Lt=s(bt,"STRONG",{});var ep=i(Lt);nn=r(ep,"grows linearly"),ep.forEach(n),ln=r(bt," along with your application code."),bt.forEach(n),sn=h(a),qt=s(a,"P",{});var tp=i(qt);cn=r(tp,"and today we are going to look into the Svelte compiler."),tp.forEach(n),hn=h(a),Gt=s(a,"P",{});var ap=i(Gt);dn=r(ap,"Don't worry if you are not familiar with Svelte / compiler, I'll try my best to avoid the jargons and explain the general idea of the process."),ap.forEach(n),pn=h(a),Ut=s(a,"P",{});var op=i(Ut);un=r(op,"My name is Tan Li Hau, I am a software engineer at Shopee. Shopee is a e-commerce platform in South east asia that is based in Singapore."),op.forEach(n),fn=h(a),Vt=s(a,"P",{});var rp=i(Vt);vn=r(rp,"I grew up in a lovely town called penang in malaysia, which has the best street food in malaysia, such as char koay teow, stir-fry flat rice noodles; rojak, a eclectic fruit salad with palm sugar, peanuts and chilli dressing, and dont get me started with food. Hopefully you guys can come visit Malaysia after this coronavirus pandemic is over."),rp.forEach(n),mn=h(a),zt=s(a,"P",{});var np=i(zt);wn=r(np,"last but not the least, Im one of the maintainers of svelte"),np.forEach(n),gn=h(a),Bt=s(a,"P",{});var lp=i(Bt);bn=r(lp,"Before we start talking about compilers, for the benefit of those who havn't have a chance to look into Svelte, lets take a look at how a svelte component looks like."),lp.forEach(n),yn=h(a),oe=s(a,"P",{});var Yo=i(oe);En=r(Yo,"a svelte component is written in a file with a "),ye=s(Yo,"CODE",{class:!0});var sp=i(ye);_n=r(sp,".svelte"),sp.forEach(n),Sn=r(Yo," extension. Each file describes 1 svelte  component."),Yo.forEach(n),kn=h(a),Yt=s(a,"P",{});var ip=i(Yt);Tn=r(ip,"You can add 1 script tag to the component. The script tag allows you to define variable, just like how you would in any javascript code,  and you can reference the variables in your html template, with a curly bracket."),ip.forEach(n),Pn=h(a),re=s(a,"P",{});var Ko=i(re);On=r(Ko,"To add event listener, you use a "),Ee=s(Ko,"CODE",{class:!0});var cp=i(Ee);Cn=r(cp,"on:"),cp.forEach(n),xn=r(Ko," directive, and you can update the variable just like this, and it will automatically updated in your DOM."),Ko.forEach(n),An=h(a),Kt=s(a,"P",{});var hp=i(Kt);Dn=r(hp,"You can add a style tag and write some css to style your component. What's cool about it is that, the css is scoped within the component. so when i say button, background: red, only the button written in this component file has the background red. not the child component, not the parent component. just this component."),hp.forEach(n),jn=h(a),_e=s(a,"P",{});var Ed=i(_e);Qt=s(Ed,"STRONG",{});var dp=i(Qt);Mn=r(dp,"now"),dp.forEach(n),In=r(Ed,", here is one of the most powerful, and somewhat controversial feature of svelte, reactive declarations."),Ed.forEach(n),Nn=h(a),w=s(a,"P",{});var S=i(w);Hn=r(S,"here you have a "),Se=s(S,"CODE",{class:!0});var pp=i(Se);Rn=r(pp,"double = count * 2"),pp.forEach(n),$n=r(S,", with a dollar + colon sign in front of the statement. this means that the variable "),ke=s(S,"CODE",{class:!0});var up=i(ke);Jn=r(up,"double"),up.forEach(n),Wn=r(S," is always 2 times of "),Te=s(S,"CODE",{class:!0});var fp=i(Te);Fn=r(fp,"count"),fp.forEach(n),Ln=r(S,", whenever the value of "),Pe=s(S,"CODE",{class:!0});var vp=i(Pe);qn=r(vp,"count"),vp.forEach(n),Gn=r(S," has changed, the value of "),Oe=s(S,"CODE",{class:!0});var mp=i(Oe);Un=r(mp,"double"),mp.forEach(n),Vn=r(S," will update as well."),S.forEach(n),zn=h(a),Zt=s(a,"P",{});var wp=i(Zt);Bn=r(wp,"This definitely feels weird in the beginning, but the more you use it, you'll ask yourself why didn't we have this earlier."),wp.forEach(n),Yn=h(a),Xt=s(a,"P",{});var gp=i(Xt);Kn=r(gp,"So, here we have 1 big red button, and a text of multiply equation as a Svelte component."),gp.forEach(n),Qn=h(a),Ce=s(a,"P",{});var _d=i(Ce);Zn=r(_d,"I am gonna pause here for a moment, and ask you this question, "),ea=s(_d,"STRONG",{});var bp=i(ea);Xn=r(bp,"how would you implement this, if you are not allowed to use any framework and you have to write it in Vanilla JavaScript?"),bp.forEach(n),_d.forEach(n),el=h(a),ta=s(a,"P",{});var yp=i(ta);aa=s(yp,"EM",{});var Ep=i(aa);tl=r(Ep,"(pause)"),Ep.forEach(n),yp.forEach(n),al=h(a),oa=s(a,"P",{});var _p=i(oa);ol=r(_p,"So, firstly we are going to start with the variable declaration."),_p.forEach(n),rl=h(a),ra=s(a,"P",{});var Sp=i(ra);nl=r(Sp,"Next we create the text with document.createTextNode, and insert it to the parent"),Sp.forEach(n),ll=h(a),na=s(a,"P",{});var kp=i(na);sl=r(kp,"Next we create the button, change the text, add event listener and insert it to the parent."),kp.forEach(n),il=h(a),la=s(a,"P",{});var Tp=i(la);cl=r(Tp,"To update the text when the count is updated, we create an update function, where we update the value of double and update the content of the text."),Tp.forEach(n),hl=h(a),sa=s(a,"P",{});var Pp=i(sa);dl=r(Pp,"Finally for the style tag, we create a style tag, set the content and insert into the head."),Pp.forEach(n),pl=h(a),ia=s(a,"P",{});var Op=i(ia);ul=r(Op,"To make sure that the button only targets this button that we just created, we add a class to the button."),Op.forEach(n),fl=h(a),ca=s(a,"P",{});var Cp=i(ca);vl=r(Cp,"Here the class name is random, but it could be generated based on the hash of the style code, so you get consistent class name."),Cp.forEach(n),ml=h(a),ha=s(a,"P",{});var xp=i(ha);da=s(xp,"EM",{});var Ap=i(da);wl=r(Ap,"(CLICK TO VIEW JS OUTPUT)"),Ap.forEach(n),xp.forEach(n),gl=h(a),pa=s(a,"P",{});var Dp=i(pa);bl=r(Dp,"In fact if you take a look at the svelte generated JS output, it is very similar to the code we just wrote."),Dp.forEach(n),yl=h(a),ne=s(a,"P",{});var Qo=i(ne);El=r(Qo,"So, this is just the code you need to "),ua=s(Qo,"STRONG",{});var jp=i(ua);_l=r(jp,"create a button and a text"),jp.forEach(n),Sl=r(Qo,". You don't need 40KB Virtual DOM library to recreate the same component."),Qo.forEach(n),kl=h(a),fa=s(a,"P",{});var Mp=i(fa);Tl=r(Mp,"Of course, you don't have to write all of these yourself."),Mp.forEach(n),Pl=h(a),va=s(a,"P",{});var Ip=i(va);Ol=r(Ip,"The Svelte compiler will do it for you. It will analyse the code above, and generate the code below for you."),Ip.forEach(n),Cl=h(a),ma=s(a,"P",{});var Np=i(ma);xl=r(Np,'And now, if you try to choose "SSR" as the generated output, you can see now Svelte generates a function that returns a string composed using template literals.'),Np.forEach(n),Al=h(a),wa=s(a,"P",{});var Hp=i(wa);Dl=r(Hp,"This is a few orders more performant than generating a tree object and serialising them into a HTML string."),Hp.forEach(n),jl=h(a),ga=s(a,"P",{});var Rp=i(ga);ba=s(Rp,"EM",{});var $p=i(ba);Ml=r($p,"(DONT MOVE)"),$p.forEach(n),Rp.forEach(n),Il=h(a),xe=s(a,"P",{});var Sd=i(xe);Nl=r(Sd,"So, Let's take a few more examples of the Svelte syntax, and along the way, I hope you ask yourself this question, "),ya=s(Sd,"STRONG",{});var Jp=i(ya);Hl=r(Jp,'"how do i convert this / write this in plain JavaScript?"'),Jp.forEach(n),Sd.forEach(n),Rl=h(a),Ea=s(a,"P",{});var Wp=i(Ea);$l=r(Wp,"and don't worry, you can find this repl on the svelte website. and you can compare the input and the js output anyway you want."),Wp.forEach(n),Jl=h(a),_a=s(a,"P",{});var Fp=i(_a);Sa=s(Fp,"EM",{});var Lp=i(Sa);Wl=r(Lp,"(OKAY NOW MOVE)"),Lp.forEach(n),Fp.forEach(n),Fl=h(a),O=s(a,"P",{});var L=i(O);Ll=r(L,"To express logics within the template, Svelte provides logic block, such as "),ka=s(L,"STRONG",{});var qp=i(ka);Ae=s(qp,"CODE",{class:!0});var Gp=i(Ae);ql=r(Gp,"{#if}"),Gp.forEach(n),qp.forEach(n),Gl=r(L,", "),Ta=s(L,"STRONG",{});var Up=i(Ta);De=s(Up,"CODE",{class:!0});var Vp=i(De);Ul=r(Vp,"{#await}"),Vp.forEach(n),Up.forEach(n),Vl=r(L,", and "),Pa=s(L,"STRONG",{});var zp=i(Pa);je=s(zp,"CODE",{class:!0});var Bp=i(je);zl=r(Bp,"{#each}"),Bp.forEach(n),zp.forEach(n),Bl=r(L,"."),L.forEach(n),Yl=h(a),le=s(a,"P",{});var Zo=i(le);Kl=r(Zo,"To reduce the boilerplate code for binding a variable to an input, Svelte provides the "),Me=s(Zo,"CODE",{class:!0});var Yp=i(Me);Ql=r(Yp,"bind:"),Yp.forEach(n),Zl=r(Zo," directive."),Zo.forEach(n),Xl=h(a),C=s(a,"P",{});var q=i(C);es=r(q,"To provide transition for elements coming into or out of the DOM, Svelte provides the "),Ie=s(q,"CODE",{class:!0});var Kp=i(Ie);ts=r(Kp,"transition"),Kp.forEach(n),as=r(q,", "),Ne=s(q,"CODE",{class:!0});var Qp=i(Ne);os=r(Qp,"in"),Qp.forEach(n),rs=r(q," and "),He=s(q,"CODE",{class:!0});var Zp=i(He);ns=r(Zp,"out"),Zp.forEach(n),ls=r(q," directive."),q.forEach(n),ss=h(a),Oa=s(a,"P",{});var Xp=i(Oa);is=r(Xp,"To compose Components, Svelte provides slots and templates similar to the Web Component APIs."),Xp.forEach(n),cs=h(a),Ca=s(a,"P",{});var eu=i(Ca);hs=r(eu,"There's so much I would like to share here, but I have to segue into the Svelte compiler, because that's the main topic of today's talk."),eu.forEach(n),ds=h(a),xa=s(a,"P",{});var tu=i(xa);ps=r(tu,"Now, finally, let's take a look at the Svelte compiler."),tu.forEach(n),us=h(a),Aa=s(a,"P",{});var au=i(Aa);fs=r(au,"So, how does a compiler works?"),au.forEach(n),vs=h(a),Da=s(a,"P",{});var ou=i(Da);ms=r(ou,"A compiler first reads through your code, and break it down into smaller pieces, called tokens."),ou.forEach(n),ws=h(a),ja=s(a,"P",{});var ru=i(ja);gs=r(ru,"The compiler then goes through this list of tokens and arrange them into a tree structure, according to the grammar of the language. The tree structure is what a compiler call \u201CAbstract syntax tree\u201D or AST for short."),ru.forEach(n),bs=h(a),Ma=s(a,"P",{});var nu=i(Ma);ys=r(nu,"An AST is a tree representation of the input code."),nu.forEach(n),Es=h(a),Ia=s(a,"P",{});var lu=i(Ia);_s=r(lu,`And what the compiler sometimes do, is to analyse and apply transformation to the AST.
Using tree traversal algorithms, such as depth first search`),lu.forEach(n),Ss=h(a),Na=s(a,"P",{});var su=i(Na);ks=r(su,"And finally, the compiler generates a code output based on the final AST."),su.forEach(n),Ts=h(a),Ha=s(a,"P",{});var iu=i(Ha);Ps=r(iu,"In summary, a generic compilation process involves parsing the code to an AST, doing analysis, optimsiation or transformation on the AST, and then generate code out from the AST."),iu.forEach(n),Os=h(a),Ra=s(a,"P",{});var cu=i(Ra);Cs=r(cu,"Finally, let's take a look how Svelte compiler works."),cu.forEach(n),xs=h(a),$a=s(a,"P",{});var hu=i($a);As=r(hu,"Svelte parses the Svelte code into AST"),hu.forEach(n),Ds=h(a),Ja=s(a,"P",{});var du=i(Ja);js=r(du,"Svelte then analyses the AST, which we will explore in detailed later."),du.forEach(n),Ms=h(a),Wa=s(a,"P",{});var pu=i(Wa);Is=r(pu,`With the analysis, Svelte generates JavaScript code depending on the compile target, whether it's for SSR or it's for the browser.
Finally, js and css is generated, and can be written into a file or be consumed by your build process.`),pu.forEach(n),Ns=h(a),Fa=s(a,"P",{});var uu=i(Fa);Hs=r(uu,"So lets start from the beginning, the parsing."),uu.forEach(n),Rs=h(a),La=s(a,"P",{});var fu=i(La);$s=r(fu,"Here is a Svelte component that we are going to use throughout this talk."),fu.forEach(n),Js=h(a),qa=s(a,"P",{});var vu=i(qa);Ws=r(vu,"Svelte, implements its own parser"),vu.forEach(n),Fs=h(a),Ga=s(a,"P",{});var mu=i(Ga);Ls=r(mu,"That parses the html syntax, as well as logic blocks, like each, if, and await"),mu.forEach(n),qs=h(a),Ua=s(a,"P",{});var wu=i(Ua);Gs=r(wu,`Because js is a fairly complex language, whenever svelte encounters a script tag, or a curly brackets, it will hand it over to acorn, a lightweight JavaScript parser, to parse the JS content.
The same thing goes with css as well. svelte uses css-tree to parse CSS content in between the style tag.`),wu.forEach(n),Us=h(a),Va=s(a,"P",{});var gu=i(Va);Vs=r(gu,"So, through the process, the svelte code is broken down into tokens, and is arranged into the Svelte AST."),gu.forEach(n),zs=h(a),za=s(a,"P",{});var bu=i(za);Bs=r(bu,"If you interested to see how the Svelte AST looks like, you can check them out at ASTExplorer.net."),bu.forEach(n),Ys=h(a),Ba=s(a,"P",{});var yu=i(Ba);Ks=r(yu,"The next step is to analyse the AST."),yu.forEach(n),Qs=h(a),Ya=s(a,"P",{});var Eu=i(Ya);Zs=r(Eu,"Here, our code is already in AST, BUT to help visualise the process, i'm going to show you the original code."),Eu.forEach(n),Xs=h(a),Ka=s(a,"P",{});var _u=i(Ka);ei=r(_u,"The first thing Svelte do is to traverse through the script AST."),_u.forEach(n),ti=h(a),Qa=s(a,"P",{});var Su=i(Qa);ai=r(Su,"Whenever it encounters a variable, in this case, count, it will record down the variable name."),Su.forEach(n),oi=h(a),Za=s(a,"P",{});var ku=i(Za);ri=r(ku,"here we record values and double."),ku.forEach(n),ni=h(a),Xa=s(a,"P",{});var Tu=i(Xa);li=r(Tu,'the "double" here, in this svelte code is a reactive declared variable. but to vanilla JavaScript, we are assigning value to this variable "double", which is not declared anywhere.'),Tu.forEach(n),si=h(a),eo=s(a,"P",{});var Pu=i(eo);ii=r(Pu,'in strict mode, this is a "assignment to undeclared variable" error.'),Pu.forEach(n),ci=h(a),to=s(a,"P",{});var Ou=i(to);hi=r(Ou,'Svelte marks the variable, "double", as "injected", so the declaration of the variable will be injected later. other examples of injected variables are svelte magic global, such as $$props, or a $ prefix of a store variable.'),Ou.forEach(n),di=h(a),ao=s(a,"P",{});var Cu=i(ao);pi=r(Cu,'here we encounter "count" again, this time its being referenced, instead of being assinged to a value, and it is used to compute the value of double. so we draw a dependency relationship between count and double.so double is depending on count.'),Cu.forEach(n),ui=h(a),oo=s(a,"P",{});var xu=i(oo);fi=r(xu,"lets continue."),xu.forEach(n),vi=h(a),ro=s(a,"P",{});var Au=i(ro);mi=r(Au,"here we see data. data is not declared at the top level scope, as it is within the curly bracket block scope. so we are not going to record it down."),Au.forEach(n),wi=h(a),se=s(a,"P",{});var Xo=i(se);gi=r(Xo,"same thing goes with "),Re=s(Xo,"CODE",{class:!0});var Du=i(Re);bi=r(Du,"i"),Du.forEach(n),yi=r(Xo,"."),Xo.forEach(n),Ei=h(a),no=s(a,"P",{});var ju=i(no);_i=r(ju,"here we encountered double again, so we mark it as referenced."),ju.forEach(n),Si=h(a),lo=s(a,"P",{});var Mu=i(lo);ki=r(Mu,"Math, a js global, we are going to ignore it."),Mu.forEach(n),Ti=h(a),ie=s(a,"P",{});var er=i(ie);Pi=r(er,"here "),$e=s(er,"CODE",{class:!0});var Iu=i($e);Oi=r(Iu,"values"),Iu.forEach(n),Ci=r(er," is mutated."),er.forEach(n),xi=h(a),so=s(a,"P",{});var Nu=i(so);Ai=r(Nu,"now we reach the end of the script, the next step is to traverse the template AST."),Nu.forEach(n),Di=h(a),I=s(a,"P",{});var yt=i(I);ji=r(yt,"we start from the "),Je=s(yt,"CODE",{class:!0});var Hu=i(Je);Mi=r(Hu,"input"),Hu.forEach(n),Ii=r(yt," element, which has a "),We=s(yt,"CODE",{class:!0});var Ru=i(We);Ni=r(Ru,"bind:value"),Ru.forEach(n),Hi=r(yt,"."),yt.forEach(n),Ri=h(a),N=s(a,"P",{});var Et=i(N);$i=r(Et,"Here we are binding the value of the input to the variable "),Fe=s(Et,"CODE",{class:!0});var $u=i(Fe);Ji=r($u,"count"),$u.forEach(n),Wi=r(Et,". so we mark "),Le=s(Et,"CODE",{class:!0});var Ju=i(Le);Fi=r(Ju,"count"),Ju.forEach(n),Li=r(Et," as referenced from template and mutated."),Et.forEach(n),qi=h(a),g=s(a,"P",{});var k=i(g);Gi=r(k,"Now we encountered the each block. Here we are iterating through the variable "),qe=s(k,"CODE",{class:!0});var Wu=i(qe);Ui=r(Wu,"values"),Wu.forEach(n),Vi=r(k," and we are using the variable "),Ge=s(k,"CODE",{class:!0});var Fu=i(Ge);zi=r(Fu,"value"),Fu.forEach(n),Bi=r(k," as each item. So the template within the each block will have a new scope, where "),Ue=s(k,"CODE",{class:!0});var Lu=i(Ue);Yi=r(Lu,"value"),Lu.forEach(n),Ki=r(k," is declared. Also, we mark "),Ve=s(k,"CODE",{class:!0});var qu=i(Ve);Qi=r(qu,"values"),qu.forEach(n),Zi=r(k," as the dependency of the each block. This means that whenever "),ze=s(k,"CODE",{class:!0});var Gu=i(ze);Xi=r(Gu,"values"),Gu.forEach(n),ec=r(k," has changed, we are going to update the each block."),k.forEach(n),tc=h(a),io=s(a,"P",{});var Uu=i(io);ac=r(Uu,"...and, we mark values as referenced too."),Uu.forEach(n),oc=h(a),H=s(a,"P",{});var _t=i(H);rc=r(_t,"next, we move into the each block and the div element. Here we mark "),Be=s(_t,"CODE",{class:!0});var Vu=i(Be);nc=r(Vu,"value"),Vu.forEach(n),lc=r(_t," as referenced from the template, we encounter "),Ye=s(_t,"CODE",{class:!0});var zu=i(Ye);sc=r(zu,"value"),zu.forEach(n),ic=r(_t," again and we've reachead the end of the template."),_t.forEach(n),cc=h(a),co=s(a,"P",{});var Bu=i(co);hc=r(Bu,"and Svelte traverse through the script again, this time mainly for optimisation. figuring out which variables are not referenced, and does not need to be reactive."),Bu.forEach(n),dc=h(a),ho=s(a,"P",{});var Yu=i(ho);pc=r(Yu,"Similarly, if a reactive declaration's dependency will never change, by seeing whether their dependencies were marked as mutated, we can mark it as static, which is more efficient, and much smaller in code size."),Yu.forEach(n),uc=h(a),po=s(a,"P",{});var Ku=i(po);fc=r(Ku,"Next, Svelte traverse through the style."),Ku.forEach(n),vc=h(a),uo=s(a,"P",{});var Qu=i(uo);mc=r(Qu,"for each selector, it will determine whether it will match any elements in the template, and if it does, svelte will add a svelte-hash class name to the selector as well as the matched eelement. Although this will increase the specificity of the selector, but it will make the selector scoped only to the current svelte component."),Qu.forEach(n),wc=h(a),fo=s(a,"P",{});var Zu=i(fo);gc=r(Zu,"At the end of this step, Svelte has figured out all the variables declared, their behavior and their relationship."),Zu.forEach(n),bc=h(a),vo=s(a,"P",{});var Xu=i(vo);yc=r(Xu,"With this, we are moving on to the rendering phase."),Xu.forEach(n),Ec=h(a),mo=s(a,"P",{});var ef=i(mo);_c=r(ef,`This step is where svelte will generate the javascript code.
There are 2 different compile targets, 1 is DOM, for the client side, and another is ssr, for the server side.`),ef.forEach(n),Sc=h(a),wo=s(a,"P",{});var tf=i(wo);kc=r(tf,"Lets first take a look at the dom render target."),tf.forEach(n),Tc=h(a),go=s(a,"P",{});var af=i(go);Pc=r(af,"Here we have the source code. and here is the outline of how a dom output looks like."),af.forEach(n),Oc=h(a),v=s(a,"P",{});var m=i(v);Cc=r(m,"Here is what I called a fragment block. the create fragment function returns an object, that acts as a recipe to create the elements in the component. each method in the recipe object, represents a stage in the component lifecycle, here we have "),Ke=s(m,"CODE",{class:!0});var of=i(Ke);xc=r(of,"c"),of.forEach(n),Ac=r(m," for "),Qe=s(m,"CODE",{class:!0});var rf=i(Qe);Dc=r(rf,"create"),rf.forEach(n),jc=r(m,", "),Ze=s(m,"CODE",{class:!0});var nf=i(Ze);Mc=r(nf,"m"),nf.forEach(n),Ic=r(m," for "),Xe=s(m,"CODE",{class:!0});var lf=i(Xe);Nc=r(lf,"mounting"),lf.forEach(n),Hc=r(m,", "),et=s(m,"CODE",{class:!0});var sf=i(et);Rc=r(sf,"p"),sf.forEach(n),$c=r(m," for "),tt=s(m,"CODE",{class:!0});var cf=i(tt);Jc=r(cf,"update"),cf.forEach(n),Wc=r(m,", and "),at=s(m,"CODE",{class:!0});var hf=i(at);Fc=r(hf,"d"),hf.forEach(n),Lc=r(m," for "),ot=s(m,"CODE",{class:!0});var df=i(ot);qc=r(df,"destroy"),df.forEach(n),Gc=r(m,"."),m.forEach(n),Uc=h(a),bo=s(a,"P",{});var pf=i(bo);Vc=r(pf,"next on, we have the instance function. here's where the state and component logic goes into."),pf.forEach(n),zc=h(a),x=s(a,"P",{});var G=i(x);Bc=r(G,"finally we have the svelte component class. so each svelte component is compiled into a class which is the default export. in the constructor, as you can see, calls the "),rt=s(G,"CODE",{class:!0});var uf=i(rt);Yc=r(uf,"init"),uf.forEach(n),Kc=r(G," function which takes in the "),nt=s(G,"CODE",{class:!0});var ff=i(nt);Qc=r(ff,"instance"),ff.forEach(n),Zc=r(G," and "),lt=s(G,"CODE",{class:!0});var vf=i(lt);Xc=r(vf,"create_fragment"),vf.forEach(n),eh=r(G," function. and this is how the 3 different pieces of the svelte compoenent come together."),G.forEach(n),th=h(a),yo=s(a,"P",{});var mf=i(yo);ah=r(mf,"Now, svelte walks through the template again, and starts inserting code into output."),mf.forEach(n),oh=h(a),Eo=s(a,"P",{});var wf=i(Eo);rh=r(wf,"First we have the input element. we insert instructions to create the input element, mounting the element to the target, and remove the element from the target."),wf.forEach(n),nh=h(a),A=s(a,"P",{});var U=i(A);lh=r(U,"next we have the binding of the input value to the "),st=s(U,"CODE",{class:!0});var gf=i(st);sh=r(gf,"count"),gf.forEach(n),ih=r(U," variable. we need an input handler to listen to the input changes, so we can update the value of the "),it=s(U,"CODE",{class:!0});var bf=i(it);ch=r(bf,"count"),bf.forEach(n),hh=r(U," variable. here we pull out the variables list, and add "),ct=s(U,"CODE",{class:!0});var yf=i(ct);dh=r(yf,"input_handler"),yf.forEach(n),ph=r(U,"."),U.forEach(n),uh=h(a),_o=s(a,"P",{});var Ef=i(_o);fh=r(Ef,"we set the input value based on the variable count and add event listener for input changes which we should remove event listener when we destroy the component."),Ef.forEach(n),vh=h(a),R=s(a,"P",{});var St=i(R);mh=r(St,"and in the update phase, if the "),ht=s(St,"CODE",{class:!0});var _f=i(ht);wh=r(_f,"count"),_f.forEach(n),gh=r(St," has changed, we need to update the value of the input based on the value of "),dt=s(St,"CODE",{class:!0});var Sf=i(dt);bh=r(Sf,"count"),Sf.forEach(n),yh=r(St,"."),St.forEach(n),Eh=h(a),So=s(a,"P",{});var kf=i(So);_h=r(kf,"next we move on to the each block."),kf.forEach(n),Sh=h(a),$=s(a,"P",{});var kt=i($);kh=r(kt,"we create a new fragment block for the each block, which contains the recipe for creating elements for 1 each item. And because in the each block we have a child scope that defines the variable "),pt=s(kt,"CODE",{class:!0});var Tf=i(pt);Th=r(Tf,"value"),Tf.forEach(n),Ph=r(kt,", we have a "),ut=s(kt,"CODE",{class:!0});var Pf=i(ut);Oh=r(Pf,"get_each_context"),Pf.forEach(n),Ch=r(kt," function to emulate that."),kt.forEach(n),xh=h(a),ko=s(a,"P",{});var Of=i(ko);Ah=r(Of,'Here we fast forward through the steps, where for each element, we insert code for how we create, mount, update and destroy them. If you are interested to know the details, you can check out my series of blog, called "Compile Svelte in your head".'),Of.forEach(n),Dh=h(a),ce=s(a,"P",{});var tr=i(ce);jh=r(tr,"Now we look at how Svelte fills up the instance function. In most cases, Svelte just copies over whatever is written within the "),ft=s(tr,"CODE",{class:!0});var Cf=i(ft);Mh=r(Cf,"<script>"),Cf.forEach(n),Ih=r(tr," tag."),tr.forEach(n),Nh=h(a),he=s(a,"P",{});var ar=i(he);Hh=r(ar,"For reactive declarations, they were added inside the "),vt=s(ar,"CODE",{class:!0});var xf=i(vt);Rh=r(xf,"$$.update"),xf.forEach(n),$h=r(ar," function, and for each statement, we add an if statement to check whether their dependency has changed, based on the dependency relationship we've drawn earlier."),ar.forEach(n),Jh=h(a),To=s(a,"P",{});var Af=i(To);Wh=r(Af,"Now we need to declare and add those injected variables."),Af.forEach(n),Fh=h(a),de=s(a,"P",{});var or=i(de);Lh=r(or,"Finally, we return the list of variables that are "),Po=s(or,"STRONG",{});var Df=i(Po);qh=r(Df,"referenced by the template"),Df.forEach(n),Gh=r(or," only."),or.forEach(n),Uh=h(a),pe=s(a,"P",{});var rr=i(pe);Vh=r(rr,"Now, to make the variables actually reactive, we instruments the "),mt=s(rr,"CODE",{class:!0});var jf=i(mt);zh=r(jf,"$$invalidate"),jf.forEach(n),Bh=r(rr," after each assignment statements, so that it will kickstart a next round of update cycle."),rr.forEach(n),Yh=h(a),Oo=s(a,"P",{});var Mf=i(Oo);Kh=r(Mf,"So here you have it, the compile output for the DOM target."),Mf.forEach(n),Qh=h(a),Co=s(a,"P",{});var If=i(Co);Zh=r(If,"Let's take a quick look at how things going for compiling to the SSR target."),If.forEach(n),Xh=h(a),xo=s(a,"P",{});var Nf=i(xo);ed=r(Nf,"The structure of the output code for the SSR target is much simpler. it is a function that returns a string."),Nf.forEach(n),td=h(a),ue=s(a,"P",{});var nr=i(ue);ad=r(nr,"Because there wont be any reactivity needed in the server, we can copy over the code verbatim from the script tag. same thing goes with reactive declarations, of course we need to remember to declare the injected variable, "),wt=s(nr,"CODE",{class:!0});var Hf=i(wt);od=r(Hf,"double"),Hf.forEach(n),rd=r(nr,"."),nr.forEach(n),nd=h(a),fe=s(a,"P",{});var lr=i(fe);ld=r(lr,"as we traverse through the template, we add insert strings or expressions into the output template literal. For the each block, we iterate through the variable "),gt=s(lr,"CODE",{class:!0});var Rf=i(gt);sd=r(Rf,"values"),Rf.forEach(n),id=r(lr," and return the child elements as string."),lr.forEach(n),cd=h(a),Ao=s(a,"P",{});var $f=i(Ao);hd=r($f,"And there you go, the output code of a svelte component for SSR."),$f.forEach(n),dd=h(a),Do=s(a,"P",{});var Jf=i(Do);pd=r(Jf,"Finally, Svelte outputs the code in JS and CSS, with the code as string as well as the sourcemap."),Jf.forEach(n),ud=h(a),jo=s(a,"P",{});var Wf=i(jo);fd=r(Wf,"These can be written into file system directly, or be consumed by your module bundler, such as rollup-svelte-plugin in rollup or svelte-loader for webpack."),Wf.forEach(n),vd=h(a),Mo=s(a,"P",{});var Ff=i(Mo);md=r(Ff,`So lets review again the svelte compilation pipeline,
Svelte parses the code into ast, runs a series of steps to analsye the code, tracking the variable references and dependencies. Then svelte generates the code depending on the compile target, whether it's for the client side or server-side.
And the output of the render step is in terms of JS and CSS, which can be written into a file / consumed by your build tools.`),Ff.forEach(n),wd=h(a),Io=s(a,"P",{});var Lf=i(Io);gd=r(Lf,"Thank you so much for listening. If you like to learn more about svelte, or if you have any questions about svelte, you can follow me on twitter. I am Li Hau. hope you have fun with the talks throughout the conference."),Lf.forEach(n),bd=h(a),No=s(a,"P",{});var qf=i(No);yd=r(qf,"See ya."),qf.forEach(n),a.forEach(n),this.h()},h(){d(f,"href","#recorded-talk"),d(f,"id","recorded-talk"),d(z,"href","#cityjs-conference-2020"),d(z,"id","cityjs-conference-2020"),d(E,"width","560"),d(E,"height","315"),d(E,"title","CityJS Conference 2020"),Vf(E.src,Td="https://www.youtube.com/embed/sP7dtZm_Wx0?start=6618")||d(E,"src",Td),d(E,"frameborder","0"),d(E,"allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),E.allowFullscreen=!0,d(B,"href","#mmt-tech-meetup-sept-2020"),d(B,"id","mmt-tech-meetup-sept-2020"),d(_,"width","560"),d(_,"height","315"),d(_,"title","MMT Tech Meetup - Sept 2020"),Vf(_.src,Pd="https://www.youtube.com/embed/tT1altUaaJU")||d(_,"src",Pd),d(_,"frameborder","0"),d(_,"allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),_.allowFullscreen=!0,d(Y,"href","#slides"),d(Y,"id","slides"),d(me,"href","/slides/svelte-compiler/"),d(Q,"href","#script"),d(Q,"id","script"),d(we,"class","inline"),d(ge,"class","inline"),d(be,"class","inline"),d(ye,"class","inline"),d(Ee,"class","inline"),d(Se,"class","inline"),d(ke,"class","inline"),d(Te,"class","inline"),d(Pe,"class","inline"),d(Oe,"class","inline"),d(Ae,"class","inline"),d(De,"class","inline"),d(je,"class","inline"),d(Me,"class","inline"),d(Ie,"class","inline"),d(Ne,"class","inline"),d(He,"class","inline"),d(Re,"class","inline"),d($e,"class","inline"),d(Je,"class","inline"),d(We,"class","inline"),d(Fe,"class","inline"),d(Le,"class","inline"),d(qe,"class","inline"),d(Ge,"class","inline"),d(Ue,"class","inline"),d(Ve,"class","inline"),d(ze,"class","inline"),d(Be,"class","inline"),d(Ye,"class","inline"),d(Ke,"class","inline"),d(Qe,"class","inline"),d(Ze,"class","inline"),d(Xe,"class","inline"),d(et,"class","inline"),d(tt,"class","inline"),d(at,"class","inline"),d(ot,"class","inline"),d(rt,"class","inline"),d(nt,"class","inline"),d(lt,"class","inline"),d(st,"class","inline"),d(it,"class","inline"),d(ct,"class","inline"),d(ht,"class","inline"),d(dt,"class","inline"),d(pt,"class","inline"),d(ut,"class","inline"),d(ft,"class","inline"),d(vt,"class","inline"),d(mt,"class","inline"),d(wt,"class","inline"),d(gt,"class","inline")},m(p,b){Kf(u,p,b),D(p,T,b),D(p,y,b),e(y,j),e(j,f),e(f,P),D(p,V,b),D(p,J,b),e(J,Tt),e(Tt,z),e(z,sr),e(J,ir),e(J,E),D(p,Ho,b),D(p,W,b),e(W,Pt),e(Pt,B),e(B,cr),e(W,hr),e(W,_),D(p,Ro,b),D(p,F,b),e(F,Ot),e(Ot,Y),e(Y,dr),e(F,pr),e(F,K),e(K,ur),e(K,me),e(me,fr),e(K,vr),D(p,$o,b),D(p,t,b),e(t,Ct),e(Ct,Q),e(Q,mr),e(t,wr),e(t,Z),e(Z,gr),e(Z,xt),e(xt,br),e(Z,yr),e(t,Er),e(t,At),e(At,_r),e(t,Sr),e(t,Dt),e(Dt,kr),e(t,Tr),e(t,jt),e(jt,Pr),e(t,Or),e(t,Mt),e(Mt,It),e(It,Cr),e(t,xr),e(t,X),e(X,Ar),e(X,we),e(we,Dr),e(X,jr),e(t,Mr),e(t,Nt),e(Nt,Ir),e(t,Nr),e(t,ee),e(ee,Hr),e(ee,ge),e(ge,Rr),e(ee,$r),e(t,Jr),e(t,Ht),e(Ht,Wr),e(t,Fr),e(t,Rt),e(Rt,Lr),e(t,qr),e(t,te),e(te,Gr),e(te,$t),e($t,Ur),e(te,Vr),e(t,zr),e(t,ae),e(ae,Br),e(ae,be),e(be,Yr),e(ae,Kr),e(t,Qr),e(t,Jt),e(Jt,Zr),e(t,Xr),e(t,Wt),e(Wt,en),e(t,tn),e(t,M),e(M,an),e(M,Ft),e(Ft,on),e(M,rn),e(M,Lt),e(Lt,nn),e(M,ln),e(t,sn),e(t,qt),e(qt,cn),e(t,hn),e(t,Gt),e(Gt,dn),e(t,pn),e(t,Ut),e(Ut,un),e(t,fn),e(t,Vt),e(Vt,vn),e(t,mn),e(t,zt),e(zt,wn),e(t,gn),e(t,Bt),e(Bt,bn),e(t,yn),e(t,oe),e(oe,En),e(oe,ye),e(ye,_n),e(oe,Sn),e(t,kn),e(t,Yt),e(Yt,Tn),e(t,Pn),e(t,re),e(re,On),e(re,Ee),e(Ee,Cn),e(re,xn),e(t,An),e(t,Kt),e(Kt,Dn),e(t,jn),e(t,_e),e(_e,Qt),e(Qt,Mn),e(_e,In),e(t,Nn),e(t,w),e(w,Hn),e(w,Se),e(Se,Rn),e(w,$n),e(w,ke),e(ke,Jn),e(w,Wn),e(w,Te),e(Te,Fn),e(w,Ln),e(w,Pe),e(Pe,qn),e(w,Gn),e(w,Oe),e(Oe,Un),e(w,Vn),e(t,zn),e(t,Zt),e(Zt,Bn),e(t,Yn),e(t,Xt),e(Xt,Kn),e(t,Qn),e(t,Ce),e(Ce,Zn),e(Ce,ea),e(ea,Xn),e(t,el),e(t,ta),e(ta,aa),e(aa,tl),e(t,al),e(t,oa),e(oa,ol),e(t,rl),e(t,ra),e(ra,nl),e(t,ll),e(t,na),e(na,sl),e(t,il),e(t,la),e(la,cl),e(t,hl),e(t,sa),e(sa,dl),e(t,pl),e(t,ia),e(ia,ul),e(t,fl),e(t,ca),e(ca,vl),e(t,ml),e(t,ha),e(ha,da),e(da,wl),e(t,gl),e(t,pa),e(pa,bl),e(t,yl),e(t,ne),e(ne,El),e(ne,ua),e(ua,_l),e(ne,Sl),e(t,kl),e(t,fa),e(fa,Tl),e(t,Pl),e(t,va),e(va,Ol),e(t,Cl),e(t,ma),e(ma,xl),e(t,Al),e(t,wa),e(wa,Dl),e(t,jl),e(t,ga),e(ga,ba),e(ba,Ml),e(t,Il),e(t,xe),e(xe,Nl),e(xe,ya),e(ya,Hl),e(t,Rl),e(t,Ea),e(Ea,$l),e(t,Jl),e(t,_a),e(_a,Sa),e(Sa,Wl),e(t,Fl),e(t,O),e(O,Ll),e(O,ka),e(ka,Ae),e(Ae,ql),e(O,Gl),e(O,Ta),e(Ta,De),e(De,Ul),e(O,Vl),e(O,Pa),e(Pa,je),e(je,zl),e(O,Bl),e(t,Yl),e(t,le),e(le,Kl),e(le,Me),e(Me,Ql),e(le,Zl),e(t,Xl),e(t,C),e(C,es),e(C,Ie),e(Ie,ts),e(C,as),e(C,Ne),e(Ne,os),e(C,rs),e(C,He),e(He,ns),e(C,ls),e(t,ss),e(t,Oa),e(Oa,is),e(t,cs),e(t,Ca),e(Ca,hs),e(t,ds),e(t,xa),e(xa,ps),e(t,us),e(t,Aa),e(Aa,fs),e(t,vs),e(t,Da),e(Da,ms),e(t,ws),e(t,ja),e(ja,gs),e(t,bs),e(t,Ma),e(Ma,ys),e(t,Es),e(t,Ia),e(Ia,_s),e(t,Ss),e(t,Na),e(Na,ks),e(t,Ts),e(t,Ha),e(Ha,Ps),e(t,Os),e(t,Ra),e(Ra,Cs),e(t,xs),e(t,$a),e($a,As),e(t,Ds),e(t,Ja),e(Ja,js),e(t,Ms),e(t,Wa),e(Wa,Is),e(t,Ns),e(t,Fa),e(Fa,Hs),e(t,Rs),e(t,La),e(La,$s),e(t,Js),e(t,qa),e(qa,Ws),e(t,Fs),e(t,Ga),e(Ga,Ls),e(t,qs),e(t,Ua),e(Ua,Gs),e(t,Us),e(t,Va),e(Va,Vs),e(t,zs),e(t,za),e(za,Bs),e(t,Ys),e(t,Ba),e(Ba,Ks),e(t,Qs),e(t,Ya),e(Ya,Zs),e(t,Xs),e(t,Ka),e(Ka,ei),e(t,ti),e(t,Qa),e(Qa,ai),e(t,oi),e(t,Za),e(Za,ri),e(t,ni),e(t,Xa),e(Xa,li),e(t,si),e(t,eo),e(eo,ii),e(t,ci),e(t,to),e(to,hi),e(t,di),e(t,ao),e(ao,pi),e(t,ui),e(t,oo),e(oo,fi),e(t,vi),e(t,ro),e(ro,mi),e(t,wi),e(t,se),e(se,gi),e(se,Re),e(Re,bi),e(se,yi),e(t,Ei),e(t,no),e(no,_i),e(t,Si),e(t,lo),e(lo,ki),e(t,Ti),e(t,ie),e(ie,Pi),e(ie,$e),e($e,Oi),e(ie,Ci),e(t,xi),e(t,so),e(so,Ai),e(t,Di),e(t,I),e(I,ji),e(I,Je),e(Je,Mi),e(I,Ii),e(I,We),e(We,Ni),e(I,Hi),e(t,Ri),e(t,N),e(N,$i),e(N,Fe),e(Fe,Ji),e(N,Wi),e(N,Le),e(Le,Fi),e(N,Li),e(t,qi),e(t,g),e(g,Gi),e(g,qe),e(qe,Ui),e(g,Vi),e(g,Ge),e(Ge,zi),e(g,Bi),e(g,Ue),e(Ue,Yi),e(g,Ki),e(g,Ve),e(Ve,Qi),e(g,Zi),e(g,ze),e(ze,Xi),e(g,ec),e(t,tc),e(t,io),e(io,ac),e(t,oc),e(t,H),e(H,rc),e(H,Be),e(Be,nc),e(H,lc),e(H,Ye),e(Ye,sc),e(H,ic),e(t,cc),e(t,co),e(co,hc),e(t,dc),e(t,ho),e(ho,pc),e(t,uc),e(t,po),e(po,fc),e(t,vc),e(t,uo),e(uo,mc),e(t,wc),e(t,fo),e(fo,gc),e(t,bc),e(t,vo),e(vo,yc),e(t,Ec),e(t,mo),e(mo,_c),e(t,Sc),e(t,wo),e(wo,kc),e(t,Tc),e(t,go),e(go,Pc),e(t,Oc),e(t,v),e(v,Cc),e(v,Ke),e(Ke,xc),e(v,Ac),e(v,Qe),e(Qe,Dc),e(v,jc),e(v,Ze),e(Ze,Mc),e(v,Ic),e(v,Xe),e(Xe,Nc),e(v,Hc),e(v,et),e(et,Rc),e(v,$c),e(v,tt),e(tt,Jc),e(v,Wc),e(v,at),e(at,Fc),e(v,Lc),e(v,ot),e(ot,qc),e(v,Gc),e(t,Uc),e(t,bo),e(bo,Vc),e(t,zc),e(t,x),e(x,Bc),e(x,rt),e(rt,Yc),e(x,Kc),e(x,nt),e(nt,Qc),e(x,Zc),e(x,lt),e(lt,Xc),e(x,eh),e(t,th),e(t,yo),e(yo,ah),e(t,oh),e(t,Eo),e(Eo,rh),e(t,nh),e(t,A),e(A,lh),e(A,st),e(st,sh),e(A,ih),e(A,it),e(it,ch),e(A,hh),e(A,ct),e(ct,dh),e(A,ph),e(t,uh),e(t,_o),e(_o,fh),e(t,vh),e(t,R),e(R,mh),e(R,ht),e(ht,wh),e(R,gh),e(R,dt),e(dt,bh),e(R,yh),e(t,Eh),e(t,So),e(So,_h),e(t,Sh),e(t,$),e($,kh),e($,pt),e(pt,Th),e($,Ph),e($,ut),e(ut,Oh),e($,Ch),e(t,xh),e(t,ko),e(ko,Ah),e(t,Dh),e(t,ce),e(ce,jh),e(ce,ft),e(ft,Mh),e(ce,Ih),e(t,Nh),e(t,he),e(he,Hh),e(he,vt),e(vt,Rh),e(he,$h),e(t,Jh),e(t,To),e(To,Wh),e(t,Fh),e(t,de),e(de,Lh),e(de,Po),e(Po,qh),e(de,Gh),e(t,Uh),e(t,pe),e(pe,Vh),e(pe,mt),e(mt,zh),e(pe,Bh),e(t,Yh),e(t,Oo),e(Oo,Kh),e(t,Qh),e(t,Co),e(Co,Zh),e(t,Xh),e(t,xo),e(xo,ed),e(t,td),e(t,ue),e(ue,ad),e(ue,wt),e(wt,od),e(ue,rd),e(t,nd),e(t,fe),e(fe,ld),e(fe,gt),e(gt,sd),e(fe,id),e(t,cd),e(t,Ao),e(Ao,hd),e(t,dd),e(t,Do),e(Do,pd),e(t,ud),e(t,jo),e(jo,fd),e(t,vd),e(t,Mo),e(Mo,md),e(t,wd),e(t,Io),e(Io,gd),e(t,bd),e(t,No),e(No,yd),Jo=!0},p:nv,i(p){Jo||(Qf(u.$$.fragment,p),Jo=!0)},o(p){Zf(u.$$.fragment,p),Jo=!1},d(p){Xf(u,p),p&&n(T),p&&n(y),p&&n(V),p&&n(J),p&&n(Ho),p&&n(W),p&&n(Ro),p&&n(F),p&&n($o),p&&n(t)}}}function hv(ve){let u,T;const y=[ve[0],zf];let j={$$slots:{default:[cv]},$$scope:{ctx:ve}};for(let f=0;f<y.length;f+=1)j=kd(j,y[f]);return u=new lv({props:j}),{c(){Bf(u.$$.fragment)},l(f){Yf(u.$$.fragment,f)},m(f,P){Kf(u,f,P),T=!0},p(f,[P]){const V=P&1?ov(y,[P&1&&Gf(f[0]),P&0&&Gf(zf)]):{};P&2&&(V.$$scope={dirty:P,ctx:f}),u.$set(V)},i(f){T||(Qf(u.$$.fragment,f),T=!0)},o(f){Zf(u.$$.fragment,f),T=!1},d(f){Xf(u,f)}}}const zf={title:"Looking into the Svelte Compiler",occasion:"CityJS Conf 2020",date:"2020-09-14",label:"talk",layout:"talk",description:"Recorded talkCityJS Conference 2020MMT Tech Meetup - Sept 2020Slides[Link to slides] (Left arrow and right arrow to navigate)ScriptModern web frameworks allow us to describe our UI declaratively, as a function of state, of the application. ..."};function dv(ve,u,T){return rv("blog",{image:iv}),ve.$$set=y=>{T(0,u=kd(kd({},u),Uf(y)))},u=Uf(u),[u]}class gv extends ev{constructor(u){super();tv(this,u,dv,hv,av,{})}}export{gv as default,zf as metadata};
