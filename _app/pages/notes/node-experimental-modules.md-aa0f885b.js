import{S as _t,i as ut,s as ft,C as ze,w as pt,x as ht,y as Et,z as vt,A as dt,q as gt,o as jt,B as yt,r as xt,R as it,e as l,t,k as w,c as a,a as r,h as o,d as s,m as I,b as d,g as W,F as e}from"../../chunks/vendor-569a3c5c.js";import{B as Ct}from"../../chunks/BlogLayout-17b76cb2.js";import{_ as Ot}from"../../chunks/twitter-card-image-a57df29d.js";import"../../chunks/stores-ee936cd4.js";import"../../chunks/WebMentions-968cc380.js";/* empty css                                */function Dt(k){let n,p,u,C,c,f,j,se,X,m,O,D,le,N,ae,re,ne,x,ce,R,de,ie,T,me,_e,y,ue,A,fe,pe,B,he,Ee,ve,h,ge,Y,je,ye,G,xe,Ce,q,J,Oe,b,M,De,qe,P,be,L,Le,$e,_,Se,U,we,Ie,z,ke,Ne,F,Re,Te,H,Ae,Be,Ye,$,Ge,K,Je,Me;return{c(){n=l("p"),p=t("To enable es module system in nodejs, it's not as simple as enabling the "),u=l("code"),C=t("--experimental-modules"),c=t(" flag."),f=w(),j=l("p"),se=t("You need:"),X=w(),m=l("ul"),O=l("li"),D=l("strong"),le=t("use "),N=l("code"),ae=t(".mjs"),re=t(" file format to hint as a es module"),ne=t(" or "),x=l("strong"),ce=t("at the nearest "),R=l("code"),de=t("package.json"),ie=t(", specify "),T=l("code"),me=t('"type": "module"'),_e=w(),y=l("li"),ue=t("use "),A=l("code"),fe=t("import"),pe=t(' statement to "require" the module file -> meaning your main file also need to be a '),B=l("code"),he=t(".mjs"),Ee=t(" file."),ve=w(),h=l("li"),ge=t('to replace all "require" and "module.exports" in '),Y=l("code"),je=t(".mjs"),ye=t(" file to "),G=l("code"),xe=t("import"),Ce=t("."),q=l("ul"),J=l("li"),Oe=t("as an escape hatch, you can use "),b=l("a"),M=l("code"),De=t("module.createRequire"),qe=w(),P=l("li"),be=t("see "),L=l("a"),Le=t("https://nodejs.org/api/esm.html#esm_no_code_require_code_code_exports_code_code_module_exports_code_code_filename_code_code_dirname_code"),$e=w(),_=l("li"),Se=t("es modules import file must specify extension, "),U=l("code"),we=t(".mjs"),Ie=t(" (es modules), "),z=l("code"),ke=t(".cjs"),Ne=t(" (commonjs) or "),F=l("code"),Re=t(".js"),Te=t(" (depends on nearest "),H=l("code"),Ae=t("package.json#type"),Be=t(")."),Ye=w(),$=l("li"),Ge=t("for commonjs to import es modules, the only way is to use dynamic import "),K=l("code"),Je=t("import()"),Me=t("."),this.h()},l(i){n=a(i,"P",{});var E=r(n);p=o(E,"To enable es module system in nodejs, it's not as simple as enabling the "),u=a(E,"CODE",{class:!0});var Fe=r(u);C=o(Fe,"--experimental-modules"),Fe.forEach(s),c=o(E," flag."),E.forEach(s),f=I(i),j=a(i,"P",{});var He=r(j);se=o(He,"You need:"),He.forEach(s),X=I(i),m=a(i,"UL",{});var v=r(m);O=a(v,"LI",{});var Z=r(O);D=a(Z,"STRONG",{});var ee=r(D);le=o(ee,"use "),N=a(ee,"CODE",{class:!0});var Ke=r(N);ae=o(Ke,".mjs"),Ke.forEach(s),re=o(ee," file format to hint as a es module"),ee.forEach(s),ne=o(Z," or "),x=a(Z,"STRONG",{});var V=r(x);ce=o(V,"at the nearest "),R=a(V,"CODE",{class:!0});var Qe=r(R);de=o(Qe,"package.json"),Qe.forEach(s),ie=o(V,", specify "),T=a(V,"CODE",{class:!0});var Ve=r(T);me=o(Ve,'"type": "module"'),Ve.forEach(s),V.forEach(s),Z.forEach(s),_e=I(v),y=a(v,"LI",{});var Q=r(y);ue=o(Q,"use "),A=a(Q,"CODE",{class:!0});var We=r(A);fe=o(We,"import"),We.forEach(s),pe=o(Q,' statement to "require" the module file -> meaning your main file also need to be a '),B=a(Q,"CODE",{class:!0});var Xe=r(B);he=o(Xe,".mjs"),Xe.forEach(s),Ee=o(Q," file."),Q.forEach(s),ve=I(v),h=a(v,"LI",{});var S=r(h);ge=o(S,'to replace all "require" and "module.exports" in '),Y=a(S,"CODE",{class:!0});var Ze=r(Y);je=o(Ze,".mjs"),Ze.forEach(s),ye=o(S," file to "),G=a(S,"CODE",{class:!0});var et=r(G);xe=o(et,"import"),et.forEach(s),Ce=o(S,"."),q=a(S,"UL",{});var te=r(q);J=a(te,"LI",{});var Pe=r(J);Oe=o(Pe,"as an escape hatch, you can use "),b=a(Pe,"A",{href:!0,rel:!0});var tt=r(b);M=a(tt,"CODE",{class:!0});var ot=r(M);De=o(ot,"module.createRequire"),ot.forEach(s),tt.forEach(s),Pe.forEach(s),qe=I(te),P=a(te,"LI",{});var Ue=r(P);be=o(Ue,"see "),L=a(Ue,"A",{href:!0,rel:!0});var st=r(L);Le=o(st,"https://nodejs.org/api/esm.html#esm_no_code_require_code_code_exports_code_code_module_exports_code_code_filename_code_code_dirname_code"),st.forEach(s),Ue.forEach(s),te.forEach(s),S.forEach(s),$e=I(v),_=a(v,"LI",{});var g=r(_);Se=o(g,"es modules import file must specify extension, "),U=a(g,"CODE",{class:!0});var lt=r(U);we=o(lt,".mjs"),lt.forEach(s),Ie=o(g," (es modules), "),z=a(g,"CODE",{class:!0});var at=r(z);ke=o(at,".cjs"),at.forEach(s),Ne=o(g," (commonjs) or "),F=a(g,"CODE",{class:!0});var rt=r(F);Re=o(rt,".js"),rt.forEach(s),Te=o(g," (depends on nearest "),H=a(g,"CODE",{class:!0});var nt=r(H);Ae=o(nt,"package.json#type"),nt.forEach(s),Be=o(g,")."),g.forEach(s),Ye=I(v),$=a(v,"LI",{});var oe=r($);Ge=o(oe,"for commonjs to import es modules, the only way is to use dynamic import "),K=a(oe,"CODE",{class:!0});var ct=r(K);Je=o(ct,"import()"),ct.forEach(s),Me=o(oe,"."),oe.forEach(s),v.forEach(s),this.h()},h(){d(u,"class","inline"),d(N,"class","inline"),d(R,"class","inline"),d(T,"class","inline"),d(A,"class","inline"),d(B,"class","inline"),d(Y,"class","inline"),d(G,"class","inline"),d(M,"class","inline"),d(b,"href","https://nodejs.org/api/modules.html#modules_module_createrequire_filename"),d(b,"rel","nofollow"),d(L,"href","https://nodejs.org/api/esm.html#esm_no_code_require_code_code_exports_code_code_module_exports_code_code_filename_code_code_dirname_code"),d(L,"rel","nofollow"),d(U,"class","inline"),d(z,"class","inline"),d(F,"class","inline"),d(H,"class","inline"),d(K,"class","inline")},m(i,E){W(i,n,E),e(n,p),e(n,u),e(u,C),e(n,c),W(i,f,E),W(i,j,E),e(j,se),W(i,X,E),W(i,m,E),e(m,O),e(O,D),e(D,le),e(D,N),e(N,ae),e(D,re),e(O,ne),e(O,x),e(x,ce),e(x,R),e(R,de),e(x,ie),e(x,T),e(T,me),e(m,_e),e(m,y),e(y,ue),e(y,A),e(A,fe),e(y,pe),e(y,B),e(B,he),e(y,Ee),e(m,ve),e(m,h),e(h,ge),e(h,Y),e(Y,je),e(h,ye),e(h,G),e(G,xe),e(h,Ce),e(h,q),e(q,J),e(J,Oe),e(J,b),e(b,M),e(M,De),e(q,qe),e(q,P),e(P,be),e(P,L),e(L,Le),e(m,$e),e(m,_),e(_,Se),e(_,U),e(U,we),e(_,Ie),e(_,z),e(z,ke),e(_,Ne),e(_,F),e(F,Re),e(_,Te),e(_,H),e(H,Ae),e(_,Be),e(m,Ye),e(m,$),e($,Ge),e($,K),e(K,Je),e($,Me)},d(i){i&&s(n),i&&s(f),i&&s(j),i&&s(X),i&&s(m)}}}function qt(k){let n,p;const u=[k[0],mt];let C={$$slots:{default:[Dt]},$$scope:{ctx:k}};for(let c=0;c<u.length;c+=1)C=ze(C,u[c]);return n=new Ct({props:C}),{c(){pt(n.$$.fragment)},l(c){ht(n.$$.fragment,c)},m(c,f){Et(n,c,f),p=!0},p(c,[f]){const j=f&1?vt(u,[f&1&&dt(c[0]),f&0&&dt(mt)]):{};f&2&&(j.$$scope={dirty:f,ctx:c}),n.$set(j)},i(c){p||(gt(n.$$.fragment,c),p=!0)},o(c){jt(n.$$.fragment,c),p=!1},d(c){yt(n,c)}}}const mt={title:"ESM in NodeJS",tags:["NodeJS","ESM"],description:'To enable es module system in nodejs, it\'s not as simple as enabling the `--experimental-modules` flag.You need:use `.mjs` file format to hint as a es module or at the nearest `package.json`, specify `"type": "module"`...'};function bt(k,n,p){return xt("blog",{image:Ot}),k.$$set=u=>{p(0,n=ze(ze({},n),it(u)))},n=it(n),[n]}class Nt extends _t{constructor(n){super();ut(this,n,bt,qt,ft,{})}}export{Nt as default,mt as metadata};
