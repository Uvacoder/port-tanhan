import{S as ac,i as nc,s as lc,C as Or,w as wp,x as gp,y as Ep,z as rc,A as mp,q as _p,o as Tp,B as Ip,r as ic,R as xp,k as p,e as a,t as o,m as c,c as n,a as l,h as t,d as e,b as r,g as u,F as s,O as pc}from"../../chunks/vendor-ea160616.js";import{B as cc}from"../../chunks/BlogLayout-1be3dc1e.js";import{T as hc}from"../../chunks/TableOfContent-c4f5cb6e.js";import{_ as kc}from"../../chunks/twitter-card-image-a57df29d.js";import"../../chunks/stores-7d7fda0c.js";import"../../chunks/WebMentions-d768a574.js";/* empty css                                */function yc(Vs){let f,P,T,Z,m,g,Ao=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// weback.config.js</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  entry</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;./src/index.js&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// src/index.js</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">default</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;foo&#39;</span><span style="color: var(--shiki-color-text)">;</span></span></code></pre>`,Lo,U,dt,Ms,vt,ut,qo,J,Pp=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">foo</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;./dist/bundle.js&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">console</span><span style="color: var(--shiki-token-function)">.log</span><span style="color: var(--shiki-color-text)">(foo); </span><span style="color: var(--shiki-token-comment)">// prints &#96;&#123;&#125;&#96; (empty object)</span></span></code></pre>`,Vo,F,ft,Ns,mt,xt,Mo,X,Dp=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// dist/bundle.js</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">webpackStart</span><span style="color: var(--shiki-color-text)">(&#123; moduleMap</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> entryPoint &#125;) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(entryPoint);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;)(&#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-string-expression)">&#39;src/index.js&#39;</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)">(exports</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> require) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)">.default </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;foo&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &#125;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;);</span></span></code></pre>`,No,Hs,ss,bt,Rs,wt,gt,Ho,Ws,Et,Ro,A,oo,es,_t,Tt,to,os,It,Pt,ao,ts,Dt,Wo,L,no,as,Ct,Ot,ns,jt,$s,St,At,Lt,q,Bs,qt,Vt,Us,Mt,Nt,Fs,Ht,Rt,$o,x,lo,E,Wt,Gs,$t,Bt,zs,Ut,Ft,Ks,Gt,zt,Qs,Kt,Qt,Yt,ro,Zt,Jt,io,Xt,sa,ls,ea,Ys,oa,ta,aa,Zs,Cp=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line dim"><span style="color: var(--shiki-token-comment)">// webpack.config.js</span></span>
<span class="line dim"><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  libraryTarget</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;commonjs2&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&#125;;</span></span>
<span class="line dim"><span style="color: var(--shiki-token-comment)">// dist/bundle.js</span></span>
<span class="line highlight"><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">webpackStart</span><span style="color: var(--shiki-color-text)">(&#123; moduleMap</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> entryPoint &#125;) &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(entryPoint);</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&#125;)(&#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-string-expression)">&#39;src/index.js&#39;</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)">(exports</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> require) &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)">.default </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;foo&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  &#125;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&#125;);</span></span></code></pre>`,na,V,Js,la,ra,Xs,ia,pa,se,ca,ha,ka,H,ya,ee,da,va,oe,ua,fa,ma,po,rs,xa,is,ba,wa,Bo,y,co,b,ga,te,Ea,_a,ae,Ta,Ia,ne,Pa,Da,le,Ca,Oa,re,ja,Sa,ho,Aa,La,ps,qa,ie,Va,Ma,Na,pe,Op=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line dim"><span style="color: var(--shiki-token-comment)">// webpack.config.js</span></span>
<span class="line dim"><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  libraryTarget</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;self&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&#125;;</span></span>
<span class="line dim"><span style="color: var(--shiki-token-comment)">// dist/bundle.js</span></span>
<span class="line highlight"><span style="color: var(--shiki-token-constant)">Object</span><span style="color: var(--shiki-token-function)">.assign</span><span style="color: var(--shiki-color-text)">(</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">  self</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  (</span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">webpackStart</span><span style="color: var(--shiki-color-text)">(&#123; moduleMap</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> entryPoint &#125;) &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(entryPoint);</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  &#125;)(&#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-string-expression)">&#39;src/index.js&#39;</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)">(exports</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> require) &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)">.default </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;foo&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    &#125;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  &#125;)</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line dim"><span style="color: var(--shiki-token-comment)">// self.default === &#39;foo&#39;</span></span></code></pre>`,Ha,cs,Ra,ce,Wa,$a,Ba,R,Ua,he,Fa,Ga,ke,za,Ka,Qa,D,Ya,ye,Za,Ja,de,Xa,sn,ve,en,on,tn,ue,jp=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line dim"><span style="color: var(--shiki-token-comment)">// webpack.config.js</span></span>
<span class="line dim"><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  library</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;myApp&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  libraryTarget</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;var&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&#125;;</span></span>
<span class="line dim"></span>
<span class="line dim"><span style="color: var(--shiki-token-comment)">// dist/bundle.js</span></span>
<span class="line highlight"><span style="color: var(--shiki-token-keyword)">var</span><span style="color: var(--shiki-color-text)"> myApp </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">webpackStart</span><span style="color: var(--shiki-color-text)">(&#123; moduleMap</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> entryPoint &#125;) &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(entryPoint);</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&#125;)(&#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-string-expression)">&#39;src/index.js&#39;</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)">(exports</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> require) &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)">.default </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;foo&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  &#125;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&#125;);</span></span>
<span class="line dim"></span>
<span class="line dim"><span style="color: var(--shiki-token-comment)">// myApp === &#123; default: &#39;foo&#39; &#125;</span></span></code></pre>`,an,W,nn,fe,ln,rn,me,pn,cn,hn,xe,Sp=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line dim"><span style="color: var(--shiki-token-comment)">// webpack.config.js</span></span>
<span class="line dim"><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  library</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;myApp&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  libraryTarget</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;var&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  libraryExport</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;default&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&#125;;</span></span>
<span class="line dim"></span>
<span class="line dim"><span style="color: var(--shiki-token-comment)">// dist/bundle.js</span></span>
<span class="line dim"><span style="color: var(--shiki-token-keyword)">var</span><span style="color: var(--shiki-color-text)"> myApp </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">webpackStart</span><span style="color: var(--shiki-color-text)">(&#123; moduleMap</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> entryPoint &#125;) &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(entryPoint);</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&#125;)(&#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-string-expression)">&#39;src/index.js&#39;</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)">(exports</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> require) &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)">.default </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;foo&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  &#125;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">&#125;).default;</span></span>
<span class="line dim"></span>
<span class="line dim"><span style="color: var(--shiki-token-comment)">// myApp === &#39;foo&#39;</span></span></code></pre>`,kn,C,yn,be,dn,vn,we,un,fn,ge,mn,xn,bn,Ee,Ap=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// libraryTarget: &#39;commonjs2&#39;:</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> &#123;&#123;BUNDLED_CODE&#125;&#125;;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// libraryTarget: &#39;self&#39;:</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">Object</span><span style="color: var(--shiki-token-function)">.assign</span><span style="color: var(--shiki-color-text)">(self</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> &#123;&#123;BUNDLED_CODE&#125;&#125;);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// library: &#39;myApp&#39;, libraryTarget: &#39;var&#39;:</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">var</span><span style="color: var(--shiki-color-text)"> myApp </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> &#123;&#123;BUNDLED_CODE&#125;&#125;;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// library: &#39;myApp&#39;, libraryTarget: &#39;var&#39;, libraryExport: &#39;default&#39;:</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">var</span><span style="color: var(--shiki-color-text)"> myApp </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> &#123;&#123;BUNDLED_CODE&#125;&#125;.default;</span></span></code></pre>`,wn,ko,gn,En,_e,Lp=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// libraryTarget: ???</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">customRegistry</span><span style="color: var(--shiki-token-function)">.register</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;my-app&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> &#123;&#123;BUNDLED_CODE&#125;&#125;);</span></span></code></pre>`,_n,hs,Tn,ks,In,Pn,Uo,h,yo,ys,Dn,Cn,O,On,ds,jn,Sn,vs,An,Ln,Te,qn,Vn,Mn,Ie,qp=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// webpack/lib/LibraryTemplatePlugin.js</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">class</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">LibraryTemplatePlugin</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">apply</span><span style="color: var(--shiki-color-text)"> (compiler) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">switch</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-constant)">this</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">options</span><span style="color: var(--shiki-color-text)">.libraryTarget) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">case</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;amd&#39;</span><span style="color: var(--shiki-color-text)">:</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">case</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;amd-require&#39;</span><span style="color: var(--shiki-color-text)">:</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">AmdTemplatePlugin</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-comment)">/*...*/</span><span style="color: var(--shiki-color-text)">)</span><span style="color: var(--shiki-token-function)">.apply</span><span style="color: var(--shiki-color-text)">(compiler);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">break</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">case</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;var&#39;</span><span style="color: var(--shiki-color-text)">:</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">SetVarTemplatePlugin</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-comment)">/*...*/</span><span style="color: var(--shiki-color-text)">)</span><span style="color: var(--shiki-token-function)">.apply</span><span style="color: var(--shiki-color-text)">(compiler);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">break</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">case</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;this&#39;</span><span style="color: var(--shiki-color-text)">:</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">case</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;self&#39;</span><span style="color: var(--shiki-color-text)">:</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">case</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;window&#39;</span><span style="color: var(--shiki-color-text)">:</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">SetVarTemplatePlugin</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-comment)">/*...*/</span><span style="color: var(--shiki-color-text)">)</span><span style="color: var(--shiki-token-function)">.apply</span><span style="color: var(--shiki-color-text)">(compiler);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">break</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre>`,Nn,us,Hn,fs,Rn,Wn,$n,Pe,Vp=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line dim"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> &#123; </span><span style="color: var(--shiki-token-constant)">ConcatSource</span><span style="color: var(--shiki-color-text)"> &#125; </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;webpack-sources&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line dim"></span>
<span class="line dim"><span style="color: var(--shiki-token-keyword)">class</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">SetVarTemplatePlugin</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">apply</span><span style="color: var(--shiki-color-text)">(compiler) &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-constant)">compiler</span><span style="color: var(--shiki-token-function)">.</span><span style="color: var(--shiki-token-constant)">hooks</span><span style="color: var(--shiki-token-function)">.</span><span style="color: var(--shiki-token-constant)">thisCompilation</span><span style="color: var(--shiki-token-function)">.tap</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;SetVarTemplatePlugin&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> compilation </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-constant)">hooks</span><span style="color: var(--shiki-token-function)">.</span><span style="color: var(--shiki-token-constant)">render</span><span style="color: var(--shiki-token-function)">.tap</span><span style="color: var(--shiki-color-text)">(</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-string-expression)">&#39;SetVarTemplatePlugin&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">        (source</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> &#123; chunk</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> chunkGraph &#125;) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">          </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">          </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">prefix</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#96;</span><span style="color: var(--shiki-token-keyword)">$&#123;</span><span style="color: var(--shiki-color-text)">varExpression</span><span style="color: var(--shiki-token-keyword)">&#125;</span><span style="color: var(--shiki-token-string-expression)"> =&#96;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">          </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">ConcatSource</span><span style="color: var(--shiki-color-text)">(prefix</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> source);</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">        &#125;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">      );</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    &#125;);</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  &#125;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre>`,Bn,_,Un,De,Fn,Gn,Ce,zn,Kn,Oe,Qn,Yn,je,Zn,Jn,Se,Xn,sl,el,vo,ol,tl,Ae,Mp='<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-constant)">customRegistry</span><span style="color: var(--shiki-token-function)">.register</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;my-app&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> &#123;&#123;BUNDLED_CODE&#125;&#125;);</span></span></code></pre>',al,uo,nl,ll,Le,Np='<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">ConcatSource</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#96;customRegistry.register(&#39;my-app&#39;, &#96;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> source</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;)&#39;</span><span style="color: var(--shiki-color-text)">);</span></span></code></pre>',rl,fo,il,pl,j,qe,cl,ms,hl,kl,mo,yl,dl,G,vl,Ve,ul,fl,Me,ml,xl,xs,bl,Ne,wl,gl,El,He,Hp='<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">ConcatSource</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#96;customRegistry.register(&#39;my-app&#39;, &#96;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> source</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;)&#39;</span><span style="color: var(--shiki-color-text)">);</span></span></code></pre>',_l,bs,$,Tl,Re,Il,Pl,We,Dl,Cl,Ol,xo,jl,Sl,$e,Rp=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// webpack.config.js</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  plugins</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> [</span><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">SetModuleTemplatePlugin</span><span style="color: var(--shiki-color-text)">()]</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;;</span></span></code></pre>`,Al,bo,Ll,ql,wo,Vl,Ml,B,Nl,ws,Hl,Rl,gs,Wl,$l,Bl,go,Ul,Fl,Be,Wp=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">FlagEntryExportAsUsedPlugin</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;./FlagEntryExportAsUsedPlugin&quot;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">FlagEntryExportAsUsedPlugin</span><span style="color: var(--shiki-color-text)">(</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">this</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">options</span><span style="color: var(--shiki-color-text)">.libraryTarget </span><span style="color: var(--shiki-token-keyword)">!==</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;module&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-string-expression)">&quot;used a library export&quot;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">)</span><span style="color: var(--shiki-token-function)">.apply</span><span style="color: var(--shiki-color-text)">(compiler);</span></span></code></pre>`,Gl,Es,zl,Eo,Kl,Ql,Yl,_s,Ts,Zl,_o,Jl,Xl,sr,To,Is,er,Io,or,tr,ar,Ps,nr,Ue,lr,rr,ir,Ds,pr,Cs,cr,hr,kr,Os,yr,Fe,dr,vr,ur,js,fr,Ge,mr,xr,br,Po,Do,wr,Fo,M,Co,Ss,gr,Er,Oo,_r,Tr,jo,As,Ir,ze,Pr,Dr,Go;return f=new hc({props:{data:[{link:"webpack-s-output-library-options",title:"Webpack's output.library *  options",nested:[{link:"1-name-of-a-module-system-commonjs-commonjs2-amd-umd",title:'1. Name of a module system:  `"commonjs"` ,  `"commonjs2"` ,  `"amd"` ,  `"umd"` , ...'},{link:"2-name-of-a-variable-var-this-self-window-global",title:'2. Name of a variable:  `"var"` ,  `"this"` ,  `"self"` ,  `"window"` ,  `"global"`'}]},{link:"writing-a-webpack-plugin",title:"Writing a webpack plugin"},{link:"closing-note",title:"Closing Note"}]}}),{c(){wp(f.$$.fragment),P=p(),T=a("p"),Z=o("If you are using webpack to bundle your library, you most likely will export something in your entry file:"),m=p(),g=a("div"),Lo=p(),U=a("p"),dt=o("And if you build it with webpack just like that, out-of-the-box, you may be surprised that if you try to "),Ms=a("code"),vt=o("require()"),ut=o(" the built file, you would find that there's nothing being exported by the built file."),qo=p(),J=a("div"),Vo=p(),F=a("p"),ft=o("If you've read "),Ns=a("a"),mt=o("my previous article on writing a module bundler"),xt=o(", you can imagine that the output bundle looks something like this:"),Mo=p(),X=a("div"),No=p(),Hs=a("p"),ss=a("em"),bt=o("(Everything should be familiar, except the fact that instead of calling "),Rs=a("code"),wt=o("webpackStart"),gt=o(" in a separate statement, I made it into a IIFE (Immediately Invoked Function Expression) for reasons that will be apparent later)"),Ho=p(),Ws=a("p"),Et=o("In order to build for a library, ie: to expose whatever is exported by the entry file, webpack provides 3 options that you can play with:"),Ro=p(),A=a("ul"),oo=a("li"),es=a("a"),_t=o("output.library"),Tt=p(),to=a("li"),os=a("a"),It=o("output.libraryExport"),Pt=p(),ao=a("li"),ts=a("a"),Dt=o("output.libraryTarget"),Wo=p(),L=a("section"),no=a("h2"),as=a("a"),Ct=o("Webpack's output.library* options"),Ot=p(),ns=a("p"),jt=o("To understand how each of them works, let's start with "),$s=a("code"),St=o("output.libraryTarget"),At=o("."),Lt=p(),q=a("p"),Bs=a("code"),qt=o("output.libraryTarget"),Vt=o(" accepts "),Us=a("code"),Mt=o("string"),Nt=o(" as value, there are 2 main groups of values that you can provide to the "),Fs=a("code"),Ht=o("output.libraryTarget"),Rt=o(" option:"),$o=p(),x=a("section"),lo=a("h3"),E=a("a"),Wt=o("1. Name of a module system: "),Gs=a("code"),$t=o('"commonjs"'),Bt=o(", "),zs=a("code"),Ut=o('"commonjs2"'),Ft=o(", "),Ks=a("code"),Gt=o('"amd"'),zt=o(", "),Qs=a("code"),Kt=o('"umd"'),Qt=o(", ..."),Yt=p(),ro=a("p"),Zt=o("Webpack allows you to specify the name of the module system that you want to use to expose the exported values of the entry file."),Jt=p(),io=a("p"),Xt=o("You can specify a module system that is different from the one that you are using in your library."),sa=p(),ls=a("p"),ea=o("Let's try "),Ys=a("code"),oa=o("commonjs2"),ta=o(" as an example:"),aa=p(),Zs=a("div"),na=p(),V=a("p"),Js=a("code"),la=o("commonjs2"),ra=o(" uses "),Xs=a("code"),ia=o("module.exports"),pa=o(" to export values from a module. In this example, webpack assigns the return value of the IIFE to "),se=a("code"),ca=o("module.exports"),ha=o("."),ka=p(),H=a("p"),ya=o("If you look at the bundled code, it is not much different than the one without specifying "),ee=a("code"),da=o("output.libraryTarget"),va=o(". The only difference is that the bundled code is prefixed with "),oe=a("code"),ua=o("module.exports ="),fa=o(";"),ma=p(),po=a("blockquote"),rs=a("p"),xa=o("By the way, if you are curious about the difference between commonjs and commonjs2, you can follow the thread of "),is=a("a"),ba=o("this issue"),wa=o("."),Bo=p(),y=a("section"),co=a("h3"),b=a("a"),ga=o("2. Name of a variable: "),te=a("code"),Ea=o('"var"'),_a=o(", "),ae=a("code"),Ta=o('"this"'),Ia=o(", "),ne=a("code"),Pa=o('"self"'),Da=o(", "),le=a("code"),Ca=o('"window"'),Oa=o(", "),re=a("code"),ja=o('"global"'),Sa=p(),ho=a("p"),Aa=o("On the other hand, instead of exposing the library content through a module system, you can specify the variable name which the export object is assigned to."),La=p(),ps=a("p"),qa=o("Let's take "),ie=a("code"),Va=o("self"),Ma=o(" as an example:"),Na=p(),pe=a("div"),Ha=p(),cs=a("p"),Ra=o("All the exported values are assigned to "),ce=a("code"),Wa=o("self"),$a=o("."),Ba=p(),R=a("p"),Ua=o("Again observe the bundled code, this time round we prefixed the bundled code with "),he=a("code"),Fa=o("Object.assign(self,"),Ga=o(" and suffixed it with "),ke=a("code"),za=o(");"),Ka=o("."),Qa=p(),D=a("p"),Ya=o("Specifiying the "),ye=a("code"),Za=o("output.libraryTarget"),Ja=o(" as "),de=a("code"),Xa=o("var"),sn=o(" on the other hand, allows you to assign it to a variable name, which you can provide in "),ve=a("code"),en=o("output.library"),on=o(" option:"),tn=p(),ue=a("div"),an=p(),W=a("p"),nn=o("If you don't want "),fe=a("code"),ln=o("myApp"),rn=o(" to contain all the exported value of the entry file, you can provide the key that you want to export only in the "),me=a("code"),pn=o("output.libraryExport"),cn=o(" option:"),hn=p(),xe=a("div"),kn=p(),C=a("p"),yn=o("Again you can observe that by playing different option values of "),be=a("code"),dn=o("output.library"),vn=o(", "),we=a("code"),un=o("output.libraryTarget"),fn=o(", "),ge=a("code"),mn=o("output.libraryExport"),xn=o(", webpack adds different prefix and suffix to the bundled code:"),bn=p(),Ee=a("div"),wn=p(),ko=a("p"),gn=o("So, instead of using the webpack built-in library targets, what should we do if we want to support a custom library target that looks something like below:"),En=p(),_e=a("div"),_n=p(),hs=a("p"),Tn=o("I searched through the "),ks=a("a"),In=o("webpack official docs"),Pn=o(" and found no options that allows that. So the only solution at the moment is to write a webpack plugin."),Uo=p(),h=a("section"),yo=a("h2"),ys=a("a"),Dn=o("Writing a webpack plugin"),Cn=p(),O=a("p"),On=o("After digging around the "),ds=a("a"),jn=o("webpack source code"),Sn=o(", I found out that "),vs=a("a"),An=o("LibraryTemplatePlugin"),Ln=o(" instantiates different TemplatePlugins based on the value of the "),Te=a("code"),qn=o("output.libraryTarget"),Vn=o(" option:"),Mn=p(),Ie=a("div"),Nn=p(),us=a("p"),Hn=o("I went to look into one of the TemplatePlugins, the "),fs=a("a"),Rn=o("SetVarTemplatePlugin"),Wn=o(":"),$n=p(),Pe=a("div"),Bn=p(),_=a("p"),Un=o("I don't understand line-by-line everything that happened in the file, but I do know that the line highlighted above, is where webpack concats the "),De=a("code"),Fn=o("varExpression ="),Gn=o(" (in the case of "),Ce=a("code"),zn=o("commonjs"),Kn=o(", "),Oe=a("code"),Qn=o("varExpression"),Yn=o(" is "),je=a("code"),Zn=o("module.exports"),Jn=o(", thus "),Se=a("code"),Xn=o("module.exports ="),sl=o(") and the source (which in this case is the bundled code)."),el=p(),vo=a("p"),ol=o("So, to have the following:"),tl=p(),Ae=a("div"),al=p(),uo=a("p"),nl=o("we need:"),ll=p(),Le=a("div"),rl=p(),fo=a("p"),il=o("So, I did the following:"),pl=p(),j=a("ol"),qe=a("li"),cl=o("Created a new file and pasted the entire source from "),ms=a("a"),hl=o("SetVarTemplatePlugin.js"),kl=p(),mo=a("li"),yl=o("Searched + replaced to rename the plugin name to something more appropriate, (SetModuleTemplatePlugin)"),dl=p(),G=a("li"),vl=o("Replaced relative import, "),Ve=a("code"),ul=o('require("./RuntimeGlobals")'),fl=o(" to require from webpack, "),Me=a("code"),ml=o('require("webpack/lib/RuntimeGlobals")'),xl=p(),xs=a("li"),bl=o("Replaced the line "),Ne=a("code"),wl=o("return new ConcatSource(prefix, source);"),gl=o(" to the following:"),El=p(),He=a("div"),_l=p(),bs=a("ol"),$=a("li"),Tl=o("Removed "),Re=a("code"),Il=o("output.library"),Pl=o(", "),We=a("code"),Dl=o("output.libraryTarget"),Cl=o(" from webpack config"),Ol=p(),xo=a("li"),jl=o("Added my new plugin:"),Sl=p(),$e=a("div"),Al=p(),bo=a("p"),Ll=o("To my surprise, it worked! Almost."),ql=p(),wo=a("p"),Vl=o("When I run the bundled code, the customRegistry registered an empty object, nothing is exported from the bundled code."),Ml=p(),B=a("p"),Nl=o("I went into "),ws=a("a"),Hl=o("LibraryTemplatePlugin.js"),Rl=o(" to look about, because that's the most obvious place to start looking, since I've copied line-by-line from "),gs=a("a"),Wl=o("SetVarTemplatePlugin.js"),$l=o("."),Bl=p(),go=a("p"),Ul=o("I found a pretty obvious line that says:"),Fl=p(),Be=a("div"),Gl=p(),Es=a("p"),zl=o("If I would have to guess, I think that what this line is doing is to mark the export of the entry file as used, so that webpack would not "),Eo=a("em"),Kl=o("treeshake them away"),Ql=o("."),Yl=p(),_s=a("blockquote"),Ts=a("p"),Zl=o("Which, "),_o=a("strong"),Jl=o("treeshake"),Xl=o(" is a cool word that means remove them."),sr=p(),To=a("blockquote"),Is=a("p"),er=o("Which you could argue that "),Io=a("strong"),or=o("treeshake"),tr=o(" does way more that just remove the entry exports, it removes things that is only used by the entry exports, recursively."),ar=p(),Ps=a("p"),nr=o("I added these 2 lines into my "),Ue=a("code"),lr=o("SetModuleTemplatePlugin"),rr=o(", and it worked! Perfectly this time. \u{1F389}"),ir=p(),Ds=a("p"),pr=o("I created "),Cs=a("a"),cr=o("a gist"),hr=o(" for the complete code, if you are lazy."),kr=p(),Os=a("p"),yr=o("Lastly, if you noticed, this example is based on the latest master webpack source (at the time writing), which is "),Fe=a("code"),dr=o("webpack@5.0.0-beta.12"),vr=o("."),ur=p(),js=a("p"),fr=o("If you want a similar plugin with "),Ge=a("code"),mr=o("webpack^4"),xr=o(", you can trust me that this article serves as a good enough entry point for you to write the plugin on your own."),br=p(),Po=a("p"),Do=a("strong"),wr=o("And I trust you that you can do it. \u{1F60E}"),Fo=p(),M=a("section"),Co=a("h2"),Ss=a("a"),gr=o("Closing Note"),Er=p(),Oo=a("p"),_r=o("Writing a webpack plugin is not impossible. It will especially be easier if you have a good understanding how webpack as a bundler works."),Tr=p(),jo=a("p"),As=a("em"),Ir=o("(Plug: if you want to know more, you can read my "),ze=a("a"),Pr=o('"What is module bundler and how does it work?"'),Dr=o(")"),this.h()},l(i){gp(f.$$.fragment,i),P=c(i),T=n(i,"P",{});var d=l(T);Z=t(d,"If you are using webpack to bundle your library, you most likely will export something in your entry file:"),d.forEach(e),m=c(i),g=n(i,"DIV",{class:!0});var $p=l(g);$p.forEach(e),Lo=c(i),U=n(i,"P",{});var zo=l(U);dt=t(zo,"And if you build it with webpack just like that, out-of-the-box, you may be surprised that if you try to "),Ms=n(zo,"CODE",{class:!0});var jr=l(Ms);vt=t(jr,"require()"),jr.forEach(e),ut=t(zo," the built file, you would find that there's nothing being exported by the built file."),zo.forEach(e),qo=c(i),J=n(i,"DIV",{class:!0});var Bp=l(J);Bp.forEach(e),Vo=c(i),F=n(i,"P",{});var Ko=l(F);ft=t(Ko,"If you've read "),Ns=n(Ko,"A",{href:!0});var Sr=l(Ns);mt=t(Sr,"my previous article on writing a module bundler"),Sr.forEach(e),xt=t(Ko,", you can imagine that the output bundle looks something like this:"),Ko.forEach(e),Mo=c(i),X=n(i,"DIV",{class:!0});var Up=l(X);Up.forEach(e),No=c(i),Hs=n(i,"P",{});var Ar=l(Hs);ss=n(Ar,"EM",{});var Qo=l(ss);bt=t(Qo,"(Everything should be familiar, except the fact that instead of calling "),Rs=n(Qo,"CODE",{class:!0});var Lr=l(Rs);wt=t(Lr,"webpackStart"),Lr.forEach(e),gt=t(Qo," in a separate statement, I made it into a IIFE (Immediately Invoked Function Expression) for reasons that will be apparent later)"),Qo.forEach(e),Ar.forEach(e),Ho=c(i),Ws=n(i,"P",{});var qr=l(Ws);Et=t(qr,"In order to build for a library, ie: to expose whatever is exported by the entry file, webpack provides 3 options that you can play with:"),qr.forEach(e),Ro=c(i),A=n(i,"UL",{});var Ke=l(A);oo=n(Ke,"LI",{});var Vr=l(oo);es=n(Vr,"A",{href:!0,rel:!0});var Mr=l(es);_t=t(Mr,"output.library"),Mr.forEach(e),Vr.forEach(e),Tt=c(Ke),to=n(Ke,"LI",{});var Nr=l(to);os=n(Nr,"A",{href:!0,rel:!0});var Hr=l(os);It=t(Hr,"output.libraryExport"),Hr.forEach(e),Nr.forEach(e),Pt=c(Ke),ao=n(Ke,"LI",{});var Rr=l(ao);ts=n(Rr,"A",{href:!0,rel:!0});var Wr=l(ts);Dt=t(Wr,"output.libraryTarget"),Wr.forEach(e),Rr.forEach(e),Ke.forEach(e),Wo=c(i),L=n(i,"SECTION",{});var Qe=l(L);no=n(Qe,"H2",{});var $r=l(no);as=n($r,"A",{href:!0,id:!0});var Br=l(as);Ct=t(Br,"Webpack's output.library* options"),Br.forEach(e),$r.forEach(e),Ot=c(Qe),ns=n(Qe,"P",{});var Yo=l(ns);jt=t(Yo,"To understand how each of them works, let's start with "),$s=n(Yo,"CODE",{class:!0});var Ur=l($s);St=t(Ur,"output.libraryTarget"),Ur.forEach(e),At=t(Yo,"."),Yo.forEach(e),Lt=c(Qe),q=n(Qe,"P",{});var Ls=l(q);Bs=n(Ls,"CODE",{class:!0});var Fr=l(Bs);qt=t(Fr,"output.libraryTarget"),Fr.forEach(e),Vt=t(Ls," accepts "),Us=n(Ls,"CODE",{class:!0});var Gr=l(Us);Mt=t(Gr,"string"),Gr.forEach(e),Nt=t(Ls," as value, there are 2 main groups of values that you can provide to the "),Fs=n(Ls,"CODE",{class:!0});var zr=l(Fs);Ht=t(zr,"output.libraryTarget"),zr.forEach(e),Rt=t(Ls," option:"),Ls.forEach(e),Qe.forEach(e),$o=c(i),x=n(i,"SECTION",{});var w=l(x);lo=n(w,"H3",{});var Kr=l(lo);E=n(Kr,"A",{href:!0,id:!0});var N=l(E);Wt=t(N,"1. Name of a module system: "),Gs=n(N,"CODE",{class:!0});var Qr=l(Gs);$t=t(Qr,'"commonjs"'),Qr.forEach(e),Bt=t(N,", "),zs=n(N,"CODE",{class:!0});var Yr=l(zs);Ut=t(Yr,'"commonjs2"'),Yr.forEach(e),Ft=t(N,", "),Ks=n(N,"CODE",{class:!0});var Zr=l(Ks);Gt=t(Zr,'"amd"'),Zr.forEach(e),zt=t(N,", "),Qs=n(N,"CODE",{class:!0});var Jr=l(Qs);Kt=t(Jr,'"umd"'),Jr.forEach(e),Qt=t(N,", ..."),N.forEach(e),Kr.forEach(e),Yt=c(w),ro=n(w,"P",{});var Xr=l(ro);Zt=t(Xr,"Webpack allows you to specify the name of the module system that you want to use to expose the exported values of the entry file."),Xr.forEach(e),Jt=c(w),io=n(w,"P",{});var si=l(io);Xt=t(si,"You can specify a module system that is different from the one that you are using in your library."),si.forEach(e),sa=c(w),ls=n(w,"P",{});var Zo=l(ls);ea=t(Zo,"Let's try "),Ys=n(Zo,"CODE",{class:!0});var ei=l(Ys);oa=t(ei,"commonjs2"),ei.forEach(e),ta=t(Zo," as an example:"),Zo.forEach(e),aa=c(w),Zs=n(w,"DIV",{class:!0});var Fp=l(Zs);Fp.forEach(e),na=c(w),V=n(w,"P",{});var qs=l(V);Js=n(qs,"CODE",{class:!0});var oi=l(Js);la=t(oi,"commonjs2"),oi.forEach(e),ra=t(qs," uses "),Xs=n(qs,"CODE",{class:!0});var ti=l(Xs);ia=t(ti,"module.exports"),ti.forEach(e),pa=t(qs," to export values from a module. In this example, webpack assigns the return value of the IIFE to "),se=n(qs,"CODE",{class:!0});var ai=l(se);ca=t(ai,"module.exports"),ai.forEach(e),ha=t(qs,"."),qs.forEach(e),ka=c(w),H=n(w,"P",{});var Ye=l(H);ya=t(Ye,"If you look at the bundled code, it is not much different than the one without specifying "),ee=n(Ye,"CODE",{class:!0});var ni=l(ee);da=t(ni,"output.libraryTarget"),ni.forEach(e),va=t(Ye,". The only difference is that the bundled code is prefixed with "),oe=n(Ye,"CODE",{class:!0});var li=l(oe);ua=t(li,"module.exports ="),li.forEach(e),fa=t(Ye,";"),Ye.forEach(e),ma=c(w),po=n(w,"BLOCKQUOTE",{});var ri=l(po);rs=n(ri,"P",{});var Jo=l(rs);xa=t(Jo,"By the way, if you are curious about the difference between commonjs and commonjs2, you can follow the thread of "),is=n(Jo,"A",{href:!0,rel:!0});var ii=l(is);ba=t(ii,"this issue"),ii.forEach(e),wa=t(Jo,"."),Jo.forEach(e),ri.forEach(e),w.forEach(e),Bo=c(i),y=n(i,"SECTION",{});var v=l(y);co=n(v,"H3",{});var pi=l(co);b=n(pi,"A",{href:!0,id:!0});var S=l(b);ga=t(S,"2. Name of a variable: "),te=n(S,"CODE",{class:!0});var ci=l(te);Ea=t(ci,'"var"'),ci.forEach(e),_a=t(S,", "),ae=n(S,"CODE",{class:!0});var hi=l(ae);Ta=t(hi,'"this"'),hi.forEach(e),Ia=t(S,", "),ne=n(S,"CODE",{class:!0});var ki=l(ne);Pa=t(ki,'"self"'),ki.forEach(e),Da=t(S,", "),le=n(S,"CODE",{class:!0});var yi=l(le);Ca=t(yi,'"window"'),yi.forEach(e),Oa=t(S,", "),re=n(S,"CODE",{class:!0});var di=l(re);ja=t(di,'"global"'),di.forEach(e),S.forEach(e),pi.forEach(e),Sa=c(v),ho=n(v,"P",{});var vi=l(ho);Aa=t(vi,"On the other hand, instead of exposing the library content through a module system, you can specify the variable name which the export object is assigned to."),vi.forEach(e),La=c(v),ps=n(v,"P",{});var Xo=l(ps);qa=t(Xo,"Let's take "),ie=n(Xo,"CODE",{class:!0});var ui=l(ie);Va=t(ui,"self"),ui.forEach(e),Ma=t(Xo," as an example:"),Xo.forEach(e),Na=c(v),pe=n(v,"DIV",{class:!0});var Gp=l(pe);Gp.forEach(e),Ha=c(v),cs=n(v,"P",{});var st=l(cs);Ra=t(st,"All the exported values are assigned to "),ce=n(st,"CODE",{class:!0});var fi=l(ce);Wa=t(fi,"self"),fi.forEach(e),$a=t(st,"."),st.forEach(e),Ba=c(v),R=n(v,"P",{});var Ze=l(R);Ua=t(Ze,"Again observe the bundled code, this time round we prefixed the bundled code with "),he=n(Ze,"CODE",{class:!0});var mi=l(he);Fa=t(mi,"Object.assign(self,"),mi.forEach(e),Ga=t(Ze," and suffixed it with "),ke=n(Ze,"CODE",{class:!0});var xi=l(ke);za=t(xi,");"),xi.forEach(e),Ka=t(Ze,"."),Ze.forEach(e),Qa=c(v),D=n(v,"P",{});var z=l(D);Ya=t(z,"Specifiying the "),ye=n(z,"CODE",{class:!0});var bi=l(ye);Za=t(bi,"output.libraryTarget"),bi.forEach(e),Ja=t(z," as "),de=n(z,"CODE",{class:!0});var wi=l(de);Xa=t(wi,"var"),wi.forEach(e),sn=t(z," on the other hand, allows you to assign it to a variable name, which you can provide in "),ve=n(z,"CODE",{class:!0});var gi=l(ve);en=t(gi,"output.library"),gi.forEach(e),on=t(z," option:"),z.forEach(e),tn=c(v),ue=n(v,"DIV",{class:!0});var zp=l(ue);zp.forEach(e),an=c(v),W=n(v,"P",{});var Je=l(W);nn=t(Je,"If you don't want "),fe=n(Je,"CODE",{class:!0});var Ei=l(fe);ln=t(Ei,"myApp"),Ei.forEach(e),rn=t(Je," to contain all the exported value of the entry file, you can provide the key that you want to export only in the "),me=n(Je,"CODE",{class:!0});var _i=l(me);pn=t(_i,"output.libraryExport"),_i.forEach(e),cn=t(Je," option:"),Je.forEach(e),hn=c(v),xe=n(v,"DIV",{class:!0});var Kp=l(xe);Kp.forEach(e),kn=c(v),C=n(v,"P",{});var K=l(C);yn=t(K,"Again you can observe that by playing different option values of "),be=n(K,"CODE",{class:!0});var Ti=l(be);dn=t(Ti,"output.library"),Ti.forEach(e),vn=t(K,", "),we=n(K,"CODE",{class:!0});var Ii=l(we);un=t(Ii,"output.libraryTarget"),Ii.forEach(e),fn=t(K,", "),ge=n(K,"CODE",{class:!0});var Pi=l(ge);mn=t(Pi,"output.libraryExport"),Pi.forEach(e),xn=t(K,", webpack adds different prefix and suffix to the bundled code:"),K.forEach(e),bn=c(v),Ee=n(v,"DIV",{class:!0});var Qp=l(Ee);Qp.forEach(e),wn=c(v),ko=n(v,"P",{});var Di=l(ko);gn=t(Di,"So, instead of using the webpack built-in library targets, what should we do if we want to support a custom library target that looks something like below:"),Di.forEach(e),En=c(v),_e=n(v,"DIV",{class:!0});var Yp=l(_e);Yp.forEach(e),_n=c(v),hs=n(v,"P",{});var et=l(hs);Tn=t(et,"I searched through the "),ks=n(et,"A",{href:!0,rel:!0});var Ci=l(ks);In=t(Ci,"webpack official docs"),Ci.forEach(e),Pn=t(et," and found no options that allows that. So the only solution at the moment is to write a webpack plugin."),et.forEach(e),v.forEach(e),Uo=c(i),h=n(i,"SECTION",{});var k=l(h);yo=n(k,"H2",{});var Oi=l(yo);ys=n(Oi,"A",{href:!0,id:!0});var ji=l(ys);Dn=t(ji,"Writing a webpack plugin"),ji.forEach(e),Oi.forEach(e),Cn=c(k),O=n(k,"P",{});var Q=l(O);On=t(Q,"After digging around the "),ds=n(Q,"A",{href:!0,rel:!0});var Si=l(ds);jn=t(Si,"webpack source code"),Si.forEach(e),Sn=t(Q,", I found out that "),vs=n(Q,"A",{href:!0,rel:!0});var Ai=l(vs);An=t(Ai,"LibraryTemplatePlugin"),Ai.forEach(e),Ln=t(Q," instantiates different TemplatePlugins based on the value of the "),Te=n(Q,"CODE",{class:!0});var Li=l(Te);qn=t(Li,"output.libraryTarget"),Li.forEach(e),Vn=t(Q," option:"),Q.forEach(e),Mn=c(k),Ie=n(k,"DIV",{class:!0});var Zp=l(Ie);Zp.forEach(e),Nn=c(k),us=n(k,"P",{});var ot=l(us);Hn=t(ot,"I went to look into one of the TemplatePlugins, the "),fs=n(ot,"A",{href:!0,rel:!0});var qi=l(fs);Rn=t(qi,"SetVarTemplatePlugin"),qi.forEach(e),Wn=t(ot,":"),ot.forEach(e),$n=c(k),Pe=n(k,"DIV",{class:!0});var Jp=l(Pe);Jp.forEach(e),Bn=c(k),_=n(k,"P",{});var I=l(_);Un=t(I,"I don't understand line-by-line everything that happened in the file, but I do know that the line highlighted above, is where webpack concats the "),De=n(I,"CODE",{class:!0});var Vi=l(De);Fn=t(Vi,"varExpression ="),Vi.forEach(e),Gn=t(I," (in the case of "),Ce=n(I,"CODE",{class:!0});var Mi=l(Ce);zn=t(Mi,"commonjs"),Mi.forEach(e),Kn=t(I,", "),Oe=n(I,"CODE",{class:!0});var Ni=l(Oe);Qn=t(Ni,"varExpression"),Ni.forEach(e),Yn=t(I," is "),je=n(I,"CODE",{class:!0});var Hi=l(je);Zn=t(Hi,"module.exports"),Hi.forEach(e),Jn=t(I,", thus "),Se=n(I,"CODE",{class:!0});var Ri=l(Se);Xn=t(Ri,"module.exports ="),Ri.forEach(e),sl=t(I,") and the source (which in this case is the bundled code)."),I.forEach(e),el=c(k),vo=n(k,"P",{});var Wi=l(vo);ol=t(Wi,"So, to have the following:"),Wi.forEach(e),tl=c(k),Ae=n(k,"DIV",{class:!0});var Xp=l(Ae);Xp.forEach(e),al=c(k),uo=n(k,"P",{});var $i=l(uo);nl=t($i,"we need:"),$i.forEach(e),ll=c(k),Le=n(k,"DIV",{class:!0});var sc=l(Le);sc.forEach(e),rl=c(k),fo=n(k,"P",{});var Bi=l(fo);il=t(Bi,"So, I did the following:"),Bi.forEach(e),pl=c(k),j=n(k,"OL",{});var Y=l(j);qe=n(Y,"LI",{});var Cr=l(qe);cl=t(Cr,"Created a new file and pasted the entire source from "),ms=n(Cr,"A",{href:!0,rel:!0});var Ui=l(ms);hl=t(Ui,"SetVarTemplatePlugin.js"),Ui.forEach(e),Cr.forEach(e),kl=c(Y),mo=n(Y,"LI",{});var Fi=l(mo);yl=t(Fi,"Searched + replaced to rename the plugin name to something more appropriate, (SetModuleTemplatePlugin)"),Fi.forEach(e),dl=c(Y),G=n(Y,"LI",{});var So=l(G);vl=t(So,"Replaced relative import, "),Ve=n(So,"CODE",{class:!0});var Gi=l(Ve);ul=t(Gi,'require("./RuntimeGlobals")'),Gi.forEach(e),fl=t(So," to require from webpack, "),Me=n(So,"CODE",{class:!0});var zi=l(Me);ml=t(zi,'require("webpack/lib/RuntimeGlobals")'),zi.forEach(e),So.forEach(e),xl=c(Y),xs=n(Y,"LI",{});var tt=l(xs);bl=t(tt,"Replaced the line "),Ne=n(tt,"CODE",{class:!0});var Ki=l(Ne);wl=t(Ki,"return new ConcatSource(prefix, source);"),Ki.forEach(e),gl=t(tt," to the following:"),tt.forEach(e),Y.forEach(e),El=c(k),He=n(k,"DIV",{class:!0});var ec=l(He);ec.forEach(e),_l=c(k),bs=n(k,"OL",{});var at=l(bs);$=n(at,"LI",{});var Xe=l($);Tl=t(Xe,"Removed "),Re=n(Xe,"CODE",{class:!0});var Qi=l(Re);Il=t(Qi,"output.library"),Qi.forEach(e),Pl=t(Xe,", "),We=n(Xe,"CODE",{class:!0});var Yi=l(We);Dl=t(Yi,"output.libraryTarget"),Yi.forEach(e),Cl=t(Xe," from webpack config"),Xe.forEach(e),Ol=c(at),xo=n(at,"LI",{});var Zi=l(xo);jl=t(Zi,"Added my new plugin:"),Zi.forEach(e),at.forEach(e),Sl=c(k),$e=n(k,"DIV",{class:!0});var oc=l($e);oc.forEach(e),Al=c(k),bo=n(k,"P",{});var Ji=l(bo);Ll=t(Ji,"To my surprise, it worked! Almost."),Ji.forEach(e),ql=c(k),wo=n(k,"P",{});var Xi=l(wo);Vl=t(Xi,"When I run the bundled code, the customRegistry registered an empty object, nothing is exported from the bundled code."),Xi.forEach(e),Ml=c(k),B=n(k,"P",{});var so=l(B);Nl=t(so,"I went into "),ws=n(so,"A",{href:!0,rel:!0});var sp=l(ws);Hl=t(sp,"LibraryTemplatePlugin.js"),sp.forEach(e),Rl=t(so," to look about, because that's the most obvious place to start looking, since I've copied line-by-line from "),gs=n(so,"A",{href:!0,rel:!0});var ep=l(gs);Wl=t(ep,"SetVarTemplatePlugin.js"),ep.forEach(e),$l=t(so,"."),so.forEach(e),Bl=c(k),go=n(k,"P",{});var op=l(go);Ul=t(op,"I found a pretty obvious line that says:"),op.forEach(e),Fl=c(k),Be=n(k,"DIV",{class:!0});var tc=l(Be);tc.forEach(e),Gl=c(k),Es=n(k,"P",{});var nt=l(Es);zl=t(nt,"If I would have to guess, I think that what this line is doing is to mark the export of the entry file as used, so that webpack would not "),Eo=n(nt,"EM",{});var tp=l(Eo);Kl=t(tp,"treeshake them away"),tp.forEach(e),Ql=t(nt,"."),nt.forEach(e),Yl=c(k),_s=n(k,"BLOCKQUOTE",{});var lt=l(_s);Ts=n(lt,"P",{});var rt=l(Ts);Zl=t(rt,"Which, "),_o=n(rt,"STRONG",{});var ap=l(_o);Jl=t(ap,"treeshake"),ap.forEach(e),Xl=t(rt," is a cool word that means remove them."),rt.forEach(e),sr=c(lt),To=n(lt,"BLOCKQUOTE",{});var np=l(To);Is=n(np,"P",{});var it=l(Is);er=t(it,"Which you could argue that "),Io=n(it,"STRONG",{});var lp=l(Io);or=t(lp,"treeshake"),lp.forEach(e),tr=t(it," does way more that just remove the entry exports, it removes things that is only used by the entry exports, recursively."),it.forEach(e),np.forEach(e),lt.forEach(e),ar=c(k),Ps=n(k,"P",{});var pt=l(Ps);nr=t(pt,"I added these 2 lines into my "),Ue=n(pt,"CODE",{class:!0});var rp=l(Ue);lr=t(rp,"SetModuleTemplatePlugin"),rp.forEach(e),rr=t(pt,", and it worked! Perfectly this time. \u{1F389}"),pt.forEach(e),ir=c(k),Ds=n(k,"P",{});var ct=l(Ds);pr=t(ct,"I created "),Cs=n(ct,"A",{href:!0,rel:!0});var ip=l(Cs);cr=t(ip,"a gist"),ip.forEach(e),hr=t(ct," for the complete code, if you are lazy."),ct.forEach(e),kr=c(k),Os=n(k,"P",{});var ht=l(Os);yr=t(ht,"Lastly, if you noticed, this example is based on the latest master webpack source (at the time writing), which is "),Fe=n(ht,"CODE",{class:!0});var pp=l(Fe);dr=t(pp,"webpack@5.0.0-beta.12"),pp.forEach(e),vr=t(ht,"."),ht.forEach(e),ur=c(k),js=n(k,"P",{});var kt=l(js);fr=t(kt,"If you want a similar plugin with "),Ge=n(kt,"CODE",{class:!0});var cp=l(Ge);mr=t(cp,"webpack^4"),cp.forEach(e),xr=t(kt,", you can trust me that this article serves as a good enough entry point for you to write the plugin on your own."),kt.forEach(e),br=c(k),Po=n(k,"P",{});var hp=l(Po);Do=n(hp,"STRONG",{});var kp=l(Do);wr=t(kp,"And I trust you that you can do it. \u{1F60E}"),kp.forEach(e),hp.forEach(e),k.forEach(e),Fo=c(i),M=n(i,"SECTION",{});var eo=l(M);Co=n(eo,"H2",{});var yp=l(Co);Ss=n(yp,"A",{href:!0,id:!0});var dp=l(Ss);gr=t(dp,"Closing Note"),dp.forEach(e),yp.forEach(e),Er=c(eo),Oo=n(eo,"P",{});var vp=l(Oo);_r=t(vp,"Writing a webpack plugin is not impossible. It will especially be easier if you have a good understanding how webpack as a bundler works."),vp.forEach(e),Tr=c(eo),jo=n(eo,"P",{});var up=l(jo);As=n(up,"EM",{});var yt=l(As);Ir=t(yt,"(Plug: if you want to know more, you can read my "),ze=n(yt,"A",{href:!0});var fp=l(ze);Pr=t(fp,'"What is module bundler and how does it work?"'),fp.forEach(e),Dr=t(yt,")"),yt.forEach(e),up.forEach(e),eo.forEach(e),this.h()},h(){r(g,"class","code-section"),r(Ms,"class","inline"),r(J,"class","code-section"),r(Ns,"href","/i-wrote-my-module-bundler/"),r(X,"class","code-section"),r(Rs,"class","inline"),r(es,"href","https://webpack.js.org/configuration/output/#outputlibrary"),r(es,"rel","nofollow"),r(os,"href","https://webpack.js.org/configuration/output/#outputlibraryexport"),r(os,"rel","nofollow"),r(ts,"href","https://webpack.js.org/configuration/output/#outputlibrarytarget"),r(ts,"rel","nofollow"),r(as,"href","#webpack-s-output-library-options"),r(as,"id","webpack-s-output-library-options"),r($s,"class","inline"),r(Bs,"class","inline"),r(Us,"class","inline"),r(Fs,"class","inline"),r(Gs,"class","inline"),r(zs,"class","inline"),r(Ks,"class","inline"),r(Qs,"class","inline"),r(E,"href","#1-name-of-a-module-system-commonjs-commonjs2-amd-umd"),r(E,"id","1-name-of-a-module-system-commonjs-commonjs2-amd-umd"),r(Ys,"class","inline"),r(Zs,"class","code-section"),r(Js,"class","inline"),r(Xs,"class","inline"),r(se,"class","inline"),r(ee,"class","inline"),r(oe,"class","inline"),r(is,"href","https://github.com/webpack/webpack/issues/1114"),r(is,"rel","nofollow"),r(te,"class","inline"),r(ae,"class","inline"),r(ne,"class","inline"),r(le,"class","inline"),r(re,"class","inline"),r(b,"href","#2-name-of-a-variable-var-this-self-window-global"),r(b,"id","2-name-of-a-variable-var-this-self-window-global"),r(ie,"class","inline"),r(pe,"class","code-section"),r(ce,"class","inline"),r(he,"class","inline"),r(ke,"class","inline"),r(ye,"class","inline"),r(de,"class","inline"),r(ve,"class","inline"),r(ue,"class","code-section"),r(fe,"class","inline"),r(me,"class","inline"),r(xe,"class","code-section"),r(be,"class","inline"),r(we,"class","inline"),r(ge,"class","inline"),r(Ee,"class","code-section"),r(_e,"class","code-section"),r(ks,"href","https://webpack.js.org/configuration/output/"),r(ks,"rel","nofollow"),r(ys,"href","#writing-a-webpack-plugin"),r(ys,"id","writing-a-webpack-plugin"),r(ds,"href","https://github.com/webpack/webpack"),r(ds,"rel","nofollow"),r(vs,"href","https://github.com/webpack/webpack/blob/master/lib/LibraryTemplatePlugin.js"),r(vs,"rel","nofollow"),r(Te,"class","inline"),r(Ie,"class","code-section"),r(fs,"href","https://github.com/webpack/webpack/blob/master/lib/SetVarTemplatePlugin.js"),r(fs,"rel","nofollow"),r(Pe,"class","code-section"),r(De,"class","inline"),r(Ce,"class","inline"),r(Oe,"class","inline"),r(je,"class","inline"),r(Se,"class","inline"),r(Ae,"class","code-section"),r(Le,"class","code-section"),r(ms,"href","https://github.com/webpack/webpack/blob/master/lib/SetVarTemplatePlugin.js"),r(ms,"rel","nofollow"),r(Ve,"class","inline"),r(Me,"class","inline"),r(Ne,"class","inline"),r(He,"class","code-section"),r(Re,"class","inline"),r(We,"class","inline"),r($e,"class","code-section"),r(ws,"href","https://github.com/webpack/webpack/blob/master/lib/LibraryTemplatePlugin.js"),r(ws,"rel","nofollow"),r(gs,"href","https://github.com/webpack/webpack/blob/master/lib/SetVarTemplatePlugin.js"),r(gs,"rel","nofollow"),r(Be,"class","code-section"),r(Ue,"class","inline"),r(Cs,"href","https://gist.github.com/tanhauhau/b6b355fbbabe224c9242a5257baa4dec"),r(Cs,"rel","nofollow"),r(Fe,"class","inline"),r(Ge,"class","inline"),r(Ss,"href","#closing-note"),r(Ss,"id","closing-note"),r(ze,"href","/what-is-module-bundler-and-how-does-it-work/")},m(i,d){Ep(f,i,d),u(i,P,d),u(i,T,d),s(T,Z),u(i,m,d),u(i,g,d),g.innerHTML=Ao,u(i,Lo,d),u(i,U,d),s(U,dt),s(U,Ms),s(Ms,vt),s(U,ut),u(i,qo,d),u(i,J,d),J.innerHTML=Pp,u(i,Vo,d),u(i,F,d),s(F,ft),s(F,Ns),s(Ns,mt),s(F,xt),u(i,Mo,d),u(i,X,d),X.innerHTML=Dp,u(i,No,d),u(i,Hs,d),s(Hs,ss),s(ss,bt),s(ss,Rs),s(Rs,wt),s(ss,gt),u(i,Ho,d),u(i,Ws,d),s(Ws,Et),u(i,Ro,d),u(i,A,d),s(A,oo),s(oo,es),s(es,_t),s(A,Tt),s(A,to),s(to,os),s(os,It),s(A,Pt),s(A,ao),s(ao,ts),s(ts,Dt),u(i,Wo,d),u(i,L,d),s(L,no),s(no,as),s(as,Ct),s(L,Ot),s(L,ns),s(ns,jt),s(ns,$s),s($s,St),s(ns,At),s(L,Lt),s(L,q),s(q,Bs),s(Bs,qt),s(q,Vt),s(q,Us),s(Us,Mt),s(q,Nt),s(q,Fs),s(Fs,Ht),s(q,Rt),u(i,$o,d),u(i,x,d),s(x,lo),s(lo,E),s(E,Wt),s(E,Gs),s(Gs,$t),s(E,Bt),s(E,zs),s(zs,Ut),s(E,Ft),s(E,Ks),s(Ks,Gt),s(E,zt),s(E,Qs),s(Qs,Kt),s(E,Qt),s(x,Yt),s(x,ro),s(ro,Zt),s(x,Jt),s(x,io),s(io,Xt),s(x,sa),s(x,ls),s(ls,ea),s(ls,Ys),s(Ys,oa),s(ls,ta),s(x,aa),s(x,Zs),Zs.innerHTML=Cp,s(x,na),s(x,V),s(V,Js),s(Js,la),s(V,ra),s(V,Xs),s(Xs,ia),s(V,pa),s(V,se),s(se,ca),s(V,ha),s(x,ka),s(x,H),s(H,ya),s(H,ee),s(ee,da),s(H,va),s(H,oe),s(oe,ua),s(H,fa),s(x,ma),s(x,po),s(po,rs),s(rs,xa),s(rs,is),s(is,ba),s(rs,wa),u(i,Bo,d),u(i,y,d),s(y,co),s(co,b),s(b,ga),s(b,te),s(te,Ea),s(b,_a),s(b,ae),s(ae,Ta),s(b,Ia),s(b,ne),s(ne,Pa),s(b,Da),s(b,le),s(le,Ca),s(b,Oa),s(b,re),s(re,ja),s(y,Sa),s(y,ho),s(ho,Aa),s(y,La),s(y,ps),s(ps,qa),s(ps,ie),s(ie,Va),s(ps,Ma),s(y,Na),s(y,pe),pe.innerHTML=Op,s(y,Ha),s(y,cs),s(cs,Ra),s(cs,ce),s(ce,Wa),s(cs,$a),s(y,Ba),s(y,R),s(R,Ua),s(R,he),s(he,Fa),s(R,Ga),s(R,ke),s(ke,za),s(R,Ka),s(y,Qa),s(y,D),s(D,Ya),s(D,ye),s(ye,Za),s(D,Ja),s(D,de),s(de,Xa),s(D,sn),s(D,ve),s(ve,en),s(D,on),s(y,tn),s(y,ue),ue.innerHTML=jp,s(y,an),s(y,W),s(W,nn),s(W,fe),s(fe,ln),s(W,rn),s(W,me),s(me,pn),s(W,cn),s(y,hn),s(y,xe),xe.innerHTML=Sp,s(y,kn),s(y,C),s(C,yn),s(C,be),s(be,dn),s(C,vn),s(C,we),s(we,un),s(C,fn),s(C,ge),s(ge,mn),s(C,xn),s(y,bn),s(y,Ee),Ee.innerHTML=Ap,s(y,wn),s(y,ko),s(ko,gn),s(y,En),s(y,_e),_e.innerHTML=Lp,s(y,_n),s(y,hs),s(hs,Tn),s(hs,ks),s(ks,In),s(hs,Pn),u(i,Uo,d),u(i,h,d),s(h,yo),s(yo,ys),s(ys,Dn),s(h,Cn),s(h,O),s(O,On),s(O,ds),s(ds,jn),s(O,Sn),s(O,vs),s(vs,An),s(O,Ln),s(O,Te),s(Te,qn),s(O,Vn),s(h,Mn),s(h,Ie),Ie.innerHTML=qp,s(h,Nn),s(h,us),s(us,Hn),s(us,fs),s(fs,Rn),s(us,Wn),s(h,$n),s(h,Pe),Pe.innerHTML=Vp,s(h,Bn),s(h,_),s(_,Un),s(_,De),s(De,Fn),s(_,Gn),s(_,Ce),s(Ce,zn),s(_,Kn),s(_,Oe),s(Oe,Qn),s(_,Yn),s(_,je),s(je,Zn),s(_,Jn),s(_,Se),s(Se,Xn),s(_,sl),s(h,el),s(h,vo),s(vo,ol),s(h,tl),s(h,Ae),Ae.innerHTML=Mp,s(h,al),s(h,uo),s(uo,nl),s(h,ll),s(h,Le),Le.innerHTML=Np,s(h,rl),s(h,fo),s(fo,il),s(h,pl),s(h,j),s(j,qe),s(qe,cl),s(qe,ms),s(ms,hl),s(j,kl),s(j,mo),s(mo,yl),s(j,dl),s(j,G),s(G,vl),s(G,Ve),s(Ve,ul),s(G,fl),s(G,Me),s(Me,ml),s(j,xl),s(j,xs),s(xs,bl),s(xs,Ne),s(Ne,wl),s(xs,gl),s(h,El),s(h,He),He.innerHTML=Hp,s(h,_l),s(h,bs),s(bs,$),s($,Tl),s($,Re),s(Re,Il),s($,Pl),s($,We),s(We,Dl),s($,Cl),s(bs,Ol),s(bs,xo),s(xo,jl),s(h,Sl),s(h,$e),$e.innerHTML=Rp,s(h,Al),s(h,bo),s(bo,Ll),s(h,ql),s(h,wo),s(wo,Vl),s(h,Ml),s(h,B),s(B,Nl),s(B,ws),s(ws,Hl),s(B,Rl),s(B,gs),s(gs,Wl),s(B,$l),s(h,Bl),s(h,go),s(go,Ul),s(h,Fl),s(h,Be),Be.innerHTML=Wp,s(h,Gl),s(h,Es),s(Es,zl),s(Es,Eo),s(Eo,Kl),s(Es,Ql),s(h,Yl),s(h,_s),s(_s,Ts),s(Ts,Zl),s(Ts,_o),s(_o,Jl),s(Ts,Xl),s(_s,sr),s(_s,To),s(To,Is),s(Is,er),s(Is,Io),s(Io,or),s(Is,tr),s(h,ar),s(h,Ps),s(Ps,nr),s(Ps,Ue),s(Ue,lr),s(Ps,rr),s(h,ir),s(h,Ds),s(Ds,pr),s(Ds,Cs),s(Cs,cr),s(Ds,hr),s(h,kr),s(h,Os),s(Os,yr),s(Os,Fe),s(Fe,dr),s(Os,vr),s(h,ur),s(h,js),s(js,fr),s(js,Ge),s(Ge,mr),s(js,xr),s(h,br),s(h,Po),s(Po,Do),s(Do,wr),u(i,Fo,d),u(i,M,d),s(M,Co),s(Co,Ss),s(Ss,gr),s(M,Er),s(M,Oo),s(Oo,_r),s(M,Tr),s(M,jo),s(jo,As),s(As,Ir),s(As,ze),s(ze,Pr),s(As,Dr),Go=!0},p:pc,i(i){Go||(_p(f.$$.fragment,i),Go=!0)},o(i){Tp(f.$$.fragment,i),Go=!1},d(i){Ip(f,i),i&&e(P),i&&e(T),i&&e(m),i&&e(g),i&&e(Lo),i&&e(U),i&&e(qo),i&&e(J),i&&e(Vo),i&&e(F),i&&e(Mo),i&&e(X),i&&e(No),i&&e(Hs),i&&e(Ho),i&&e(Ws),i&&e(Ro),i&&e(A),i&&e(Wo),i&&e(L),i&&e($o),i&&e(x),i&&e(Bo),i&&e(y),i&&e(Uo),i&&e(h),i&&e(Fo),i&&e(M)}}}function dc(Vs){let f,P;const T=[Vs[0],bp];let Z={$$slots:{default:[yc]},$$scope:{ctx:Vs}};for(let m=0;m<T.length;m+=1)Z=Or(Z,T[m]);return f=new cc({props:Z}),{c(){wp(f.$$.fragment)},l(m){gp(f.$$.fragment,m)},m(m,g){Ep(f,m,g),P=!0},p(m,[g]){const Ao=g&1?rc(T,[g&1&&mp(m[0]),g&0&&mp(bp)]):{};g&2&&(Ao.$$scope={dirty:g,ctx:m}),f.$set(Ao)},i(m){P||(_p(f.$$.fragment,m),P=!0)},o(m){Tp(f.$$.fragment,m),P=!1},d(m){Ip(f,m)}}}const bp={title:"Webpack's TemplatePlugin",date:"2020-01-21T08:00:00Z",label:"blog"};function vc(Vs,f,P){return ic("blog",{image:kc}),Vs.$$set=T=>{P(0,f=Or(Or({},f),xp(T)))},f=xp(f),[f]}class Ec extends ac{constructor(f){super();nc(this,f,vc,dc,lc,{})}}export{Ec as default,bp as metadata};
