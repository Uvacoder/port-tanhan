import{S as Qp,i as Yp,s as Jp,C as Pr,w as Zp,x as Xp,y as sc,z as ec,A as vp,q as oc,o as tc,B as ac,r as nc,Y as up,e as a,t as o,k as p,c as n,a as l,h as t,d as e,m as c,b as r,g as u,H as s,J as lc}from"../../chunks/vendor-da4388d4.js";import{B as rc}from"../../chunks/BlogLayout-d479b777.js";import{_ as ic}from"../../chunks/twitter-card-image-a57df29d.js";import"../../chunks/stores-1fad7c36.js";import"../../chunks/ldjson-b0805387.js";/* empty css                                */function pc(Vs){let f,A,L,I,x=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// weback.config.js</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  entry</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;./src/index.js&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// src/index.js</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">default</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;foo&#39;</span><span style="color: var(--shiki-color-text)">;</span></span></code></pre>`,_,P,ht,Ms,kt,yt,Ao,Z,mp=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">foo</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;./dist/bundle.js&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">console</span><span style="color: var(--shiki-token-function)">.log</span><span style="color: var(--shiki-color-text)">(foo); </span><span style="color: var(--shiki-token-comment)">// prints &#96;&#123;&#125;&#96; (empty object)</span></span></code></pre>`,Lo,G,dt,Ns,vt,ut,qo,X,xp=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// dist/bundle.js</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">webpackStart</span><span style="color: var(--shiki-color-text)">(&#123; moduleMap</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> entryPoint &#125;) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(entryPoint);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;)(&#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-string-expression)">&#39;src/index.js&#39;</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)">(exports</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> require) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)">.default </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;foo&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &#125;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;);</span></span></code></pre>`,Vo,Hs,ss,ft,Ws,mt,xt,Mo,Rs,bt,No,q,oo,es,wt,gt,to,os,Et,_t,ao,ts,Tt,Ho,V,no,as,It,Pt,ns,Dt,Bs,Ct,Ot,jt,M,Us,St,At,$s,Lt,qt,Fs,Vt,Mt,Wo,m,lo,g,Nt,Gs,Ht,Wt,zs,Rt,Bt,Ks,Ut,$t,Qs,Ft,Gt,zt,ro,Kt,Qt,io,Yt,Jt,ls,Zt,Ys,Xt,sa,ea,Js,bp=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line dim"><span style="color: var(--shiki-token-comment)">// webpack.config.js</span></span>
<span class="line dim"><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  libraryTarget</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;commonjs2&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&#125;;</span></span>
<span class="line dim"><span style="color: var(--shiki-token-comment)">// dist/bundle.js</span></span>
<span class="line highlight"><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">webpackStart</span><span style="color: var(--shiki-color-text)">(&#123; moduleMap</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> entryPoint &#125;) &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(entryPoint);</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&#125;)(&#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-string-expression)">&#39;src/index.js&#39;</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)">(exports</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> require) &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)">.default </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;foo&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  &#125;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&#125;);</span></span></code></pre>`,oa,N,Zs,ta,aa,Xs,na,la,se,ra,ia,pa,R,ca,ee,ha,ka,oe,ya,da,va,po,rs,ua,is,fa,ma,Ro,y,co,b,xa,te,ba,wa,ae,ga,Ea,ne,_a,Ta,le,Ia,Pa,re,Da,Ca,ho,Oa,ja,ps,Sa,ie,Aa,La,qa,pe,wp=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line dim"><span style="color: var(--shiki-token-comment)">// webpack.config.js</span></span>
<span class="line dim"><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  libraryTarget</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;self&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&#125;;</span></span>
<span class="line dim"><span style="color: var(--shiki-token-comment)">// dist/bundle.js</span></span>
<span class="line highlight"><span style="color: var(--shiki-token-constant)">Object</span><span style="color: var(--shiki-token-function)">.assign</span><span style="color: var(--shiki-color-text)">(</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">  self</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  (</span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">webpackStart</span><span style="color: var(--shiki-color-text)">(&#123; moduleMap</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> entryPoint &#125;) &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(entryPoint);</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  &#125;)(&#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-string-expression)">&#39;src/index.js&#39;</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)">(exports</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> require) &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)">.default </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;foo&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    &#125;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  &#125;)</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line dim"><span style="color: var(--shiki-token-comment)">// self.default === &#39;foo&#39;</span></span></code></pre>`,Va,cs,Ma,ce,Na,Ha,Wa,B,Ra,he,Ba,Ua,ke,$a,Fa,Ga,D,za,ye,Ka,Qa,de,Ya,Ja,ve,Za,Xa,sn,ue,gp=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line dim"><span style="color: var(--shiki-token-comment)">// webpack.config.js</span></span>
<span class="line dim"><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  library</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;myApp&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  libraryTarget</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;var&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&#125;;</span></span>
<span class="line dim"></span>
<span class="line dim"><span style="color: var(--shiki-token-comment)">// dist/bundle.js</span></span>
<span class="line highlight"><span style="color: var(--shiki-token-keyword)">var</span><span style="color: var(--shiki-color-text)"> myApp </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">webpackStart</span><span style="color: var(--shiki-color-text)">(&#123; moduleMap</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> entryPoint &#125;) &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(entryPoint);</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&#125;)(&#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-string-expression)">&#39;src/index.js&#39;</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)">(exports</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> require) &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)">.default </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;foo&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  &#125;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&#125;);</span></span>
<span class="line dim"></span>
<span class="line dim"><span style="color: var(--shiki-token-comment)">// myApp === &#123; default: &#39;foo&#39; &#125;</span></span></code></pre>`,en,U,on,fe,tn,an,me,nn,ln,rn,xe,Ep=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line dim"><span style="color: var(--shiki-token-comment)">// webpack.config.js</span></span>
<span class="line dim"><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  library</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;myApp&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  libraryTarget</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;var&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  libraryExport</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;default&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&#125;;</span></span>
<span class="line dim"></span>
<span class="line dim"><span style="color: var(--shiki-token-comment)">// dist/bundle.js</span></span>
<span class="line dim"><span style="color: var(--shiki-token-keyword)">var</span><span style="color: var(--shiki-color-text)"> myApp </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">webpackStart</span><span style="color: var(--shiki-color-text)">(&#123; moduleMap</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> entryPoint &#125;) &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(entryPoint);</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&#125;)(&#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-string-expression)">&#39;src/index.js&#39;</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)">(exports</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> require) &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)">.default </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;foo&#39;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  &#125;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">&#125;).default;</span></span>
<span class="line dim"></span>
<span class="line dim"><span style="color: var(--shiki-token-comment)">// myApp === &#39;foo&#39;</span></span></code></pre>`,pn,C,cn,be,hn,kn,we,yn,dn,ge,vn,un,fn,Ee,_p=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// libraryTarget: &#39;commonjs2&#39;:</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> &#123;&#123;BUNDLED_CODE&#125;&#125;;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// libraryTarget: &#39;self&#39;:</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">Object</span><span style="color: var(--shiki-token-function)">.assign</span><span style="color: var(--shiki-color-text)">(self</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> &#123;&#123;BUNDLED_CODE&#125;&#125;);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// library: &#39;myApp&#39;, libraryTarget: &#39;var&#39;:</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">var</span><span style="color: var(--shiki-color-text)"> myApp </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> &#123;&#123;BUNDLED_CODE&#125;&#125;;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// library: &#39;myApp&#39;, libraryTarget: &#39;var&#39;, libraryExport: &#39;default&#39;:</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">var</span><span style="color: var(--shiki-color-text)"> myApp </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> &#123;&#123;BUNDLED_CODE&#125;&#125;.default;</span></span></code></pre>`,mn,ko,xn,bn,_e,Tp=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// libraryTarget: ???</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">customRegistry</span><span style="color: var(--shiki-token-function)">.register</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;my-app&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> &#123;&#123;BUNDLED_CODE&#125;&#125;);</span></span></code></pre>`,wn,hs,gn,ks,En,_n,Bo,h,yo,ys,Tn,In,O,Pn,ds,Dn,Cn,vs,On,jn,Te,Sn,An,Ln,Ie,Ip=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// webpack/lib/LibraryTemplatePlugin.js</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">class</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">LibraryTemplatePlugin</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">apply</span><span style="color: var(--shiki-color-text)"> (compiler) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">switch</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-constant)">this</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">options</span><span style="color: var(--shiki-color-text)">.libraryTarget) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">case</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;amd&#39;</span><span style="color: var(--shiki-color-text)">:</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">case</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;amd-require&#39;</span><span style="color: var(--shiki-color-text)">:</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">AmdTemplatePlugin</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-comment)">/*...*/</span><span style="color: var(--shiki-color-text)">)</span><span style="color: var(--shiki-token-function)">.apply</span><span style="color: var(--shiki-color-text)">(compiler);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">break</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">case</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;var&#39;</span><span style="color: var(--shiki-color-text)">:</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">SetVarTemplatePlugin</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-comment)">/*...*/</span><span style="color: var(--shiki-color-text)">)</span><span style="color: var(--shiki-token-function)">.apply</span><span style="color: var(--shiki-color-text)">(compiler);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">break</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">case</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;this&#39;</span><span style="color: var(--shiki-color-text)">:</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">case</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;self&#39;</span><span style="color: var(--shiki-color-text)">:</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">case</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;window&#39;</span><span style="color: var(--shiki-color-text)">:</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">SetVarTemplatePlugin</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-comment)">/*...*/</span><span style="color: var(--shiki-color-text)">)</span><span style="color: var(--shiki-token-function)">.apply</span><span style="color: var(--shiki-color-text)">(compiler);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">break</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre>`,qn,us,Vn,fs,Mn,Nn,Hn,Pe,Pp=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line dim"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> &#123; </span><span style="color: var(--shiki-token-constant)">ConcatSource</span><span style="color: var(--shiki-color-text)"> &#125; </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;webpack-sources&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line dim"></span>
<span class="line dim"><span style="color: var(--shiki-token-keyword)">class</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">SetVarTemplatePlugin</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">apply</span><span style="color: var(--shiki-color-text)">(compiler) &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-constant)">compiler</span><span style="color: var(--shiki-token-function)">.</span><span style="color: var(--shiki-token-constant)">hooks</span><span style="color: var(--shiki-token-function)">.</span><span style="color: var(--shiki-token-constant)">thisCompilation</span><span style="color: var(--shiki-token-function)">.tap</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;SetVarTemplatePlugin&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> compilation </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-constant)">hooks</span><span style="color: var(--shiki-token-function)">.</span><span style="color: var(--shiki-token-constant)">render</span><span style="color: var(--shiki-token-function)">.tap</span><span style="color: var(--shiki-color-text)">(</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-string-expression)">&#39;SetVarTemplatePlugin&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">        (source</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> &#123; chunk</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> chunkGraph &#125;) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">          </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">          </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">prefix</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#96;</span><span style="color: var(--shiki-token-keyword)">$&#123;</span><span style="color: var(--shiki-color-text)">varExpression</span><span style="color: var(--shiki-token-keyword)">&#125;</span><span style="color: var(--shiki-token-string-expression)"> =&#96;</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">          </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">ConcatSource</span><span style="color: var(--shiki-color-text)">(prefix</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> source);</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">        &#125;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">      );</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    &#125;);</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  &#125;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre>`,Wn,E,Rn,De,Bn,Un,Ce,$n,Fn,Oe,Gn,zn,je,Kn,Qn,Se,Yn,Jn,Zn,vo,Xn,sl,Ae,Dp='<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-constant)">customRegistry</span><span style="color: var(--shiki-token-function)">.register</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;my-app&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> &#123;&#123;BUNDLED_CODE&#125;&#125;);</span></span></code></pre>',el,uo,ol,tl,Le,Cp='<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">ConcatSource</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#96;customRegistry.register(&#39;my-app&#39;, &#96;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> source</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;)&#39;</span><span style="color: var(--shiki-color-text)">);</span></span></code></pre>',al,fo,nl,ll,j,qe,rl,ms,il,pl,mo,cl,hl,z,kl,Ve,yl,dl,Me,vl,ul,xs,fl,Ne,ml,xl,bl,He,Op='<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">ConcatSource</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#96;customRegistry.register(&#39;my-app&#39;, &#96;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> source</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#39;)&#39;</span><span style="color: var(--shiki-color-text)">);</span></span></code></pre>',wl,bs,$,gl,We,El,_l,Re,Tl,Il,Pl,xo,Dl,Cl,Be,jp=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// webpack.config.js</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">module</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">exports</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  plugins</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> [</span><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">SetModuleTemplatePlugin</span><span style="color: var(--shiki-color-text)">()]</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;;</span></span></code></pre>`,Ol,bo,jl,Sl,wo,Al,Ll,F,ql,ws,Vl,Ml,gs,Nl,Hl,Wl,go,Rl,Bl,Ue,Sp=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">FlagEntryExportAsUsedPlugin</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">require</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;./FlagEntryExportAsUsedPlugin&quot;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">FlagEntryExportAsUsedPlugin</span><span style="color: var(--shiki-color-text)">(</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">this</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">options</span><span style="color: var(--shiki-color-text)">.libraryTarget </span><span style="color: var(--shiki-token-keyword)">!==</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;module&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-string-expression)">&quot;used a library export&quot;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">)</span><span style="color: var(--shiki-token-function)">.apply</span><span style="color: var(--shiki-color-text)">(compiler);</span></span></code></pre>`,Ul,Es,$l,Eo,Fl,Gl,zl,_s,Ts,Kl,_o,Ql,Yl,Jl,To,Is,Zl,Io,Xl,sr,er,Ps,or,$e,tr,ar,nr,Ds,lr,Cs,rr,ir,pr,Os,cr,Fe,hr,kr,yr,js,dr,Ge,vr,ur,fr,Po,Do,mr,Uo,H,Co,Ss,xr,br,Oo,wr,gr,jo,As,Er,ze,_r,Tr;return{c(){f=a("p"),A=o("If you are using webpack to bundle your library, you most likely will export something in your entry file:"),L=p(),I=a("div"),_=p(),P=a("p"),ht=o("And if you build it with webpack just like that, out-of-the-box, you may be surprised that if you try to "),Ms=a("code"),kt=o("require()"),yt=o(" the built file, you would find that there's nothing being exported by the built file."),Ao=p(),Z=a("div"),Lo=p(),G=a("p"),dt=o("If you've read "),Ns=a("a"),vt=o("my previous article on writing a module bundler"),ut=o(", you can imagine that the output bundle looks something like this:"),qo=p(),X=a("div"),Vo=p(),Hs=a("p"),ss=a("em"),ft=o("(Everything should be familiar, except the fact that instead of calling "),Ws=a("code"),mt=o("webpackStart"),xt=o(" in a separate statement, I made it into a IIFE (Immediately Invoked Function Expression) for reasons that will be apparent later)"),Mo=p(),Rs=a("p"),bt=o("In order to build for a library, ie: to expose whatever is exported by the entry file, webpack provides 3 options that you can play with:"),No=p(),q=a("ul"),oo=a("li"),es=a("a"),wt=o("output.library"),gt=p(),to=a("li"),os=a("a"),Et=o("output.libraryExport"),_t=p(),ao=a("li"),ts=a("a"),Tt=o("output.libraryTarget"),Ho=p(),V=a("section"),no=a("h2"),as=a("a"),It=o("Webpack's output.library* options"),Pt=p(),ns=a("p"),Dt=o("To understand how each of them works, let's start with "),Bs=a("code"),Ct=o("output.libraryTarget"),Ot=o("."),jt=p(),M=a("p"),Us=a("code"),St=o("output.libraryTarget"),At=o(" accepts "),$s=a("code"),Lt=o("string"),qt=o(" as value, there are 2 main groups of values that you can provide to the "),Fs=a("code"),Vt=o("output.libraryTarget"),Mt=o(" option:"),Wo=p(),m=a("section"),lo=a("h3"),g=a("a"),Nt=o("1. Name of a module system: "),Gs=a("code"),Ht=o('"commonjs"'),Wt=o(", "),zs=a("code"),Rt=o('"commonjs2"'),Bt=o(", "),Ks=a("code"),Ut=o('"amd"'),$t=o(", "),Qs=a("code"),Ft=o('"umd"'),Gt=o(", ..."),zt=p(),ro=a("p"),Kt=o("Webpack allows you to specify the name of the module system that you want to use to expose the exported values of the entry file."),Qt=p(),io=a("p"),Yt=o("You can specify a module system that is different from the one that you are using in your library."),Jt=p(),ls=a("p"),Zt=o("Let's try "),Ys=a("code"),Xt=o("commonjs2"),sa=o(" as an example:"),ea=p(),Js=a("div"),oa=p(),N=a("p"),Zs=a("code"),ta=o("commonjs2"),aa=o(" uses "),Xs=a("code"),na=o("module.exports"),la=o(" to export values from a module. In this example, webpack assigns the return value of the IIFE to "),se=a("code"),ra=o("module.exports"),ia=o("."),pa=p(),R=a("p"),ca=o("If you look at the bundled code, it is not much different than the one without specifying "),ee=a("code"),ha=o("output.libraryTarget"),ka=o(". The only difference is that the bundled code is prefixed with "),oe=a("code"),ya=o("module.exports ="),da=o(";"),va=p(),po=a("blockquote"),rs=a("p"),ua=o("By the way, if you are curious about the difference between commonjs and commonjs2, you can follow the thread of "),is=a("a"),fa=o("this issue"),ma=o("."),Ro=p(),y=a("section"),co=a("h3"),b=a("a"),xa=o("2. Name of a variable: "),te=a("code"),ba=o('"var"'),wa=o(", "),ae=a("code"),ga=o('"this"'),Ea=o(", "),ne=a("code"),_a=o('"self"'),Ta=o(", "),le=a("code"),Ia=o('"window"'),Pa=o(", "),re=a("code"),Da=o('"global"'),Ca=p(),ho=a("p"),Oa=o("On the other hand, instead of exposing the library content through a module system, you can specify the variable name which the export object is assigned to."),ja=p(),ps=a("p"),Sa=o("Let's take "),ie=a("code"),Aa=o("self"),La=o(" as an example:"),qa=p(),pe=a("div"),Va=p(),cs=a("p"),Ma=o("All the exported values are assigned to "),ce=a("code"),Na=o("self"),Ha=o("."),Wa=p(),B=a("p"),Ra=o("Again observe the bundled code, this time round we prefixed the bundled code with "),he=a("code"),Ba=o("Object.assign(self,"),Ua=o(" and suffixed it with "),ke=a("code"),$a=o(");"),Fa=o("."),Ga=p(),D=a("p"),za=o("Specifiying the "),ye=a("code"),Ka=o("output.libraryTarget"),Qa=o(" as "),de=a("code"),Ya=o("var"),Ja=o(" on the other hand, allows you to assign it to a variable name, which you can provide in "),ve=a("code"),Za=o("output.library"),Xa=o(" option:"),sn=p(),ue=a("div"),en=p(),U=a("p"),on=o("If you don't want "),fe=a("code"),tn=o("myApp"),an=o(" to contain all the exported value of the entry file, you can provide the key that you want to export only in the "),me=a("code"),nn=o("output.libraryExport"),ln=o(" option:"),rn=p(),xe=a("div"),pn=p(),C=a("p"),cn=o("Again you can observe that by playing different option values of "),be=a("code"),hn=o("output.library"),kn=o(", "),we=a("code"),yn=o("output.libraryTarget"),dn=o(", "),ge=a("code"),vn=o("output.libraryExport"),un=o(", webpack adds different prefix and suffix to the bundled code:"),fn=p(),Ee=a("div"),mn=p(),ko=a("p"),xn=o("So, instead of using the webpack built-in library targets, what should we do if we want to support a custom library target that looks something like below:"),bn=p(),_e=a("div"),wn=p(),hs=a("p"),gn=o("I searched through the "),ks=a("a"),En=o("webpack official docs"),_n=o(" and found no options that allows that. So the only solution at the moment is to write a webpack plugin."),Bo=p(),h=a("section"),yo=a("h2"),ys=a("a"),Tn=o("Writing a webpack plugin"),In=p(),O=a("p"),Pn=o("After digging around the "),ds=a("a"),Dn=o("webpack source code"),Cn=o(", I found out that "),vs=a("a"),On=o("LibraryTemplatePlugin"),jn=o(" instantiates different TemplatePlugins based on the value of the "),Te=a("code"),Sn=o("output.libraryTarget"),An=o(" option:"),Ln=p(),Ie=a("div"),qn=p(),us=a("p"),Vn=o("I went to look into one of the TemplatePlugins, the "),fs=a("a"),Mn=o("SetVarTemplatePlugin"),Nn=o(":"),Hn=p(),Pe=a("div"),Wn=p(),E=a("p"),Rn=o("I don't understand line-by-line everything that happened in the file, but I do know that the line highlighted above, is where webpack concats the "),De=a("code"),Bn=o("varExpression ="),Un=o(" (in the case of "),Ce=a("code"),$n=o("commonjs"),Fn=o(", "),Oe=a("code"),Gn=o("varExpression"),zn=o(" is "),je=a("code"),Kn=o("module.exports"),Qn=o(", thus "),Se=a("code"),Yn=o("module.exports ="),Jn=o(") and the source (which in this case is the bundled code)."),Zn=p(),vo=a("p"),Xn=o("So, to have the following:"),sl=p(),Ae=a("div"),el=p(),uo=a("p"),ol=o("we need:"),tl=p(),Le=a("div"),al=p(),fo=a("p"),nl=o("So, I did the following:"),ll=p(),j=a("ol"),qe=a("li"),rl=o("Created a new file and pasted the entire source from "),ms=a("a"),il=o("SetVarTemplatePlugin.js"),pl=p(),mo=a("li"),cl=o("Searched + replaced to rename the plugin name to something more appropriate, (SetModuleTemplatePlugin)"),hl=p(),z=a("li"),kl=o("Replaced relative import, "),Ve=a("code"),yl=o('require("./RuntimeGlobals")'),dl=o(" to require from webpack, "),Me=a("code"),vl=o('require("webpack/lib/RuntimeGlobals")'),ul=p(),xs=a("li"),fl=o("Replaced the line "),Ne=a("code"),ml=o("return new ConcatSource(prefix, source);"),xl=o(" to the following:"),bl=p(),He=a("div"),wl=p(),bs=a("ol"),$=a("li"),gl=o("Removed "),We=a("code"),El=o("output.library"),_l=o(", "),Re=a("code"),Tl=o("output.libraryTarget"),Il=o(" from webpack config"),Pl=p(),xo=a("li"),Dl=o("Added my new plugin:"),Cl=p(),Be=a("div"),Ol=p(),bo=a("p"),jl=o("To my surprise, it worked! Almost."),Sl=p(),wo=a("p"),Al=o("When I run the bundled code, the customRegistry registered an empty object, nothing is exported from the bundled code."),Ll=p(),F=a("p"),ql=o("I went into "),ws=a("a"),Vl=o("LibraryTemplatePlugin.js"),Ml=o(" to look about, because that's the most obvious place to start looking, since I've copied line-by-line from "),gs=a("a"),Nl=o("SetVarTemplatePlugin.js"),Hl=o("."),Wl=p(),go=a("p"),Rl=o("I found a pretty obvious line that says:"),Bl=p(),Ue=a("div"),Ul=p(),Es=a("p"),$l=o("If I would have to guess, I think that what this line is doing is to mark the export of the entry file as used, so that webpack would not "),Eo=a("em"),Fl=o("treeshake them away"),Gl=o("."),zl=p(),_s=a("blockquote"),Ts=a("p"),Kl=o("Which, "),_o=a("strong"),Ql=o("treeshake"),Yl=o(" is a cool word that means remove them."),Jl=p(),To=a("blockquote"),Is=a("p"),Zl=o("Which you could argue that "),Io=a("strong"),Xl=o("treeshake"),sr=o(" does way more that just remove the entry exports, it removes things that is only used by the entry exports, recursively."),er=p(),Ps=a("p"),or=o("I added these 2 lines into my "),$e=a("code"),tr=o("SetModuleTemplatePlugin"),ar=o(", and it worked! Perfectly this time. \u{1F389}"),nr=p(),Ds=a("p"),lr=o("I created "),Cs=a("a"),rr=o("a gist"),ir=o(" for the complete code, if you are lazy."),pr=p(),Os=a("p"),cr=o("Lastly, if you noticed, this example is based on the latest master webpack source (at the time writing), which is "),Fe=a("code"),hr=o("webpack@5.0.0-beta.12"),kr=o("."),yr=p(),js=a("p"),dr=o("If you want a similar plugin with "),Ge=a("code"),vr=o("webpack^4"),ur=o(", you can trust me that this article serves as a good enough entry point for you to write the plugin on your own."),fr=p(),Po=a("p"),Do=a("strong"),mr=o("And I trust you that you can do it. \u{1F60E}"),Uo=p(),H=a("section"),Co=a("h2"),Ss=a("a"),xr=o("Closing Note"),br=p(),Oo=a("p"),wr=o("Writing a webpack plugin is not impossible. It will especially be easier if you have a good understanding how webpack as a bundler works."),gr=p(),jo=a("p"),As=a("em"),Er=o("(Plug: if you want to know more, you can read my "),ze=a("a"),_r=o('"What is module bundler and how does it work?"'),Tr=o(")"),this.h()},l(i){f=n(i,"P",{});var d=l(f);A=t(d,"If you are using webpack to bundle your library, you most likely will export something in your entry file:"),d.forEach(e),L=c(i),I=n(i,"DIV",{class:!0});var Ap=l(I);Ap.forEach(e),_=c(i),P=n(i,"P",{});var $o=l(P);ht=t($o,"And if you build it with webpack just like that, out-of-the-box, you may be surprised that if you try to "),Ms=n($o,"CODE",{class:!0});var Dr=l(Ms);kt=t(Dr,"require()"),Dr.forEach(e),yt=t($o," the built file, you would find that there's nothing being exported by the built file."),$o.forEach(e),Ao=c(i),Z=n(i,"DIV",{class:!0});var Lp=l(Z);Lp.forEach(e),Lo=c(i),G=n(i,"P",{});var Fo=l(G);dt=t(Fo,"If you've read "),Ns=n(Fo,"A",{href:!0});var Cr=l(Ns);vt=t(Cr,"my previous article on writing a module bundler"),Cr.forEach(e),ut=t(Fo,", you can imagine that the output bundle looks something like this:"),Fo.forEach(e),qo=c(i),X=n(i,"DIV",{class:!0});var qp=l(X);qp.forEach(e),Vo=c(i),Hs=n(i,"P",{});var Or=l(Hs);ss=n(Or,"EM",{});var Go=l(ss);ft=t(Go,"(Everything should be familiar, except the fact that instead of calling "),Ws=n(Go,"CODE",{class:!0});var jr=l(Ws);mt=t(jr,"webpackStart"),jr.forEach(e),xt=t(Go," in a separate statement, I made it into a IIFE (Immediately Invoked Function Expression) for reasons that will be apparent later)"),Go.forEach(e),Or.forEach(e),Mo=c(i),Rs=n(i,"P",{});var Sr=l(Rs);bt=t(Sr,"In order to build for a library, ie: to expose whatever is exported by the entry file, webpack provides 3 options that you can play with:"),Sr.forEach(e),No=c(i),q=n(i,"UL",{});var Ke=l(q);oo=n(Ke,"LI",{});var Ar=l(oo);es=n(Ar,"A",{href:!0,rel:!0});var Lr=l(es);wt=t(Lr,"output.library"),Lr.forEach(e),Ar.forEach(e),gt=c(Ke),to=n(Ke,"LI",{});var qr=l(to);os=n(qr,"A",{href:!0,rel:!0});var Vr=l(os);Et=t(Vr,"output.libraryExport"),Vr.forEach(e),qr.forEach(e),_t=c(Ke),ao=n(Ke,"LI",{});var Mr=l(ao);ts=n(Mr,"A",{href:!0,rel:!0});var Nr=l(ts);Tt=t(Nr,"output.libraryTarget"),Nr.forEach(e),Mr.forEach(e),Ke.forEach(e),Ho=c(i),V=n(i,"SECTION",{});var Qe=l(V);no=n(Qe,"H2",{});var Hr=l(no);as=n(Hr,"A",{href:!0,id:!0});var Wr=l(as);It=t(Wr,"Webpack's output.library* options"),Wr.forEach(e),Hr.forEach(e),Pt=c(Qe),ns=n(Qe,"P",{});var zo=l(ns);Dt=t(zo,"To understand how each of them works, let's start with "),Bs=n(zo,"CODE",{class:!0});var Rr=l(Bs);Ct=t(Rr,"output.libraryTarget"),Rr.forEach(e),Ot=t(zo,"."),zo.forEach(e),jt=c(Qe),M=n(Qe,"P",{});var Ls=l(M);Us=n(Ls,"CODE",{class:!0});var Br=l(Us);St=t(Br,"output.libraryTarget"),Br.forEach(e),At=t(Ls," accepts "),$s=n(Ls,"CODE",{class:!0});var Ur=l($s);Lt=t(Ur,"string"),Ur.forEach(e),qt=t(Ls," as value, there are 2 main groups of values that you can provide to the "),Fs=n(Ls,"CODE",{class:!0});var $r=l(Fs);Vt=t($r,"output.libraryTarget"),$r.forEach(e),Mt=t(Ls," option:"),Ls.forEach(e),Qe.forEach(e),Wo=c(i),m=n(i,"SECTION",{});var w=l(m);lo=n(w,"H3",{});var Fr=l(lo);g=n(Fr,"A",{href:!0,id:!0});var W=l(g);Nt=t(W,"1. Name of a module system: "),Gs=n(W,"CODE",{class:!0});var Gr=l(Gs);Ht=t(Gr,'"commonjs"'),Gr.forEach(e),Wt=t(W,", "),zs=n(W,"CODE",{class:!0});var zr=l(zs);Rt=t(zr,'"commonjs2"'),zr.forEach(e),Bt=t(W,", "),Ks=n(W,"CODE",{class:!0});var Kr=l(Ks);Ut=t(Kr,'"amd"'),Kr.forEach(e),$t=t(W,", "),Qs=n(W,"CODE",{class:!0});var Qr=l(Qs);Ft=t(Qr,'"umd"'),Qr.forEach(e),Gt=t(W,", ..."),W.forEach(e),Fr.forEach(e),zt=c(w),ro=n(w,"P",{});var Yr=l(ro);Kt=t(Yr,"Webpack allows you to specify the name of the module system that you want to use to expose the exported values of the entry file."),Yr.forEach(e),Qt=c(w),io=n(w,"P",{});var Jr=l(io);Yt=t(Jr,"You can specify a module system that is different from the one that you are using in your library."),Jr.forEach(e),Jt=c(w),ls=n(w,"P",{});var Ko=l(ls);Zt=t(Ko,"Let's try "),Ys=n(Ko,"CODE",{class:!0});var Zr=l(Ys);Xt=t(Zr,"commonjs2"),Zr.forEach(e),sa=t(Ko," as an example:"),Ko.forEach(e),ea=c(w),Js=n(w,"DIV",{class:!0});var Vp=l(Js);Vp.forEach(e),oa=c(w),N=n(w,"P",{});var qs=l(N);Zs=n(qs,"CODE",{class:!0});var Xr=l(Zs);ta=t(Xr,"commonjs2"),Xr.forEach(e),aa=t(qs," uses "),Xs=n(qs,"CODE",{class:!0});var si=l(Xs);na=t(si,"module.exports"),si.forEach(e),la=t(qs," to export values from a module. In this example, webpack assigns the return value of the IIFE to "),se=n(qs,"CODE",{class:!0});var ei=l(se);ra=t(ei,"module.exports"),ei.forEach(e),ia=t(qs,"."),qs.forEach(e),pa=c(w),R=n(w,"P",{});var Ye=l(R);ca=t(Ye,"If you look at the bundled code, it is not much different than the one without specifying "),ee=n(Ye,"CODE",{class:!0});var oi=l(ee);ha=t(oi,"output.libraryTarget"),oi.forEach(e),ka=t(Ye,". The only difference is that the bundled code is prefixed with "),oe=n(Ye,"CODE",{class:!0});var ti=l(oe);ya=t(ti,"module.exports ="),ti.forEach(e),da=t(Ye,";"),Ye.forEach(e),va=c(w),po=n(w,"BLOCKQUOTE",{});var ai=l(po);rs=n(ai,"P",{});var Qo=l(rs);ua=t(Qo,"By the way, if you are curious about the difference between commonjs and commonjs2, you can follow the thread of "),is=n(Qo,"A",{href:!0,rel:!0});var ni=l(is);fa=t(ni,"this issue"),ni.forEach(e),ma=t(Qo,"."),Qo.forEach(e),ai.forEach(e),w.forEach(e),Ro=c(i),y=n(i,"SECTION",{});var v=l(y);co=n(v,"H3",{});var li=l(co);b=n(li,"A",{href:!0,id:!0});var S=l(b);xa=t(S,"2. Name of a variable: "),te=n(S,"CODE",{class:!0});var ri=l(te);ba=t(ri,'"var"'),ri.forEach(e),wa=t(S,", "),ae=n(S,"CODE",{class:!0});var ii=l(ae);ga=t(ii,'"this"'),ii.forEach(e),Ea=t(S,", "),ne=n(S,"CODE",{class:!0});var pi=l(ne);_a=t(pi,'"self"'),pi.forEach(e),Ta=t(S,", "),le=n(S,"CODE",{class:!0});var ci=l(le);Ia=t(ci,'"window"'),ci.forEach(e),Pa=t(S,", "),re=n(S,"CODE",{class:!0});var hi=l(re);Da=t(hi,'"global"'),hi.forEach(e),S.forEach(e),li.forEach(e),Ca=c(v),ho=n(v,"P",{});var ki=l(ho);Oa=t(ki,"On the other hand, instead of exposing the library content through a module system, you can specify the variable name which the export object is assigned to."),ki.forEach(e),ja=c(v),ps=n(v,"P",{});var Yo=l(ps);Sa=t(Yo,"Let's take "),ie=n(Yo,"CODE",{class:!0});var yi=l(ie);Aa=t(yi,"self"),yi.forEach(e),La=t(Yo," as an example:"),Yo.forEach(e),qa=c(v),pe=n(v,"DIV",{class:!0});var Mp=l(pe);Mp.forEach(e),Va=c(v),cs=n(v,"P",{});var Jo=l(cs);Ma=t(Jo,"All the exported values are assigned to "),ce=n(Jo,"CODE",{class:!0});var di=l(ce);Na=t(di,"self"),di.forEach(e),Ha=t(Jo,"."),Jo.forEach(e),Wa=c(v),B=n(v,"P",{});var Je=l(B);Ra=t(Je,"Again observe the bundled code, this time round we prefixed the bundled code with "),he=n(Je,"CODE",{class:!0});var vi=l(he);Ba=t(vi,"Object.assign(self,"),vi.forEach(e),Ua=t(Je," and suffixed it with "),ke=n(Je,"CODE",{class:!0});var ui=l(ke);$a=t(ui,");"),ui.forEach(e),Fa=t(Je,"."),Je.forEach(e),Ga=c(v),D=n(v,"P",{});var K=l(D);za=t(K,"Specifiying the "),ye=n(K,"CODE",{class:!0});var fi=l(ye);Ka=t(fi,"output.libraryTarget"),fi.forEach(e),Qa=t(K," as "),de=n(K,"CODE",{class:!0});var mi=l(de);Ya=t(mi,"var"),mi.forEach(e),Ja=t(K," on the other hand, allows you to assign it to a variable name, which you can provide in "),ve=n(K,"CODE",{class:!0});var xi=l(ve);Za=t(xi,"output.library"),xi.forEach(e),Xa=t(K," option:"),K.forEach(e),sn=c(v),ue=n(v,"DIV",{class:!0});var Np=l(ue);Np.forEach(e),en=c(v),U=n(v,"P",{});var Ze=l(U);on=t(Ze,"If you don't want "),fe=n(Ze,"CODE",{class:!0});var bi=l(fe);tn=t(bi,"myApp"),bi.forEach(e),an=t(Ze," to contain all the exported value of the entry file, you can provide the key that you want to export only in the "),me=n(Ze,"CODE",{class:!0});var wi=l(me);nn=t(wi,"output.libraryExport"),wi.forEach(e),ln=t(Ze," option:"),Ze.forEach(e),rn=c(v),xe=n(v,"DIV",{class:!0});var Hp=l(xe);Hp.forEach(e),pn=c(v),C=n(v,"P",{});var Q=l(C);cn=t(Q,"Again you can observe that by playing different option values of "),be=n(Q,"CODE",{class:!0});var gi=l(be);hn=t(gi,"output.library"),gi.forEach(e),kn=t(Q,", "),we=n(Q,"CODE",{class:!0});var Ei=l(we);yn=t(Ei,"output.libraryTarget"),Ei.forEach(e),dn=t(Q,", "),ge=n(Q,"CODE",{class:!0});var _i=l(ge);vn=t(_i,"output.libraryExport"),_i.forEach(e),un=t(Q,", webpack adds different prefix and suffix to the bundled code:"),Q.forEach(e),fn=c(v),Ee=n(v,"DIV",{class:!0});var Wp=l(Ee);Wp.forEach(e),mn=c(v),ko=n(v,"P",{});var Ti=l(ko);xn=t(Ti,"So, instead of using the webpack built-in library targets, what should we do if we want to support a custom library target that looks something like below:"),Ti.forEach(e),bn=c(v),_e=n(v,"DIV",{class:!0});var Rp=l(_e);Rp.forEach(e),wn=c(v),hs=n(v,"P",{});var Zo=l(hs);gn=t(Zo,"I searched through the "),ks=n(Zo,"A",{href:!0,rel:!0});var Ii=l(ks);En=t(Ii,"webpack official docs"),Ii.forEach(e),_n=t(Zo," and found no options that allows that. So the only solution at the moment is to write a webpack plugin."),Zo.forEach(e),v.forEach(e),Bo=c(i),h=n(i,"SECTION",{});var k=l(h);yo=n(k,"H2",{});var Pi=l(yo);ys=n(Pi,"A",{href:!0,id:!0});var Di=l(ys);Tn=t(Di,"Writing a webpack plugin"),Di.forEach(e),Pi.forEach(e),In=c(k),O=n(k,"P",{});var Y=l(O);Pn=t(Y,"After digging around the "),ds=n(Y,"A",{href:!0,rel:!0});var Ci=l(ds);Dn=t(Ci,"webpack source code"),Ci.forEach(e),Cn=t(Y,", I found out that "),vs=n(Y,"A",{href:!0,rel:!0});var Oi=l(vs);On=t(Oi,"LibraryTemplatePlugin"),Oi.forEach(e),jn=t(Y," instantiates different TemplatePlugins based on the value of the "),Te=n(Y,"CODE",{class:!0});var ji=l(Te);Sn=t(ji,"output.libraryTarget"),ji.forEach(e),An=t(Y," option:"),Y.forEach(e),Ln=c(k),Ie=n(k,"DIV",{class:!0});var Bp=l(Ie);Bp.forEach(e),qn=c(k),us=n(k,"P",{});var Xo=l(us);Vn=t(Xo,"I went to look into one of the TemplatePlugins, the "),fs=n(Xo,"A",{href:!0,rel:!0});var Si=l(fs);Mn=t(Si,"SetVarTemplatePlugin"),Si.forEach(e),Nn=t(Xo,":"),Xo.forEach(e),Hn=c(k),Pe=n(k,"DIV",{class:!0});var Up=l(Pe);Up.forEach(e),Wn=c(k),E=n(k,"P",{});var T=l(E);Rn=t(T,"I don't understand line-by-line everything that happened in the file, but I do know that the line highlighted above, is where webpack concats the "),De=n(T,"CODE",{class:!0});var Ai=l(De);Bn=t(Ai,"varExpression ="),Ai.forEach(e),Un=t(T," (in the case of "),Ce=n(T,"CODE",{class:!0});var Li=l(Ce);$n=t(Li,"commonjs"),Li.forEach(e),Fn=t(T,", "),Oe=n(T,"CODE",{class:!0});var qi=l(Oe);Gn=t(qi,"varExpression"),qi.forEach(e),zn=t(T," is "),je=n(T,"CODE",{class:!0});var Vi=l(je);Kn=t(Vi,"module.exports"),Vi.forEach(e),Qn=t(T,", thus "),Se=n(T,"CODE",{class:!0});var Mi=l(Se);Yn=t(Mi,"module.exports ="),Mi.forEach(e),Jn=t(T,") and the source (which in this case is the bundled code)."),T.forEach(e),Zn=c(k),vo=n(k,"P",{});var Ni=l(vo);Xn=t(Ni,"So, to have the following:"),Ni.forEach(e),sl=c(k),Ae=n(k,"DIV",{class:!0});var $p=l(Ae);$p.forEach(e),el=c(k),uo=n(k,"P",{});var Hi=l(uo);ol=t(Hi,"we need:"),Hi.forEach(e),tl=c(k),Le=n(k,"DIV",{class:!0});var Fp=l(Le);Fp.forEach(e),al=c(k),fo=n(k,"P",{});var Wi=l(fo);nl=t(Wi,"So, I did the following:"),Wi.forEach(e),ll=c(k),j=n(k,"OL",{});var J=l(j);qe=n(J,"LI",{});var Ir=l(qe);rl=t(Ir,"Created a new file and pasted the entire source from "),ms=n(Ir,"A",{href:!0,rel:!0});var Ri=l(ms);il=t(Ri,"SetVarTemplatePlugin.js"),Ri.forEach(e),Ir.forEach(e),pl=c(J),mo=n(J,"LI",{});var Bi=l(mo);cl=t(Bi,"Searched + replaced to rename the plugin name to something more appropriate, (SetModuleTemplatePlugin)"),Bi.forEach(e),hl=c(J),z=n(J,"LI",{});var So=l(z);kl=t(So,"Replaced relative import, "),Ve=n(So,"CODE",{class:!0});var Ui=l(Ve);yl=t(Ui,'require("./RuntimeGlobals")'),Ui.forEach(e),dl=t(So," to require from webpack, "),Me=n(So,"CODE",{class:!0});var $i=l(Me);vl=t($i,'require("webpack/lib/RuntimeGlobals")'),$i.forEach(e),So.forEach(e),ul=c(J),xs=n(J,"LI",{});var st=l(xs);fl=t(st,"Replaced the line "),Ne=n(st,"CODE",{class:!0});var Fi=l(Ne);ml=t(Fi,"return new ConcatSource(prefix, source);"),Fi.forEach(e),xl=t(st," to the following:"),st.forEach(e),J.forEach(e),bl=c(k),He=n(k,"DIV",{class:!0});var Gp=l(He);Gp.forEach(e),wl=c(k),bs=n(k,"OL",{});var et=l(bs);$=n(et,"LI",{});var Xe=l($);gl=t(Xe,"Removed "),We=n(Xe,"CODE",{class:!0});var Gi=l(We);El=t(Gi,"output.library"),Gi.forEach(e),_l=t(Xe,", "),Re=n(Xe,"CODE",{class:!0});var zi=l(Re);Tl=t(zi,"output.libraryTarget"),zi.forEach(e),Il=t(Xe," from webpack config"),Xe.forEach(e),Pl=c(et),xo=n(et,"LI",{});var Ki=l(xo);Dl=t(Ki,"Added my new plugin:"),Ki.forEach(e),et.forEach(e),Cl=c(k),Be=n(k,"DIV",{class:!0});var zp=l(Be);zp.forEach(e),Ol=c(k),bo=n(k,"P",{});var Qi=l(bo);jl=t(Qi,"To my surprise, it worked! Almost."),Qi.forEach(e),Sl=c(k),wo=n(k,"P",{});var Yi=l(wo);Al=t(Yi,"When I run the bundled code, the customRegistry registered an empty object, nothing is exported from the bundled code."),Yi.forEach(e),Ll=c(k),F=n(k,"P",{});var so=l(F);ql=t(so,"I went into "),ws=n(so,"A",{href:!0,rel:!0});var Ji=l(ws);Vl=t(Ji,"LibraryTemplatePlugin.js"),Ji.forEach(e),Ml=t(so," to look about, because that's the most obvious place to start looking, since I've copied line-by-line from "),gs=n(so,"A",{href:!0,rel:!0});var Zi=l(gs);Nl=t(Zi,"SetVarTemplatePlugin.js"),Zi.forEach(e),Hl=t(so,"."),so.forEach(e),Wl=c(k),go=n(k,"P",{});var Xi=l(go);Rl=t(Xi,"I found a pretty obvious line that says:"),Xi.forEach(e),Bl=c(k),Ue=n(k,"DIV",{class:!0});var Kp=l(Ue);Kp.forEach(e),Ul=c(k),Es=n(k,"P",{});var ot=l(Es);$l=t(ot,"If I would have to guess, I think that what this line is doing is to mark the export of the entry file as used, so that webpack would not "),Eo=n(ot,"EM",{});var sp=l(Eo);Fl=t(sp,"treeshake them away"),sp.forEach(e),Gl=t(ot,"."),ot.forEach(e),zl=c(k),_s=n(k,"BLOCKQUOTE",{});var tt=l(_s);Ts=n(tt,"P",{});var at=l(Ts);Kl=t(at,"Which, "),_o=n(at,"STRONG",{});var ep=l(_o);Ql=t(ep,"treeshake"),ep.forEach(e),Yl=t(at," is a cool word that means remove them."),at.forEach(e),Jl=c(tt),To=n(tt,"BLOCKQUOTE",{});var op=l(To);Is=n(op,"P",{});var nt=l(Is);Zl=t(nt,"Which you could argue that "),Io=n(nt,"STRONG",{});var tp=l(Io);Xl=t(tp,"treeshake"),tp.forEach(e),sr=t(nt," does way more that just remove the entry exports, it removes things that is only used by the entry exports, recursively."),nt.forEach(e),op.forEach(e),tt.forEach(e),er=c(k),Ps=n(k,"P",{});var lt=l(Ps);or=t(lt,"I added these 2 lines into my "),$e=n(lt,"CODE",{class:!0});var ap=l($e);tr=t(ap,"SetModuleTemplatePlugin"),ap.forEach(e),ar=t(lt,", and it worked! Perfectly this time. \u{1F389}"),lt.forEach(e),nr=c(k),Ds=n(k,"P",{});var rt=l(Ds);lr=t(rt,"I created "),Cs=n(rt,"A",{href:!0,rel:!0});var np=l(Cs);rr=t(np,"a gist"),np.forEach(e),ir=t(rt," for the complete code, if you are lazy."),rt.forEach(e),pr=c(k),Os=n(k,"P",{});var it=l(Os);cr=t(it,"Lastly, if you noticed, this example is based on the latest master webpack source (at the time writing), which is "),Fe=n(it,"CODE",{class:!0});var lp=l(Fe);hr=t(lp,"webpack@5.0.0-beta.12"),lp.forEach(e),kr=t(it,"."),it.forEach(e),yr=c(k),js=n(k,"P",{});var pt=l(js);dr=t(pt,"If you want a similar plugin with "),Ge=n(pt,"CODE",{class:!0});var rp=l(Ge);vr=t(rp,"webpack^4"),rp.forEach(e),ur=t(pt,", you can trust me that this article serves as a good enough entry point for you to write the plugin on your own."),pt.forEach(e),fr=c(k),Po=n(k,"P",{});var ip=l(Po);Do=n(ip,"STRONG",{});var pp=l(Do);mr=t(pp,"And I trust you that you can do it. \u{1F60E}"),pp.forEach(e),ip.forEach(e),k.forEach(e),Uo=c(i),H=n(i,"SECTION",{});var eo=l(H);Co=n(eo,"H2",{});var cp=l(Co);Ss=n(cp,"A",{href:!0,id:!0});var hp=l(Ss);xr=t(hp,"Closing Note"),hp.forEach(e),cp.forEach(e),br=c(eo),Oo=n(eo,"P",{});var kp=l(Oo);wr=t(kp,"Writing a webpack plugin is not impossible. It will especially be easier if you have a good understanding how webpack as a bundler works."),kp.forEach(e),gr=c(eo),jo=n(eo,"P",{});var yp=l(jo);As=n(yp,"EM",{});var ct=l(As);Er=t(ct,"(Plug: if you want to know more, you can read my "),ze=n(ct,"A",{href:!0});var dp=l(ze);_r=t(dp,'"What is module bundler and how does it work?"'),dp.forEach(e),Tr=t(ct,")"),ct.forEach(e),yp.forEach(e),eo.forEach(e),this.h()},h(){r(I,"class","code-section"),r(Ms,"class","inline"),r(Z,"class","code-section"),r(Ns,"href","/i-wrote-my-module-bundler/"),r(X,"class","code-section"),r(Ws,"class","inline"),r(es,"href","https://webpack.js.org/configuration/output/#outputlibrary"),r(es,"rel","nofollow"),r(os,"href","https://webpack.js.org/configuration/output/#outputlibraryexport"),r(os,"rel","nofollow"),r(ts,"href","https://webpack.js.org/configuration/output/#outputlibrarytarget"),r(ts,"rel","nofollow"),r(as,"href","#webpack-s-output-library-options"),r(as,"id","webpack-s-output-library-options"),r(Bs,"class","inline"),r(Us,"class","inline"),r($s,"class","inline"),r(Fs,"class","inline"),r(Gs,"class","inline"),r(zs,"class","inline"),r(Ks,"class","inline"),r(Qs,"class","inline"),r(g,"href","#1-name-of-a-module-system-commonjs-commonjs2-amd-umd"),r(g,"id","1-name-of-a-module-system-commonjs-commonjs2-amd-umd"),r(Ys,"class","inline"),r(Js,"class","code-section"),r(Zs,"class","inline"),r(Xs,"class","inline"),r(se,"class","inline"),r(ee,"class","inline"),r(oe,"class","inline"),r(is,"href","https://github.com/webpack/webpack/issues/1114"),r(is,"rel","nofollow"),r(te,"class","inline"),r(ae,"class","inline"),r(ne,"class","inline"),r(le,"class","inline"),r(re,"class","inline"),r(b,"href","#2-name-of-a-variable-var-this-self-window-global"),r(b,"id","2-name-of-a-variable-var-this-self-window-global"),r(ie,"class","inline"),r(pe,"class","code-section"),r(ce,"class","inline"),r(he,"class","inline"),r(ke,"class","inline"),r(ye,"class","inline"),r(de,"class","inline"),r(ve,"class","inline"),r(ue,"class","code-section"),r(fe,"class","inline"),r(me,"class","inline"),r(xe,"class","code-section"),r(be,"class","inline"),r(we,"class","inline"),r(ge,"class","inline"),r(Ee,"class","code-section"),r(_e,"class","code-section"),r(ks,"href","https://webpack.js.org/configuration/output/"),r(ks,"rel","nofollow"),r(ys,"href","#writing-a-webpack-plugin"),r(ys,"id","writing-a-webpack-plugin"),r(ds,"href","https://github.com/webpack/webpack"),r(ds,"rel","nofollow"),r(vs,"href","https://github.com/webpack/webpack/blob/master/lib/LibraryTemplatePlugin.js"),r(vs,"rel","nofollow"),r(Te,"class","inline"),r(Ie,"class","code-section"),r(fs,"href","https://github.com/webpack/webpack/blob/master/lib/SetVarTemplatePlugin.js"),r(fs,"rel","nofollow"),r(Pe,"class","code-section"),r(De,"class","inline"),r(Ce,"class","inline"),r(Oe,"class","inline"),r(je,"class","inline"),r(Se,"class","inline"),r(Ae,"class","code-section"),r(Le,"class","code-section"),r(ms,"href","https://github.com/webpack/webpack/blob/master/lib/SetVarTemplatePlugin.js"),r(ms,"rel","nofollow"),r(Ve,"class","inline"),r(Me,"class","inline"),r(Ne,"class","inline"),r(He,"class","code-section"),r(We,"class","inline"),r(Re,"class","inline"),r(Be,"class","code-section"),r(ws,"href","https://github.com/webpack/webpack/blob/master/lib/LibraryTemplatePlugin.js"),r(ws,"rel","nofollow"),r(gs,"href","https://github.com/webpack/webpack/blob/master/lib/SetVarTemplatePlugin.js"),r(gs,"rel","nofollow"),r(Ue,"class","code-section"),r($e,"class","inline"),r(Cs,"href","https://gist.github.com/tanhauhau/b6b355fbbabe224c9242a5257baa4dec"),r(Cs,"rel","nofollow"),r(Fe,"class","inline"),r(Ge,"class","inline"),r(Ss,"href","#closing-note"),r(Ss,"id","closing-note"),r(ze,"href","/what-is-module-bundler-and-how-does-it-work/")},m(i,d){u(i,f,d),s(f,A),u(i,L,d),u(i,I,d),I.innerHTML=x,u(i,_,d),u(i,P,d),s(P,ht),s(P,Ms),s(Ms,kt),s(P,yt),u(i,Ao,d),u(i,Z,d),Z.innerHTML=mp,u(i,Lo,d),u(i,G,d),s(G,dt),s(G,Ns),s(Ns,vt),s(G,ut),u(i,qo,d),u(i,X,d),X.innerHTML=xp,u(i,Vo,d),u(i,Hs,d),s(Hs,ss),s(ss,ft),s(ss,Ws),s(Ws,mt),s(ss,xt),u(i,Mo,d),u(i,Rs,d),s(Rs,bt),u(i,No,d),u(i,q,d),s(q,oo),s(oo,es),s(es,wt),s(q,gt),s(q,to),s(to,os),s(os,Et),s(q,_t),s(q,ao),s(ao,ts),s(ts,Tt),u(i,Ho,d),u(i,V,d),s(V,no),s(no,as),s(as,It),s(V,Pt),s(V,ns),s(ns,Dt),s(ns,Bs),s(Bs,Ct),s(ns,Ot),s(V,jt),s(V,M),s(M,Us),s(Us,St),s(M,At),s(M,$s),s($s,Lt),s(M,qt),s(M,Fs),s(Fs,Vt),s(M,Mt),u(i,Wo,d),u(i,m,d),s(m,lo),s(lo,g),s(g,Nt),s(g,Gs),s(Gs,Ht),s(g,Wt),s(g,zs),s(zs,Rt),s(g,Bt),s(g,Ks),s(Ks,Ut),s(g,$t),s(g,Qs),s(Qs,Ft),s(g,Gt),s(m,zt),s(m,ro),s(ro,Kt),s(m,Qt),s(m,io),s(io,Yt),s(m,Jt),s(m,ls),s(ls,Zt),s(ls,Ys),s(Ys,Xt),s(ls,sa),s(m,ea),s(m,Js),Js.innerHTML=bp,s(m,oa),s(m,N),s(N,Zs),s(Zs,ta),s(N,aa),s(N,Xs),s(Xs,na),s(N,la),s(N,se),s(se,ra),s(N,ia),s(m,pa),s(m,R),s(R,ca),s(R,ee),s(ee,ha),s(R,ka),s(R,oe),s(oe,ya),s(R,da),s(m,va),s(m,po),s(po,rs),s(rs,ua),s(rs,is),s(is,fa),s(rs,ma),u(i,Ro,d),u(i,y,d),s(y,co),s(co,b),s(b,xa),s(b,te),s(te,ba),s(b,wa),s(b,ae),s(ae,ga),s(b,Ea),s(b,ne),s(ne,_a),s(b,Ta),s(b,le),s(le,Ia),s(b,Pa),s(b,re),s(re,Da),s(y,Ca),s(y,ho),s(ho,Oa),s(y,ja),s(y,ps),s(ps,Sa),s(ps,ie),s(ie,Aa),s(ps,La),s(y,qa),s(y,pe),pe.innerHTML=wp,s(y,Va),s(y,cs),s(cs,Ma),s(cs,ce),s(ce,Na),s(cs,Ha),s(y,Wa),s(y,B),s(B,Ra),s(B,he),s(he,Ba),s(B,Ua),s(B,ke),s(ke,$a),s(B,Fa),s(y,Ga),s(y,D),s(D,za),s(D,ye),s(ye,Ka),s(D,Qa),s(D,de),s(de,Ya),s(D,Ja),s(D,ve),s(ve,Za),s(D,Xa),s(y,sn),s(y,ue),ue.innerHTML=gp,s(y,en),s(y,U),s(U,on),s(U,fe),s(fe,tn),s(U,an),s(U,me),s(me,nn),s(U,ln),s(y,rn),s(y,xe),xe.innerHTML=Ep,s(y,pn),s(y,C),s(C,cn),s(C,be),s(be,hn),s(C,kn),s(C,we),s(we,yn),s(C,dn),s(C,ge),s(ge,vn),s(C,un),s(y,fn),s(y,Ee),Ee.innerHTML=_p,s(y,mn),s(y,ko),s(ko,xn),s(y,bn),s(y,_e),_e.innerHTML=Tp,s(y,wn),s(y,hs),s(hs,gn),s(hs,ks),s(ks,En),s(hs,_n),u(i,Bo,d),u(i,h,d),s(h,yo),s(yo,ys),s(ys,Tn),s(h,In),s(h,O),s(O,Pn),s(O,ds),s(ds,Dn),s(O,Cn),s(O,vs),s(vs,On),s(O,jn),s(O,Te),s(Te,Sn),s(O,An),s(h,Ln),s(h,Ie),Ie.innerHTML=Ip,s(h,qn),s(h,us),s(us,Vn),s(us,fs),s(fs,Mn),s(us,Nn),s(h,Hn),s(h,Pe),Pe.innerHTML=Pp,s(h,Wn),s(h,E),s(E,Rn),s(E,De),s(De,Bn),s(E,Un),s(E,Ce),s(Ce,$n),s(E,Fn),s(E,Oe),s(Oe,Gn),s(E,zn),s(E,je),s(je,Kn),s(E,Qn),s(E,Se),s(Se,Yn),s(E,Jn),s(h,Zn),s(h,vo),s(vo,Xn),s(h,sl),s(h,Ae),Ae.innerHTML=Dp,s(h,el),s(h,uo),s(uo,ol),s(h,tl),s(h,Le),Le.innerHTML=Cp,s(h,al),s(h,fo),s(fo,nl),s(h,ll),s(h,j),s(j,qe),s(qe,rl),s(qe,ms),s(ms,il),s(j,pl),s(j,mo),s(mo,cl),s(j,hl),s(j,z),s(z,kl),s(z,Ve),s(Ve,yl),s(z,dl),s(z,Me),s(Me,vl),s(j,ul),s(j,xs),s(xs,fl),s(xs,Ne),s(Ne,ml),s(xs,xl),s(h,bl),s(h,He),He.innerHTML=Op,s(h,wl),s(h,bs),s(bs,$),s($,gl),s($,We),s(We,El),s($,_l),s($,Re),s(Re,Tl),s($,Il),s(bs,Pl),s(bs,xo),s(xo,Dl),s(h,Cl),s(h,Be),Be.innerHTML=jp,s(h,Ol),s(h,bo),s(bo,jl),s(h,Sl),s(h,wo),s(wo,Al),s(h,Ll),s(h,F),s(F,ql),s(F,ws),s(ws,Vl),s(F,Ml),s(F,gs),s(gs,Nl),s(F,Hl),s(h,Wl),s(h,go),s(go,Rl),s(h,Bl),s(h,Ue),Ue.innerHTML=Sp,s(h,Ul),s(h,Es),s(Es,$l),s(Es,Eo),s(Eo,Fl),s(Es,Gl),s(h,zl),s(h,_s),s(_s,Ts),s(Ts,Kl),s(Ts,_o),s(_o,Ql),s(Ts,Yl),s(_s,Jl),s(_s,To),s(To,Is),s(Is,Zl),s(Is,Io),s(Io,Xl),s(Is,sr),s(h,er),s(h,Ps),s(Ps,or),s(Ps,$e),s($e,tr),s(Ps,ar),s(h,nr),s(h,Ds),s(Ds,lr),s(Ds,Cs),s(Cs,rr),s(Ds,ir),s(h,pr),s(h,Os),s(Os,cr),s(Os,Fe),s(Fe,hr),s(Os,kr),s(h,yr),s(h,js),s(js,dr),s(js,Ge),s(Ge,vr),s(js,ur),s(h,fr),s(h,Po),s(Po,Do),s(Do,mr),u(i,Uo,d),u(i,H,d),s(H,Co),s(Co,Ss),s(Ss,xr),s(H,br),s(H,Oo),s(Oo,wr),s(H,gr),s(H,jo),s(jo,As),s(As,Er),s(As,ze),s(ze,_r),s(As,Tr)},p:lc,d(i){i&&e(f),i&&e(L),i&&e(I),i&&e(_),i&&e(P),i&&e(Ao),i&&e(Z),i&&e(Lo),i&&e(G),i&&e(qo),i&&e(X),i&&e(Vo),i&&e(Hs),i&&e(Mo),i&&e(Rs),i&&e(No),i&&e(q),i&&e(Ho),i&&e(V),i&&e(Wo),i&&e(m),i&&e(Ro),i&&e(y),i&&e(Bo),i&&e(h),i&&e(Uo),i&&e(H)}}}function cc(Vs){let f,A;const L=[Vs[0],fp];let I={$$slots:{default:[pc]},$$scope:{ctx:Vs}};for(let x=0;x<L.length;x+=1)I=Pr(I,L[x]);return f=new rc({props:I}),{c(){Zp(f.$$.fragment)},l(x){Xp(f.$$.fragment,x)},m(x,_){sc(f,x,_),A=!0},p(x,[_]){const P=_&1?ec(L,[_&1&&vp(x[0]),_&0&&vp(fp)]):{};_&2&&(P.$$scope={dirty:_,ctx:x}),f.$set(P)},i(x){A||(oc(f.$$.fragment,x),A=!0)},o(x){tc(f.$$.fragment,x),A=!1},d(x){ac(f,x)}}}const fp={title:"Webpack's TemplatePlugin",date:"2020-01-21T08:00:00Z",label:"blog",description:"If you are using webpack to bundle your library, you most likely will export something in your entry file:And if you build it with webpack just like that, out-of-the-box, you may be surprised that if you try to ...",tableOfContents:[{link:"webpack-s-output-library-options",title:"Webpack's output.library *  options",nested:[{link:"1-name-of-a-module-system-commonjs-commonjs2-amd-umd",title:'1. Name of a module system:  `"commonjs"` ,  `"commonjs2"` ,  `"amd"` ,  `"umd"` , ...'},{link:"2-name-of-a-variable-var-this-self-window-global",title:'2. Name of a variable:  `"var"` ,  `"this"` ,  `"self"` ,  `"window"` ,  `"global"`'}]},{link:"writing-a-webpack-plugin",title:"Writing a webpack plugin"},{link:"closing-note",title:"Closing Note"}]};function hc(Vs,f,A){return nc("blog",{image:ic}),Vs.$$set=L=>{A(0,f=Pr(Pr({},f),up(L)))},f=up(f),[f]}class mc extends Qp{constructor(f){super();Yp(this,f,hc,cc,Jp,{})}}export{mc as default,fp as metadata};
