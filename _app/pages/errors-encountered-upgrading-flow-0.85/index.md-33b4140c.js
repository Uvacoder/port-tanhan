import{S as Xs,i as en,s as tn,C as ol,w as $s,x as Ns,y as Ws,z as on,A as zs,q as js,o as Rs,B as Vs,r as rn,R as Ms,k as i,e as a,t as o,V as an,m as c,c as l,a as s,h as r,d as t,W as ln,b as n,g as T,F as e,O as sn}from"../../chunks/vendor-6bf294e3.js";import{B as nn}from"../../chunks/BlogLayout-152f599b.js";import{T as cn}from"../../chunks/TableOfContent-1b9e4572.js";import{_ as hn}from"../../chunks/twitter-card-image-a57df29d.js";import"../../chunks/stores-e20b7872.js";import"../../chunks/WebMentions-745413ea.js";/* empty css                                */function fn(je){let u,x,m,B,w,I,Re,F,ro,U,ao,lo,K,so,no,Q,io,co,Z,ho,fo,po,C,uo,X,wo,mo,ee,vo,go,te,yo,bo,_o,P,Eo,oe,ko,Fo,re,Ao,To,ae,xo,Io,Co,y,Po,le,Oo,Lo,Ve,So,Do,Ge,Bo,qo,Ye,zo,Mo,Je,Ho,$o,Ue,No,Wo,jo,q,Ro,Ke,Vo,Go,se,Yo,Jo,Rt,W,wt,ne,Uo,Ko,O,Qo,Qe,Zo,Xo,Ze,er,tr,Xe,or,rr,Vt,A,mt,ie,ar,lr,z,sr,ce,nr,ir,he,cr,hr,fr,fe,dr,de,pr,ur,wr,M,mr,pe,vr,gr,et,yr,br,Gt,v,vt,ue,_r,Er,L,kr,we,Fr,Ar,tt,Tr,xr,ot,Ir,Cr,Pr,rt,Gs='<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-function)">foobar</span><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-function)">Type</span><span style="color: var(--shiki-color-text)">&gt;(</span><span style="color: var(--shiki-token-constant)">1</span><span style="color: var(--shiki-color-text)">)</span></span></code></pre>',Or,me,Lr,gt,Sr,Dr,Br,at,Ys='<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-color-text)">foobar </span><span style="color: var(--shiki-token-keyword)">&lt;</span><span style="color: var(--shiki-color-text)"> Type </span><span style="color: var(--shiki-token-keyword)">&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">1</span></span></code></pre>',qr,lt,ve,zr,Yt,Js="<",Jt,Mr,Hr,ge,$r,ye,Nr,Wr,Ut,g,yt,be,jr,Rr,H,Vr,_e,Gr,Yr,Ee,Jr,Ur,Kr,$,Qr,st,Zr,Xr,nt,ea,ta,oa,it,Us=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-color-text)">&#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">&quot;flow.useLSP&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">true</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">&quot;flow.lazyMode&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;ide&quot;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre>`,ra,N,aa,ke,la,sa,Fe,na,ia,ca,bt,_t,ha,fa,j,da,Et,pa,ua,Ae,wa,Kt,b,kt,Te,ma,va,Ft,ga,ya,At,ba,_a,Tt,Ea,ka,f,xt,xe,Fa,Aa,It,Ie,Ta,xa,Ct,Ce,Ia,Ca,Pt,Pe,Pa,Oa,Ot,Oe,La,Sa,Lt,Le,Da,Ba,St,Se,qa,za,Dt,De,Ma,Ha,Bt,Be,$a,Na,qt,qe,Wa,ja,zt,ze,Ra,Va,Mt,Me,Ga,Ya,Ht,He,Ja,Ua,$t,$e,Ka,Qa,Nt,Ne,Za,Xa,Wt,We,el,Qt;return u=new cn({props:{data:[{link:"background",title:"Background"},{link:"the-tooling",title:"The Tooling"},{link:"babel-eslint",title:"Babel & Eslint"},{link:"prettier",title:"Prettier"},{link:"vscode",title:"VSCode"},{link:"closing-remarks",title:"Closing remarks"}]}}),{c(){$s(u.$$.fragment),x=i(),m=a("section"),B=a("h2"),w=a("a"),I=o("Background"),Re=i(),F=a("p"),ro=o("Despite seeing the JS community "),U=a("a"),ao=o("slowly"),lo=i(),K=a("a"),so=o("moving away"),no=o(" from Flow to TypeScript, "),Q=a("a"),io=o("Shopee Web Frontend"),co=o(" codebase is still very much stuck with "),Z=a("a"),ho=o("Flow"),fo=o(". \u{1F628}"),po=i(),C=a("p"),uo=o("After some silence, Flow "),X=a("a"),wo=o("has come back and committed to be a more efficient, reliable and friendly tool."),mo=o(" Thus, we decided to give Flow a final chance. However, in order to enjoy the improvements that Flow has made in recent days, we have to upgrade Flow from 0.83 (since our last update) to v0.97 (latest to date), which meant that we need to upgrade past v0.85, "),ee=a("a"),vo=o("which meant hell"),go=o(" to "),te=a("a"),yo=o("codebase that uses react-redux extensively"),bo=o("."),_o=i(),P=a("p"),Eo=o("One of our "),oe=a("a"),ko=o("brave developer, Gao Wei"),Fo=o(" took up the challenge and decided to bring us to the bright side of Flow. \u{1F605}. She "),re=a("a"),Ao=o("twitted"),To=o(" and wrote "),ae=a("a"),xo=o("an article"),Io=o(" on how she fixed the errors arose in the process."),Co=i(),y=a("p"),Po=o("To put the problem in perspective, from Flow 0.85 onwards, Flow is asking for "),le=a("a"),Oo=o("required annotations for implicit annotations"),Lo=o(". Or less technical, if you are trying to "),Ve=a("code"),So=o("export"),Do=o(" something that was created from a generic class (eg: "),Ge=a("code"),Bo=o("class Foo<T>"),qo=o(") or functions (eg: "),Ye=a("code"),zo=o("function foo<T>(){}"),Mo=o("), without explicit type arguments (eg: "),Je=a("code"),Ho=o("new Foo<Type>()"),$o=o(" or "),Ue=a("code"),No=o("foo<Type>()"),Wo=o("), Flow is going to give you an error."),jo=i(),q=a("p"),Ro=o("Or in layman terms, if your repo is full of HOCs or "),Ke=a("code"),Vo=o("connect()"),Go=o(", you are f**ked. So, be sure the check "),se=a("a"),Yo=o("Gao Wei's blog"),Jo=o(" if you are one of the brave souls upgrading a Flow project."),Rt=i(),W=a("section"),wt=a("h2"),ne=a("a"),Uo=o("The Tooling"),Ko=i(),O=a("p"),Qo=o("In this article, I would like to list out some of the  roadblocks we encountered that was less well discussed, the tooling for the latest Flow syntax, which is the "),Qe=a("code"),Zo=o("TypeParameterInstantiation"),Xo=o(", eg: calling a function or instantiation a class with a type parameter, "),Ze=a("code"),er=o("new Foo<Type>()"),tr=o(" or "),Xe=a("code"),or=o("foo<Type>()"),rr=o("."),Vt=i(),A=a("section"),mt=a("h2"),ie=a("a"),ar=o("Babel & Eslint"),lr=i(),z=a("p"),sr=o("We had to upgrade our babel to "),ce=a("a"),nr=o("babel v7"),ir=o(" and babel-eslint (a babel wrapper for eslint) to "),he=a("a"),cr=o("babel-eslint v9"),hr=o(" to support this new syntax."),fr=i(),fe=a("p"),dr=o("You can read about on how we came to realise the need of this upgrade "),de=a("a"),pr=o("in my previous post"),ur=o("."),wr=i(),M=a("p"),mr=o("There was another interesting bug that we ran into regarding "),pe=a("a"),vr=o("@babel/plugin-transform-flow-strip-types"),gr=o(", you can read more on how we uncover it in "),et=a("a"),yr=o("my other blog post"),br=o("."),Gt=i(),v=a("section"),vt=a("h2"),ue=a("a"),_r=o("Prettier"),Er=i(),L=a("p"),kr=o("We had to upgrade prettier to "),we=a("a"),Fr=o("v1.16.0"),Ar=o(" and use "),tt=a("code"),Tr=o("babel-flow"),xr=o(" parser for "),ot=a("code"),Ir=o("prettier"),Cr=o(" to resolve the ambiguity in syntax arise in parsing the newer Flow syntax. In simpler terms, to tell Prettier that"),Pr=i(),rt=a("div"),Or=i(),me=a("p"),Lr=o("is "),gt=a("em"),Sr=o('calling foobar with argument, 1 and type, "Type"'),Dr=o(", instead of:"),Br=i(),at=a("div"),qr=i(),lt=a("p"),ve=a("em"),zr=o("is the result of foobar "),Yt=new an,Jt=o(" Type, greater than 1?"),Mr=o(" \u{1F602}"),Hr=i(),ge=a("p"),$r=o("You can read more about it in "),ye=a("a"),Nr=o("Prettier's blog post"),Wr=o("."),Ut=i(),g=a("section"),yt=a("h2"),be=a("a"),jr=o("VSCode"),Rr=i(),H=a("p"),Vr=o("Flow "),_e=a("a"),Gr=o("Lazy Mode"),Yr=o(" has been around since v0.68, but we hadn't enjoy the benefit of lazy mode through VSCode "),Ee=a("a"),Jr=o("until recently"),Ur=o("."),Kr=i(),$=a("p"),Qr=o("Now we can specify "),st=a("code"),Zr=o("lazyMode"),Xr=o(" in our "),nt=a("code"),ea=o(".vscode/settings.json"),ta=o(":"),oa=i(),it=a("div"),ra=i(),N=a("p"),aa=o("Although "),ke=a("a"),la=o("lazy mode"),sa=o(" reduces the scope where Flow does type checking, one of the pain point we had with Flow was to wait for Flow to do recheck, before returning a meaningful Flow status again. Flow team did some optimisation in "),Fe=a("a"),na=o("v92.0"),ia=o(", where it says:"),ca=i(),bt=a("blockquote"),_t=a("p"),ha=o(`This release culminates months of hard work on quality of life improvements for IDE support.
Expect your requests to be faster, and your requests to take a bit less time.`),fa=i(),j=a("p"),da=o("According to the release note, Flow is now able to "),Et=a("strong"),pa=o("provide type definitions while rechecking"),ua=o(", for further details on how they achieve this, you can read the "),Ae=a("a"),wa=o("Flow blog"),Kt=i(),b=a("section"),kt=a("h2"),Te=a("a"),ma=o("Closing remarks"),va=i(),Ft=a("p"),ga=o("Finally we managed to get Flow running in v0.97 \u{1F389}. We've been struggling with bad developer experience with v0.83 for the longest time, hopefully v0.97 do not let us down."),ya=i(),At=a("p"),ba=o("Lastly, be sure to check out all the links sprinkled throughout this blog, they link to Github issues, commits, release notes, and who knows it might lead you to some unexpected adventures? \u{1F937}\u200D"),_a=i(),Tt=a("p"),Ea=o("But if you are lazy like me, here are the links, they served as my references when writing this blog post:"),ka=i(),f=a("ul"),xt=a("li"),xe=a("a"),Fa=o("Blog: Incremental Migration to TypeScript on a Flowtype codebase"),Aa=i(),It=a("li"),Ie=a("a"),Ta=o("Blog: Porting 30k lines of code from Flow to TypeScript"),xa=i(),Ct=a("li"),Ce=a("a"),Ia=o("Issue: What is the official way to type connect ( from flow-typed/react-redux) after 0.85?"),Ca=i(),Pt=a("li"),Pe=a("a"),Pa=o("Issue: [react-redux] libdef incompatible with flow v0.85 #2946"),Oa=i(),Ot=a("li"),Oe=a("a"),La=o("Tweet: It's so hard to make flow happily get past 0.85 with our codebase..."),Sa=i(),Lt=a("li"),Le=a("a"),Da=o("Blog: Making Flow Happy after 0.85"),Ba=i(),St=a("li"),Se=a("a"),qa=o("Blog: Asking for Required Annotations"),za=i(),Dt=a("li"),De=a("a"),Ma=o("Docs: Babel 7 Migration"),Ha=i(),Bt=a("li"),Be=a("a"),$a=o("Release Note: babel-eslint v9.0.0"),Na=i(),qt=a("li"),qe=a("a"),Wa=o("Docs: @babel/plugin-transform-flow-strip-types"),ja=i(),zt=a("li"),ze=a("a"),Ra=o("Release Note: Prettier v1.16.0"),Va=i(),Mt=a("li"),Me=a("a"),Ga=o("Commit: Lazy mode message for flow status"),Ya=i(),Ht=a("li"),He=a("a"),Ja=o("Commit: feat(lsp): add setting to support flow lazyMode."),Ua=i(),$t=a("li"),$e=a("a"),Ka=o("Docs: Flow Lazy Mode"),Qa=i(),Nt=a("li"),Ne=a("a"),Za=o("Release Note: Flow v0.92.0"),Xa=i(),Wt=a("li"),We=a("a"),el=o("Blog: A more responsive Flow"),this.h()},l(h){Ns(u.$$.fragment,h),x=c(h),m=l(h,"SECTION",{});var p=s(m);B=l(p,"H2",{});var rl=s(B);w=l(rl,"A",{href:!0,id:!0});var al=s(w);I=r(al,"Background"),al.forEach(t),rl.forEach(t),Re=c(p),F=l(p,"P",{});var S=s(F);ro=r(S,"Despite seeing the JS community "),U=l(S,"A",{href:!0,rel:!0});var ll=s(U);ao=r(ll,"slowly"),ll.forEach(t),lo=c(S),K=l(S,"A",{href:!0,rel:!0});var sl=s(K);so=r(sl,"moving away"),sl.forEach(t),no=r(S," from Flow to TypeScript, "),Q=l(S,"A",{href:!0,rel:!0});var nl=s(Q);io=r(nl,"Shopee Web Frontend"),nl.forEach(t),co=r(S," codebase is still very much stuck with "),Z=l(S,"A",{href:!0,rel:!0});var il=s(Z);ho=r(il,"Flow"),il.forEach(t),fo=r(S,". \u{1F628}"),S.forEach(t),po=c(p),C=l(p,"P",{});var R=s(C);uo=r(R,"After some silence, Flow "),X=l(R,"A",{href:!0,rel:!0});var cl=s(X);wo=r(cl,"has come back and committed to be a more efficient, reliable and friendly tool."),cl.forEach(t),mo=r(R," Thus, we decided to give Flow a final chance. However, in order to enjoy the improvements that Flow has made in recent days, we have to upgrade Flow from 0.83 (since our last update) to v0.97 (latest to date), which meant that we need to upgrade past v0.85, "),ee=l(R,"A",{href:!0,rel:!0});var hl=s(ee);vo=r(hl,"which meant hell"),hl.forEach(t),go=r(R," to "),te=l(R,"A",{href:!0,rel:!0});var fl=s(te);yo=r(fl,"codebase that uses react-redux extensively"),fl.forEach(t),bo=r(R,"."),R.forEach(t),_o=c(p),P=l(p,"P",{});var V=s(P);Eo=r(V,"One of our "),oe=l(V,"A",{href:!0,rel:!0});var dl=s(oe);ko=r(dl,"brave developer, Gao Wei"),dl.forEach(t),Fo=r(V," took up the challenge and decided to bring us to the bright side of Flow. \u{1F605}. She "),re=l(V,"A",{href:!0,rel:!0});var pl=s(re);Ao=r(pl,"twitted"),pl.forEach(t),To=r(V," and wrote "),ae=l(V,"A",{href:!0,rel:!0});var ul=s(ae);xo=r(ul,"an article"),ul.forEach(t),Io=r(V," on how she fixed the errors arose in the process."),V.forEach(t),Co=c(p),y=l(p,"P",{});var _=s(y);Po=r(_,"To put the problem in perspective, from Flow 0.85 onwards, Flow is asking for "),le=l(_,"A",{href:!0,rel:!0});var wl=s(le);Oo=r(wl,"required annotations for implicit annotations"),wl.forEach(t),Lo=r(_,". Or less technical, if you are trying to "),Ve=l(_,"CODE",{class:!0});var ml=s(Ve);So=r(ml,"export"),ml.forEach(t),Do=r(_," something that was created from a generic class (eg: "),Ge=l(_,"CODE",{class:!0});var vl=s(Ge);Bo=r(vl,"class Foo<T>"),vl.forEach(t),qo=r(_,") or functions (eg: "),Ye=l(_,"CODE",{class:!0});var gl=s(Ye);zo=r(gl,"function foo<T>(){}"),gl.forEach(t),Mo=r(_,"), without explicit type arguments (eg: "),Je=l(_,"CODE",{class:!0});var yl=s(Je);Ho=r(yl,"new Foo<Type>()"),yl.forEach(t),$o=r(_," or "),Ue=l(_,"CODE",{class:!0});var bl=s(Ue);No=r(bl,"foo<Type>()"),bl.forEach(t),Wo=r(_,"), Flow is going to give you an error."),_.forEach(t),jo=c(p),q=l(p,"P",{});var ct=s(q);Ro=r(ct,"Or in layman terms, if your repo is full of HOCs or "),Ke=l(ct,"CODE",{class:!0});var _l=s(Ke);Vo=r(_l,"connect()"),_l.forEach(t),Go=r(ct,", you are f**ked. So, be sure the check "),se=l(ct,"A",{href:!0,rel:!0});var El=s(se);Yo=r(El,"Gao Wei's blog"),El.forEach(t),Jo=r(ct," if you are one of the brave souls upgrading a Flow project."),ct.forEach(t),p.forEach(t),Rt=c(h),W=l(h,"SECTION",{});var Zt=s(W);wt=l(Zt,"H2",{});var kl=s(wt);ne=l(kl,"A",{href:!0,id:!0});var Fl=s(ne);Uo=r(Fl,"The Tooling"),Fl.forEach(t),kl.forEach(t),Ko=c(Zt),O=l(Zt,"P",{});var G=s(O);Qo=r(G,"In this article, I would like to list out some of the  roadblocks we encountered that was less well discussed, the tooling for the latest Flow syntax, which is the "),Qe=l(G,"CODE",{class:!0});var Al=s(Qe);Zo=r(Al,"TypeParameterInstantiation"),Al.forEach(t),Xo=r(G,", eg: calling a function or instantiation a class with a type parameter, "),Ze=l(G,"CODE",{class:!0});var Tl=s(Ze);er=r(Tl,"new Foo<Type>()"),Tl.forEach(t),tr=r(G," or "),Xe=l(G,"CODE",{class:!0});var xl=s(Xe);or=r(xl,"foo<Type>()"),xl.forEach(t),rr=r(G,"."),G.forEach(t),Zt.forEach(t),Vt=c(h),A=l(h,"SECTION",{});var Y=s(A);mt=l(Y,"H2",{});var Il=s(mt);ie=l(Il,"A",{href:!0,id:!0});var Cl=s(ie);ar=r(Cl,"Babel & Eslint"),Cl.forEach(t),Il.forEach(t),lr=c(Y),z=l(Y,"P",{});var ht=s(z);sr=r(ht,"We had to upgrade our babel to "),ce=l(ht,"A",{href:!0,rel:!0});var Pl=s(ce);nr=r(Pl,"babel v7"),Pl.forEach(t),ir=r(ht," and babel-eslint (a babel wrapper for eslint) to "),he=l(ht,"A",{href:!0,rel:!0});var Ol=s(he);cr=r(Ol,"babel-eslint v9"),Ol.forEach(t),hr=r(ht," to support this new syntax."),ht.forEach(t),fr=c(Y),fe=l(Y,"P",{});var Xt=s(fe);dr=r(Xt,"You can read about on how we came to realise the need of this upgrade "),de=l(Xt,"A",{href:!0,rel:!0});var Ll=s(de);pr=r(Ll,"in my previous post"),Ll.forEach(t),ur=r(Xt,"."),Xt.forEach(t),wr=c(Y),M=l(Y,"P",{});var ft=s(M);mr=r(ft,"There was another interesting bug that we ran into regarding "),pe=l(ft,"A",{href:!0,rel:!0});var Sl=s(pe);vr=r(Sl,"@babel/plugin-transform-flow-strip-types"),Sl.forEach(t),gr=r(ft,", you can read more on how we uncover it in "),et=l(ft,"A",{href:!0});var Dl=s(et);yr=r(Dl,"my other blog post"),Dl.forEach(t),br=r(ft,"."),ft.forEach(t),Y.forEach(t),Gt=c(h),v=l(h,"SECTION",{});var E=s(v);vt=l(E,"H2",{});var Bl=s(vt);ue=l(Bl,"A",{href:!0,id:!0});var ql=s(ue);_r=r(ql,"Prettier"),ql.forEach(t),Bl.forEach(t),Er=c(E),L=l(E,"P",{});var J=s(L);kr=r(J,"We had to upgrade prettier to "),we=l(J,"A",{href:!0,rel:!0});var zl=s(we);Fr=r(zl,"v1.16.0"),zl.forEach(t),Ar=r(J," and use "),tt=l(J,"CODE",{class:!0});var Ml=s(tt);Tr=r(Ml,"babel-flow"),Ml.forEach(t),xr=r(J," parser for "),ot=l(J,"CODE",{class:!0});var Hl=s(ot);Ir=r(Hl,"prettier"),Hl.forEach(t),Cr=r(J," to resolve the ambiguity in syntax arise in parsing the newer Flow syntax. In simpler terms, to tell Prettier that"),J.forEach(t),Pr=c(E),rt=l(E,"DIV",{class:!0});var Ks=s(rt);Ks.forEach(t),Or=c(E),me=l(E,"P",{});var eo=s(me);Lr=r(eo,"is "),gt=l(eo,"EM",{});var $l=s(gt);Sr=r($l,'calling foobar with argument, 1 and type, "Type"'),$l.forEach(t),Dr=r(eo,", instead of:"),eo.forEach(t),Br=c(E),at=l(E,"DIV",{class:!0});var Qs=s(at);Qs.forEach(t),qr=c(E),lt=l(E,"P",{});var tl=s(lt);ve=l(tl,"EM",{});var to=s(ve);zr=r(to,"is the result of foobar "),Yt=ln(to),Jt=r(to," Type, greater than 1?"),to.forEach(t),Mr=r(tl," \u{1F602}"),tl.forEach(t),Hr=c(E),ge=l(E,"P",{});var oo=s(ge);$r=r(oo,"You can read more about it in "),ye=l(oo,"A",{href:!0,rel:!0});var Nl=s(ye);Nr=r(Nl,"Prettier's blog post"),Nl.forEach(t),Wr=r(oo,"."),oo.forEach(t),E.forEach(t),Ut=c(h),g=l(h,"SECTION",{});var k=s(g);yt=l(k,"H2",{});var Wl=s(yt);be=l(Wl,"A",{href:!0,id:!0});var jl=s(be);jr=r(jl,"VSCode"),jl.forEach(t),Wl.forEach(t),Rr=c(k),H=l(k,"P",{});var dt=s(H);Vr=r(dt,"Flow "),_e=l(dt,"A",{href:!0,rel:!0});var Rl=s(_e);Gr=r(Rl,"Lazy Mode"),Rl.forEach(t),Yr=r(dt," has been around since v0.68, but we hadn't enjoy the benefit of lazy mode through VSCode "),Ee=l(dt,"A",{href:!0,rel:!0});var Vl=s(Ee);Jr=r(Vl,"until recently"),Vl.forEach(t),Ur=r(dt,"."),dt.forEach(t),Kr=c(k),$=l(k,"P",{});var pt=s($);Qr=r(pt,"Now we can specify "),st=l(pt,"CODE",{class:!0});var Gl=s(st);Zr=r(Gl,"lazyMode"),Gl.forEach(t),Xr=r(pt," in our "),nt=l(pt,"CODE",{class:!0});var Yl=s(nt);ea=r(Yl,".vscode/settings.json"),Yl.forEach(t),ta=r(pt,":"),pt.forEach(t),oa=c(k),it=l(k,"DIV",{class:!0});var Zs=s(it);Zs.forEach(t),ra=c(k),N=l(k,"P",{});var ut=s(N);aa=r(ut,"Although "),ke=l(ut,"A",{href:!0,rel:!0});var Jl=s(ke);la=r(Jl,"lazy mode"),Jl.forEach(t),sa=r(ut," reduces the scope where Flow does type checking, one of the pain point we had with Flow was to wait for Flow to do recheck, before returning a meaningful Flow status again. Flow team did some optimisation in "),Fe=l(ut,"A",{href:!0,rel:!0});var Ul=s(Fe);na=r(Ul,"v92.0"),Ul.forEach(t),ia=r(ut,", where it says:"),ut.forEach(t),ca=c(k),bt=l(k,"BLOCKQUOTE",{});var Kl=s(bt);_t=l(Kl,"P",{});var Ql=s(_t);ha=r(Ql,`This release culminates months of hard work on quality of life improvements for IDE support.
Expect your requests to be faster, and your requests to take a bit less time.`),Ql.forEach(t),Kl.forEach(t),fa=c(k),j=l(k,"P",{});var jt=s(j);da=r(jt,"According to the release note, Flow is now able to "),Et=l(jt,"STRONG",{});var Zl=s(Et);pa=r(Zl,"provide type definitions while rechecking"),Zl.forEach(t),ua=r(jt,", for further details on how they achieve this, you can read the "),Ae=l(jt,"A",{href:!0,rel:!0});var Xl=s(Ae);wa=r(Xl,"Flow blog"),Xl.forEach(t),jt.forEach(t),k.forEach(t),Kt=c(h),b=l(h,"SECTION",{});var D=s(b);kt=l(D,"H2",{});var es=s(kt);Te=l(es,"A",{href:!0,id:!0});var ts=s(Te);ma=r(ts,"Closing remarks"),ts.forEach(t),es.forEach(t),va=c(D),Ft=l(D,"P",{});var os=s(Ft);ga=r(os,"Finally we managed to get Flow running in v0.97 \u{1F389}. We've been struggling with bad developer experience with v0.83 for the longest time, hopefully v0.97 do not let us down."),os.forEach(t),ya=c(D),At=l(D,"P",{});var rs=s(At);ba=r(rs,"Lastly, be sure to check out all the links sprinkled throughout this blog, they link to Github issues, commits, release notes, and who knows it might lead you to some unexpected adventures? \u{1F937}\u200D"),rs.forEach(t),_a=c(D),Tt=l(D,"P",{});var as=s(Tt);Ea=r(as,"But if you are lazy like me, here are the links, they served as my references when writing this blog post:"),as.forEach(t),ka=c(D),f=l(D,"UL",{});var d=s(f);xt=l(d,"LI",{});var ls=s(xt);xe=l(ls,"A",{href:!0,rel:!0});var ss=s(xe);Fa=r(ss,"Blog: Incremental Migration to TypeScript on a Flowtype codebase"),ss.forEach(t),ls.forEach(t),Aa=c(d),It=l(d,"LI",{});var ns=s(It);Ie=l(ns,"A",{href:!0,rel:!0});var is=s(Ie);Ta=r(is,"Blog: Porting 30k lines of code from Flow to TypeScript"),is.forEach(t),ns.forEach(t),xa=c(d),Ct=l(d,"LI",{});var cs=s(Ct);Ce=l(cs,"A",{href:!0,rel:!0});var hs=s(Ce);Ia=r(hs,"Issue: What is the official way to type connect ( from flow-typed/react-redux) after 0.85?"),hs.forEach(t),cs.forEach(t),Ca=c(d),Pt=l(d,"LI",{});var fs=s(Pt);Pe=l(fs,"A",{href:!0,rel:!0});var ds=s(Pe);Pa=r(ds,"Issue: [react-redux] libdef incompatible with flow v0.85 #2946"),ds.forEach(t),fs.forEach(t),Oa=c(d),Ot=l(d,"LI",{});var ps=s(Ot);Oe=l(ps,"A",{href:!0,rel:!0});var us=s(Oe);La=r(us,"Tweet: It's so hard to make flow happily get past 0.85 with our codebase..."),us.forEach(t),ps.forEach(t),Sa=c(d),Lt=l(d,"LI",{});var ws=s(Lt);Le=l(ws,"A",{href:!0,rel:!0});var ms=s(Le);Da=r(ms,"Blog: Making Flow Happy after 0.85"),ms.forEach(t),ws.forEach(t),Ba=c(d),St=l(d,"LI",{});var vs=s(St);Se=l(vs,"A",{href:!0,rel:!0});var gs=s(Se);qa=r(gs,"Blog: Asking for Required Annotations"),gs.forEach(t),vs.forEach(t),za=c(d),Dt=l(d,"LI",{});var ys=s(Dt);De=l(ys,"A",{href:!0,rel:!0});var bs=s(De);Ma=r(bs,"Docs: Babel 7 Migration"),bs.forEach(t),ys.forEach(t),Ha=c(d),Bt=l(d,"LI",{});var _s=s(Bt);Be=l(_s,"A",{href:!0,rel:!0});var Es=s(Be);$a=r(Es,"Release Note: babel-eslint v9.0.0"),Es.forEach(t),_s.forEach(t),Na=c(d),qt=l(d,"LI",{});var ks=s(qt);qe=l(ks,"A",{href:!0,rel:!0});var Fs=s(qe);Wa=r(Fs,"Docs: @babel/plugin-transform-flow-strip-types"),Fs.forEach(t),ks.forEach(t),ja=c(d),zt=l(d,"LI",{});var As=s(zt);ze=l(As,"A",{href:!0,rel:!0});var Ts=s(ze);Ra=r(Ts,"Release Note: Prettier v1.16.0"),Ts.forEach(t),As.forEach(t),Va=c(d),Mt=l(d,"LI",{});var xs=s(Mt);Me=l(xs,"A",{href:!0,rel:!0});var Is=s(Me);Ga=r(Is,"Commit: Lazy mode message for flow status"),Is.forEach(t),xs.forEach(t),Ya=c(d),Ht=l(d,"LI",{});var Cs=s(Ht);He=l(Cs,"A",{href:!0,rel:!0});var Ps=s(He);Ja=r(Ps,"Commit: feat(lsp): add setting to support flow lazyMode."),Ps.forEach(t),Cs.forEach(t),Ua=c(d),$t=l(d,"LI",{});var Os=s($t);$e=l(Os,"A",{href:!0,rel:!0});var Ls=s($e);Ka=r(Ls,"Docs: Flow Lazy Mode"),Ls.forEach(t),Os.forEach(t),Qa=c(d),Nt=l(d,"LI",{});var Ss=s(Nt);Ne=l(Ss,"A",{href:!0,rel:!0});var Ds=s(Ne);Za=r(Ds,"Release Note: Flow v0.92.0"),Ds.forEach(t),Ss.forEach(t),Xa=c(d),Wt=l(d,"LI",{});var Bs=s(Wt);We=l(Bs,"A",{href:!0,rel:!0});var qs=s(We);el=r(qs,"Blog: A more responsive Flow"),qs.forEach(t),Bs.forEach(t),d.forEach(t),D.forEach(t),this.h()},h(){n(w,"href","#background"),n(w,"id","background"),n(U,"href","https://medium.com/entria/incremental-migration-to-typescript-on-a-flowtype-codebase-515f6490d92d"),n(U,"rel","nofollow"),n(K,"href","https://davidgomes.com/porting-30k-lines-of-code-from-flow-to-typescript/"),n(K,"rel","nofollow"),n(Q,"href","https://careers.shopee.sg/jobs/?region_id=1&dept_id=109&name=web%20frontend&limit=20&offset=0"),n(Q,"rel","nofollow"),n(Z,"href","https://flow.org/"),n(Z,"rel","nofollow"),n(X,"href","https://medium.com/flow-type/what-the-flow-team-has-been-up-to-54239c62004f"),n(X,"rel","nofollow"),n(ee,"href","https://github.com/facebook/flow/issues/7493"),n(ee,"rel","nofollow"),n(te,"href","https://github.com/flow-typed/flow-typed/issues/2946"),n(te,"rel","nofollow"),n(oe,"href","https://wgao19.cc/"),n(oe,"rel","nofollow"),n(re,"href","https://twitter.com/wgao19/status/1115969686758248448"),n(re,"rel","nofollow"),n(ae,"href","https://dev.wgao19.cc/2019-04-17__making-flow-happy-after-0.85/"),n(ae,"rel","nofollow"),n(le,"href","https://medium.com/flow-type/asking-for-required-annotations-64d4f9c1edf8"),n(le,"rel","nofollow"),n(Ve,"class","inline"),n(Ge,"class","inline"),n(Ye,"class","inline"),n(Je,"class","inline"),n(Ue,"class","inline"),n(Ke,"class","inline"),n(se,"href","https://dev.wgao19.cc/2019-04-17__making-flow-happy-after-0.85/"),n(se,"rel","nofollow"),n(ne,"href","#the-tooling"),n(ne,"id","the-tooling"),n(Qe,"class","inline"),n(Ze,"class","inline"),n(Xe,"class","inline"),n(ie,"href","#babel-eslint"),n(ie,"id","babel-eslint"),n(ce,"href","https://babeljs.io/docs/en/v7-migration"),n(ce,"rel","nofollow"),n(he,"href","https://github.com/babel/babel-eslint/releases/tag/v9.0.0"),n(he,"rel","nofollow"),n(de,"href","https://lihautan.com/eslint-for-flow-explicit-type-argument-syntax/"),n(de,"rel","nofollow"),n(pe,"href","https://babeljs.io/docs/en/babel-plugin-transform-flow-strip-types"),n(pe,"rel","nofollow"),n(et,"href","/parsing-error-flow-type-parameter-instantiation/"),n(ue,"href","#prettier"),n(ue,"id","prettier"),n(we,"href","https://prettier.io/blog/2019/01/20/1.16.0.html"),n(we,"rel","nofollow"),n(tt,"class","inline"),n(ot,"class","inline"),n(rt,"class","code-section"),n(at,"class","code-section"),Yt.a=Jt,n(ye,"href","https://prettier.io/blog/2019/01/20/1.16.0.html#add-babel-flow-parser-5685-by-ikatyang"),n(ye,"rel","nofollow"),n(be,"href","#vscode"),n(be,"id","vscode"),n(_e,"href","https://github.com/facebook/flow/commit/3c0a2bbd118206a0a73a1a4d18375122c4ae1955"),n(_e,"rel","nofollow"),n(Ee,"href","https://github.com/flowtype/flow-for-vscode/commit/9c1440068f8faee95e487fc9f69b5f5ffed64bf1"),n(Ee,"rel","nofollow"),n(st,"class","inline"),n(nt,"class","inline"),n(it,"class","code-section"),n(ke,"href","https://flow.org/en/docs/lang/lazy-modes/"),n(ke,"rel","nofollow"),n(Fe,"href","https://github.com/facebook/flow/releases/tag/v0.92.0"),n(Fe,"rel","nofollow"),n(Ae,"href","https://medium.com/flow-type/a-more-responsive-flow-1a8cb01aec11"),n(Ae,"rel","nofollow"),n(Te,"href","#closing-remarks"),n(Te,"id","closing-remarks"),n(xe,"href","https://medium.com/entria/incremental-migration-to-typescript-on-a-flowtype-codebase-515f6490d92d"),n(xe,"rel","nofollow"),n(Ie,"href","https://davidgomes.com/porting-30k-lines-of-code-from-flow-to-typescript"),n(Ie,"rel","nofollow"),n(Ce,"href","https://github.com/facebook/flow/issues/7493"),n(Ce,"rel","nofollow"),n(Pe,"href","https://github.com/flow-typed/flow-typed/issues/2946"),n(Pe,"rel","nofollow"),n(Oe,"href","https://twitter.com/wgao19/status/1115969686758248448"),n(Oe,"rel","nofollow"),n(Le,"href","https://dev.wgao19.cc/2019-04-17__making-flow-happy-after-0.85/"),n(Le,"rel","nofollow"),n(Se,"href","https://medium.com/flow-type/asking-for-required-annotations-64d4f9c1edf8"),n(Se,"rel","nofollow"),n(De,"href","https://babeljs.io/docs/en/v7-migration"),n(De,"rel","nofollow"),n(Be,"href","https://github.com/babel/babel-eslint/releases/tag/v9.0.0"),n(Be,"rel","nofollow"),n(qe,"href","https://babeljs.io/docs/en/babel-plugin-transform-flow-strip-types"),n(qe,"rel","nofollow"),n(ze,"href","https://prettier.io/blog/2019/01/20/1.16.0.html"),n(ze,"rel","nofollow"),n(Me,"href","https://github.com/facebook/flow/commit/3c0a2bbd118206a0a73a1a4d18375122c4ae1955"),n(Me,"rel","nofollow"),n(He,"href","https://github.com/flowtype/flow-for-vscode/commit/9c1440068f8faee95e487fc9f69b5f5ffed64bf1"),n(He,"rel","nofollow"),n($e,"href","https://flow.org/en/docs/lang/lazy-modes/"),n($e,"rel","nofollow"),n(Ne,"href","https://github.com/facebook/flow/releases/tag/v0.92.0"),n(Ne,"rel","nofollow"),n(We,"href","https://medium.com/flow-type/a-more-responsive-flow-1a8cb01aec11"),n(We,"rel","nofollow")},m(h,p){Ws(u,h,p),T(h,x,p),T(h,m,p),e(m,B),e(B,w),e(w,I),e(m,Re),e(m,F),e(F,ro),e(F,U),e(U,ao),e(F,lo),e(F,K),e(K,so),e(F,no),e(F,Q),e(Q,io),e(F,co),e(F,Z),e(Z,ho),e(F,fo),e(m,po),e(m,C),e(C,uo),e(C,X),e(X,wo),e(C,mo),e(C,ee),e(ee,vo),e(C,go),e(C,te),e(te,yo),e(C,bo),e(m,_o),e(m,P),e(P,Eo),e(P,oe),e(oe,ko),e(P,Fo),e(P,re),e(re,Ao),e(P,To),e(P,ae),e(ae,xo),e(P,Io),e(m,Co),e(m,y),e(y,Po),e(y,le),e(le,Oo),e(y,Lo),e(y,Ve),e(Ve,So),e(y,Do),e(y,Ge),e(Ge,Bo),e(y,qo),e(y,Ye),e(Ye,zo),e(y,Mo),e(y,Je),e(Je,Ho),e(y,$o),e(y,Ue),e(Ue,No),e(y,Wo),e(m,jo),e(m,q),e(q,Ro),e(q,Ke),e(Ke,Vo),e(q,Go),e(q,se),e(se,Yo),e(q,Jo),T(h,Rt,p),T(h,W,p),e(W,wt),e(wt,ne),e(ne,Uo),e(W,Ko),e(W,O),e(O,Qo),e(O,Qe),e(Qe,Zo),e(O,Xo),e(O,Ze),e(Ze,er),e(O,tr),e(O,Xe),e(Xe,or),e(O,rr),T(h,Vt,p),T(h,A,p),e(A,mt),e(mt,ie),e(ie,ar),e(A,lr),e(A,z),e(z,sr),e(z,ce),e(ce,nr),e(z,ir),e(z,he),e(he,cr),e(z,hr),e(A,fr),e(A,fe),e(fe,dr),e(fe,de),e(de,pr),e(fe,ur),e(A,wr),e(A,M),e(M,mr),e(M,pe),e(pe,vr),e(M,gr),e(M,et),e(et,yr),e(M,br),T(h,Gt,p),T(h,v,p),e(v,vt),e(vt,ue),e(ue,_r),e(v,Er),e(v,L),e(L,kr),e(L,we),e(we,Fr),e(L,Ar),e(L,tt),e(tt,Tr),e(L,xr),e(L,ot),e(ot,Ir),e(L,Cr),e(v,Pr),e(v,rt),rt.innerHTML=Gs,e(v,Or),e(v,me),e(me,Lr),e(me,gt),e(gt,Sr),e(me,Dr),e(v,Br),e(v,at),at.innerHTML=Ys,e(v,qr),e(v,lt),e(lt,ve),e(ve,zr),Yt.m(Js,ve),e(ve,Jt),e(lt,Mr),e(v,Hr),e(v,ge),e(ge,$r),e(ge,ye),e(ye,Nr),e(ge,Wr),T(h,Ut,p),T(h,g,p),e(g,yt),e(yt,be),e(be,jr),e(g,Rr),e(g,H),e(H,Vr),e(H,_e),e(_e,Gr),e(H,Yr),e(H,Ee),e(Ee,Jr),e(H,Ur),e(g,Kr),e(g,$),e($,Qr),e($,st),e(st,Zr),e($,Xr),e($,nt),e(nt,ea),e($,ta),e(g,oa),e(g,it),it.innerHTML=Us,e(g,ra),e(g,N),e(N,aa),e(N,ke),e(ke,la),e(N,sa),e(N,Fe),e(Fe,na),e(N,ia),e(g,ca),e(g,bt),e(bt,_t),e(_t,ha),e(g,fa),e(g,j),e(j,da),e(j,Et),e(Et,pa),e(j,ua),e(j,Ae),e(Ae,wa),T(h,Kt,p),T(h,b,p),e(b,kt),e(kt,Te),e(Te,ma),e(b,va),e(b,Ft),e(Ft,ga),e(b,ya),e(b,At),e(At,ba),e(b,_a),e(b,Tt),e(Tt,Ea),e(b,ka),e(b,f),e(f,xt),e(xt,xe),e(xe,Fa),e(f,Aa),e(f,It),e(It,Ie),e(Ie,Ta),e(f,xa),e(f,Ct),e(Ct,Ce),e(Ce,Ia),e(f,Ca),e(f,Pt),e(Pt,Pe),e(Pe,Pa),e(f,Oa),e(f,Ot),e(Ot,Oe),e(Oe,La),e(f,Sa),e(f,Lt),e(Lt,Le),e(Le,Da),e(f,Ba),e(f,St),e(St,Se),e(Se,qa),e(f,za),e(f,Dt),e(Dt,De),e(De,Ma),e(f,Ha),e(f,Bt),e(Bt,Be),e(Be,$a),e(f,Na),e(f,qt),e(qt,qe),e(qe,Wa),e(f,ja),e(f,zt),e(zt,ze),e(ze,Ra),e(f,Va),e(f,Mt),e(Mt,Me),e(Me,Ga),e(f,Ya),e(f,Ht),e(Ht,He),e(He,Ja),e(f,Ua),e(f,$t),e($t,$e),e($e,Ka),e(f,Qa),e(f,Nt),e(Nt,Ne),e(Ne,Za),e(f,Xa),e(f,Wt),e(Wt,We),e(We,el),Qt=!0},p:sn,i(h){Qt||(js(u.$$.fragment,h),Qt=!0)},o(h){Rs(u.$$.fragment,h),Qt=!1},d(h){Vs(u,h),h&&t(x),h&&t(m),h&&t(Rt),h&&t(W),h&&t(Vt),h&&t(A),h&&t(Gt),h&&t(v),h&&t(Ut),h&&t(g),h&&t(Kt),h&&t(b)}}}function dn(je){let u,x;const m=[je[0],Hs];let B={$$slots:{default:[fn]},$$scope:{ctx:je}};for(let w=0;w<m.length;w+=1)B=ol(B,m[w]);return u=new nn({props:B}),{c(){$s(u.$$.fragment)},l(w){Ns(u.$$.fragment,w)},m(w,I){Ws(u,w,I),x=!0},p(w,[I]){const Re=I&1?on(m,[I&1&&zs(w[0]),I&0&&zs(Hs)]):{};I&2&&(Re.$$scope={dirty:I,ctx:w}),u.$set(Re)},i(w){x||(js(u.$$.fragment,w),x=!0)},o(w){Rs(u.$$.fragment,w),x=!1},d(w){Vs(u,w)}}}const Hs={title:"Errors encountered upgrading Flow v0.85",date:"2019-04-22T08:00:00Z",description:"and how we solved them",label:"blog"};function pn(je,u,x){return rn("blog",{image:hn}),je.$$set=m=>{x(0,u=ol(ol({},u),Ms(m)))},u=Ms(u),[u]}class _n extends Xs{constructor(u){super();en(this,u,pn,dn,tn,{})}}export{_n as default,Hs as metadata};
