import{S as xc,i as gc,s as Ec,C as nl,w as $i,x as Mi,y as Ni,z as _c,A as Li,q as Vi,o as ji,B as Gi,r as bc,R as Fi,k as i,e as n,t as e,m as c,c as t,a,h as r,d as o,b as l,Q as Ic,f as wn,g,F as s,O as Sc}from"../../chunks/vendor-569a3c5c.js";import{B as Oc}from"../../chunks/BlogLayout-17b76cb2.js";import{T as Tc}from"../../chunks/TableOfContent-dbc18cb8.js";import{_ as Pc}from"../../chunks/twitter-card-image-a57df29d.js";import"../../chunks/stores-ee936cd4.js";import"../../chunks/WebMentions-968cc380.js";/* empty css                                */function Cc(Cs){let u,P,v,q,f,C,Ds,V,Xn,Ro,se,oe,ne,Ws,Yi=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">getWeddingDetail</span><span style="color: var(--shiki-color-text)">(itemId</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> callback) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// call IO</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">window</span><span style="color: var(--shiki-token-function)">.fetch</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#96;https://api.com/wedding/</span><span style="color: var(--shiki-token-keyword)">$&#123;</span><span style="color: var(--shiki-color-text)">itemId</span><span style="color: var(--shiki-token-keyword)">&#125;</span><span style="color: var(--shiki-token-string-expression)">&#96;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">callback</span><span style="color: var(--shiki-color-text)">(</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    error</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    wedding</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  ) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// get notified when the result is back</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (error) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-function)">handleError</span><span style="color: var(--shiki-color-text)">(error);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    &#125; </span><span style="color: var(--shiki-token-keyword)">else</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-function)">callback</span><span style="color: var(--shiki-color-text)">(wedding);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    &#125;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &#125;);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre>`,ee,j,te,Lo,ae,re,le,Js,Bi=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">getProfile</span><span style="color: var(--shiki-color-text)">(userId</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> callback) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">window</span><span style="color: var(--shiki-token-function)">.fetch</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#96;https://api.com/user/</span><span style="color: var(--shiki-token-keyword)">$&#123;</span><span style="color: var(--shiki-color-text)">userId</span><span style="color: var(--shiki-token-keyword)">&#125;</span><span style="color: var(--shiki-token-string-expression)">&#96;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> callback);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">getWeddingDetail</span><span style="color: var(--shiki-color-text)">(itemId</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> callback) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// call IO</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">window</span><span style="color: var(--shiki-token-function)">.fetch</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#96;https://api.com/wedding/</span><span style="color: var(--shiki-token-keyword)">$&#123;</span><span style="color: var(--shiki-color-text)">itemId</span><span style="color: var(--shiki-token-keyword)">&#125;</span><span style="color: var(--shiki-token-string-expression)">&#96;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">callback</span><span style="color: var(--shiki-color-text)">(</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    error</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    wedding</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  ) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// get notified when the result is back</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (error) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-function)">handleError</span><span style="color: var(--shiki-color-text)">(error);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    &#125; </span><span style="color: var(--shiki-token-keyword)">else</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-function)">getProfile</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">wedding</span><span style="color: var(--shiki-color-text)">.groomId</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)">(groomError</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> groom) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">        </span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (groomError) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">          </span><span style="color: var(--shiki-token-function)">handleError</span><span style="color: var(--shiki-color-text)">(groomError);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">        &#125; </span><span style="color: var(--shiki-token-keyword)">else</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">          </span><span style="color: var(--shiki-token-function)">getProfile</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">wedding</span><span style="color: var(--shiki-color-text)">.brideId</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)">(brideError</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> bride) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">            </span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (brideError) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">              </span><span style="color: var(--shiki-token-function)">handleError</span><span style="color: var(--shiki-color-text)">(brideError);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">            &#125; </span><span style="color: var(--shiki-token-keyword)">else</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">              </span><span style="color: var(--shiki-token-function)">callback</span><span style="color: var(--shiki-color-text)">(&#123; wedding</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> bride</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> groom &#125;);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">            &#125;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">          &#125;);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">        &#125;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      &#125;);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    &#125;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &#125;);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre>`,ie,R,ce,G,pe,he,Y,As,ke,ye,ve,M,qs,de,ue,Rs,fe,me,we,Ls,Ui=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">getProfile</span><span style="color: var(--shiki-color-text)">(userId) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">window</span><span style="color: var(--shiki-token-function)">.fetch</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#96;https://api.com/user/</span><span style="color: var(--shiki-token-keyword)">$&#123;</span><span style="color: var(--shiki-color-text)">userId</span><span style="color: var(--shiki-token-keyword)">&#125;</span><span style="color: var(--shiki-token-string-expression)">&#96;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">async</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">getWeddingDetail</span><span style="color: var(--shiki-color-text)">(weddingId) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">try</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// pause to get detail through IO</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">wedding</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">window</span><span style="color: var(--shiki-token-function)">.fetch</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#96;https://api.com/wedding/</span><span style="color: var(--shiki-token-keyword)">$&#123;</span><span style="color: var(--shiki-color-text)">weddingId</span><span style="color: var(--shiki-token-keyword)">&#125;</span><span style="color: var(--shiki-token-string-expression)">&#96;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// and resume when the result is back, and pause again...</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">groom</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">getProfile</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">wedding</span><span style="color: var(--shiki-color-text)">.groomId);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// ... and resume and pause ...</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">bride</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">getProfile</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">wedding</span><span style="color: var(--shiki-color-text)">.brideId);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// ... and resume</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> &#123; wedding</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> bride</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> groom &#125;;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &#125; </span><span style="color: var(--shiki-token-keyword)">catch</span><span style="color: var(--shiki-color-text)"> (error) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-function)">handleError</span><span style="color: var(--shiki-color-text)">(error);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &#125;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre>`,xe,Fo,ge,xn,d,Ho,B,Ee,_e,L,be,Fs,Ie,Se,Hs,Oe,Te,Pe,F,Ce,$s,De,We,Ms,Je,Ae,qe,U,Re,z,Le,Fe,He,Q,$e,Ns,Me,Ne,Ve,Vs,zi=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">getWeddingDetail</span><span style="color: var(--shiki-color-text)">(weddingId) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// dont need await</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">wedding</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">window</span><span style="color: var(--shiki-token-function)">.fetch</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#96;https://api.com/wedding/</span><span style="color: var(--shiki-token-keyword)">$&#123;</span><span style="color: var(--shiki-color-text)">weddingId</span><span style="color: var(--shiki-token-keyword)">&#125;</span><span style="color: var(--shiki-token-string-expression)">&#96;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// &#96;getProfile&#96; could be synchronous or asynchronous</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// but &#96;getWeddingDetail&#96; shouldn&#39;t care</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">groom</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">getProfile</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">wedding</span><span style="color: var(--shiki-color-text)">.groomId);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">bride</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">getProfile</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">wedding</span><span style="color: var(--shiki-color-text)">.brideId);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> &#123; wedding</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> bride</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> groom &#125;;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre>`,je,$o,Ge,Ye,Mo,Be,Ue,No,ze,Qe,Vo,jo,Ze,Ke,Go,Xe,st,js,ot,Yo,nt,gn,Gs,Bo,Z,et,En,h,Uo,K,tt,at,zo,rt,lt,X,it,Ys,ct,pt,ht,Bs,Qi=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">main</span><span style="color: var(--shiki-color-text)">() &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">id</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">123</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">console</span><span style="color: var(--shiki-token-function)">.log</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;Getting wedding:&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> id);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> &#123; </span><span style="color: var(--shiki-token-constant)">wedding</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">bride</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">groom</span><span style="color: var(--shiki-color-text)"> &#125; </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">getWeddingDetail</span><span style="color: var(--shiki-color-text)">(id);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">console</span><span style="color: var(--shiki-token-function)">.log</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;Wedding detail:&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> wedding);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre>`,kt,Qo,yt,vt,Us,Zi=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">runtime</span><span style="color: var(--shiki-color-text)">(mainFn) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// run our entry point</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">mainFn</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// start runtime</span></span>
<span class="line"><span style="color: var(--shiki-token-function)">runtime</span><span style="color: var(--shiki-color-text)">(main);</span></span></code></pre>`,dt,Zo,ut,ft,ss,mt,zs,wt,xt,gt,I,Et,Qs,_t,bt,Zs,It,St,Ks,Ot,Tt,Xs,Pt,Ct,Dt,so,Ki=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line dim"><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">runtime</span><span style="color: var(--shiki-color-text)">(mainFn) &#123;</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// patch the &#96;window.fetch&#96; to make it &quot;pause&quot; the function</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">_originalFetch</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">window</span><span style="color: var(--shiki-color-text)">.fetch;</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">window</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-function)">fetch</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> (url</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> options) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// &quot;pause&quot; the function</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">throw</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">Error</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">  &#125;;</span></span>
<span class="line highlight"></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// run our entry point</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">try</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-function)">mainFn</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">  &#125; </span><span style="color: var(--shiki-token-keyword)">catch</span><span style="color: var(--shiki-color-text)"> (error) &#123;</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// function &quot;paused&quot;</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">  &#125;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&#125;</span></span>
<span class="line dim"></span>
<span class="line dim"><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">getWeddingDetail</span><span style="color: var(--shiki-color-text)">(weddingId) &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// calling &#96;window.fetch&#96; will &quot;pause&quot; the function and stop executing the next line.</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">wedding</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">window</span><span style="color: var(--shiki-token-function)">.fetch</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#96;https://api.com/wedding/</span><span style="color: var(--shiki-token-keyword)">$&#123;</span><span style="color: var(--shiki-color-text)">weddingId</span><span style="color: var(--shiki-token-keyword)">&#125;</span><span style="color: var(--shiki-token-string-expression)">&#96;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre>`,Wt,Ko,Jt,At,os,qt,oo,Rt,Lt,Ft,no,Xi=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line dim"><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">runtime</span><span style="color: var(--shiki-color-text)">(mainFn) &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// patch the &#96;window.fetch&#96; to make it &quot;pause&quot; the function</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">_originalFetch</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">window</span><span style="color: var(--shiki-color-text)">.fetch;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">window</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-function)">fetch</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> (url</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> options) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// &quot;pause&quot; the function</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">throw</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">Error</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  &#125;;</span></span>
<span class="line dim"></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// run our entry point</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">runMain</span><span style="color: var(--shiki-color-text)">() &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">try</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-function)">mainFn</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    &#125; </span><span style="color: var(--shiki-token-keyword)">catch</span><span style="color: var(--shiki-color-text)"> (error) &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-comment)">// function &quot;paused&quot;</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-comment)">// resumed by rerun the &#96;mainFn&#96;</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-function)">runMain</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    &#125;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  &#125;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">runMain</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre>`,Ht,ns,$t,eo,Mt,Nt,Vt,es,jt,to,Gt,Yt,Bt,ao,sc=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line dim"><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">runtime</span><span style="color: var(--shiki-color-text)">(mainFn) &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// patch the &#96;window.fetch&#96; to make it &quot;pause&quot; the function</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">_originalFetch</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">window</span><span style="color: var(--shiki-color-text)">.fetch;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">window</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-function)">fetch</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> (url</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> options) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-function)">_originalFetch</span><span style="color: var(--shiki-color-text)">(url</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> options)</span><span style="color: var(--shiki-token-function)">.then</span><span style="color: var(--shiki-color-text)">(result </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-comment)">// resume only when the result is back</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-function)">runMain</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    &#125;);</span></span>
<span class="line dim"></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">throw</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">Error</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  &#125;;</span></span>
<span class="line dim"></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// run our entry point</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">runMain</span><span style="color: var(--shiki-color-text)">() &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">try</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-function)">mainFn</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    &#125; </span><span style="color: var(--shiki-token-keyword)">catch</span><span style="color: var(--shiki-color-text)"> (error) &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-comment)">// function &quot;paused&quot;</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-comment)">// no rerun</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    &#125;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  &#125;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">runMain</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre>`,Ut,ts,zt,ro,Qt,Zt,Kt,lo,oc=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// 1st time running &#96;getWeddingDetail&#96;</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// call &#96;window.fetch&#96;, throw Error and &quot;paused&quot;</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">wedding</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">window</span><span style="color: var(--shiki-token-function)">.fetch</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#96;https://api.com/wedding/</span><span style="color: var(--shiki-token-keyword)">$&#123;</span><span style="color: var(--shiki-color-text)">weddingId</span><span style="color: var(--shiki-token-keyword)">&#125;</span><span style="color: var(--shiki-token-string-expression)">&#96;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// when fetch response returns, rerun the main function</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// 2nd time running &#96;getWeddingDetail&#96;</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// call &#96;window.fetch&#96;, and should return the response to &quot;resume&quot;</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">wedding</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">window</span><span style="color: var(--shiki-token-function)">.fetch</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#96;https://api.com/wedding/</span><span style="color: var(--shiki-token-keyword)">$&#123;</span><span style="color: var(--shiki-color-text)">weddingId</span><span style="color: var(--shiki-token-keyword)">&#125;</span><span style="color: var(--shiki-token-string-expression)">&#96;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// ...</span></span></code></pre>`,Xt,as,sa,io,oa,na,ea,Xo,ta,aa,co,nc=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line dim"><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">runtime</span><span style="color: var(--shiki-color-text)">(mainFn) &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// patch the &#96;window.fetch&#96; to make it &quot;pause&quot; the function</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">_originalFetch</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">window</span><span style="color: var(--shiki-color-text)">.fetch;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">window</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-function)">fetch</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> (url</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> options) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// return immediately if response is cached.</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-constant)">cache</span><span style="color: var(--shiki-token-function)">.has</span><span style="color: var(--shiki-color-text)">([url</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> options])) &#123;</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">cache</span><span style="color: var(--shiki-token-function)">.get</span><span style="color: var(--shiki-color-text)">([url</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> options]);</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">    &#125;</span></span>
<span class="line highlight"></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-function)">_originalFetch</span><span style="color: var(--shiki-color-text)">(url</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> options)</span><span style="color: var(--shiki-token-function)">.then</span><span style="color: var(--shiki-color-text)">(result </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-constant)">cache</span><span style="color: var(--shiki-token-function)">.set</span><span style="color: var(--shiki-color-text)">([url</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> options]</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> result);</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-comment)">// resume only when the result is back</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-function)">runMain</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">    &#125;);</span></span>
<span class="line dim"></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">throw</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">Error</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  &#125;;</span></span>
<span class="line dim"></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// run our entry point ...</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre>`,ra,sn,la,ia,on,ca,pa,rs,ha,po,ka,ya,va,ls,da,ho,ua,fa,_n,m,nn,is,en,ma,wa,cs,xa,ko,ga,Ea,_a,yo,ec=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line dim"><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">main</span><span style="color: var(--shiki-color-text)">() &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">id</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">123</span><span style="color: var(--shiki-color-text)">;</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">runSideEffects</span><span style="color: var(--shiki-color-text)">(() </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">console</span><span style="color: var(--shiki-token-function)">.log</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;Getting wedding:&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> id));</span></span>
<span class="line dim"></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> &#123; </span><span style="color: var(--shiki-token-constant)">wedding</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">bride</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">groom</span><span style="color: var(--shiki-color-text)"> &#125; </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">getWeddingDetail</span><span style="color: var(--shiki-color-text)">(id);</span></span>
<span class="line dim"></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">runSideEffects</span><span style="color: var(--shiki-color-text)">(() </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">console</span><span style="color: var(--shiki-token-function)">.log</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;Wedding detail:&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> wedding));</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre>`,ba,ps,Ia,vo,Sa,Oa,Ta,uo,tc=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line dim"><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">runtime</span><span style="color: var(--shiki-color-text)">(mainFn) &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// patch the &#96;window.fetch&#96; to make it &quot;pause&quot; the function...</span></span>
<span class="line dim"></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// provide &#96;runSideEffects&#96;</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">sideEffects</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> [];</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">window</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-function)">runSideEffects</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> fn </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-constant)">sideEffects</span><span style="color: var(--shiki-token-function)">.push</span><span style="color: var(--shiki-color-text)">(fn);</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">  &#125;;</span></span>
<span class="line dim"></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// run our entry point</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">runMain</span><span style="color: var(--shiki-color-text)">() &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">try</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-function)">mainFn</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-constant)">sideEffects</span><span style="color: var(--shiki-token-function)">.forEach</span><span style="color: var(--shiki-color-text)">(fn </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">fn</span><span style="color: var(--shiki-color-text)">());</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    &#125; </span><span style="color: var(--shiki-token-keyword)">catch</span><span style="color: var(--shiki-color-text)"> (error) &#123;</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-comment)">// clear side effects</span></span>
<span class="line highlight"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-constant)">sideEffects</span><span style="color: var(--shiki-token-function)">.splice</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">0</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">sideEffects</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">length</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">    &#125;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  &#125;</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">runMain</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line dim"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre>`,Pa,hs,Ca,fo,Da,Wa,Ja,ks,Aa,mo,qa,Ra,La,tn,Fa,Ha,an,$a,Ma,_,el,bn,O,rn,ys,Na,Va,ln,ja,Ga,cn,Ya,Ba,pn,Ua,In,E,hn,vs,za,Qa,ds,Za,us,Ka,Xa,sr,wo,ac=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">Component</span><span style="color: var(--shiki-color-text)">() &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">data</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">getDataFromNetwork</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> &lt;</span><span style="color: var(--shiki-token-string-expression)">div</span><span style="color: var(--shiki-color-text)"> /&gt;;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre>`,or,xo,go,nr,er,tr,kn,ar,rr,S,H,lr,Eo,ir,cr,_o,pr,hr,kr,yn,yr,vr,$,dr,bo,ur,fr,Io,mr,wr,xr,fs,gr,So,Er,_r,br,ms,Ir,Oo,Sr,Or,Sn,D,vn,ws,Tr,Pr,dn,Cr,Dr,xs,Wr,gs,Jr,Ar,On,b,un,Es,qr,Rr,_s,Lr,bs,Fr,Hr,$r,Is,Mr,Ss,Nr,Vr,jr,fn,Gr,Yr,Os,To,Br,Ts,Ur,zr,Po,Qr,Ps,Zr,Tn;return u=new Tc({props:{data:[{link:"asynchronous-javascript",title:"Asynchronous JavaScript",nested:[{link:"every-function-has-a-color",title:"Every function has a color"}]},{link:"writing-the-runtime",title:'Writing "the runtime"',nested:[{link:"the-first-constraint-entry-point",title:"The first constraint: entry point"},{link:"the-second-constraint-pure-functions",title:"The second constraint: pure functions"}]},{link:"what-have-we-done-so-far",title:"What have we done so far?"},{link:"okay-cool-why-are-we-doing-this",title:"Okay cool. Why are we doing this?",nested:[{link:"yet-this-is-not-suspense",title:"Yet, this is not Suspense."}]},{link:"closing-note",title:"Closing Note"}]}}),{c(){$i(u.$$.fragment),P=i(),v=n("section"),q=n("h2"),f=n("a"),C=e("Asynchronous JavaScript"),Ds=i(),V=n("p"),Xn=e("In JavaScript, IO (eg Filesystem IO, Network IO) is "),Ro=n("strong"),se=e("asynchronous"),oe=e(". That means when you are calling a function that involves IO, you got to have a callback function passed in to be notified when the IO is done."),ne=i(),Ws=n("div"),ee=i(),j=n("p"),te=e("It may seemed innocent at first, but once we start to chain multiple asynchronous calls, we end up in a situation known as the "),Lo=n("strong"),ae=e("callback hell"),re=e(", which without a doubt, is something really not nice to work with:"),le=i(),Js=n("div"),ie=i(),R=n("p"),ce=e("So we came up with "),G=n("a"),pe=e("Promise"),he=e(" and "),Y=n("a"),As=n("code"),ke=e("async-await"),ye=e(", to make life easier."),ve=i(),M=n("p"),qs=n("code"),de=e("async-await"),ue=e(" allows us to write asynchronous code like a synchronous one, using "),Rs=n("code"),fe=e("await"),me=e(", you can pause the function, wait for the IO, and continue the execution."),we=i(),Ls=n("div"),xe=i(),Fo=n("p"),ge=e("What's more, you can catch all the error at once, magical right?"),xn=i(),d=n("section"),Ho=n("h3"),B=n("a"),Ee=e("Every function has a color"),_e=i(),L=n("p"),be=e("Still, "),Fs=n("code"),Ie=e("async-await"),Se=e(" has its short-coming. Things go wrong when you forgot to use "),Hs=n("code"),Oe=e("await"),Te=e("."),Pe=i(),F=n("p"),Ce=e("This could happen if you didn't know the implementation detail of "),$s=n("code"),De=e("getProfile"),We=e(" where "),Ms=n("code"),Je=e("getProfile"),Ae=e(" is asynchronous, because it makes an asynchronous IO call."),qe=i(),U=n("p"),Re=e("This leads to another problem, which is "),z=n("a"),Le=e("every function has a color"),Fe=e(". As soon as you make an asynchronous call in a function, you have to make the function itself asynchronous, and the caller of this function to be asynchronous, and its caller too, ...!"),He=i(),Q=n("p"),$e=e("So, is there another way to pause a JavaScript function, without having to "),Ns=n("code"),Me=e("await"),Ne=e("?"),Ve=i(),Vs=n("div"),je=i(),$o=n("p"),Ge=e('This would be arguably much simpler, making everything seemingly "synchronous".'),Ye=i(),Mo=n("p"),Be=e("So, is this possible?"),Ue=i(),No=n("p"),ze=e("To be able to pause a JavaScript function, is something decided in the JavaScript runtime."),Qe=i(),Vo=n("p"),jo=n("strong"),Ze=e("So are we diving into the JavaScript runtime engine today?"),Ke=i(),Go=n("p"),Xe=e("Not really, I don't know much about C++ or whatever language the JavaScript runtime is implemented. \u{1F648}"),st=i(),js=n("p"),ot=e("But we are going to write a simple runtime in JavaScript, with some constraints. "),Yo=n("em"),nt=e("(Come on, it is hard to write a full blown runtime, adding constraints will make it easier for me to finish it in one blog post)"),gn=i(),Gs=n("section"),Bo=n("h2"),Z=n("a"),et=e('Writing "the runtime"'),En=i(),h=n("section"),Uo=n("h3"),K=n("a"),tt=e("The first constraint: entry point"),at=i(),zo=n("p"),rt=e("The first constraint for the runtime, is to have an entry point."),lt=i(),X=n("p"),it=e("In our case, we are going to make "),Ys=n("code"),ct=e("main"),pt=e(" our entry point:"),ht=i(),Bs=n("div"),kt=i(),Qo=n("p"),yt=e("So our runtime looks something like this:"),vt=i(),Us=n("div"),dt=i(),Zo=n("p"),ut=e("Ok, so we have our basic structure, what's next?"),ft=i(),ss=n("p"),mt=e("Firstly, we need to figure how to pause a JS function midway, without using "),zs=n("code"),wt=e("await"),xt=e("."),gt=i(),I=n("p"),Et=e("Well, there's "),Qs=n("code"),_t=e("throw"),bt=e(" or "),Zs=n("code"),It=e("return"),St=e(", which is able to exit the JS function midway. I gonna choose "),Ks=n("code"),Ot=e("throw"),Tt=e(', which is more suited to exit the function "unexpectedly", rather than '),Xs=n("code"),Pt=e("return"),Ct=e(" which is more for exit normally:"),Dt=i(),so=n("div"),Wt=i(),Ko=n("p"),Jt=e(`But in both cases, there's no way to "resume" the function. However, it is still a good starting point.`),At=i(),os=n("p"),qt=e('One way of "resuming" the function is to rerun the '),oo=n("code"),Rt=e("main"),Lt=e(" function again."),Ft=i(),no=n("div"),Ht=i(),ns=n("p"),$t=e("Ignore all the doubts you have for why rerunning the entire "),eo=n("code"),Mt=e("main"),Nt=e(' function is a bad idea for "resuming" the function for now.'),Vt=i(),es=n("p"),jt=e('The current implementation is inaccurate, and will lead us to an infinite loop, because we "resumed" the "paused" function immediately, which should be only after the '),to=n("code"),Gt=e("window.fetch"),Yt=e(" had succeeded:"),Bt=i(),ao=n("div"),Ut=i(),ts=n("p"),zt=e("Still the infinite-loop still happened, that's because "),ro=n("code"),Qt=e("window.fetch"),Zt=e(' should return the response object when "resumed":'),Kt=i(),lo=n("div"),Xt=i(),as=n("p"),sa=e("How do we throw Error when the "),io=n("code"),oa=e("fetch"),na=e(" is called the 1st time, and return the response for the subsequent calls?"),ea=i(),Xo=n("p"),ta=e("One can achieve it by caching the response:"),aa=i(),co=n("div"),ra=i(),sn=n("p"),la=e("It works!"),ia=i(),on=n("p"),ca=e('After running the main function a few times, by "pausing" and "resuming", or shall I say, "early exit" and "rerun", we finally hit the last statement of the main function and finish the function.'),pa=i(),rs=n("p"),ha=e("Except, if you look at the console, because of rerunning multiple times, we see the "),po=n("code"),ka=e('"Getting wedding: 123"'),ya=e(" multiple times!"),va=i(),ls=n("p"),da=e("That is because, "),ho=n("code"),ua=e("console.log"),fa=e(" has side effects!"),_n=i(),m=n("section"),nn=n("h3"),is=n("a"),en=n("strong"),ma=e("The second constraint: pure functions"),wa=i(),cs=n("p"),xa=e("The second constraint of our runtime is to use only pure functions. If you wish to call functions with side effects, you have to use our special construct, "),ko=n("code"),ga=e("runSideEffects()"),Ea=e(":"),_a=i(),yo=n("div"),ba=i(),ps=n("p"),Ia=e("So, how is "),vo=n("code"),Sa=e("runSideEffects"),Oa=e(" implemented?"),Ta=i(),uo=n("div"),Pa=i(),hs=n("p"),Ca=e("What we are trying to do here is that, we push all the side effects into an array, and only run all of them when we finally finish our "),fo=n("code"),Da=e("main"),Wa=e(" function."),Ja=i(),ks=n("p"),Aa=e('And if we "paused" our function, before rerunning the '),mo=n("code"),qa=e("main"),Ra=e(' function to "resume", we clear all the side effects, since the same side effects will be pushed into the array again.'),La=i(),tn=n("p"),Fa=e("Run it again, and yes it works!"),Ha=i(),an=n("p"),$a=e("You can try out the complete code in the CodeSandbox:"),Ma=i(),_=n("iframe"),bn=i(),O=n("section"),rn=n("h2"),ys=n("a"),Na=e("What have we done so far?"),Va=i(),ln=n("p"),ja=e('To mimic a pause and resume a function in JavaScript, we can throw an error to "pause" the execution of the function halfway, and "resume" it by reruning the function.'),Ga=i(),cn=n("p"),Ya=e('To "resuming" from where it left off, the point of where we threw an error should now returning a value instead, so that it feels like we are picking up and resuming from that point. To achieve this, we can use some caching mechanism.'),Ba=i(),pn=n("p"),Ua=e("Lastly, to safely reruning the function multiple times, we need to make sure that the function is pure. If we have side effects, we need to collect them and only apply them when the function has successfully reach the end."),In=i(),E=n("section"),hn=n("h2"),vs=n("a"),za=e("Okay cool. Why are we doing this?"),Qa=i(),ds=n("p"),Za=e("Well, the idea of how to pause and resume a JavaScript function comes when I was reading about "),us=n("a"),Ka=e("React Suspense"),Xa=e(". With Suspense, fetching / getting data can be written declaratively:"),sr=i(),wo=n("div"),or=i(),xo=n("p"),go=n("code"),nr=e("getDataFromNetwork"),er=e(" will get actually get the data from the network, which is asynchronous, but how did React make it look like it is synchronous?"),tr=i(),kn=n("p"),ar=e("Think of how you would have written in React:"),rr=i(),S=n("ul"),H=n("li"),lr=e("Instead of providing an entry point, your "),Eo=n("code"),ir=e("render"),cr=e(' function is the entry point for React. To "resume" each "pause" the render, React calls the '),_o=n("code"),pr=e("render"),hr=e(" function multiple times."),kr=i(),yn=n("li"),yr=e("Your render function has to be pure and side-effects free"),vr=i(),$=n("li"),dr=e("To "),bo=n("code"),ur=e("runSideEffects"),fr=e(", you use "),Io=n("code"),mr=e("React.useEffect"),wr=e(" instead."),xr=i(),fs=n("li"),gr=e("To fetch + cache, you use "),So=n("code"),Er=e("react-cache"),_r=e(" to create a resource."),br=i(),ms=n("li"),Ir=e('Except, instead of "pause" and do nothing, React handles the "pause" with the nearest '),Oo=n("code"),Sr=e("<Suspense />"),Or=e(' componnet to render some fallback content. When the promise is resolve, React "resumes" the render and render the content with the data.'),Sn=i(),D=n("section"),vn=n("h3"),ws=n("a"),Tr=e("Yet, this is not Suspense."),Pr=i(),dn=n("p"),Cr=e("No, I dont think so."),Dr=i(),xs=n("p"),Wr=e(`Suspense is based on some function programming concept, called the "one-shot delimited continuation", which is explained in Dan Abramov's `),gs=n("a"),Jr=e('"Algebraic Effects for the Rest of Us"'),Ar=e("."),On=i(),b=n("section"),un=n("h2"),Es=n("a"),qr=e("Closing Note"),Rr=i(),_s=n("p"),Lr=e("This whole article is based on a thought experiment I had when I was trying to understand the mechanics of "),bs=n("a"),Fr=e("React Suspense"),Hr=e(". So, pardon me if the flow of the content is a bit awkward or crude."),$r=i(),Is=n("p"),Mr=e('Yet, after writing my thought process out, I did more research, and realised that "pausing and resuming execution" is a concept called '),Ss=n("a"),Nr=e('"continuations"'),Vr=e(" in functional programming."),jr=i(),fn=n("p"),Gr=e("So, if you are interested to learn more, here are some starting points:"),Yr=i(),Os=n("ul"),To=n("li"),Br=e("James Long's "),Ts=n("a"),Ur=e("What's in a Continuation"),zr=i(),Po=n("li"),Qr=e("Florian Loitsch's "),Ps=n("a"),Zr=e("Exceptional Continuations in JavaScript"),this.h()},l(p){Mi(u.$$.fragment,p),P=c(p),v=t(p,"SECTION",{});var y=a(v);q=t(y,"H2",{});var tl=a(q);f=t(tl,"A",{href:!0,id:!0});var al=a(f);C=r(al,"Asynchronous JavaScript"),al.forEach(o),tl.forEach(o),Ds=c(y),V=t(y,"P",{});var Pn=a(V);Xn=r(Pn,"In JavaScript, IO (eg Filesystem IO, Network IO) is "),Ro=t(Pn,"STRONG",{});var rl=a(Ro);se=r(rl,"asynchronous"),rl.forEach(o),oe=r(Pn,". That means when you are calling a function that involves IO, you got to have a callback function passed in to be notified when the IO is done."),Pn.forEach(o),ne=c(y),Ws=t(y,"DIV",{class:!0});var rc=a(Ws);rc.forEach(o),ee=c(y),j=t(y,"P",{});var Cn=a(j);te=r(Cn,"It may seemed innocent at first, but once we start to chain multiple asynchronous calls, we end up in a situation known as the "),Lo=t(Cn,"STRONG",{});var ll=a(Lo);ae=r(ll,"callback hell"),ll.forEach(o),re=r(Cn,", which without a doubt, is something really not nice to work with:"),Cn.forEach(o),le=c(y),Js=t(y,"DIV",{class:!0});var lc=a(Js);lc.forEach(o),ie=c(y),R=t(y,"P",{});var Co=a(R);ce=r(Co,"So we came up with "),G=t(Co,"A",{href:!0,rel:!0});var il=a(G);pe=r(il,"Promise"),il.forEach(o),he=r(Co," and "),Y=t(Co,"A",{href:!0,rel:!0});var cl=a(Y);As=t(cl,"CODE",{class:!0});var pl=a(As);ke=r(pl,"async-await"),pl.forEach(o),cl.forEach(o),ye=r(Co,", to make life easier."),Co.forEach(o),ve=c(y),M=t(y,"P",{});var mn=a(M);qs=t(mn,"CODE",{class:!0});var hl=a(qs);de=r(hl,"async-await"),hl.forEach(o),ue=r(mn," allows us to write asynchronous code like a synchronous one, using "),Rs=t(mn,"CODE",{class:!0});var kl=a(Rs);fe=r(kl,"await"),kl.forEach(o),me=r(mn,", you can pause the function, wait for the IO, and continue the execution."),mn.forEach(o),we=c(y),Ls=t(y,"DIV",{class:!0});var ic=a(Ls);ic.forEach(o),xe=c(y),Fo=t(y,"P",{});var yl=a(Fo);ge=r(yl,"What's more, you can catch all the error at once, magical right?"),yl.forEach(o),y.forEach(o),xn=c(p),d=t(p,"SECTION",{});var w=a(d);Ho=t(w,"H3",{});var vl=a(Ho);B=t(vl,"A",{href:!0,id:!0});var dl=a(B);Ee=r(dl,"Every function has a color"),dl.forEach(o),vl.forEach(o),_e=c(w),L=t(w,"P",{});var Do=a(L);be=r(Do,"Still, "),Fs=t(Do,"CODE",{class:!0});var ul=a(Fs);Ie=r(ul,"async-await"),ul.forEach(o),Se=r(Do," has its short-coming. Things go wrong when you forgot to use "),Hs=t(Do,"CODE",{class:!0});var fl=a(Hs);Oe=r(fl,"await"),fl.forEach(o),Te=r(Do,"."),Do.forEach(o),Pe=c(w),F=t(w,"P",{});var Wo=a(F);Ce=r(Wo,"This could happen if you didn't know the implementation detail of "),$s=t(Wo,"CODE",{class:!0});var ml=a($s);De=r(ml,"getProfile"),ml.forEach(o),We=r(Wo," where "),Ms=t(Wo,"CODE",{class:!0});var wl=a(Ms);Je=r(wl,"getProfile"),wl.forEach(o),Ae=r(Wo," is asynchronous, because it makes an asynchronous IO call."),Wo.forEach(o),qe=c(w),U=t(w,"P",{});var Dn=a(U);Re=r(Dn,"This leads to another problem, which is "),z=t(Dn,"A",{href:!0,rel:!0});var xl=a(z);Le=r(xl,"every function has a color"),xl.forEach(o),Fe=r(Dn,". As soon as you make an asynchronous call in a function, you have to make the function itself asynchronous, and the caller of this function to be asynchronous, and its caller too, ...!"),Dn.forEach(o),He=c(w),Q=t(w,"P",{});var Wn=a(Q);$e=r(Wn,"So, is there another way to pause a JavaScript function, without having to "),Ns=t(Wn,"CODE",{class:!0});var gl=a(Ns);Me=r(gl,"await"),gl.forEach(o),Ne=r(Wn,"?"),Wn.forEach(o),Ve=c(w),Vs=t(w,"DIV",{class:!0});var cc=a(Vs);cc.forEach(o),je=c(w),$o=t(w,"P",{});var El=a($o);Ge=r(El,'This would be arguably much simpler, making everything seemingly "synchronous".'),El.forEach(o),Ye=c(w),Mo=t(w,"P",{});var _l=a(Mo);Be=r(_l,"So, is this possible?"),_l.forEach(o),Ue=c(w),No=t(w,"P",{});var bl=a(No);ze=r(bl,"To be able to pause a JavaScript function, is something decided in the JavaScript runtime."),bl.forEach(o),Qe=c(w),Vo=t(w,"P",{});var Il=a(Vo);jo=t(Il,"STRONG",{});var Sl=a(jo);Ze=r(Sl,"So are we diving into the JavaScript runtime engine today?"),Sl.forEach(o),Il.forEach(o),Ke=c(w),Go=t(w,"P",{});var Ol=a(Go);Xe=r(Ol,"Not really, I don't know much about C++ or whatever language the JavaScript runtime is implemented. \u{1F648}"),Ol.forEach(o),st=c(w),js=t(w,"P",{});var Kr=a(js);ot=r(Kr,"But we are going to write a simple runtime in JavaScript, with some constraints. "),Yo=t(Kr,"EM",{});var Tl=a(Yo);nt=r(Tl,"(Come on, it is hard to write a full blown runtime, adding constraints will make it easier for me to finish it in one blog post)"),Tl.forEach(o),Kr.forEach(o),w.forEach(o),gn=c(p),Gs=t(p,"SECTION",{});var Pl=a(Gs);Bo=t(Pl,"H2",{});var Cl=a(Bo);Z=t(Cl,"A",{href:!0,id:!0});var Dl=a(Z);et=r(Dl,'Writing "the runtime"'),Dl.forEach(o),Cl.forEach(o),Pl.forEach(o),En=c(p),h=t(p,"SECTION",{});var k=a(h);Uo=t(k,"H3",{});var Wl=a(Uo);K=t(Wl,"A",{href:!0,id:!0});var Jl=a(K);tt=r(Jl,"The first constraint: entry point"),Jl.forEach(o),Wl.forEach(o),at=c(k),zo=t(k,"P",{});var Al=a(zo);rt=r(Al,"The first constraint for the runtime, is to have an entry point."),Al.forEach(o),lt=c(k),X=t(k,"P",{});var Jn=a(X);it=r(Jn,"In our case, we are going to make "),Ys=t(Jn,"CODE",{class:!0});var ql=a(Ys);ct=r(ql,"main"),ql.forEach(o),pt=r(Jn," our entry point:"),Jn.forEach(o),ht=c(k),Bs=t(k,"DIV",{class:!0});var pc=a(Bs);pc.forEach(o),kt=c(k),Qo=t(k,"P",{});var Rl=a(Qo);yt=r(Rl,"So our runtime looks something like this:"),Rl.forEach(o),vt=c(k),Us=t(k,"DIV",{class:!0});var hc=a(Us);hc.forEach(o),dt=c(k),Zo=t(k,"P",{});var Ll=a(Zo);ut=r(Ll,"Ok, so we have our basic structure, what's next?"),Ll.forEach(o),ft=c(k),ss=t(k,"P",{});var An=a(ss);mt=r(An,"Firstly, we need to figure how to pause a JS function midway, without using "),zs=t(An,"CODE",{class:!0});var Fl=a(zs);wt=r(Fl,"await"),Fl.forEach(o),xt=r(An,"."),An.forEach(o),gt=c(k),I=t(k,"P",{});var W=a(I);Et=r(W,"Well, there's "),Qs=t(W,"CODE",{class:!0});var Hl=a(Qs);_t=r(Hl,"throw"),Hl.forEach(o),bt=r(W," or "),Zs=t(W,"CODE",{class:!0});var $l=a(Zs);It=r($l,"return"),$l.forEach(o),St=r(W,", which is able to exit the JS function midway. I gonna choose "),Ks=t(W,"CODE",{class:!0});var Ml=a(Ks);Ot=r(Ml,"throw"),Ml.forEach(o),Tt=r(W,', which is more suited to exit the function "unexpectedly", rather than '),Xs=t(W,"CODE",{class:!0});var Nl=a(Xs);Pt=r(Nl,"return"),Nl.forEach(o),Ct=r(W," which is more for exit normally:"),W.forEach(o),Dt=c(k),so=t(k,"DIV",{class:!0});var kc=a(so);kc.forEach(o),Wt=c(k),Ko=t(k,"P",{});var Vl=a(Ko);Jt=r(Vl,`But in both cases, there's no way to "resume" the function. However, it is still a good starting point.`),Vl.forEach(o),At=c(k),os=t(k,"P",{});var qn=a(os);qt=r(qn,'One way of "resuming" the function is to rerun the '),oo=t(qn,"CODE",{class:!0});var jl=a(oo);Rt=r(jl,"main"),jl.forEach(o),Lt=r(qn," function again."),qn.forEach(o),Ft=c(k),no=t(k,"DIV",{class:!0});var yc=a(no);yc.forEach(o),Ht=c(k),ns=t(k,"P",{});var Rn=a(ns);$t=r(Rn,"Ignore all the doubts you have for why rerunning the entire "),eo=t(Rn,"CODE",{class:!0});var Gl=a(eo);Mt=r(Gl,"main"),Gl.forEach(o),Nt=r(Rn,' function is a bad idea for "resuming" the function for now.'),Rn.forEach(o),Vt=c(k),es=t(k,"P",{});var Ln=a(es);jt=r(Ln,'The current implementation is inaccurate, and will lead us to an infinite loop, because we "resumed" the "paused" function immediately, which should be only after the '),to=t(Ln,"CODE",{class:!0});var Yl=a(to);Gt=r(Yl,"window.fetch"),Yl.forEach(o),Yt=r(Ln," had succeeded:"),Ln.forEach(o),Bt=c(k),ao=t(k,"DIV",{class:!0});var vc=a(ao);vc.forEach(o),Ut=c(k),ts=t(k,"P",{});var Fn=a(ts);zt=r(Fn,"Still the infinite-loop still happened, that's because "),ro=t(Fn,"CODE",{class:!0});var Bl=a(ro);Qt=r(Bl,"window.fetch"),Bl.forEach(o),Zt=r(Fn,' should return the response object when "resumed":'),Fn.forEach(o),Kt=c(k),lo=t(k,"DIV",{class:!0});var dc=a(lo);dc.forEach(o),Xt=c(k),as=t(k,"P",{});var Hn=a(as);sa=r(Hn,"How do we throw Error when the "),io=t(Hn,"CODE",{class:!0});var Ul=a(io);oa=r(Ul,"fetch"),Ul.forEach(o),na=r(Hn," is called the 1st time, and return the response for the subsequent calls?"),Hn.forEach(o),ea=c(k),Xo=t(k,"P",{});var zl=a(Xo);ta=r(zl,"One can achieve it by caching the response:"),zl.forEach(o),aa=c(k),co=t(k,"DIV",{class:!0});var uc=a(co);uc.forEach(o),ra=c(k),sn=t(k,"P",{});var Ql=a(sn);la=r(Ql,"It works!"),Ql.forEach(o),ia=c(k),on=t(k,"P",{});var Zl=a(on);ca=r(Zl,'After running the main function a few times, by "pausing" and "resuming", or shall I say, "early exit" and "rerun", we finally hit the last statement of the main function and finish the function.'),Zl.forEach(o),pa=c(k),rs=t(k,"P",{});var $n=a(rs);ha=r($n,"Except, if you look at the console, because of rerunning multiple times, we see the "),po=t($n,"CODE",{class:!0});var Kl=a(po);ka=r(Kl,'"Getting wedding: 123"'),Kl.forEach(o),ya=r($n," multiple times!"),$n.forEach(o),va=c(k),ls=t(k,"P",{});var Mn=a(ls);da=r(Mn,"That is because, "),ho=t(Mn,"CODE",{class:!0});var Xl=a(ho);ua=r(Xl,"console.log"),Xl.forEach(o),fa=r(Mn," has side effects!"),Mn.forEach(o),k.forEach(o),_n=c(p),m=t(p,"SECTION",{});var x=a(m);nn=t(x,"H3",{});var si=a(nn);is=t(si,"A",{href:!0,id:!0});var oi=a(is);en=t(oi,"STRONG",{});var ni=a(en);ma=r(ni,"The second constraint: pure functions"),ni.forEach(o),oi.forEach(o),si.forEach(o),wa=c(x),cs=t(x,"P",{});var Nn=a(cs);xa=r(Nn,"The second constraint of our runtime is to use only pure functions. If you wish to call functions with side effects, you have to use our special construct, "),ko=t(Nn,"CODE",{class:!0});var ei=a(ko);ga=r(ei,"runSideEffects()"),ei.forEach(o),Ea=r(Nn,":"),Nn.forEach(o),_a=c(x),yo=t(x,"DIV",{class:!0});var fc=a(yo);fc.forEach(o),ba=c(x),ps=t(x,"P",{});var Vn=a(ps);Ia=r(Vn,"So, how is "),vo=t(Vn,"CODE",{class:!0});var ti=a(vo);Sa=r(ti,"runSideEffects"),ti.forEach(o),Oa=r(Vn," implemented?"),Vn.forEach(o),Ta=c(x),uo=t(x,"DIV",{class:!0});var mc=a(uo);mc.forEach(o),Pa=c(x),hs=t(x,"P",{});var jn=a(hs);Ca=r(jn,"What we are trying to do here is that, we push all the side effects into an array, and only run all of them when we finally finish our "),fo=t(jn,"CODE",{class:!0});var ai=a(fo);Da=r(ai,"main"),ai.forEach(o),Wa=r(jn," function."),jn.forEach(o),Ja=c(x),ks=t(x,"P",{});var Gn=a(ks);Aa=r(Gn,'And if we "paused" our function, before rerunning the '),mo=t(Gn,"CODE",{class:!0});var ri=a(mo);qa=r(ri,"main"),ri.forEach(o),Ra=r(Gn,' function to "resume", we clear all the side effects, since the same side effects will be pushed into the array again.'),Gn.forEach(o),La=c(x),tn=t(x,"P",{});var li=a(tn);Fa=r(li,"Run it again, and yes it works!"),li.forEach(o),Ha=c(x),an=t(x,"P",{});var ii=a(an);$a=r(ii,"You can try out the complete code in the CodeSandbox:"),ii.forEach(o),Ma=c(x),_=t(x,"IFRAME",{src:!0,style:!0,title:!0,allow:!0,sandbox:!0}),a(_).forEach(o),x.forEach(o),bn=c(p),O=t(p,"SECTION",{});var N=a(O);rn=t(N,"H2",{});var ci=a(rn);ys=t(ci,"A",{href:!0,id:!0});var pi=a(ys);Na=r(pi,"What have we done so far?"),pi.forEach(o),ci.forEach(o),Va=c(N),ln=t(N,"P",{});var hi=a(ln);ja=r(hi,'To mimic a pause and resume a function in JavaScript, we can throw an error to "pause" the execution of the function halfway, and "resume" it by reruning the function.'),hi.forEach(o),Ga=c(N),cn=t(N,"P",{});var ki=a(cn);Ya=r(ki,'To "resuming" from where it left off, the point of where we threw an error should now returning a value instead, so that it feels like we are picking up and resuming from that point. To achieve this, we can use some caching mechanism.'),ki.forEach(o),Ba=c(N),pn=t(N,"P",{});var yi=a(pn);Ua=r(yi,"Lastly, to safely reruning the function multiple times, we need to make sure that the function is pure. If we have side effects, we need to collect them and only apply them when the function has successfully reach the end."),yi.forEach(o),N.forEach(o),In=c(p),E=t(p,"SECTION",{});var T=a(E);hn=t(T,"H2",{});var vi=a(hn);vs=t(vi,"A",{href:!0,id:!0});var di=a(vs);za=r(di,"Okay cool. Why are we doing this?"),di.forEach(o),vi.forEach(o),Qa=c(T),ds=t(T,"P",{});var Yn=a(ds);Za=r(Yn,"Well, the idea of how to pause and resume a JavaScript function comes when I was reading about "),us=t(Yn,"A",{href:!0,rel:!0});var ui=a(us);Ka=r(ui,"React Suspense"),ui.forEach(o),Xa=r(Yn,". With Suspense, fetching / getting data can be written declaratively:"),Yn.forEach(o),sr=c(T),wo=t(T,"DIV",{class:!0});var wc=a(wo);wc.forEach(o),or=c(T),xo=t(T,"P",{});var Xr=a(xo);go=t(Xr,"CODE",{class:!0});var fi=a(go);nr=r(fi,"getDataFromNetwork"),fi.forEach(o),er=r(Xr," will get actually get the data from the network, which is asynchronous, but how did React make it look like it is synchronous?"),Xr.forEach(o),tr=c(T),kn=t(T,"P",{});var mi=a(kn);ar=r(mi,"Think of how you would have written in React:"),mi.forEach(o),rr=c(T),S=t(T,"UL",{});var J=a(S);H=t(J,"LI",{});var Jo=a(H);lr=r(Jo,"Instead of providing an entry point, your "),Eo=t(Jo,"CODE",{class:!0});var wi=a(Eo);ir=r(wi,"render"),wi.forEach(o),cr=r(Jo,' function is the entry point for React. To "resume" each "pause" the render, React calls the '),_o=t(Jo,"CODE",{class:!0});var xi=a(_o);pr=r(xi,"render"),xi.forEach(o),hr=r(Jo," function multiple times."),Jo.forEach(o),kr=c(J),yn=t(J,"LI",{});var gi=a(yn);yr=r(gi,"Your render function has to be pure and side-effects free"),gi.forEach(o),vr=c(J),$=t(J,"LI",{});var Ao=a($);dr=r(Ao,"To "),bo=t(Ao,"CODE",{class:!0});var Ei=a(bo);ur=r(Ei,"runSideEffects"),Ei.forEach(o),fr=r(Ao,", you use "),Io=t(Ao,"CODE",{class:!0});var _i=a(Io);mr=r(_i,"React.useEffect"),_i.forEach(o),wr=r(Ao," instead."),Ao.forEach(o),xr=c(J),fs=t(J,"LI",{});var Bn=a(fs);gr=r(Bn,"To fetch + cache, you use "),So=t(Bn,"CODE",{class:!0});var bi=a(So);Er=r(bi,"react-cache"),bi.forEach(o),_r=r(Bn," to create a resource."),Bn.forEach(o),br=c(J),ms=t(J,"LI",{});var Un=a(ms);Ir=r(Un,'Except, instead of "pause" and do nothing, React handles the "pause" with the nearest '),Oo=t(Un,"CODE",{class:!0});var Ii=a(Oo);Sr=r(Ii,"<Suspense />"),Ii.forEach(o),Or=r(Un,' componnet to render some fallback content. When the promise is resolve, React "resumes" the render and render the content with the data.'),Un.forEach(o),J.forEach(o),T.forEach(o),Sn=c(p),D=t(p,"SECTION",{});var qo=a(D);vn=t(qo,"H3",{});var Si=a(vn);ws=t(Si,"A",{href:!0,id:!0});var Oi=a(ws);Tr=r(Oi,"Yet, this is not Suspense."),Oi.forEach(o),Si.forEach(o),Pr=c(qo),dn=t(qo,"P",{});var Ti=a(dn);Cr=r(Ti,"No, I dont think so."),Ti.forEach(o),Dr=c(qo),xs=t(qo,"P",{});var zn=a(xs);Wr=r(zn,`Suspense is based on some function programming concept, called the "one-shot delimited continuation", which is explained in Dan Abramov's `),gs=t(zn,"A",{href:!0,rel:!0});var Pi=a(gs);Jr=r(Pi,'"Algebraic Effects for the Rest of Us"'),Pi.forEach(o),Ar=r(zn,"."),zn.forEach(o),qo.forEach(o),On=c(p),b=t(p,"SECTION",{});var A=a(b);un=t(A,"H2",{});var Ci=a(un);Es=t(Ci,"A",{href:!0,id:!0});var Di=a(Es);qr=r(Di,"Closing Note"),Di.forEach(o),Ci.forEach(o),Rr=c(A),_s=t(A,"P",{});var Qn=a(_s);Lr=r(Qn,"This whole article is based on a thought experiment I had when I was trying to understand the mechanics of "),bs=t(Qn,"A",{href:!0,rel:!0});var Wi=a(bs);Fr=r(Wi,"React Suspense"),Wi.forEach(o),Hr=r(Qn,". So, pardon me if the flow of the content is a bit awkward or crude."),Qn.forEach(o),$r=c(A),Is=t(A,"P",{});var Zn=a(Is);Mr=r(Zn,'Yet, after writing my thought process out, I did more research, and realised that "pausing and resuming execution" is a concept called '),Ss=t(Zn,"A",{href:!0,rel:!0});var Ji=a(Ss);Nr=r(Ji,'"continuations"'),Ji.forEach(o),Vr=r(Zn," in functional programming."),Zn.forEach(o),jr=c(A),fn=t(A,"P",{});var Ai=a(fn);Gr=r(Ai,"So, if you are interested to learn more, here are some starting points:"),Ai.forEach(o),Yr=c(A),Os=t(A,"UL",{});var Kn=a(Os);To=t(Kn,"LI",{});var sl=a(To);Br=r(sl,"James Long's "),Ts=t(sl,"A",{href:!0,rel:!0});var qi=a(Ts);Ur=r(qi,"What's in a Continuation"),qi.forEach(o),sl.forEach(o),zr=c(Kn),Po=t(Kn,"LI",{});var ol=a(Po);Qr=r(ol,"Florian Loitsch's "),Ps=t(ol,"A",{href:!0,rel:!0});var Ri=a(Ps);Zr=r(Ri,"Exceptional Continuations in JavaScript"),Ri.forEach(o),ol.forEach(o),Kn.forEach(o),A.forEach(o),this.h()},h(){l(f,"href","#asynchronous-javascript"),l(f,"id","asynchronous-javascript"),l(Ws,"class","code-section"),l(Js,"class","code-section"),l(G,"href","https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"),l(G,"rel","nofollow"),l(As,"class","inline"),l(Y,"href","https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function"),l(Y,"rel","nofollow"),l(qs,"class","inline"),l(Rs,"class","inline"),l(Ls,"class","code-section"),l(B,"href","#every-function-has-a-color"),l(B,"id","every-function-has-a-color"),l(Fs,"class","inline"),l(Hs,"class","inline"),l($s,"class","inline"),l(Ms,"class","inline"),l(z,"href","https://journal.stuffwithstuff.com/2015/02/01/what-color-is-your-function/"),l(z,"rel","nofollow"),l(Ns,"class","inline"),l(Vs,"class","code-section"),l(Z,"href","#writing-the-runtime"),l(Z,"id","writing-the-runtime"),l(K,"href","#the-first-constraint-entry-point"),l(K,"id","the-first-constraint-entry-point"),l(Ys,"class","inline"),l(Bs,"class","code-section"),l(Us,"class","code-section"),l(zs,"class","inline"),l(Qs,"class","inline"),l(Zs,"class","inline"),l(Ks,"class","inline"),l(Xs,"class","inline"),l(so,"class","code-section"),l(oo,"class","inline"),l(no,"class","code-section"),l(eo,"class","inline"),l(to,"class","inline"),l(ao,"class","code-section"),l(ro,"class","inline"),l(lo,"class","code-section"),l(io,"class","inline"),l(co,"class","code-section"),l(po,"class","inline"),l(ho,"class","inline"),l(is,"href","#the-second-constraint-pure-functions"),l(is,"id","the-second-constraint-pure-functions"),l(ko,"class","inline"),l(yo,"class","code-section"),l(vo,"class","inline"),l(uo,"class","code-section"),l(fo,"class","inline"),l(mo,"class","inline"),Ic(_.src,el="https://codesandbox.io/embed/pausing-a-javascript-function-dh0mw?expanddevtools=1&fontsize=14&hidenavigation=1&theme=dark&view=editor")||l(_,"src",el),wn(_,"width","100%"),wn(_,"height","500px"),wn(_,"border","0"),wn(_,"border-radius","4px"),wn(_,"overflow","hidden"),l(_,"title","Pausing a JavaScript function"),l(_,"allow","geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb"),l(_,"sandbox","allow-modals allow-forms allow-popups allow-scripts allow-same-origin"),l(ys,"href","#what-have-we-done-so-far"),l(ys,"id","what-have-we-done-so-far"),l(vs,"href","#okay-cool-why-are-we-doing-this"),l(vs,"id","okay-cool-why-are-we-doing-this"),l(us,"href","https://reactjs.org/docs/concurrent-mode-suspense.html#what-suspense-lets-you-do"),l(us,"rel","nofollow"),l(wo,"class","code-section"),l(go,"class","inline"),l(Eo,"class","inline"),l(_o,"class","inline"),l(bo,"class","inline"),l(Io,"class","inline"),l(So,"class","inline"),l(Oo,"class","inline"),l(ws,"href","#yet-this-is-not-suspense"),l(ws,"id","yet-this-is-not-suspense"),l(gs,"href","https://overreacted.io/algebraic-effects-for-the-rest-of-us/"),l(gs,"rel","nofollow"),l(Es,"href","#closing-note"),l(Es,"id","closing-note"),l(bs,"href","https://reactjs.org/docs/concurrent-mode-suspense.html"),l(bs,"rel","nofollow"),l(Ss,"href","https://en.wikipedia.org/wiki/Continuation"),l(Ss,"rel","nofollow"),l(Ts,"href","https://jlongster.com/Whats-in-a-Continuation"),l(Ts,"rel","nofollow"),l(Ps,"href","http://www.schemeworkshop.org/2007/procPaper4.pdf"),l(Ps,"rel","nofollow")},m(p,y){Ni(u,p,y),g(p,P,y),g(p,v,y),s(v,q),s(q,f),s(f,C),s(v,Ds),s(v,V),s(V,Xn),s(V,Ro),s(Ro,se),s(V,oe),s(v,ne),s(v,Ws),Ws.innerHTML=Yi,s(v,ee),s(v,j),s(j,te),s(j,Lo),s(Lo,ae),s(j,re),s(v,le),s(v,Js),Js.innerHTML=Bi,s(v,ie),s(v,R),s(R,ce),s(R,G),s(G,pe),s(R,he),s(R,Y),s(Y,As),s(As,ke),s(R,ye),s(v,ve),s(v,M),s(M,qs),s(qs,de),s(M,ue),s(M,Rs),s(Rs,fe),s(M,me),s(v,we),s(v,Ls),Ls.innerHTML=Ui,s(v,xe),s(v,Fo),s(Fo,ge),g(p,xn,y),g(p,d,y),s(d,Ho),s(Ho,B),s(B,Ee),s(d,_e),s(d,L),s(L,be),s(L,Fs),s(Fs,Ie),s(L,Se),s(L,Hs),s(Hs,Oe),s(L,Te),s(d,Pe),s(d,F),s(F,Ce),s(F,$s),s($s,De),s(F,We),s(F,Ms),s(Ms,Je),s(F,Ae),s(d,qe),s(d,U),s(U,Re),s(U,z),s(z,Le),s(U,Fe),s(d,He),s(d,Q),s(Q,$e),s(Q,Ns),s(Ns,Me),s(Q,Ne),s(d,Ve),s(d,Vs),Vs.innerHTML=zi,s(d,je),s(d,$o),s($o,Ge),s(d,Ye),s(d,Mo),s(Mo,Be),s(d,Ue),s(d,No),s(No,ze),s(d,Qe),s(d,Vo),s(Vo,jo),s(jo,Ze),s(d,Ke),s(d,Go),s(Go,Xe),s(d,st),s(d,js),s(js,ot),s(js,Yo),s(Yo,nt),g(p,gn,y),g(p,Gs,y),s(Gs,Bo),s(Bo,Z),s(Z,et),g(p,En,y),g(p,h,y),s(h,Uo),s(Uo,K),s(K,tt),s(h,at),s(h,zo),s(zo,rt),s(h,lt),s(h,X),s(X,it),s(X,Ys),s(Ys,ct),s(X,pt),s(h,ht),s(h,Bs),Bs.innerHTML=Qi,s(h,kt),s(h,Qo),s(Qo,yt),s(h,vt),s(h,Us),Us.innerHTML=Zi,s(h,dt),s(h,Zo),s(Zo,ut),s(h,ft),s(h,ss),s(ss,mt),s(ss,zs),s(zs,wt),s(ss,xt),s(h,gt),s(h,I),s(I,Et),s(I,Qs),s(Qs,_t),s(I,bt),s(I,Zs),s(Zs,It),s(I,St),s(I,Ks),s(Ks,Ot),s(I,Tt),s(I,Xs),s(Xs,Pt),s(I,Ct),s(h,Dt),s(h,so),so.innerHTML=Ki,s(h,Wt),s(h,Ko),s(Ko,Jt),s(h,At),s(h,os),s(os,qt),s(os,oo),s(oo,Rt),s(os,Lt),s(h,Ft),s(h,no),no.innerHTML=Xi,s(h,Ht),s(h,ns),s(ns,$t),s(ns,eo),s(eo,Mt),s(ns,Nt),s(h,Vt),s(h,es),s(es,jt),s(es,to),s(to,Gt),s(es,Yt),s(h,Bt),s(h,ao),ao.innerHTML=sc,s(h,Ut),s(h,ts),s(ts,zt),s(ts,ro),s(ro,Qt),s(ts,Zt),s(h,Kt),s(h,lo),lo.innerHTML=oc,s(h,Xt),s(h,as),s(as,sa),s(as,io),s(io,oa),s(as,na),s(h,ea),s(h,Xo),s(Xo,ta),s(h,aa),s(h,co),co.innerHTML=nc,s(h,ra),s(h,sn),s(sn,la),s(h,ia),s(h,on),s(on,ca),s(h,pa),s(h,rs),s(rs,ha),s(rs,po),s(po,ka),s(rs,ya),s(h,va),s(h,ls),s(ls,da),s(ls,ho),s(ho,ua),s(ls,fa),g(p,_n,y),g(p,m,y),s(m,nn),s(nn,is),s(is,en),s(en,ma),s(m,wa),s(m,cs),s(cs,xa),s(cs,ko),s(ko,ga),s(cs,Ea),s(m,_a),s(m,yo),yo.innerHTML=ec,s(m,ba),s(m,ps),s(ps,Ia),s(ps,vo),s(vo,Sa),s(ps,Oa),s(m,Ta),s(m,uo),uo.innerHTML=tc,s(m,Pa),s(m,hs),s(hs,Ca),s(hs,fo),s(fo,Da),s(hs,Wa),s(m,Ja),s(m,ks),s(ks,Aa),s(ks,mo),s(mo,qa),s(ks,Ra),s(m,La),s(m,tn),s(tn,Fa),s(m,Ha),s(m,an),s(an,$a),s(m,Ma),s(m,_),g(p,bn,y),g(p,O,y),s(O,rn),s(rn,ys),s(ys,Na),s(O,Va),s(O,ln),s(ln,ja),s(O,Ga),s(O,cn),s(cn,Ya),s(O,Ba),s(O,pn),s(pn,Ua),g(p,In,y),g(p,E,y),s(E,hn),s(hn,vs),s(vs,za),s(E,Qa),s(E,ds),s(ds,Za),s(ds,us),s(us,Ka),s(ds,Xa),s(E,sr),s(E,wo),wo.innerHTML=ac,s(E,or),s(E,xo),s(xo,go),s(go,nr),s(xo,er),s(E,tr),s(E,kn),s(kn,ar),s(E,rr),s(E,S),s(S,H),s(H,lr),s(H,Eo),s(Eo,ir),s(H,cr),s(H,_o),s(_o,pr),s(H,hr),s(S,kr),s(S,yn),s(yn,yr),s(S,vr),s(S,$),s($,dr),s($,bo),s(bo,ur),s($,fr),s($,Io),s(Io,mr),s($,wr),s(S,xr),s(S,fs),s(fs,gr),s(fs,So),s(So,Er),s(fs,_r),s(S,br),s(S,ms),s(ms,Ir),s(ms,Oo),s(Oo,Sr),s(ms,Or),g(p,Sn,y),g(p,D,y),s(D,vn),s(vn,ws),s(ws,Tr),s(D,Pr),s(D,dn),s(dn,Cr),s(D,Dr),s(D,xs),s(xs,Wr),s(xs,gs),s(gs,Jr),s(xs,Ar),g(p,On,y),g(p,b,y),s(b,un),s(un,Es),s(Es,qr),s(b,Rr),s(b,_s),s(_s,Lr),s(_s,bs),s(bs,Fr),s(_s,Hr),s(b,$r),s(b,Is),s(Is,Mr),s(Is,Ss),s(Ss,Nr),s(Is,Vr),s(b,jr),s(b,fn),s(fn,Gr),s(b,Yr),s(b,Os),s(Os,To),s(To,Br),s(To,Ts),s(Ts,Ur),s(Os,zr),s(Os,Po),s(Po,Qr),s(Po,Ps),s(Ps,Zr),Tn=!0},p:Sc,i(p){Tn||(Vi(u.$$.fragment,p),Tn=!0)},o(p){ji(u.$$.fragment,p),Tn=!1},d(p){Gi(u,p),p&&o(P),p&&o(v),p&&o(xn),p&&o(d),p&&o(gn),p&&o(Gs),p&&o(En),p&&o(h),p&&o(_n),p&&o(m),p&&o(bn),p&&o(O),p&&o(In),p&&o(E),p&&o(Sn),p&&o(D),p&&o(On),p&&o(b)}}}function Dc(Cs){let u,P;const v=[Cs[0],Hi];let q={$$slots:{default:[Cc]},$$scope:{ctx:Cs}};for(let f=0;f<v.length;f+=1)q=nl(q,v[f]);return u=new Oc({props:q}),{c(){$i(u.$$.fragment)},l(f){Mi(u.$$.fragment,f)},m(f,C){Ni(u,f,C),P=!0},p(f,[C]){const Ds=C&1?_c(v,[C&1&&Li(f[0]),C&0&&Li(Hi)]):{};C&2&&(Ds.$$scope={dirty:C,ctx:f}),u.$set(Ds)},i(f){P||(Vi(u.$$.fragment,f),P=!0)},o(f){ji(u.$$.fragment,f),P=!1},d(f){Gi(u,f)}}}const Hi={title:"Pause and resume a JavaScript function",date:"2019-12-09T08:00:00Z",description:"A thought experiment on how you can pause and resume the execution of a JavaScript function",tags:["JavaScript","React"],label:"blog"};function Wc(Cs,u,P){return bc("blog",{image:Pc}),Cs.$$set=v=>{P(0,u=nl(nl({},u),Fi(v)))},u=Fi(u),[u]}class $c extends xc{constructor(u){super();gc(this,u,Wc,Dc,Ec,{})}}export{$c as default,Hi as metadata};
