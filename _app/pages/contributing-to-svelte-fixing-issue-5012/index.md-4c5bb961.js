import{S as Bh,i as Vh,s as qh,C as Ki,w as hh,x as dh,y as vh,z as Wh,A as oh,q as uh,o as kh,B as fh,r as zh,R as lh,k as i,e as n,t,W as Xi,m as c,c as o,a as l,h as s,d as a,X as Zi,b as r,Q as rh,f as w,g as S,F as e,O as Uh}from"../../chunks/vendor-569a3c5c.js";import{B as Yh}from"../../chunks/BlogLayout-17b76cb2.js";import{T as Jh}from"../../chunks/TableOfContent-dbc18cb8.js";import"../../chunks/stores-ee936cd4.js";import"../../chunks/WebMentions-968cc380.js";/* empty css                                */var Qh="/_app/assets/changelog-afd4ad06.webp",Xh="/_app/assets/changelog-0f7c76de.webp",Zh="/_app/assets/changelog-c0dfd240.png",ih="/_app/assets/changelog-d8bd0288.png",Kh="/_app/assets/bug-d131fc8e.gif",ch="/_app/assets/bug-423b948d.gif",ed="/_app/assets/hero-twitter-c01dd190.jpg";function td(Ze){let f,O,E,G,g,I,Ke,re,za,et,Ua,Ya,Ja,ie,Qa,ce,Xa,Za,ia,Y,Cs,pe,Ka,en,k,tt,J,tn,ca,gh="{@html value}",pa,he,sn,an,Q,nn,ha,mh="{@html value}",da,on,st,Ss,ln,rn,at,de,cn,pn,nt,hn,dn,ot,Os,vn,un,lt,kn,fn,rt,Is,gn,mn,it,yn,_n,ct,Ls,En,xn,pt,wn,bn,R,Tn,ht,Hn,Pn,dt,Cn,Sn,va,x,Ds,ve,On,In,As,Ln,Dn,Ms,An,Mn,N,Rn,vt,jn,Gn,ut,Nn,$n,Fn,Rs,$,T,ec,Bn,js,Vn,ua,_,Gs,ue,qn,Wn,ke,zn,ka,yh="<",fa,Un,fe,Yn,kt,Jn,Qn,Xn,ge,Zn,X,ft,Kn,eo,to,so,Ns,F,gt,$s,H,tc,ao,mt,no,me,oo,ye,lo,ro,io,B,co,_e,po,ho,yt,vo,uo,ga,p,Fs,Ee,ko,fo,Z,xe,_t,go,mo,K,Et,yo,_o,Eo,xo,xt,_h=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// in the compiled Svelte code,</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// you would see the use of &#96;HtmlTag&#96;</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// when you use &#96;&#123;@html ...&#125;&#96;</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">html_tag</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">HtmlTag</span><span style="color: var(--shiki-color-text)">(anchor);</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// mounting raw html string, call the &#96;m&#96;ount method</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">html_tag</span><span style="color: var(--shiki-token-function)">.m</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;&lt;div&gt;content&lt;/div&gt;&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> target</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> anchor);</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// when the html string content change, call the u&#96;p&#96;date method</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">html_tag</span><span style="color: var(--shiki-token-function)">.p</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;&lt;b&gt;new&lt;/b&gt;html&lt;br /&gt;&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// when unmount, call the &#96;d&#96;etach method</span></span>
<span class="line"><span style="color: var(--shiki-token-constant)">html_tag</span><span style="color: var(--shiki-token-function)">.d</span><span style="color: var(--shiki-color-text)">();</span></span></code></pre>`,wo,L,bo,wt,To,Ho,bt,Po,Co,Tt,So,Oo,Io,we,Lo,Ht,Do,Ao,Mo,V,Ro,Pt,jo,Go,Ct,No,$o,Fo,P,St,Bo,Vo,be,Ot,qo,Wo,It,zo,Uo,Lt,Yo,Jo,Qo,q,Xo,Dt,Zo,Ko,At,el,tl,sl,Mt,Eh=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">&lt;!-- Initially --&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">article</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">&lt;!-- slot --&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &#123;@html content&#125;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">&lt;!-- slot --&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &lt;</span><span style="color: var(--shiki-token-string-expression)">p</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    This line should be last.</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &lt;/</span><span style="color: var(--shiki-token-string-expression)">p</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">article</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">&lt;!-- when the html content changed --&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;</span><span style="color: var(--shiki-token-string-expression)">article</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">&lt;!-- slot --&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">&lt;!-- &#123;@html content&#125; removed --&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">&lt;!-- slot --&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &lt;</span><span style="color: var(--shiki-token-string-expression)">p</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    This line should be last.</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &lt;/</span><span style="color: var(--shiki-token-string-expression)">p</span><span style="color: var(--shiki-color-text)">&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &#123;@html content&#125;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">&lt;!-- inserted at the end of the parent --&gt;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&lt;/</span><span style="color: var(--shiki-token-string-expression)">article</span><span style="color: var(--shiki-color-text)">&gt;</span></span></code></pre>`,al,j,Te,nl,Rt,ol,ll,rl,jt,il,cl,Gt,pl,hl,dl,D,vl,Nt,ul,kl,$t,fl,gl,Ft,ml,yl,_l,ee,El,Bt,xl,wl,Vt,bl,Tl,te,Bs,Hl,Pl,He,Cl,Sl,Ol,qt,xh=`<pre class="prism language-svelte"><code><div class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></div><div class="line">  <span class="token keyword">let</span> content <span class="token operator">=</span> <span class="token string">'first line'</span><span class="token punctuation">;</span></div><div class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></div><div class="line"></div><div class="line"><span class="token language-javascript"><span class="token punctuation">&#123;</span>@html content<span class="token punctuation">&#125;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name"><span class="token namespace">on:</span>click=</span><span class="token language-javascript"><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>content <span class="token operator">=</span> <span class="token string">'line first'</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></span> <span class="token punctuation">/></span></span></div></code></pre>`,Il,Wt,wh=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// compiled js</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">c</span><span style="color: var(--shiki-color-text)">() &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    button </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">element</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;button&quot;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    html_tag </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">HtmlTag</span><span style="color: var(--shiki-color-text)">(button);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &#125;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// ...</span></span></code></pre>`,Ll,W,Dl,zt,Al,Ml,Ut,Rl,jl,Gl,Pe,Nl,Yt,$l,Fl,Bl,se,Vs,Vl,ql,Ce,Wl,zl,Ul,Jt,bh=`<pre class="prism language-svelte"><code><div class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></div><div class="line">	<span class="token keyword">import</span> Foo <span class="token keyword">from</span> <span class="token string">'./Foo.svelte'</span><span class="token punctuation">;</span></div><div class="line">  <span class="token keyword">let</span> content <span class="token operator">=</span> <span class="token string">'first line'</span><span class="token punctuation">;</span></div><div class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></div><div class="line"></div><div class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name"><span class="token namespace">on:</span>click=</span><span class="token language-javascript"><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>content <span class="token operator">=</span> <span class="token string">'line first'</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></span> <span class="token punctuation">/></span></span></div><div class="line"><span class="token language-javascript"><span class="token punctuation">&#123;</span>@html content<span class="token punctuation">&#125;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Foo</span> <span class="token punctuation">/></span></span></div></code></pre>`,Yl,Qt,Th=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// compiled js</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)">c</span><span style="color: var(--shiki-color-text)">() &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    button </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">element</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;button&quot;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    t </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">space</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    html_anchor </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">empty</span><span style="color: var(--shiki-color-text)">();</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-function)">create_component</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">foo</span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)">$$</span><span style="color: var(--shiki-color-text)">.fragment);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    html_tag </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">HtmlTag</span><span style="color: var(--shiki-color-text)">(html_anchor);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &#125;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// ...</span></span></code></pre>`,Jl,A,Ql,Xt,Xl,Zl,Se,Kl,er,Zt,tr,sr,ar,qs,nr,or,M,lr,Kt,rr,ir,es,cr,pr,ts,hr,dr,vr,z,ur,ss,kr,fr,as,gr,mr,yr,Ws,_r,Er,Oe,xr,ns,wr,br,Tr,os,Hh='<pre class="prism language-svelte"><code><div class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></div><div class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token punctuation">/></span></span></div><div class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>This is the last child<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></div><div class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></div></code></pre>',Hr,Ie,Pr,ls,Cr,Sr,Or,rs,Ph=`<pre class="prism language-svelte"><code><div class="line"><span class="token comment">&lt;!-- Component.svelte --></span></div><div class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></div><div class="line">  <span class="token keyword">export</span> <span class="token keyword">let</span> content<span class="token punctuation">;</span></div><div class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></div><div class="line"></div><div class="line"><span class="token language-javascript"><span class="token punctuation">&#123;</span>@html content<span class="token punctuation">&#125;</span></span></div><div class="line"></div><div class="line"><span class="token comment">&lt;!-- App.svelte --></span></div><div class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></div><div class="line">  <span class="token keyword">import</span> Component <span class="token keyword">from</span> <span class="token string">'./Component.svelte'</span><span class="token punctuation">;</span></div><div class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></div><div class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></div><div class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Component</span> <span class="token attr-name">content=</span><span class="token language-javascript"><span class="token punctuation">&#123;</span><span class="token string">'&lt;div>html string&lt;/div>'</span><span class="token punctuation">&#125;</span></span><span class="token punctuation">/></span></span></div><div class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>This is the last child<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></div><div class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></div></code></pre>`,Ir,zs,Le,Lr,Dr,Us,Ar,ma,v,Ys,De,Mr,Rr,Js,jr,Gr,Qs,Nr,$r,Ae,Me,Fr,is,Br,Vr,qr,cs,Wr,Re,ps,hs,zr,Ur,Yr,ds,vs,Jr,Qr,Xr,Xs,Zr,Kr,je,ei,us,ti,si,ai,ks,Ch=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-comment)">// src/compiler/compile/render_dom/wrappers/RawMustacheTag.ts#L42</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">needs_anchor</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> in_head </span><span style="color: var(--shiki-token-keyword)">||</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-constant)">this</span><span style="color: var(--shiki-color-text)">.next </span><span style="color: var(--shiki-token-keyword)">&amp;&amp;</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">!</span><span style="color: var(--shiki-token-constant)">this</span><span style="color: var(--shiki-token-function)">.</span><span style="color: var(--shiki-token-constant)">next</span><span style="color: var(--shiki-token-function)">.is_dom_node</span><span style="color: var(--shiki-color-text)">());</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span class="line"><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (needs_anchor) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)">block</span><span style="color: var(--shiki-token-function)">.add_element</span><span style="color: var(--shiki-color-text)">(html_anchor</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">x</span><span style="color: var(--shiki-token-string-expression)">&#96;@empty()&#96;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">x</span><span style="color: var(--shiki-token-string-expression)">&#96;@empty()&#96;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> parent_node);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;</span></span></code></pre>`,ni,Zs,Ge,oi,li,Ks,ri,ii,Ne,$e,ci,fs,pi,hi,di,Fe,vi,ea,ui,ki,fi,gs,Sh=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">needs_anchor</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  in_head </span><span style="color: var(--shiki-token-keyword)">||</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  (</span><span style="color: var(--shiki-token-constant)">this</span><span style="color: var(--shiki-color-text)">.next</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">?</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">!</span><span style="color: var(--shiki-token-constant)">this</span><span style="color: var(--shiki-token-function)">.</span><span style="color: var(--shiki-token-constant)">next</span><span style="color: var(--shiki-token-function)">.is_dom_node</span><span style="color: var(--shiki-color-text)">()</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">!</span><span style="color: var(--shiki-token-constant)">this</span><span style="color: var(--shiki-color-text)">.parent </span><span style="color: var(--shiki-token-keyword)">||</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">!</span><span style="color: var(--shiki-token-constant)">this</span><span style="color: var(--shiki-token-function)">.</span><span style="color: var(--shiki-token-constant)">parent</span><span style="color: var(--shiki-token-function)">.is_dom_node</span><span style="color: var(--shiki-color-text)">());</span></span></code></pre>`,gi,ta,mi,yi,Be,sa,_i,Ei,Ve,xi,ms,wi,bi,Ti,qe,Hi,ys,Pi,Ci,Si,_s,Oh=`<pre class="shiki" style="background-color: var(--shiki-color-background)"><code><span class="line"><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">default</span><span style="color: var(--shiki-color-text)"> &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  html</span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&#96;</span></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">    &lt;button&gt;Switch&lt;/button&gt;</span></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">    &lt;p&gt;Another first line&lt;/p&gt;</span></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">    &lt;p&gt;This line should be last.&lt;/p&gt;</span></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">  &#96;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">async</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">test</span><span style="color: var(--shiki-color-text)">(&#123; assert</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> target</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> window &#125;) &#123;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">btn</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">target</span><span style="color: var(--shiki-token-function)">.querySelector</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;button&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">clickEvent</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">window</span><span style="color: var(--shiki-token-function)">.MouseEvent</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;click&#39;</span><span style="color: var(--shiki-color-text)">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// simulate clicks</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">btn</span><span style="color: var(--shiki-token-function)">.dispatchEvent</span><span style="color: var(--shiki-color-text)">(clickEvent);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-constant)">assert</span><span style="color: var(--shiki-token-function)">.htmlEqual</span><span style="color: var(--shiki-color-text)">(</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-constant)">target</span><span style="color: var(--shiki-color-text)">.innerHTML</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-string-expression)">&#96;</span></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">        &lt;button&gt;Switch&lt;/button&gt;</span></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">        &lt;p&gt;First line&lt;/p&gt;</span></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">        &lt;p&gt;This line should be last.&lt;/p&gt;</span></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">      &#96;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    );</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// simulate clicks</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">btn</span><span style="color: var(--shiki-token-function)">.dispatchEvent</span><span style="color: var(--shiki-color-text)">(clickEvent);</span></span>
<span class="line"></span>
<span class="line"><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-constant)">assert</span><span style="color: var(--shiki-token-function)">.htmlEqual</span><span style="color: var(--shiki-color-text)">(</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-constant)">target</span><span style="color: var(--shiki-color-text)">.innerHTML</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-string-expression)">&#96;</span></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">        &lt;button&gt;Switch&lt;/button&gt;</span></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">        &lt;p&gt;Another first line&lt;/p&gt;</span></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">        &lt;p&gt;This line should be last.&lt;/p&gt;</span></span>
<span class="line"><span style="color: var(--shiki-token-string-expression)">      &#96;</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">    );</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">  &#125;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color: var(--shiki-color-text)">&#125;;</span></span></code></pre>`,Oi,We,Ii,ze,Li,Di,Ai,Mi,Ri,Ue,ji,Ye,Gi,Ni,$i,Je,Fi,Qe,Bi,Vi,ya;return f=new Jh({props:{data:[{link:"background",title:"Background"},{link:"the-bug",title:"The bug"},{link:"verifying-the-bug",title:"Verifying the bug"},{link:"investigating-the-bug",title:"Investigating the bug",nested:[{link:"htmltag",title:"HtmlTag"}]},{link:"fixing-the-bug",title:"Fixing the bug"}]}}),{c(){hh(f.$$.fragment),O=i(),E=n("section"),G=n("h2"),g=n("a"),I=t("Background"),Ke=i(),re=n("p"),za=t("Following "),et=n("a"),Ua=t("Contributing to Svelte - Fixing issue #4392"),Ya=t(", I find it interesting to write my thought process down on fixing a Svelte issue."),Ja=i(),ie=n("p"),Qa=t("So today, I'm going to walk through a new issue, "),ce=n("a"),Xa=t("#5012"),Za=t("."),ia=i(),Y=n("section"),Cs=n("h2"),pe=n("a"),Ka=t("The bug"),en=i(),k=n("div"),tt=n("p"),J=n("strong"),tn=t("Slot containing only "),ca=new Xi,pa=t(" renders in wrong place on update "),he=n("a"),sn=t("#5012"),an=i(),Q=n("p"),nn=t("When a slotted component is instantiated and the only contents of the slot is "),ha=new Xi,da=t(", changing value will cause the HTML-ized value to render at the end of the slot's parent element (i.e. after all sibling elements) instead of in the correct place."),on=i(),st=n("p"),Ss=n("strong"),ln=t("To Reproduce"),rn=i(),at=n("p"),de=n("a"),cn=t("https://svelte.dev/repl/1f9da40bca4b44a089041e826648de2f"),pn=i(),nt=n("p"),hn=t("Click the Switch button and see that the contents of the slot moves to the end."),dn=i(),ot=n("p"),Os=n("strong"),vn=t("Expected behavior"),un=i(),lt=n("p"),kn=t("Slot continues to render in the correct place."),fn=i(),rt=n("p"),Is=n("strong"),gn=t("Information about your Svelte project:"),mn=i(),it=n("p"),yn=t("Looks like this appeared in version 3.7 and is still present in 3.23.2. If I run the REPL on 3.6.11 it behaves properly."),_n=i(),ct=n("p"),Ls=n("strong"),En=t("Severity"),xn=i(),pt=n("p"),wn=t("Potentially serious, but not serious for me."),bn=i(),R=n("p"),Tn=t("Can be worked around by changing the slot contents to "),ht=n("code"),Hn=t("<div>{@html value}</div>"),Pn=t(" or changing the child component to use "),dt=n("code"),Cn=t("<div><slot /><div>"),Sn=t(", which works fine for me."),va=i(),x=n("section"),Ds=n("h2"),ve=n("a"),On=t("Verifying the bug"),In=i(),As=n("p"),Ln=t("I clicked into the REPL and tried to understand about the bug."),Dn=i(),Ms=n("p"),An=t('Initially, you see 2 lines of text, "Another first line", "This line should be last.".'),Mn=i(),N=n("p"),Rn=t("But as soon as I updated the "),vt=n("code"),jn=t("{@html content}"),Gn=t(", the "),ut=n("code"),Nn=t("{@html content}"),$n=t(' moved to be after the "This line should be last." and stayed there.'),Fn=i(),Rs=n("p"),$=n("span"),T=n("img"),Bn=i(),js=n("p"),Vn=t("Yup. This is indeed a bug! \u{1F41B}"),ua=i(),_=n("section"),Gs=n("h2"),ue=n("a"),qn=t("Investigating the bug"),Wn=i(),ke=n("p"),zn=t("It's amazing that the issue author tracked down the regression behavior of this issue, stating that it started happening since 3.7. Probably because the author just upgraded Svelte from "),ka=new Xi,fa=t(" 3.7, or maybe he tried every versions to figure out whether it is regression bug or an undiscovered bug. Anyway, kudos to the issue author! \u{1F4AA} \u{1F4AA}"),Un=i(),fe=n("p"),Yn=t("Most open source projects maintain a change log file, usually named "),kt=n("code"),Jn=t("CHANGELOG.md"),Qn=t(" located at the root of the project folder, so that you can figured out what's added / removed / updated in each version."),Xn=i(),ge=n("p"),Zn=t("You can find Svelte's "),X=n("a"),ft=n("code"),Kn=t("CHANGELOG.md"),eo=t(" here"),to=t("."),so=i(),Ns=n("p"),F=n("span"),gt=n("picture"),$s=n("source"),H=n("img"),ao=i(),mt=n("p"),no=t("From the changelog, the most relevant commits seemed to be "),me=n("strong"),oo=t('"Remount HTML tags correctly ('),ye=n("a"),lo=t("#3329"),ro=t(')"'),io=i(),B=n("p"),co=t("Reading through the PR, it seemed that "),_e=n("a"),po=t("#3329"),ho=t(" was when "),yt=n("code"),vo=t("HtmlTag"),uo=t(" is first introduced!"),ga=i(),p=n("section"),Fs=n("h3"),Ee=n("a"),ko=t("HtmlTag"),fo=i(),Z=n("p"),xe=n("a"),_t=n("code"),go=t("HtmlTag"),mo=t(" is a helper class that helps Svelte manage raw "),K=n("a"),Et=n("code"),yo=t("{@html ...}"),_o=t(" tag"),Eo=t("."),xo=i(),xt=n("div"),wo=i(),L=n("p"),bo=t("The HtmlTag instance provides the "),wt=n("code"),To=t("m"),Ho=t(", "),bt=n("code"),Po=t("p"),Co=t(", "),Tt=n("code"),So=t("d"),Oo=t(" method, and it will maintain the HTML elements created through the HTML string."),Io=i(),we=n("p"),Lo=t("So, before v3.7, "),Ht=n("code"),Do=t("{@html ...}"),Ao=t(" was handled differently, and from the PR, I assume it was more buggy than the current implementation, albeit getting the case reported by this issue #5012 right. So, there's no reverting back, nor taking the implementation pre-v3.7 as a reference to figure this bug out."),Mo=i(),V=n("p"),Ro=t("Reading through the implementation of the "),Pt=n("code"),jo=t("HtmlTag"),Go=t(", it seemed that the "),Ct=n("code"),No=t("anchor"),$o=t(" is a key to this issue."),Fo=i(),P=n("p"),St=n("code"),Bo=t("HtmlTag"),Vo=t(" uses "),be=n("a"),Ot=n("code"),qo=t("insertBefore"),Wo=t(" to insert HTML elements into the DOM. There's a nullable 2nd argument for "),It=n("code"),zo=t("insertBefore"),Uo=t(", if it is "),Lt=n("code"),Yo=t("null"),Jo=t(", the element will be inserted at the end of the parent."),Qo=i(),q=n("p"),Xo=t("In this case, the "),Dt=n("code"),Zo=t("anchor"),Ko=t(" is indeed "),At=n("code"),el=t("null"),tl=t(", so when there's a change in the HTML content, the previous HTML elements were removed and the new HTML elements were inserted at the end of the parent."),sl=i(),Mt=n("div"),al=i(),j=n("p"),Te=n("strong"),nl=t("Why doesn't the "),Rt=n("code"),ol=t("{@html content}"),ll=t(" added at the end of the parent in the initial render?"),rl=t(" Well, the elements are added in order during mounting. The HTML elements from "),jt=n("code"),il=t("HtmlTag"),cl=t(" was added at the end of the parent, followed by the "),Gt=n("code"),pl=t("<p>This line should be last</p>"),hl=t("."),dl=i(),D=n("p"),vl=t("The "),Nt=n("code"),ul=t("anchor"),kl=t(" is an argument to the "),$t=n("code"),fl=t("HtmlTag"),gl=t(" constructor, so one can safely assume that it is not always "),Ft=n("code"),ml=t("null"),yl=t("."),_l=i(),ee=n("p"),El=t("So, I tried out using "),Bt=n("code"),xl=t("{@html content}"),wl=t(" in various ways, to figure out what may be an anchor for the "),Vt=n("code"),bl=t("HtmlTag"),Tl=i(),te=n("p"),Bs=n("strong"),Hl=t("Repro #1"),Pl=t(" ("),He=n("a"),Cl=t("REPL"),Sl=t(")"),Ol=i(),qt=n("div"),Il=i(),Wt=n("div"),Ll=i(),W=n("p"),Dl=t("In this case, the "),zt=n("code"),Al=t("<button />"),Ml=t(" element turns out to be the anchor, which totally make sense, as the html content should be inserted before "),Ut=n("code"),Rl=t("<button />"),jl=t("."),Gl=i(),Pe=n("p"),Nl=t("So, it seemed like the anchor is the next element right after "),Yt=n("code"),$l=t("{@html ...}"),Fl=t(". \u{1F914}"),Bl=i(),se=n("p"),Vs=n("strong"),Vl=t("Repro #2"),ql=t(" ("),Ce=n("a"),Wl=t("REPL"),zl=t(")"),Ul=i(),Jt=n("div"),Yl=i(),Qt=n("div"),Jl=i(),A=n("p"),Ql=t("If the next element right after "),Xt=n("code"),Xl=t("{@html ...}"),Zl=t(" is a component, then Svelte will insert a empty "),Se=n("a"),Kl=t("Text"),er=t(" node in between "),Zt=n("code"),tr=t("{@html ...}"),sr=t(" and the component, and the anchor is the empty Text node."),ar=i(),qs=n("p"),nr=t("Well, that make sense too, because we can't see what's inside the component, we can't get the first element rendered in the component as the anchor. So, an extra empty Text node is used for anchoring."),or=i(),M=n("p"),lr=t("So, it seemed like the anchor for the "),Kt=n("code"),rr=t("HtmlTag"),ir=t(" depends on the next element, and the "),es=n("code"),cr=t("HtmlTag"),pr=t(" itself is the last element, then the anchor would be "),ts=n("code"),hr=t("null"),dr=t("."),vr=i(),z=n("p"),ur=t("This seemed fine in most cases, as in if the "),ss=n("code"),kr=t("HtmlTag"),fr=t(" is indeed the last element of its parent, then, we don't need an anchor. Adding and updating "),as=n("code"),gr=t("HtmlTag"),mr=t(" will always add HTML elements at the end of its parent."),yr=i(),Ws=n("p"),_r=t("However, I figured there are 2 edge cases that this assumption may not be true."),Er=i(),Oe=n("p"),xr=t("The 1st edge case is the one reported in the issue #5012, if the "),ns=n("code"),wr=t("{@html ...}"),br=t(" is the last element within a slot. As we can't tell how the slot would be used in the component, it may not be the last element of it's parent."),Tr=i(),os=n("div"),Hr=i(),Ie=n("p"),Pr=t("The 2nd edge case is that "),ls=n("code"),Cr=t("{@html ...}"),Sr=t(" is the last element, but it is a the root of the Component."),Or=i(),rs=n("div"),Ir=i(),zs=n("p"),Le=n("a"),Lr=t("REPL"),Dr=i(),Us=n("p"),Ar=t("As you can see in this contrived example, we can't assume where the component is being used by its parent, so, even it seemed to be the last element in the component, it may not be the case in the parent component."),ma=i(),v=n("section"),Ys=n("h2"),De=n("a"),Mr=t("Fixing the bug"),Rr=i(),Js=n("p"),jr=t("Once we figured out the cause of the bug, the fix is much simpler."),Gr=i(),Qs=n("p"),Nr=t("Just as how Svelte will add a empty Text node as an anchor if the next element is a component, we are going to add the same anchor if"),$r=i(),Ae=n("ul"),Me=n("li"),Fr=t("the "),is=n("code"),Br=t("{@html ...}"),Vr=t(" has no next element, and"),qr=i(),cs=n("li"),Wr=t("either"),Re=n("ul"),ps=n("li"),hs=n("code"),zr=t("{@html ...}"),Ur=t(" is at the root of a slot, or"),Yr=i(),ds=n("li"),vs=n("code"),Jr=t("{@html ...}"),Qr=t(" is at the root of a component."),Xr=i(),Xs=n("p"),Zr=t("I know my way in the Svelte repo, good enough to know where to add this extra condition."),Kr=i(),je=n("p"),ei=t("But if you are new, you can try global search the keyword "),us=n("code"),ti=t("html_anchor"),si=t(", the variable name of the anchor added by Svelte, it should lead you to it."),ai=i(),ks=n("div"),ni=i(),Zs=n("p"),Ge=n("a"),oi=t("Link to Github"),li=i(),Ks=n("p"),ri=t("Here we see that the condition of adding an anchor is that if"),ii=i(),Ne=n("ul"),$e=n("li"),ci=t("it is in the "),fs=n("code"),pi=t("<svelte:head>"),hi=t(", or"),di=i(),Fe=n("li"),vi=t("the next element is not a dom element, (which could be a component, or logic blocks "),ea=n("em"),ui=t("(oh why didn't I think about this case too?)"),ki=t(")"),fi=i(),gs=n("div"),gi=i(),ta=n("p"),mi=t("So, we check if"),yi=i(),Be=n("ul"),sa=n("li"),_i=t("it has a parent (if it is at the root of component), or"),Ei=i(),Ve=n("li"),xi=t("if the parent is not an element (it could be within a slot, or a logic block "),ms=n("code"),wi=t("{#if}"),bi=t(")"),Ti=i(),qe=n("p"),Hi=t("For the test case, I used to 2 edge case examples, try to simulate some clicks, and make sure that the "),ys=n("code"),Pi=t("{@html ...}"),Ci=t(" stay in place even after the HTML content changes."),Si=i(),_s=n("div"),Oi=i(),We=n("p"),Ii=t("You can read the "),ze=n("a"),Li=t("Pull Request #5061"),Di=t(" to see all the test cases written up."),Ai=i(),Mi=n("hr"),Ri=i(),Ue=n("p"),ji=t("If you wish to learn more about Svelte, "),Ye=n("a"),Gi=t("follow me on Twitter"),Ni=t("."),$i=i(),Je=n("p"),Fi=t("If you have anything unclear about this article, find me on "),Qe=n("a"),Bi=t("Twitter"),Vi=t(" too!"),this.h()},l(d){dh(f.$$.fragment,d),O=c(d),E=o(d,"SECTION",{});var y=l(E);G=o(y,"H2",{});var sc=l(G);g=o(sc,"A",{href:!0,id:!0});var ac=l(g);I=s(ac,"Background"),ac.forEach(a),sc.forEach(a),Ke=c(y),re=o(y,"P",{});var _a=l(re);za=s(_a,"Following "),et=o(_a,"A",{href:!0});var nc=l(et);Ua=s(nc,"Contributing to Svelte - Fixing issue #4392"),nc.forEach(a),Ya=s(_a,", I find it interesting to write my thought process down on fixing a Svelte issue."),_a.forEach(a),Ja=c(y),ie=o(y,"P",{});var Ea=l(ie);Qa=s(Ea,"So today, I'm going to walk through a new issue, "),ce=o(Ea,"A",{href:!0,rel:!0});var oc=l(ce);Xa=s(oc,"#5012"),oc.forEach(a),Za=s(Ea,"."),Ea.forEach(a),y.forEach(a),ia=c(d),Y=o(d,"SECTION",{});var xa=l(Y);Cs=o(xa,"H2",{});var lc=l(Cs);pe=o(lc,"A",{href:!0,id:!0});var rc=l(pe);Ka=s(rc,"The bug"),rc.forEach(a),lc.forEach(a),en=c(xa),k=o(xa,"DIV",{class:!0});var m=l(k);tt=o(m,"P",{class:!0});var ic=l(tt);J=o(ic,"STRONG",{});var aa=l(J);tn=s(aa,"Slot containing only "),ca=Zi(aa),pa=s(aa," renders in wrong place on update "),he=o(aa,"A",{href:!0,rel:!0});var cc=l(he);sn=s(cc,"#5012"),cc.forEach(a),aa.forEach(a),ic.forEach(a),an=c(m),Q=o(m,"P",{class:!0});var wa=l(Q);nn=s(wa,"When a slotted component is instantiated and the only contents of the slot is "),ha=Zi(wa),da=s(wa,", changing value will cause the HTML-ized value to render at the end of the slot's parent element (i.e. after all sibling elements) instead of in the correct place."),wa.forEach(a),on=c(m),st=o(m,"P",{class:!0});var pc=l(st);Ss=o(pc,"STRONG",{});var hc=l(Ss);ln=s(hc,"To Reproduce"),hc.forEach(a),pc.forEach(a),rn=c(m),at=o(m,"P",{class:!0});var dc=l(at);de=o(dc,"A",{href:!0,rel:!0});var vc=l(de);cn=s(vc,"https://svelte.dev/repl/1f9da40bca4b44a089041e826648de2f"),vc.forEach(a),dc.forEach(a),pn=c(m),nt=o(m,"P",{class:!0});var uc=l(nt);hn=s(uc,"Click the Switch button and see that the contents of the slot moves to the end."),uc.forEach(a),dn=c(m),ot=o(m,"P",{class:!0});var kc=l(ot);Os=o(kc,"STRONG",{});var fc=l(Os);vn=s(fc,"Expected behavior"),fc.forEach(a),kc.forEach(a),un=c(m),lt=o(m,"P",{class:!0});var gc=l(lt);kn=s(gc,"Slot continues to render in the correct place."),gc.forEach(a),fn=c(m),rt=o(m,"P",{class:!0});var mc=l(rt);Is=o(mc,"STRONG",{});var yc=l(Is);gn=s(yc,"Information about your Svelte project:"),yc.forEach(a),mc.forEach(a),mn=c(m),it=o(m,"P",{class:!0});var _c=l(it);yn=s(_c,"Looks like this appeared in version 3.7 and is still present in 3.23.2. If I run the REPL on 3.6.11 it behaves properly."),_c.forEach(a),_n=c(m),ct=o(m,"P",{class:!0});var Ec=l(ct);Ls=o(Ec,"STRONG",{});var xc=l(Ls);En=s(xc,"Severity"),xc.forEach(a),Ec.forEach(a),xn=c(m),pt=o(m,"P",{class:!0});var wc=l(pt);wn=s(wc,"Potentially serious, but not serious for me."),wc.forEach(a),bn=c(m),R=o(m,"P",{class:!0});var Es=l(R);Tn=s(Es,"Can be worked around by changing the slot contents to "),ht=o(Es,"CODE",{class:!0});var bc=l(ht);Hn=s(bc,"<div>{@html value}</div>"),bc.forEach(a),Pn=s(Es," or changing the child component to use "),dt=o(Es,"CODE",{class:!0});var Tc=l(dt);Cn=s(Tc,"<div><slot /><div>"),Tc.forEach(a),Sn=s(Es,", which works fine for me."),Es.forEach(a),m.forEach(a),xa.forEach(a),va=c(d),x=o(d,"SECTION",{});var C=l(x);Ds=o(C,"H2",{});var Hc=l(Ds);ve=o(Hc,"A",{href:!0,id:!0});var Pc=l(ve);On=s(Pc,"Verifying the bug"),Pc.forEach(a),Hc.forEach(a),In=c(C),As=o(C,"P",{});var Cc=l(As);Ln=s(Cc,"I clicked into the REPL and tried to understand about the bug."),Cc.forEach(a),Dn=c(C),Ms=o(C,"P",{});var Sc=l(Ms);An=s(Sc,'Initially, you see 2 lines of text, "Another first line", "This line should be last.".'),Sc.forEach(a),Mn=c(C),N=o(C,"P",{});var xs=l(N);Rn=s(xs,"But as soon as I updated the "),vt=o(xs,"CODE",{class:!0});var Oc=l(vt);jn=s(Oc,"{@html content}"),Oc.forEach(a),Gn=s(xs,", the "),ut=o(xs,"CODE",{class:!0});var Ic=l(ut);Nn=s(Ic,"{@html content}"),Ic.forEach(a),$n=s(xs,' moved to be after the "This line should be last." and stayed there.'),xs.forEach(a),Fn=c(C),Rs=o(C,"P",{});var Lc=l(Rs);$=o(Lc,"SPAN",{style:!0});var Dc=l($);T=o(Dc,"IMG",{src:!0,srcset:!0,loading:!0,style:!0,alt:!0}),Dc.forEach(a),Lc.forEach(a),Bn=c(C),js=o(C,"P",{});var Ac=l(js);Vn=s(Ac,"Yup. This is indeed a bug! \u{1F41B}"),Ac.forEach(a),C.forEach(a),ua=c(d),_=o(d,"SECTION",{});var b=l(_);Gs=o(b,"H2",{});var Mc=l(Gs);ue=o(Mc,"A",{href:!0,id:!0});var Rc=l(ue);qn=s(Rc,"Investigating the bug"),Rc.forEach(a),Mc.forEach(a),Wn=c(b),ke=o(b,"P",{});var ba=l(ke);zn=s(ba,"It's amazing that the issue author tracked down the regression behavior of this issue, stating that it started happening since 3.7. Probably because the author just upgraded Svelte from "),ka=Zi(ba),fa=s(ba," 3.7, or maybe he tried every versions to figure out whether it is regression bug or an undiscovered bug. Anyway, kudos to the issue author! \u{1F4AA} \u{1F4AA}"),ba.forEach(a),Un=c(b),fe=o(b,"P",{});var Ta=l(fe);Yn=s(Ta,"Most open source projects maintain a change log file, usually named "),kt=o(Ta,"CODE",{class:!0});var jc=l(kt);Jn=s(jc,"CHANGELOG.md"),jc.forEach(a),Qn=s(Ta," located at the root of the project folder, so that you can figured out what's added / removed / updated in each version."),Ta.forEach(a),Xn=c(b),ge=o(b,"P",{});var Ha=l(ge);Zn=s(Ha,"You can find Svelte's "),X=o(Ha,"A",{href:!0,rel:!0});var qi=l(X);ft=o(qi,"CODE",{class:!0});var Gc=l(ft);Kn=s(Gc,"CHANGELOG.md"),Gc.forEach(a),eo=s(qi," here"),qi.forEach(a),to=s(Ha,"."),Ha.forEach(a),so=c(b),Ns=o(b,"P",{});var Nc=l(Ns);F=o(Nc,"SPAN",{style:!0});var $c=l(F);gt=o($c,"PICTURE",{});var Wi=l(gt);$s=o(Wi,"SOURCE",{type:!0,srcset:!0}),H=o(Wi,"IMG",{src:!0,srcset:!0,loading:!0,style:!0,alt:!0}),Wi.forEach(a),$c.forEach(a),Nc.forEach(a),ao=c(b),mt=o(b,"P",{});var zi=l(mt);no=s(zi,"From the changelog, the most relevant commits seemed to be "),me=o(zi,"STRONG",{});var Pa=l(me);oo=s(Pa,'"Remount HTML tags correctly ('),ye=o(Pa,"A",{href:!0,rel:!0});var Fc=l(ye);lo=s(Fc,"#3329"),Fc.forEach(a),ro=s(Pa,')"'),Pa.forEach(a),zi.forEach(a),io=c(b),B=o(b,"P",{});var ws=l(B);co=s(ws,"Reading through the PR, it seemed that "),_e=o(ws,"A",{href:!0,rel:!0});var Bc=l(_e);po=s(Bc,"#3329"),Bc.forEach(a),ho=s(ws," was when "),yt=o(ws,"CODE",{class:!0});var Vc=l(yt);vo=s(Vc,"HtmlTag"),Vc.forEach(a),uo=s(ws," is first introduced!"),ws.forEach(a),b.forEach(a),ga=c(d),p=o(d,"SECTION",{});var h=l(p);Fs=o(h,"H3",{});var qc=l(Fs);Ee=o(qc,"A",{href:!0,id:!0});var Wc=l(Ee);ko=s(Wc,"HtmlTag"),Wc.forEach(a),qc.forEach(a),fo=c(h),Z=o(h,"P",{});var na=l(Z);xe=o(na,"A",{href:!0,rel:!0});var zc=l(xe);_t=o(zc,"CODE",{class:!0});var Uc=l(_t);go=s(Uc,"HtmlTag"),Uc.forEach(a),zc.forEach(a),mo=s(na," is a helper class that helps Svelte manage raw "),K=o(na,"A",{href:!0,rel:!0});var Ui=l(K);Et=o(Ui,"CODE",{class:!0});var Yc=l(Et);yo=s(Yc,"{@html ...}"),Yc.forEach(a),_o=s(Ui," tag"),Ui.forEach(a),Eo=s(na,"."),na.forEach(a),xo=c(h),xt=o(h,"DIV",{class:!0});var Ih=l(xt);Ih.forEach(a),wo=c(h),L=o(h,"P",{});var ae=l(L);bo=s(ae,"The HtmlTag instance provides the "),wt=o(ae,"CODE",{class:!0});var Jc=l(wt);To=s(Jc,"m"),Jc.forEach(a),Ho=s(ae,", "),bt=o(ae,"CODE",{class:!0});var Qc=l(bt);Po=s(Qc,"p"),Qc.forEach(a),Co=s(ae,", "),Tt=o(ae,"CODE",{class:!0});var Xc=l(Tt);So=s(Xc,"d"),Xc.forEach(a),Oo=s(ae," method, and it will maintain the HTML elements created through the HTML string."),ae.forEach(a),Io=c(h),we=o(h,"P",{});var Ca=l(we);Lo=s(Ca,"So, before v3.7, "),Ht=o(Ca,"CODE",{class:!0});var Zc=l(Ht);Do=s(Zc,"{@html ...}"),Zc.forEach(a),Ao=s(Ca," was handled differently, and from the PR, I assume it was more buggy than the current implementation, albeit getting the case reported by this issue #5012 right. So, there's no reverting back, nor taking the implementation pre-v3.7 as a reference to figure this bug out."),Ca.forEach(a),Mo=c(h),V=o(h,"P",{});var bs=l(V);Ro=s(bs,"Reading through the implementation of the "),Pt=o(bs,"CODE",{class:!0});var Kc=l(Pt);jo=s(Kc,"HtmlTag"),Kc.forEach(a),Go=s(bs,", it seemed that the "),Ct=o(bs,"CODE",{class:!0});var ep=l(Ct);No=s(ep,"anchor"),ep.forEach(a),$o=s(bs," is a key to this issue."),bs.forEach(a),Fo=c(h),P=o(h,"P",{});var U=l(P);St=o(U,"CODE",{class:!0});var tp=l(St);Bo=s(tp,"HtmlTag"),tp.forEach(a),Vo=s(U," uses "),be=o(U,"A",{href:!0,rel:!0});var sp=l(be);Ot=o(sp,"CODE",{class:!0});var ap=l(Ot);qo=s(ap,"insertBefore"),ap.forEach(a),sp.forEach(a),Wo=s(U," to insert HTML elements into the DOM. There's a nullable 2nd argument for "),It=o(U,"CODE",{class:!0});var np=l(It);zo=s(np,"insertBefore"),np.forEach(a),Uo=s(U,", if it is "),Lt=o(U,"CODE",{class:!0});var op=l(Lt);Yo=s(op,"null"),op.forEach(a),Jo=s(U,", the element will be inserted at the end of the parent."),U.forEach(a),Qo=c(h),q=o(h,"P",{});var Ts=l(q);Xo=s(Ts,"In this case, the "),Dt=o(Ts,"CODE",{class:!0});var lp=l(Dt);Zo=s(lp,"anchor"),lp.forEach(a),Ko=s(Ts," is indeed "),At=o(Ts,"CODE",{class:!0});var rp=l(At);el=s(rp,"null"),rp.forEach(a),tl=s(Ts,", so when there's a change in the HTML content, the previous HTML elements were removed and the new HTML elements were inserted at the end of the parent."),Ts.forEach(a),sl=c(h),Mt=o(h,"DIV",{class:!0});var Lh=l(Mt);Lh.forEach(a),al=c(h),j=o(h,"P",{});var Xe=l(j);Te=o(Xe,"STRONG",{});var Sa=l(Te);nl=s(Sa,"Why doesn't the "),Rt=o(Sa,"CODE",{class:!0});var ip=l(Rt);ol=s(ip,"{@html content}"),ip.forEach(a),ll=s(Sa," added at the end of the parent in the initial render?"),Sa.forEach(a),rl=s(Xe," Well, the elements are added in order during mounting. The HTML elements from "),jt=o(Xe,"CODE",{class:!0});var cp=l(jt);il=s(cp,"HtmlTag"),cp.forEach(a),cl=s(Xe," was added at the end of the parent, followed by the "),Gt=o(Xe,"CODE",{class:!0});var pp=l(Gt);pl=s(pp,"<p>This line should be last</p>"),pp.forEach(a),hl=s(Xe,"."),Xe.forEach(a),dl=c(h),D=o(h,"P",{});var ne=l(D);vl=s(ne,"The "),Nt=o(ne,"CODE",{class:!0});var hp=l(Nt);ul=s(hp,"anchor"),hp.forEach(a),kl=s(ne," is an argument to the "),$t=o(ne,"CODE",{class:!0});var dp=l($t);fl=s(dp,"HtmlTag"),dp.forEach(a),gl=s(ne," constructor, so one can safely assume that it is not always "),Ft=o(ne,"CODE",{class:!0});var vp=l(Ft);ml=s(vp,"null"),vp.forEach(a),yl=s(ne,"."),ne.forEach(a),_l=c(h),ee=o(h,"P",{});var oa=l(ee);El=s(oa,"So, I tried out using "),Bt=o(oa,"CODE",{class:!0});var up=l(Bt);xl=s(up,"{@html content}"),up.forEach(a),wl=s(oa," in various ways, to figure out what may be an anchor for the "),Vt=o(oa,"CODE",{class:!0});var kp=l(Vt);bl=s(kp,"HtmlTag"),kp.forEach(a),oa.forEach(a),Tl=c(h),te=o(h,"P",{});var la=l(te);Bs=o(la,"STRONG",{});var fp=l(Bs);Hl=s(fp,"Repro #1"),fp.forEach(a),Pl=s(la," ("),He=o(la,"A",{href:!0,rel:!0});var gp=l(He);Cl=s(gp,"REPL"),gp.forEach(a),Sl=s(la,")"),la.forEach(a),Ol=c(h),qt=o(h,"DIV",{class:!0});var Dh=l(qt);Dh.forEach(a),Il=c(h),Wt=o(h,"DIV",{class:!0});var Ah=l(Wt);Ah.forEach(a),Ll=c(h),W=o(h,"P",{});var Hs=l(W);Dl=s(Hs,"In this case, the "),zt=o(Hs,"CODE",{class:!0});var mp=l(zt);Al=s(mp,"<button />"),mp.forEach(a),Ml=s(Hs," element turns out to be the anchor, which totally make sense, as the html content should be inserted before "),Ut=o(Hs,"CODE",{class:!0});var yp=l(Ut);Rl=s(yp,"<button />"),yp.forEach(a),jl=s(Hs,"."),Hs.forEach(a),Gl=c(h),Pe=o(h,"P",{});var Oa=l(Pe);Nl=s(Oa,"So, it seemed like the anchor is the next element right after "),Yt=o(Oa,"CODE",{class:!0});var _p=l(Yt);$l=s(_p,"{@html ...}"),_p.forEach(a),Fl=s(Oa,". \u{1F914}"),Oa.forEach(a),Bl=c(h),se=o(h,"P",{});var ra=l(se);Vs=o(ra,"STRONG",{});var Ep=l(Vs);Vl=s(Ep,"Repro #2"),Ep.forEach(a),ql=s(ra," ("),Ce=o(ra,"A",{href:!0,rel:!0});var xp=l(Ce);Wl=s(xp,"REPL"),xp.forEach(a),zl=s(ra,")"),ra.forEach(a),Ul=c(h),Jt=o(h,"DIV",{class:!0});var Mh=l(Jt);Mh.forEach(a),Yl=c(h),Qt=o(h,"DIV",{class:!0});var Rh=l(Qt);Rh.forEach(a),Jl=c(h),A=o(h,"P",{});var oe=l(A);Ql=s(oe,"If the next element right after "),Xt=o(oe,"CODE",{class:!0});var wp=l(Xt);Xl=s(wp,"{@html ...}"),wp.forEach(a),Zl=s(oe," is a component, then Svelte will insert a empty "),Se=o(oe,"A",{href:!0,rel:!0});var bp=l(Se);Kl=s(bp,"Text"),bp.forEach(a),er=s(oe," node in between "),Zt=o(oe,"CODE",{class:!0});var Tp=l(Zt);tr=s(Tp,"{@html ...}"),Tp.forEach(a),sr=s(oe," and the component, and the anchor is the empty Text node."),oe.forEach(a),ar=c(h),qs=o(h,"P",{});var Hp=l(qs);nr=s(Hp,"Well, that make sense too, because we can't see what's inside the component, we can't get the first element rendered in the component as the anchor. So, an extra empty Text node is used for anchoring."),Hp.forEach(a),or=c(h),M=o(h,"P",{});var le=l(M);lr=s(le,"So, it seemed like the anchor for the "),Kt=o(le,"CODE",{class:!0});var Pp=l(Kt);rr=s(Pp,"HtmlTag"),Pp.forEach(a),ir=s(le," depends on the next element, and the "),es=o(le,"CODE",{class:!0});var Cp=l(es);cr=s(Cp,"HtmlTag"),Cp.forEach(a),pr=s(le," itself is the last element, then the anchor would be "),ts=o(le,"CODE",{class:!0});var Sp=l(ts);hr=s(Sp,"null"),Sp.forEach(a),dr=s(le,"."),le.forEach(a),vr=c(h),z=o(h,"P",{});var Ps=l(z);ur=s(Ps,"This seemed fine in most cases, as in if the "),ss=o(Ps,"CODE",{class:!0});var Op=l(ss);kr=s(Op,"HtmlTag"),Op.forEach(a),fr=s(Ps," is indeed the last element of its parent, then, we don't need an anchor. Adding and updating "),as=o(Ps,"CODE",{class:!0});var Ip=l(as);gr=s(Ip,"HtmlTag"),Ip.forEach(a),mr=s(Ps," will always add HTML elements at the end of its parent."),Ps.forEach(a),yr=c(h),Ws=o(h,"P",{});var Lp=l(Ws);_r=s(Lp,"However, I figured there are 2 edge cases that this assumption may not be true."),Lp.forEach(a),Er=c(h),Oe=o(h,"P",{});var Ia=l(Oe);xr=s(Ia,"The 1st edge case is the one reported in the issue #5012, if the "),ns=o(Ia,"CODE",{class:!0});var Dp=l(ns);wr=s(Dp,"{@html ...}"),Dp.forEach(a),br=s(Ia," is the last element within a slot. As we can't tell how the slot would be used in the component, it may not be the last element of it's parent."),Ia.forEach(a),Tr=c(h),os=o(h,"DIV",{class:!0});var jh=l(os);jh.forEach(a),Hr=c(h),Ie=o(h,"P",{});var La=l(Ie);Pr=s(La,"The 2nd edge case is that "),ls=o(La,"CODE",{class:!0});var Ap=l(ls);Cr=s(Ap,"{@html ...}"),Ap.forEach(a),Sr=s(La," is the last element, but it is a the root of the Component."),La.forEach(a),Or=c(h),rs=o(h,"DIV",{class:!0});var Gh=l(rs);Gh.forEach(a),Ir=c(h),zs=o(h,"P",{});var Mp=l(zs);Le=o(Mp,"A",{href:!0,rel:!0});var Rp=l(Le);Lr=s(Rp,"REPL"),Rp.forEach(a),Mp.forEach(a),Dr=c(h),Us=o(h,"P",{});var jp=l(Us);Ar=s(jp,"As you can see in this contrived example, we can't assume where the component is being used by its parent, so, even it seemed to be the last element in the component, it may not be the case in the parent component."),jp.forEach(a),h.forEach(a),ma=c(d),v=o(d,"SECTION",{});var u=l(v);Ys=o(u,"H2",{});var Gp=l(Ys);De=o(Gp,"A",{href:!0,id:!0});var Np=l(De);Mr=s(Np,"Fixing the bug"),Np.forEach(a),Gp.forEach(a),Rr=c(u),Js=o(u,"P",{});var $p=l(Js);jr=s($p,"Once we figured out the cause of the bug, the fix is much simpler."),$p.forEach(a),Gr=c(u),Qs=o(u,"P",{});var Fp=l(Qs);Nr=s(Fp,"Just as how Svelte will add a empty Text node as an anchor if the next element is a component, we are going to add the same anchor if"),Fp.forEach(a),$r=c(u),Ae=o(u,"UL",{});var Da=l(Ae);Me=o(Da,"LI",{});var Aa=l(Me);Fr=s(Aa,"the "),is=o(Aa,"CODE",{class:!0});var Bp=l(is);Br=s(Bp,"{@html ...}"),Bp.forEach(a),Vr=s(Aa," has no next element, and"),Aa.forEach(a),qr=c(Da),cs=o(Da,"LI",{});var Yi=l(cs);Wr=s(Yi,"either"),Re=o(Yi,"UL",{});var Ma=l(Re);ps=o(Ma,"LI",{});var Ji=l(ps);hs=o(Ji,"CODE",{class:!0});var Vp=l(hs);zr=s(Vp,"{@html ...}"),Vp.forEach(a),Ur=s(Ji," is at the root of a slot, or"),Ji.forEach(a),Yr=c(Ma),ds=o(Ma,"LI",{});var Qi=l(ds);vs=o(Qi,"CODE",{class:!0});var qp=l(vs);Jr=s(qp,"{@html ...}"),qp.forEach(a),Qr=s(Qi," is at the root of a component."),Qi.forEach(a),Ma.forEach(a),Yi.forEach(a),Da.forEach(a),Xr=c(u),Xs=o(u,"P",{});var Wp=l(Xs);Zr=s(Wp,"I know my way in the Svelte repo, good enough to know where to add this extra condition."),Wp.forEach(a),Kr=c(u),je=o(u,"P",{});var Ra=l(je);ei=s(Ra,"But if you are new, you can try global search the keyword "),us=o(Ra,"CODE",{class:!0});var zp=l(us);ti=s(zp,"html_anchor"),zp.forEach(a),si=s(Ra,", the variable name of the anchor added by Svelte, it should lead you to it."),Ra.forEach(a),ai=c(u),ks=o(u,"DIV",{class:!0});var Nh=l(ks);Nh.forEach(a),ni=c(u),Zs=o(u,"P",{});var Up=l(Zs);Ge=o(Up,"A",{href:!0,rel:!0});var Yp=l(Ge);oi=s(Yp,"Link to Github"),Yp.forEach(a),Up.forEach(a),li=c(u),Ks=o(u,"P",{});var Jp=l(Ks);ri=s(Jp,"Here we see that the condition of adding an anchor is that if"),Jp.forEach(a),ii=c(u),Ne=o(u,"UL",{});var ja=l(Ne);$e=o(ja,"LI",{});var Ga=l($e);ci=s(Ga,"it is in the "),fs=o(Ga,"CODE",{class:!0});var Qp=l(fs);pi=s(Qp,"<svelte:head>"),Qp.forEach(a),hi=s(Ga,", or"),Ga.forEach(a),di=c(ja),Fe=o(ja,"LI",{});var Na=l(Fe);vi=s(Na,"the next element is not a dom element, (which could be a component, or logic blocks "),ea=o(Na,"EM",{});var Xp=l(ea);ui=s(Xp,"(oh why didn't I think about this case too?)"),Xp.forEach(a),ki=s(Na,")"),Na.forEach(a),ja.forEach(a),fi=c(u),gs=o(u,"DIV",{class:!0});var $h=l(gs);$h.forEach(a),gi=c(u),ta=o(u,"P",{});var Zp=l(ta);mi=s(Zp,"So, we check if"),Zp.forEach(a),yi=c(u),Be=o(u,"UL",{});var $a=l(Be);sa=o($a,"LI",{});var Kp=l(sa);_i=s(Kp,"it has a parent (if it is at the root of component), or"),Kp.forEach(a),Ei=c($a),Ve=o($a,"LI",{});var Fa=l(Ve);xi=s(Fa,"if the parent is not an element (it could be within a slot, or a logic block "),ms=o(Fa,"CODE",{class:!0});var eh=l(ms);wi=s(eh,"{#if}"),eh.forEach(a),bi=s(Fa,")"),Fa.forEach(a),$a.forEach(a),Ti=c(u),qe=o(u,"P",{});var Ba=l(qe);Hi=s(Ba,"For the test case, I used to 2 edge case examples, try to simulate some clicks, and make sure that the "),ys=o(Ba,"CODE",{class:!0});var th=l(ys);Pi=s(th,"{@html ...}"),th.forEach(a),Ci=s(Ba," stay in place even after the HTML content changes."),Ba.forEach(a),Si=c(u),_s=o(u,"DIV",{class:!0});var Fh=l(_s);Fh.forEach(a),Oi=c(u),We=o(u,"P",{});var Va=l(We);Ii=s(Va,"You can read the "),ze=o(Va,"A",{href:!0,rel:!0});var sh=l(ze);Li=s(sh,"Pull Request #5061"),sh.forEach(a),Di=s(Va," to see all the test cases written up."),Va.forEach(a),Ai=c(u),Mi=o(u,"HR",{}),Ri=c(u),Ue=o(u,"P",{});var qa=l(Ue);ji=s(qa,"If you wish to learn more about Svelte, "),Ye=o(qa,"A",{href:!0,rel:!0});var ah=l(Ye);Gi=s(ah,"follow me on Twitter"),ah.forEach(a),Ni=s(qa,"."),qa.forEach(a),$i=c(u),Je=o(u,"P",{});var Wa=l(Je);Fi=s(Wa,"If you have anything unclear about this article, find me on "),Qe=o(Wa,"A",{href:!0,rel:!0});var nh=l(Qe);Bi=s(nh,"Twitter"),nh.forEach(a),Vi=s(Wa," too!"),Wa.forEach(a),u.forEach(a),this.h()},h(){r(g,"href","#background"),r(g,"id","background"),r(et,"href","/contributing-to-svelte-fixing-issue-4392"),r(ce,"href","https://github.com/sveltejs/svelte/issues/5012"),r(ce,"rel","nofollow"),r(pe,"href","#the-bug"),r(pe,"id","the-bug"),ca.a=pa,r(he,"href","https://github.com/sveltejs/svelte/issues/5012"),r(he,"rel","nofollow"),r(tt,"class","svelte-t9d7ix"),ha.a=da,r(Q,"class","svelte-t9d7ix"),r(st,"class","svelte-t9d7ix"),r(de,"href","https://svelte.dev/repl/1f9da40bca4b44a089041e826648de2f"),r(de,"rel","nofollow"),r(at,"class","svelte-t9d7ix"),r(nt,"class","svelte-t9d7ix"),r(ot,"class","svelte-t9d7ix"),r(lt,"class","svelte-t9d7ix"),r(rt,"class","svelte-t9d7ix"),r(it,"class","svelte-t9d7ix"),r(ct,"class","svelte-t9d7ix"),r(pt,"class","svelte-t9d7ix"),r(ht,"class","inline"),r(dt,"class","inline"),r(R,"class","svelte-t9d7ix"),r(k,"class","issue svelte-t9d7ix"),r(ve,"href","#verifying-the-bug"),r(ve,"id","verifying-the-bug"),r(vt,"class","inline"),r(ut,"class","inline"),rh(T.src,ec=ch)||r(T,"src",ec),r(T,"srcset",ch+", "+Kh+" 2x"),r(T,"loading","lazy"),w(T,"position","absolute"),w(T,"top","0"),w(T,"width","100%"),w(T,"height","100%"),r(T,"alt","screen recording of the bug behavior"),w($,"display","block"),w($,"position","relative"),w($,"padding-top","44.643%"),w($,"width","100%"),r(ue,"href","#investigating-the-bug"),r(ue,"id","investigating-the-bug"),ka.a=fa,r(kt,"class","inline"),r(ft,"class","inline"),r(X,"href","https://github.com/sveltejs/svelte/blob/master/CHANGELOG.md"),r(X,"rel","nofollow"),r($s,"type","image/webp"),r($s,"srcset",Xh+", "+Qh+" 2x"),rh(H.src,tc=ih)||r(H,"src",tc),r(H,"srcset",ih+", "+Zh+" 2x"),r(H,"loading","lazy"),w(H,"position","absolute"),w(H,"top","0"),w(H,"width","100%"),w(H,"height","100%"),r(H,"alt","changelog"),w(F,"display","block"),w(F,"position","relative"),w(F,"padding-top","33.380%"),w(F,"width","100%"),r(ye,"href","https://github.com/sveltejs/svelte/pull/3329"),r(ye,"rel","nofollow"),r(_e,"href","https://github.com/sveltejs/svelte/pull/3329"),r(_e,"rel","nofollow"),r(yt,"class","inline"),r(Ee,"href","#htmltag"),r(Ee,"id","htmltag"),r(_t,"class","inline"),r(xe,"href","https://github.com/sveltejs/svelte/blob/1c39f6079f630ea549984b8e9eda1853cd5fa883/src/runtime/internal/dom.ts#L321-L362"),r(xe,"rel","nofollow"),r(Et,"class","inline"),r(K,"href","https://svelte.dev/tutorial/html-tags"),r(K,"rel","nofollow"),r(xt,"class","code-section"),r(wt,"class","inline"),r(bt,"class","inline"),r(Tt,"class","inline"),r(Ht,"class","inline"),r(Pt,"class","inline"),r(Ct,"class","inline"),r(St,"class","inline"),r(Ot,"class","inline"),r(be,"href","https://developer.mozilla.org/en-US/docs/Web/API/Node/insertBefore"),r(be,"rel","nofollow"),r(It,"class","inline"),r(Lt,"class","inline"),r(Dt,"class","inline"),r(At,"class","inline"),r(Mt,"class","code-section"),r(Rt,"class","inline"),r(jt,"class","inline"),r(Gt,"class","inline"),r(Nt,"class","inline"),r($t,"class","inline"),r(Ft,"class","inline"),r(Bt,"class","inline"),r(Vt,"class","inline"),r(He,"href","https://svelte.dev/repl/f31104585d974a54a76808aa5d0820a8?version=3.23.2"),r(He,"rel","nofollow"),r(qt,"class","code-section"),r(Wt,"class","code-section"),r(zt,"class","inline"),r(Ut,"class","inline"),r(Yt,"class","inline"),r(Ce,"href","https://svelte.dev/repl/d469d63a77c94998839603738ea97451?version=3.23.2"),r(Ce,"rel","nofollow"),r(Jt,"class","code-section"),r(Qt,"class","code-section"),r(Xt,"class","inline"),r(Se,"href","https://developer.mozilla.org/en-US/docs/Web/API/Text"),r(Se,"rel","nofollow"),r(Zt,"class","inline"),r(Kt,"class","inline"),r(es,"class","inline"),r(ts,"class","inline"),r(ss,"class","inline"),r(as,"class","inline"),r(ns,"class","inline"),r(os,"class","code-section"),r(ls,"class","inline"),r(rs,"class","code-section"),r(Le,"href","https://svelte.dev/repl/9d19540d1eb249c3af519894e42f0f75?version=3.23.2"),r(Le,"rel","nofollow"),r(De,"href","#fixing-the-bug"),r(De,"id","fixing-the-bug"),r(is,"class","inline"),r(hs,"class","inline"),r(vs,"class","inline"),r(us,"class","inline"),r(ks,"class","code-section"),r(Ge,"href","https://github.com/sveltejs/svelte/blob/1c39f6079f630ea549984b8e9eda1853cd5fa883/src/compiler/compile/render_dom/wrappers/RawMustacheTag.ts#L42"),r(Ge,"rel","nofollow"),r(fs,"class","inline"),r(gs,"class","code-section"),r(ms,"class","inline"),r(ys,"class","inline"),r(_s,"class","code-section"),r(ze,"href","https://github.com/sveltejs/svelte/pull/5061"),r(ze,"rel","nofollow"),r(Ye,"href","https://twitter.com/lihautan"),r(Ye,"rel","nofollow"),r(Qe,"href","https://twitter.com/lihautan"),r(Qe,"rel","nofollow")},m(d,y){vh(f,d,y),S(d,O,y),S(d,E,y),e(E,G),e(G,g),e(g,I),e(E,Ke),e(E,re),e(re,za),e(re,et),e(et,Ua),e(re,Ya),e(E,Ja),e(E,ie),e(ie,Qa),e(ie,ce),e(ce,Xa),e(ie,Za),S(d,ia,y),S(d,Y,y),e(Y,Cs),e(Cs,pe),e(pe,Ka),e(Y,en),e(Y,k),e(k,tt),e(tt,J),e(J,tn),ca.m(gh,J),e(J,pa),e(J,he),e(he,sn),e(k,an),e(k,Q),e(Q,nn),ha.m(mh,Q),e(Q,da),e(k,on),e(k,st),e(st,Ss),e(Ss,ln),e(k,rn),e(k,at),e(at,de),e(de,cn),e(k,pn),e(k,nt),e(nt,hn),e(k,dn),e(k,ot),e(ot,Os),e(Os,vn),e(k,un),e(k,lt),e(lt,kn),e(k,fn),e(k,rt),e(rt,Is),e(Is,gn),e(k,mn),e(k,it),e(it,yn),e(k,_n),e(k,ct),e(ct,Ls),e(Ls,En),e(k,xn),e(k,pt),e(pt,wn),e(k,bn),e(k,R),e(R,Tn),e(R,ht),e(ht,Hn),e(R,Pn),e(R,dt),e(dt,Cn),e(R,Sn),S(d,va,y),S(d,x,y),e(x,Ds),e(Ds,ve),e(ve,On),e(x,In),e(x,As),e(As,Ln),e(x,Dn),e(x,Ms),e(Ms,An),e(x,Mn),e(x,N),e(N,Rn),e(N,vt),e(vt,jn),e(N,Gn),e(N,ut),e(ut,Nn),e(N,$n),e(x,Fn),e(x,Rs),e(Rs,$),e($,T),e(x,Bn),e(x,js),e(js,Vn),S(d,ua,y),S(d,_,y),e(_,Gs),e(Gs,ue),e(ue,qn),e(_,Wn),e(_,ke),e(ke,zn),ka.m(yh,ke),e(ke,fa),e(_,Un),e(_,fe),e(fe,Yn),e(fe,kt),e(kt,Jn),e(fe,Qn),e(_,Xn),e(_,ge),e(ge,Zn),e(ge,X),e(X,ft),e(ft,Kn),e(X,eo),e(ge,to),e(_,so),e(_,Ns),e(Ns,F),e(F,gt),e(gt,$s),e(gt,H),e(_,ao),e(_,mt),e(mt,no),e(mt,me),e(me,oo),e(me,ye),e(ye,lo),e(me,ro),e(_,io),e(_,B),e(B,co),e(B,_e),e(_e,po),e(B,ho),e(B,yt),e(yt,vo),e(B,uo),S(d,ga,y),S(d,p,y),e(p,Fs),e(Fs,Ee),e(Ee,ko),e(p,fo),e(p,Z),e(Z,xe),e(xe,_t),e(_t,go),e(Z,mo),e(Z,K),e(K,Et),e(Et,yo),e(K,_o),e(Z,Eo),e(p,xo),e(p,xt),xt.innerHTML=_h,e(p,wo),e(p,L),e(L,bo),e(L,wt),e(wt,To),e(L,Ho),e(L,bt),e(bt,Po),e(L,Co),e(L,Tt),e(Tt,So),e(L,Oo),e(p,Io),e(p,we),e(we,Lo),e(we,Ht),e(Ht,Do),e(we,Ao),e(p,Mo),e(p,V),e(V,Ro),e(V,Pt),e(Pt,jo),e(V,Go),e(V,Ct),e(Ct,No),e(V,$o),e(p,Fo),e(p,P),e(P,St),e(St,Bo),e(P,Vo),e(P,be),e(be,Ot),e(Ot,qo),e(P,Wo),e(P,It),e(It,zo),e(P,Uo),e(P,Lt),e(Lt,Yo),e(P,Jo),e(p,Qo),e(p,q),e(q,Xo),e(q,Dt),e(Dt,Zo),e(q,Ko),e(q,At),e(At,el),e(q,tl),e(p,sl),e(p,Mt),Mt.innerHTML=Eh,e(p,al),e(p,j),e(j,Te),e(Te,nl),e(Te,Rt),e(Rt,ol),e(Te,ll),e(j,rl),e(j,jt),e(jt,il),e(j,cl),e(j,Gt),e(Gt,pl),e(j,hl),e(p,dl),e(p,D),e(D,vl),e(D,Nt),e(Nt,ul),e(D,kl),e(D,$t),e($t,fl),e(D,gl),e(D,Ft),e(Ft,ml),e(D,yl),e(p,_l),e(p,ee),e(ee,El),e(ee,Bt),e(Bt,xl),e(ee,wl),e(ee,Vt),e(Vt,bl),e(p,Tl),e(p,te),e(te,Bs),e(Bs,Hl),e(te,Pl),e(te,He),e(He,Cl),e(te,Sl),e(p,Ol),e(p,qt),qt.innerHTML=xh,e(p,Il),e(p,Wt),Wt.innerHTML=wh,e(p,Ll),e(p,W),e(W,Dl),e(W,zt),e(zt,Al),e(W,Ml),e(W,Ut),e(Ut,Rl),e(W,jl),e(p,Gl),e(p,Pe),e(Pe,Nl),e(Pe,Yt),e(Yt,$l),e(Pe,Fl),e(p,Bl),e(p,se),e(se,Vs),e(Vs,Vl),e(se,ql),e(se,Ce),e(Ce,Wl),e(se,zl),e(p,Ul),e(p,Jt),Jt.innerHTML=bh,e(p,Yl),e(p,Qt),Qt.innerHTML=Th,e(p,Jl),e(p,A),e(A,Ql),e(A,Xt),e(Xt,Xl),e(A,Zl),e(A,Se),e(Se,Kl),e(A,er),e(A,Zt),e(Zt,tr),e(A,sr),e(p,ar),e(p,qs),e(qs,nr),e(p,or),e(p,M),e(M,lr),e(M,Kt),e(Kt,rr),e(M,ir),e(M,es),e(es,cr),e(M,pr),e(M,ts),e(ts,hr),e(M,dr),e(p,vr),e(p,z),e(z,ur),e(z,ss),e(ss,kr),e(z,fr),e(z,as),e(as,gr),e(z,mr),e(p,yr),e(p,Ws),e(Ws,_r),e(p,Er),e(p,Oe),e(Oe,xr),e(Oe,ns),e(ns,wr),e(Oe,br),e(p,Tr),e(p,os),os.innerHTML=Hh,e(p,Hr),e(p,Ie),e(Ie,Pr),e(Ie,ls),e(ls,Cr),e(Ie,Sr),e(p,Or),e(p,rs),rs.innerHTML=Ph,e(p,Ir),e(p,zs),e(zs,Le),e(Le,Lr),e(p,Dr),e(p,Us),e(Us,Ar),S(d,ma,y),S(d,v,y),e(v,Ys),e(Ys,De),e(De,Mr),e(v,Rr),e(v,Js),e(Js,jr),e(v,Gr),e(v,Qs),e(Qs,Nr),e(v,$r),e(v,Ae),e(Ae,Me),e(Me,Fr),e(Me,is),e(is,Br),e(Me,Vr),e(Ae,qr),e(Ae,cs),e(cs,Wr),e(cs,Re),e(Re,ps),e(ps,hs),e(hs,zr),e(ps,Ur),e(Re,Yr),e(Re,ds),e(ds,vs),e(vs,Jr),e(ds,Qr),e(v,Xr),e(v,Xs),e(Xs,Zr),e(v,Kr),e(v,je),e(je,ei),e(je,us),e(us,ti),e(je,si),e(v,ai),e(v,ks),ks.innerHTML=Ch,e(v,ni),e(v,Zs),e(Zs,Ge),e(Ge,oi),e(v,li),e(v,Ks),e(Ks,ri),e(v,ii),e(v,Ne),e(Ne,$e),e($e,ci),e($e,fs),e(fs,pi),e($e,hi),e(Ne,di),e(Ne,Fe),e(Fe,vi),e(Fe,ea),e(ea,ui),e(Fe,ki),e(v,fi),e(v,gs),gs.innerHTML=Sh,e(v,gi),e(v,ta),e(ta,mi),e(v,yi),e(v,Be),e(Be,sa),e(sa,_i),e(Be,Ei),e(Be,Ve),e(Ve,xi),e(Ve,ms),e(ms,wi),e(Ve,bi),e(v,Ti),e(v,qe),e(qe,Hi),e(qe,ys),e(ys,Pi),e(qe,Ci),e(v,Si),e(v,_s),_s.innerHTML=Oh,e(v,Oi),e(v,We),e(We,Ii),e(We,ze),e(ze,Li),e(We,Di),e(v,Ai),e(v,Mi),e(v,Ri),e(v,Ue),e(Ue,ji),e(Ue,Ye),e(Ye,Gi),e(Ue,Ni),e(v,$i),e(v,Je),e(Je,Fi),e(Je,Qe),e(Qe,Bi),e(Je,Vi),ya=!0},p:Uh,i(d){ya||(uh(f.$$.fragment,d),ya=!0)},o(d){kh(f.$$.fragment,d),ya=!1},d(d){fh(f,d),d&&a(O),d&&a(E),d&&a(ia),d&&a(Y),d&&a(va),d&&a(x),d&&a(ua),d&&a(_),d&&a(ga),d&&a(p),d&&a(ma),d&&a(v)}}}function sd(Ze){let f,O;const E=[Ze[0],ph];let G={$$slots:{default:[td]},$$scope:{ctx:Ze}};for(let g=0;g<E.length;g+=1)G=Ki(G,E[g]);return f=new Yh({props:G}),{c(){hh(f.$$.fragment)},l(g){dh(f.$$.fragment,g)},m(g,I){vh(f,g,I),O=!0},p(g,[I]){const Ke=I&1?Wh(E,[I&1&&oh(g[0]),I&0&&oh(ph)]):{};I&2&&(Ke.$$scope={dirty:I,ctx:g}),f.$set(Ke)},i(g){O||(uh(f.$$.fragment,g),O=!0)},o(g){kh(f.$$.fragment,g),O=!1},d(g){fh(f,g)}}}const ph={title:"Contributing to Svelte - Fixing issue #5012",date:"2020-06-25T08:00:00Z",tags:["Svelte","JavaScript","Open Source"],series:"Contributing to Svelte",description:"Svelte issue #5012 - Slot containing only {@html value} renders in wrong place on update",label:"blog"};function ad(Ze,f,O){return zh("blog",{image:ed}),Ze.$$set=E=>{O(0,f=Ki(Ki({},f),lh(E)))},f=lh(f),[f]}class pd extends Bh{constructor(f){super();Vh(this,f,ad,sd,qh,{})}}export{pd as default,ph as metadata};
