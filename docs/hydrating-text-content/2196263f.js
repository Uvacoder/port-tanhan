function n(){}function a(n,a){for(const t in a)n[t]=a[t];return n}function t(n){return n()}function s(){return Object.create(null)}function e(n){n.forEach(t)}function o(n){return"function"==typeof n}function c(n,a){return n!=n?a==a:n!==a||n&&"object"==typeof n||"function"==typeof n}function p(n,t,s,e){return n[1]&&e?a(s.ctx.slice(),n[1](e(t))):s.ctx}function r(n,a,t,s,e,o,c){const r=function(n,a,t,s){if(n[2]&&s){const e=n[2](s(t));if(void 0===a.dirty)return e;if("object"==typeof e){const n=[],t=Math.max(a.dirty.length,e.length);for(let s=0;s<t;s+=1)n[s]=a.dirty[s]|e[s];return n}return a.dirty|e}return a.dirty}(a,s,e,o);if(r){const e=p(a,t,s,c);n.p(e,r)}}function l(n,a){n.appendChild(a)}function i(n,a,t){n.insertBefore(a,t||null)}function u(n){n.parentNode.removeChild(n)}function h(n,a){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(a)}function d(n){return document.createElement(n)}function k(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function f(n){return document.createTextNode(n)}function g(){return f(" ")}function m(){return f("")}function v(n,a,t){null==t?n.removeAttribute(a):n.getAttribute(a)!==t&&n.setAttribute(a,t)}function y(n){return Array.from(n.childNodes)}function E(n,a,t,s){for(let s=0;s<n.length;s+=1){const e=n[s];if(e.nodeName===a){let a=0;const o=[];for(;a<e.attributes.length;){const n=e.attributes[a++];t[n.name]||o.push(n.name)}for(let n=0;n<o.length;n++)e.removeAttribute(o[n]);return n.splice(s,1)[0]}}return s?k(a):d(a)}function b(n,a){for(let t=0;t<n.length;t+=1){const s=n[t];if(3===s.nodeType)return s.data=""+a,n.splice(t,1)[0]}return f(a)}function w(n){return b(n," ")}function T(n,a){a=""+a,n.wholeText!==a&&(n.data=a)}function I(n,a){n.value=null==a?"":a}class M{constructor(n=null){this.a=n,this.e=this.n=null}m(n,a,t=null){this.e||(this.e=d(a.nodeName),this.t=a,this.h(n)),this.i(t)}h(n){this.e.innerHTML=n,this.n=Array.from(this.e.childNodes)}i(n){for(let a=0;a<this.n.length;a+=1)i(this.t,this.n[a],n)}p(n){this.d(),this.h(n),this.i(this.a)}d(){this.n.forEach(u)}}let H;function S(n){H=n}function L(n){(function(){if(!H)throw new Error("Function called outside component initialization");return H})().$$.on_mount.push(n)}const R=[],x=[],A=[],P=[],C=Promise.resolve();let O=!1;function D(n){A.push(n)}let $=!1;const j=new Set;function N(){if(!$){$=!0;do{for(let n=0;n<R.length;n+=1){const a=R[n];S(a),B(a.$$)}for(R.length=0;x.length;)x.pop()();for(let n=0;n<A.length;n+=1){const a=A[n];j.has(a)||(j.add(a),a())}A.length=0}while(R.length);for(;P.length;)P.pop()();O=!1,$=!1,j.clear()}}function B(n){if(null!==n.fragment){n.update(),e(n.before_update);const a=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,a),n.after_update.forEach(D)}}const F=new Set;function q(n,a){n&&n.i&&(F.delete(n),n.i(a))}function _(n,a,t,s){if(n&&n.o){if(F.has(n))return;F.add(n),(void 0).c.push(()=>{F.delete(n),s&&(t&&n.d(1),s())}),n.o(a)}}function U(n){n&&n.c()}function W(n,a){n&&n.l(a)}function z(n,a,s){const{fragment:c,on_mount:p,on_destroy:r,after_update:l}=n.$$;c&&c.m(a,s),D(()=>{const a=p.map(t).filter(o);r?r.push(...a):e(a),n.$$.on_mount=[]}),l.forEach(D)}function J(n,a){const t=n.$$;null!==t.fragment&&(e(t.on_destroy),t.fragment&&t.fragment.d(a),t.on_destroy=t.fragment=null,t.ctx=[])}function V(n,a){-1===n.$$.dirty[0]&&(R.push(n),O||(O=!0,C.then(N)),n.$$.dirty.fill(0)),n.$$.dirty[a/31|0]|=1<<a%31}function G(a,t,o,c,p,r,l=[-1]){const i=H;S(a);const h=t.props||{},d=a.$$={fragment:null,ctx:null,props:r,update:n,not_equal:p,bound:s(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(i?i.$$.context:[]),callbacks:s(),dirty:l};let k=!1;if(d.ctx=o?o(a,h,(n,t,...s)=>{const e=s.length?s[0]:t;return d.ctx&&p(d.ctx[n],d.ctx[n]=e)&&(d.bound[n]&&d.bound[n](e),k&&V(a,n)),t}):[],d.update(),k=!0,e(d.before_update),d.fragment=!!c&&c(d.ctx),t.target){if(t.hydrate){const n=y(t.target);d.fragment&&d.fragment.l(n),n.forEach(u)}else d.fragment&&d.fragment.c();t.intro&&q(a.$$.fragment),z(a,t.target,t.anchor),N()}S(i)}class K{$destroy(){J(this,1),this.$destroy=n}$on(n,a){const t=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return t.push(a),()=>{const n=t.indexOf(a);-1!==n&&t.splice(n,1)}}$set(){}}function Q(a){let t,s,e,o,c,p,r,h,m,T,I,M,H,S,L,R,x,A,P,C,O,D,$,j,N,B,F,q,_,U,W,z,J,V,G;return{c(){t=d("header"),s=d("nav"),e=d("ul"),o=d("li"),c=d("a"),p=f("Tan Li Hau"),r=g(),h=d("li"),m=d("a"),T=f("About"),I=g(),M=d("li"),H=d("a"),S=f("Writings"),L=g(),R=d("li"),x=d("a"),A=f("Talks"),P=g(),C=d("li"),O=d("a"),D=f("Notes"),$=g(),j=d("li"),N=d("a"),B=f("Newsletter"),F=g(),q=d("li"),_=d("a"),U=k("svg"),W=k("path"),z=g(),J=d("a"),V=k("svg"),G=k("path"),this.h()},l(n){t=E(n,"HEADER",{class:!0});var a=y(t);s=E(a,"NAV",{});var l=y(s);e=E(l,"UL",{class:!0});var i=y(e);o=E(i,"LI",{class:!0});var d=y(o);c=E(d,"A",{href:!0,class:!0});var k=y(c);p=b(k,"Tan Li Hau"),k.forEach(u),d.forEach(u),r=w(i),h=E(i,"LI",{class:!0});var f=y(h);m=E(f,"A",{href:!0,class:!0});var g=y(m);T=b(g,"About"),g.forEach(u),f.forEach(u),I=w(i),M=E(i,"LI",{class:!0});var v=y(M);H=E(v,"A",{href:!0,class:!0});var K=y(H);S=b(K,"Writings"),K.forEach(u),v.forEach(u),L=w(i),R=E(i,"LI",{class:!0});var Q=y(R);x=E(Q,"A",{href:!0,class:!0});var Y=y(x);A=b(Y,"Talks"),Y.forEach(u),Q.forEach(u),P=w(i),C=E(i,"LI",{class:!0});var Z=y(C);O=E(Z,"A",{href:!0,class:!0});var X=y(O);D=b(X,"Notes"),X.forEach(u),Z.forEach(u),$=w(i),j=E(i,"LI",{class:!0});var nn=y(j);N=E(nn,"A",{href:!0,class:!0});var an=y(N);B=b(an,"Newsletter"),an.forEach(u),nn.forEach(u),F=w(i),q=E(i,"LI",{class:!0});var tn=y(q);_=E(tn,"A",{"aria-label":!0,href:!0,class:!0});var sn=y(_);U=E(sn,"svg",{viewBox:!0,width:!0,height:!0,class:!0},1);var en=y(U);W=E(en,"path",{d:!0},1),y(W).forEach(u),en.forEach(u),sn.forEach(u),z=w(tn),J=E(tn,"A",{"aria-label":!0,href:!0,class:!0});var on=y(J);V=E(on,"svg",{viewBox:!0,width:!0,height:!0,class:!0},1);var cn=y(V);G=E(cn,"path",{d:!0},1),y(G).forEach(u),cn.forEach(u),on.forEach(u),tn.forEach(u),i.forEach(u),l.forEach(u),a.forEach(u),this.h()},h(){v(c,"href","/"),v(c,"class","svelte-f3e4uo"),v(o,"class","svelte-f3e4uo"),v(m,"href","/about"),v(m,"class","svelte-f3e4uo"),v(h,"class","svelte-f3e4uo"),v(H,"href","/blogs"),v(H,"class","svelte-f3e4uo"),v(M,"class","svelte-f3e4uo"),v(x,"href","/talks"),v(x,"class","svelte-f3e4uo"),v(R,"class","svelte-f3e4uo"),v(O,"href","/notes"),v(O,"class","svelte-f3e4uo"),v(C,"class","svelte-f3e4uo"),v(N,"href","/newsletter"),v(N,"class","svelte-f3e4uo"),v(j,"class","svelte-f3e4uo"),v(W,"d","M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66\n    10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5\n    4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"),v(U,"viewBox","0 0 24 24"),v(U,"width","1em"),v(U,"height","1em"),v(U,"class","svelte-f3e4uo"),v(_,"aria-label","Twitter account"),v(_,"href","https://twitter.com/lihautan"),v(_,"class","svelte-f3e4uo"),v(G,"d","M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0\n    0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07\n    5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65\n    5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42\n    3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"),v(V,"viewBox","0 0 24 24"),v(V,"width","1em"),v(V,"height","1em"),v(V,"class","svelte-f3e4uo"),v(J,"aria-label","Github account"),v(J,"href","https://github.com/tanhauhau"),v(J,"class","svelte-f3e4uo"),v(q,"class","social svelte-f3e4uo"),v(e,"class","svelte-f3e4uo"),v(t,"class","svelte-f3e4uo")},m(n,a){i(n,t,a),l(t,s),l(s,e),l(e,o),l(o,c),l(c,p),l(e,r),l(e,h),l(h,m),l(m,T),l(e,I),l(e,M),l(M,H),l(H,S),l(e,L),l(e,R),l(R,x),l(x,A),l(e,P),l(e,C),l(C,O),l(O,D),l(e,$),l(e,j),l(j,N),l(N,B),l(e,F),l(e,q),l(q,_),l(_,U),l(U,W),l(q,z),l(q,J),l(J,V),l(V,G)},p:n,i:n,o:n,d(n){n&&u(t)}}}class Y extends K{constructor(n){super(),G(this,n,null,Q,c,{})}}function Z(a){let t,s,e,o,c,p,r,h,k,m,T,M,H,S,L,R,x,A,P,C;return{c(){t=d("div"),s=d("h1"),e=f("Subscribe to my newsletter"),o=g(),c=d("h2"),p=f("Get the latest blog posts and project updates delivered right to your inbox"),r=g(),h=d("form"),k=d("div"),m=d("input"),T=g(),M=d("input"),S=g(),L=d("input"),R=g(),x=d("p"),A=f("Powered by Buttondown."),this.h()},l(n){t=E(n,"DIV",{class:!0});var a=y(t);s=E(a,"H1",{});var l=y(s);e=b(l,"Subscribe to my newsletter"),l.forEach(u),o=w(a),c=E(a,"H2",{class:!0});var i=y(c);p=b(i,"Get the latest blog posts and project updates delivered right to your inbox"),i.forEach(u),r=w(a),h=E(a,"FORM",{action:!0,method:!0,target:!0,onsubmit:!0,class:!0});var d=y(h);k=E(d,"DIV",{class:!0});var f=y(k);m=E(f,"INPUT",{type:!0,name:!0,id:!0,"aria-label":!0,placeholder:!0,class:!0}),T=w(f),M=E(f,"INPUT",{type:!0,value:!0,disabled:!0,class:!0}),f.forEach(u),S=w(d),L=E(d,"INPUT",{type:!0,value:!0,name:!0,class:!0}),R=w(d),x=E(d,"P",{class:!0});var g=y(x);A=b(g,"Powered by Buttondown."),g.forEach(u),d.forEach(u),a.forEach(u),this.h()},h(){v(c,"class","svelte-1k1s1co"),v(m,"type","email"),v(m,"name","email"),v(m,"id","bd-email"),v(m,"aria-label","email address"),v(m,"placeholder","youremail@example.com"),v(m,"class","svelte-1k1s1co"),v(M,"type","submit"),M.value="Subscribe",M.disabled=H=!a[0],v(M,"class","svelte-1k1s1co"),v(k,"class","form-item svelte-1k1s1co"),v(L,"type","hidden"),L.value="1",v(L,"name","embed"),v(L,"class","svelte-1k1s1co"),v(x,"class","svelte-1k1s1co"),v(h,"action","https://buttondown.email/api/emails/embed-subscribe/lihautan"),v(h,"method","post"),v(h,"target","popupwindow"),v(h,"onsubmit","window.open('https://buttondown.email/lihautan', 'popupwindow')"),v(h,"class","embeddable-buttondown-form"),v(t,"class","form svelte-1k1s1co")},m(n,u){var d,f,g,v;i(n,t,u),l(t,s),l(s,e),l(t,o),l(t,c),l(c,p),l(t,r),l(t,h),l(h,k),l(k,m),I(m,a[0]),l(k,T),l(k,M),l(h,S),l(h,L),l(h,R),l(h,x),l(x,A),P||(d=m,f="input",g=a[1],d.addEventListener(f,g,v),C=()=>d.removeEventListener(f,g,v),P=!0)},p(n,[a]){1&a&&m.value!==n[0]&&I(m,n[0]),1&a&&H!==(H=!n[0])&&(M.disabled=H)},i:n,o:n,d(n){n&&u(t),P=!1,C()}}}function X(n,a,t){let s;return[s,function(){s=this.value,t(0,s)}]}class nn extends K{constructor(n){super(),G(this,n,X,Z,c,{})}}function an(n){return L(()=>(setTimeout(()=>{if(window.innerWidth>1080){const n=document.createElement("script");n.async=!0,n.type="text/javascript",n.src="//cdn.carbonads.com/carbon.js?serve=CE7ITK3E&placement=lihautancom",n.id="_carbonads_js",document.body.appendChild(n)}},5e3),()=>{try{const n=document.getElementById("carbonads");n.parentNode.removeChild(n)}catch(n){}})),[]}class tn extends K{constructor(n){super(),G(this,n,an,null,c,{})}}function sn(n,a,t){const s=n.slice();return s[6]=a[t],s}function en(n,a,t){const s=n.slice();return s[6]=a[t],s}function on(n){let a,t;return{c(){a=d("meta"),this.h()},l(n){a=E(n,"META",{name:!0,content:!0}),this.h()},h(){v(a,"name","keywords"),v(a,"content",t=n[6])},m(n,t){i(n,a,t)},p(n,s){4&s&&t!==(t=n[6])&&v(a,"content",t)},d(n){n&&u(a)}}}function cn(n){let a,t,s=n[6]+"";return{c(){a=d("span"),t=f(s),this.h()},l(n){a=E(n,"SPAN",{class:!0});var e=y(a);t=b(e,s),e.forEach(u),this.h()},h(){v(a,"class","svelte-9tqnza")},m(n,s){i(n,a,s),l(a,t)},p(n,a){4&a&&s!==(s=n[6]+"")&&T(t,s)},d(n){n&&u(a)}}}function pn(n){let a,t,s,e,o,c,k,I,H,S,L,R,x,A,P,C,O,D,$,j,N,B,F,V,G,K,Q,Z,X,an,pn,rn,ln,un,hn,dn,kn,fn,gn,mn=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"Article",author:n[3],copyrightHolder:n[3],copyrightYear:"2020",creator:n[3],publisher:n[3],description:n[1],headline:n[0],name:n[0],inLanguage:"en"})}<\/script>`,vn=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",description:"Breadcrumbs list",name:"Breadcrumbs",itemListElement:[{"@type":"ListItem",item:{"@id":"https://lihautan.com",name:"Homepage"},position:1},{"@type":"ListItem",item:{"@id":"https%3A%2F%2Flihautan.com%2Fhydrating-text-content",name:n[0]},position:2}]})}<\/script>`;document.title=a=n[0]+" | Tan Li Hau";let yn=n[2],En=[];for(let a=0;a<yn.length;a+=1)En[a]=on(en(n,yn,a));F=new Y({});let bn=n[2],wn=[];for(let a=0;a<bn.length;a+=1)wn[a]=cn(sn(n,bn,a));const Tn=n[5].default,In=function(n,a,t,s){if(n){const e=p(n,a,t,s);return n[0](e)}}(Tn,n,n[4],null);return ln=new nn({}),hn=new tn({}),{c(){t=d("meta"),s=d("meta"),e=d("meta"),o=d("meta"),c=d("meta"),k=d("meta"),I=d("meta"),H=d("meta"),S=d("meta"),L=d("meta"),R=d("meta");for(let n=0;n<En.length;n+=1)En[n].c();x=d("meta"),A=d("meta"),C=m(),D=m(),$=g(),j=d("a"),N=f("Skip to content"),B=g(),U(F.$$.fragment),V=g(),G=d("main"),K=d("h1"),Q=f(n[0]),Z=g();for(let n=0;n<wn.length;n+=1)wn[n].c();X=g(),an=d("article"),In&&In.c(),pn=g(),rn=d("footer"),U(ln.$$.fragment),un=g(),U(hn.$$.fragment),dn=g(),fn=m(),this.h()},l(a){const p=function(n,a=document.body){return Array.from(a.querySelectorAll(n))}('[data-svelte="svelte-n0q11s"]',document.head);t=E(p,"META",{name:!0,content:!0}),s=E(p,"META",{name:!0,content:!0}),e=E(p,"META",{name:!0,content:!0}),o=E(p,"META",{name:!0,content:!0}),c=E(p,"META",{name:!0,content:!0}),k=E(p,"META",{name:!0,content:!0}),I=E(p,"META",{name:!0,content:!0}),H=E(p,"META",{name:!0,content:!0}),S=E(p,"META",{name:!0,content:!0}),L=E(p,"META",{name:!0,content:!0}),R=E(p,"META",{name:!0,content:!0});for(let n=0;n<En.length;n+=1)En[n].l(p);x=E(p,"META",{itemprop:!0,content:!0}),A=E(p,"META",{itemprop:!0,content:!0}),C=m(),D=m(),p.forEach(u),$=w(a),j=E(a,"A",{href:!0,class:!0});var r=y(j);N=b(r,"Skip to content"),r.forEach(u),B=w(a),W(F.$$.fragment,a),V=w(a),G=E(a,"MAIN",{id:!0,class:!0});var l=y(G);K=E(l,"H1",{});var i=y(K);Q=b(i,n[0]),i.forEach(u),Z=w(l);for(let n=0;n<wn.length;n+=1)wn[n].l(l);X=w(l),an=E(l,"ARTICLE",{});var h=y(an);In&&In.l(h),h.forEach(u),l.forEach(u),pn=w(a),rn=E(a,"FOOTER",{class:!0});var d=y(rn);W(ln.$$.fragment,d),un=w(d),W(hn.$$.fragment,d),d.forEach(u),dn=w(a),fn=m(),this.h()},h(){v(t,"name","description"),v(t,"content",n[1]),v(s,"name","image"),v(s,"content",null),v(e,"name","og:image"),v(e,"content",null),v(o,"name","og:title"),v(o,"content",n[0]),v(c,"name","og:description"),v(c,"content",n[1]),v(k,"name","og:type"),v(k,"content","website"),v(I,"name","twitter:card"),v(I,"content","summary_large_image"),v(H,"name","twitter:creator"),v(H,"content","@lihautan"),v(S,"name","twitter:title"),v(S,"content",n[0]),v(L,"name","twitter:description"),v(L,"content",n[1]),v(R,"name","twitter:image"),v(R,"content",null),v(x,"itemprop","url"),v(x,"content","https%3A%2F%2Flihautan.com%2Fhydrating-text-content"),v(A,"itemprop","image"),v(A,"content",null),P=new M(C),O=new M(D),v(j,"href","#content"),v(j,"class","skip svelte-9tqnza"),v(G,"id","content"),v(G,"class","blog svelte-9tqnza"),v(rn,"class","svelte-9tqnza"),kn=new M(fn)},m(n,a){l(document.head,t),l(document.head,s),l(document.head,e),l(document.head,o),l(document.head,c),l(document.head,k),l(document.head,I),l(document.head,H),l(document.head,S),l(document.head,L),l(document.head,R);for(let n=0;n<En.length;n+=1)En[n].m(document.head,null);l(document.head,x),l(document.head,A),P.m(mn,document.head),l(document.head,C),O.m(vn,document.head),l(document.head,D),i(n,$,a),i(n,j,a),l(j,N),i(n,B,a),z(F,n,a),i(n,V,a),i(n,G,a),l(G,K),l(K,Q),l(G,Z);for(let n=0;n<wn.length;n+=1)wn[n].m(G,null);l(G,X),l(G,an),In&&In.m(an,null),i(n,pn,a),i(n,rn,a),z(ln,rn,null),l(rn,un),z(hn,rn,null),i(n,dn,a),kn.m('<script async defer src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>',n,a),i(n,fn,a),gn=!0},p(n,[s]){if((!gn||1&s)&&a!==(a=n[0]+" | Tan Li Hau")&&(document.title=a),(!gn||2&s)&&v(t,"content",n[1]),(!gn||1&s)&&v(o,"content",n[0]),(!gn||2&s)&&v(c,"content",n[1]),(!gn||1&s)&&v(S,"content",n[0]),(!gn||2&s)&&v(L,"content",n[1]),4&s){let a;for(yn=n[2],a=0;a<yn.length;a+=1){const t=en(n,yn,a);En[a]?En[a].p(t,s):(En[a]=on(t),En[a].c(),En[a].m(x.parentNode,x))}for(;a<En.length;a+=1)En[a].d(1);En.length=yn.length}if((!gn||3&s)&&mn!==(mn=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"Article",author:n[3],copyrightHolder:n[3],copyrightYear:"2020",creator:n[3],publisher:n[3],description:n[1],headline:n[0],name:n[0],inLanguage:"en"})}<\/script>`)&&P.p(mn),(!gn||1&s)&&vn!==(vn=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",description:"Breadcrumbs list",name:"Breadcrumbs",itemListElement:[{"@type":"ListItem",item:{"@id":"https://lihautan.com",name:"Homepage"},position:1},{"@type":"ListItem",item:{"@id":"https%3A%2F%2Flihautan.com%2Fhydrating-text-content",name:n[0]},position:2}]})}<\/script>`)&&O.p(vn),(!gn||1&s)&&T(Q,n[0]),4&s){let a;for(bn=n[2],a=0;a<bn.length;a+=1){const t=sn(n,bn,a);wn[a]?wn[a].p(t,s):(wn[a]=cn(t),wn[a].c(),wn[a].m(G,X))}for(;a<wn.length;a+=1)wn[a].d(1);wn.length=bn.length}In&&In.p&&16&s&&r(In,Tn,n,n[4],s,null,null)},i(n){gn||(q(F.$$.fragment,n),q(In,n),q(ln.$$.fragment,n),q(hn.$$.fragment,n),gn=!0)},o(n){_(F.$$.fragment,n),_(In,n),_(ln.$$.fragment,n),_(hn.$$.fragment,n),gn=!1},d(n){u(t),u(s),u(e),u(o),u(c),u(k),u(I),u(H),u(S),u(L),u(R),h(En,n),u(x),u(A),u(C),n&&P.d(),u(D),n&&O.d(),n&&u($),n&&u(j),n&&u(B),J(F,n),n&&u(V),n&&u(G),h(wn,n),In&&In.d(n),n&&u(pn),n&&u(rn),J(ln),J(hn),n&&u(dn),n&&u(fn),n&&kn.d()}}}function rn(n,a,t){let{title:s=""}=a,{description:e=""}=a,{tags:o=[]}=a;const c={"@type":"Person",name:"Tan Li Hau"};let{$$slots:p={},$$scope:r}=a;return n.$set=n=>{"title"in n&&t(0,s=n.title),"description"in n&&t(1,e=n.description),"tags"in n&&t(2,o=n.tags),"$$scope"in n&&t(4,r=n.$$scope)},[s,e,o,c,r,p]}class ln extends K{constructor(n){super(),G(this,n,rn,pn,c,{title:0,description:1,tags:2})}}function un(a){let t,s,e,o,c,p,r,h,k,m,T,I,M,H,S,L,R,x,A,P,C,O,D,$,j,N,B,F,q,_,U,W,z,J,V,G,K,Q,Y,Z,X,nn,an,tn,sn,en,on,cn,pn,rn,ln,un,hn,dn,kn,fn,gn,mn,vn,yn,En,bn,wn,Tn,In,Mn,Hn,Sn,Ln,Rn,xn,An,Pn,Cn,On,Dn,$n,jn,Nn,Bn,Fn,qn,_n,Un,Wn,zn,Jn,Vn,Gn,Kn,Qn,Yn,Zn,Xn,na,aa,ta,sa,ea,oa,ca,pa,ra,la,ia,ua,ha,da,ka,fa,ga,ma,va,ya,Ea,ba,wa,Ta,Ia,Ma,Ha,Sa,La,Ra,xa,Aa,Pa,Ca,Oa,Da,$a,ja,Na,Ba,Fa,qa,_a,Ua,Wa,za,Ja,Va,Ga,Ka,Qa,Ya,Za,Xa,nt,at,tt,st,et,ot,ct,pt,rt,lt,it,ut,ht,dt,kt,ft,gt,mt,vt,yt,Et,bt,wt,Tt,It,Mt,Ht,St,Lt,Rt,xt,At,Pt,Ct,Ot,Dt,$t,jt,Nt,Bt,Ft,qt,_t,Ut,Wt,zt,Jt,Vt,Gt,Kt,Qt,Yt,Zt,Xt,ns,as,ts,ss,es,os,cs,ps,rs,ls,is,us,hs,ds,ks,fs,gs,ms,vs,ys,Es,bs,ws,Ts,Is,Ms,Hs,Ss,Ls,Rs,xs,As,Ps,Cs,Os,Ds,$s,js,Ns,Bs,Fs,qs,_s,Us,Ws,zs,Js,Vs,Gs,Ks,Qs,Ys,Zs,Xs,ne,ae,te,se,ee,oe,ce,pe,re,le,ie,ue,he,de,ke,fe,ge,me,ve,ye,Ee,be,we,Te,Ie,Me,He,Se,Le,Re,xe,Ae,Pe,Ce,Oe,De,$e,je,Ne,Be,Fe,qe,_e,Ue,We,ze,Je,Ve,Ge,Ke,Qe,Ye,Ze,Xe,no,ao,to,so,eo,oo,co,po,ro,lo,io,uo,ho,ko,fo,go,mo,vo,yo,Eo,bo,wo,To,Io,Mo,Ho,So,Lo,Ro,xo,Ao,Po,Co,Oo,Do,$o,jo,No,Bo,Fo,qo,_o,Uo,Wo,zo,Jo,Vo,Go,Ko,Qo,Yo,Zo,Xo,nc,ac,tc,sc,ec,oc,cc,pc,rc,lc,ic,uc,hc,dc,kc,fc,gc,mc,vc,yc,Ec,bc,wc,Tc,Ic,Mc,Hc,Sc,Lc,Rc,xc,Ac,Pc,Cc,Oc,Dc,$c,jc,Nc,Bc,Fc,qc,_c,Uc,Wc,zc,Jc,Vc,Gc,Kc,Qc,Yc,Zc,Xc,np,ap,tp,sp,ep,op,cp,pp,rp,lp,ip,up,hp,dp,kp,fp,gp,mp,vp,yp,Ep,bp,wp,Tp,Ip,Mp,Hp,Sp,Lp,Rp,xp,Ap,Pp,Cp,Op,Dp,$p,jp,Np,Bp,Fp,qp,_p,Up,Wp,zp,Jp,Vp,Gp,Kp,Qp,Yp,Zp,Xp,nr,ar,tr,sr,er,or,cr,pr,rr,lr,ir,ur,hr,dr,kr,fr,gr,mr,vr,yr,Er,br,wr,Tr,Ir,Mr,Hr,Sr,Lr,Rr,xr,Ar,Pr;return{c(){t=d("section"),s=d("ul"),e=d("li"),o=d("a"),c=f("Disclaimer"),p=d("li"),r=d("a"),h=f("Background"),k=d("li"),m=d("a"),T=f("The investigation"),I=d("li"),M=d("a"),H=f("Is this a bug?"),S=d("li"),L=d("a"),R=f("Apply what I've learned"),x=d("li"),A=d("a"),P=f("dangerouslySetInnerHtml"),C=d("li"),O=d("a"),D=f("React Partial Hydration"),$=d("li"),j=d("a"),N=f("References"),B=g(),F=d("section"),q=d("h2"),_=d("a"),U=f("Disclaimer"),W=g(),z=d("p"),J=f("I am not going to talk about what is hydration, to know more about client-side rendering, server-side rendering and hydration, please "),V=d("a"),G=f("read this amazing article"),K=f(" by "),Q=d("a"),Y=f("Jason Miller"),Z=f(" and "),X=d("a"),nn=f("Addy Osmani"),an=f("."),tn=g(),sn=d("p"),en=f("I am not going to share about how to do rehydration in React as well, you can read about that from "),on=d("a"),cn=f("here"),pn=f(" and "),rn=d("a"),ln=f("here"),un=f("."),hn=g(),dn=d("p"),kn=f('I am going to share a story, how I "understand" more about the mechanics of rehydration in React, and how I apply it in real life.'),fn=g(),gn=d("section"),mn=d("h2"),vn=d("a"),yn=f("Background"),En=g(),bn=d("p"),wn=f("Recently, I was bewildered by a React hydration warning:"),Tn=g(),In=d("pre"),Mn=g(),Hn=d("p"),Sn=f("To give you a sense of the situation, this is the component I was trying to rehydrate:"),Ln=g(),Rn=d("pre"),xn=g(),An=d("p"),Pn=f("Although React warned about the mismatch in the console, the hydrated app still worked fine."),Cn=g(),On=d("p"),Dn=f("So I can ignore it. 🙈"),$n=g(),jn=d("p"),Nn=f("Still, my curiosity made me dig deeper, to find out the reason behind it."),Bn=g(),Fn=d("section"),qn=d("h2"),_n=d("a"),Un=f("The investigation"),Wn=g(),zn=d("p"),Jn=f("So, the first thing I looked at, was the server-rendered HTML, which will be hydrated by React later."),Vn=g(),Gn=d("pre"),Kn=g(),Qn=d("p"),Yn=f("Looks pretty normal right?"),Zn=g(),Xn=d("p"),na=f("Somehow, my gut feeling telling me to look at the DOM with and without hydration next:"),aa=g(),ta=d("pre"),sa=g(),ea=d("pre"),oa=g(),ca=d("p"),pa=f("A-ha! Noticed the difference in the DOM?"),ra=g(),la=d("p"),ia=f("Although they both looked visually the same, but in the DOM created by the initial HTML has only 1 text node, "),ua=d("code"),ha=f('"Count: 0"'),da=f(", but the DOM after hydration has 2 text nodes, "),ka=d("code"),fa=f('"Count: "'),ga=f(" and "),ma=d("code"),va=f('"0"'),ya=f("."),Ea=g(),ba=d("p"),wa=f("Why is that so? The secret lies in the component "),Ta=d("code"),Ia=f("App"),Ma=f("."),Ha=g(),Sa=d("p"),La=f("The functional component "),Ra=d("code"),xa=f("App"),Aa=f(" returns the following React element when "),Pa=d("code"),Ca=f("count"),Oa=f(" is "),Da=d("code"),$a=f("0"),ja=f(":"),Na=g(),Ba=d("pre"),Fa=g(),qa=d("p"),_a=f("which itself is a plain JavaScript object, which is roughly:"),Ua=g(),Wa=d("pre"),za=g(),Ja=d("p"),Va=f("Noticed the "),Ga=d("code"),Ka=f("div"),Qa=f(" has 2 children? That's why it rendered 2 text nodes!"),Ya=g(),Za=d("p"),Xa=f("So, when React tries to hydrate the "),nt=d("code"),at=f("div"),tt=f(" from SSR, it starts with comparing all the props from the React element and the attributes from the DOM. Then, it compares the element's children."),st=g(),et=d("p"),ot=f("Based on the React element, React expects 2 text nodes, but the DOM only has 1. So it tries to match with the 1st text node, and create the 2nd one."),ct=g(),pt=d("p"),rt=f("It is when the matching happens, where React realizes that it is expecting the text node to contain "),lt=d("code"),it=f('"Count: "'),ut=f(", but the server content is "),ht=d("code"),dt=f('"Count: 0"'),kt=f(", thus the error message:"),ft=g(),gt=d("pre"),mt=g(),vt=d("p"),yt=f("Then, React patches the text node, by setting the content to the expected "),Et=d("code"),bt=f('"Count: "'),wt=f(", and created another text node, "),Tt=d("code"),It=f('"0"'),Mt=f(", so visually there's no change, but in the DOM, React has changed the text content and created a new text node."),Ht=g(),St=d("section"),Lt=d("h2"),Rt=d("a"),xt=f("Is this a bug?"),At=g(),Pt=d("p"),Ct=f("So, is this a React hydration bug? or is this an expected behavior?"),Ot=g(),Dt=d("p"),$t=f("Turns out that, it was my bug 🤮🤮."),jt=g(),Nt=d("p"),Bt=f("I used "),Ft=d("a"),qt=d("code"),_t=f("ReactDOMServer.renderToStaticMarkup"),Ut=f(" instead of "),Wt=d("a"),zt=d("code"),Jt=f("ReactDOMServer.renderToString"),Vt=f("."),Gt=g(),Kt=d("p"),Qt=f("The doc says clearly,"),Yt=g(),Zt=d("blockquote"),Xt=d("p"),ns=f("If you plan to use React on the client to make the markup interactive, do not use this method. Instead, use "),as=d("code"),ts=f("renderToString"),ss=f(" on the server and "),es=d("code"),os=f("ReactDOM.hydrate()"),cs=f(" on the client."),ps=g(),rs=d("p"),ls=f("🙈"),is=g(),us=d("p"),hs=f("So, what is the difference between "),ds=d("a"),ks=d("code"),fs=f("ReactDOMServer.renderToStaticMarkup"),gs=f(" and "),ms=d("a"),vs=d("code"),ys=f("ReactDOMServer.renderToString"),Es=f(" ?"),bs=g(),ws=d("p"),Ts=f("This is what "),Is=d("a"),Ms=d("code"),Hs=f("ReactDOMServer.renderToString"),Ss=f(" generates:"),Ls=g(),Rs=d("pre"),xs=g(),As=d("p"),Ps=f("It adds a "),Cs=d("code"),Os=f("data-reactroot"),Ds=f(" which is used by React internally. (From what I read from the code, it seemed to be used by React only to warn legacy code to "),$s=d("a"),js=f("switch from "),Ns=d("code"),Bs=f("render()"),Fs=f(" to "),qs=d("code"),_s=f("hydrate()"),Us=f(" before stopping support in React v17, correct me if I'm wrong)."),Ws=g(),zs=d("p"),Js=f("Besides, it adds a comment in between "),Vs=d("code"),Gs=f('"Count: "'),Ks=f(" and "),Qs=d("code"),Ys=f('"0"'),Zs=f(", so the initial DOM looks like this:"),Xs=g(),ne=d("pre"),ae=g(),te=d("p"),se=f("A "),ee=d("a"),oe=f("comment node"),ce=f(" sits in between 2 text nodes, nicely separate the boundary of the 2 text nodes."),pe=g(),re=d("p"),le=f("As you could expect, this time around, there's no more hydration error."),ie=g(),ue=d("p"),he=f("The initial DOM provided 2 text nodes as React would expect, and "),de=d("a"),ke=f("React would skip comment nodes and only hydrate element nodes and text nodes"),fe=f("."),ge=g(),me=d("section"),ve=d("h2"),ye=d("a"),Ee=f("Apply what I've learned"),be=g(),we=d("p"),Te=f("So, the next obvious place to apply what I've learned is "),Ie=d("a"),Me=f("Svelte"),He=f("."),Se=g(),Le=d("p"),Re=f("I found out there are 2 places that Svelte can use this technique for better hydration."),xe=g(),Ae=d("p"),Pe=f('The first is the hydrating text node. I found out that Svelte hydrates neighboring text nodes the same way as I described as "a bug", modifying the 1st text node and creating the 2nd text node. It gets "worse" when you have more neighboring text nodes:'),Ce=g(),Oe=d("pre"),De=g(),$e=d("p"),je=d("em"),Ne=f("5 neighboring text nodes"),Be=g(),Fe=d("p"),qe=f("The second place I found the technique is useful, is hydrating "),_e=d("a"),Ue=f("HTML tags ("),We=d("code"),ze=f("{@html string}"),Je=f(")"),Ve=f("."),Ge=g(),Ke=d("p"),Qe=f("HTML tags allows you to render arbitrary HTML into the DOM, just like React's "),Ye=d("a"),Ze=f("dangerouslySetInnerHTML"),Xe=f("."),no=g(),ao=d("pre"),to=g(),so=d("p"),eo=f("So, why is hydrating HTML tag hard?"),oo=g(),co=d("p"),po=f("HTML tag allow multiple elements to be passed in, which makes it hard to determine the bound of the HTML tag when hydrating."),ro=g(),lo=d("p"),io=f("Take this example:"),uo=g(),ho=d("pre"),ko=g(),fo=d("p"),go=f("The rendered HTML may look something like this:"),mo=g(),vo=d("pre"),yo=g(),Eo=d("p"),bo=f("Now, can you tell me which elements belong to "),wo=d("code"),To=f("<Header />"),Io=f(", "),Mo=d("code"),Ho=f("{@html string}"),So=f(" and "),Lo=d("code"),Ro=f("<Footer />"),xo=f("?"),Ao=g(),Po=d("p"),Co=f("Let's walk through it step by step."),Oo=g(),Do=d("p"),$o=f("Hydrating this component meant that we are going to claim components belong to "),jo=d("code"),No=f("<Header>"),Bo=f(", "),Fo=d("code"),qo=f("{@html string}"),_o=f(" then "),Uo=d("code"),Wo=f("<Footer>"),zo=f("."),Jo=g(),Vo=d("blockquote"),Go=d("p"),Ko=d("strong"),Qo=f("Claiming"),Yo=f(" in Svelte means marking the element as part of the component, and hydrate it by providing reactivity to the element."),Zo=g(),Xo=d("p"),nc=f("Claiming the "),ac=d("code"),tc=f("<Header />"),sc=f(" component, by itself, will claim away "),ec=d("code"),oc=f("<header>"),cc=f(" and "),pc=d("code"),rc=f("<nav>"),lc=f(", because in "),ic=d("code"),uc=f("Header.svelte"),hc=f(" contains these 2 elements:"),dc=g(),kc=d("pre"),fc=g(),gc=d("blockquote"),mc=d("p"),vc=f("You can learn about Svelte "),yc=d("code"),Ec=f("<slot>"),bc=g(),wc=d("a"),Tc=f("here"),Ic=g(),Mc=d("p"),Hc=f("Now claiming for "),Sc=d("code"),Lc=f("{@html string}"),Rc=f(" is tricky, because you have no idea when it ends and when is the start of the "),xc=d("code"),Ac=f("<Footer />"),Pc=f(" component"),Cc=g(),Oc=d("p"),Dc=f("If we put a comment as a marker for the end of the HTML tag, it would make things easier:"),$c=g(),jc=d("pre"),Nc=g(),Bc=d("pre"),Fc=g(),qc=d("section"),_c=d("h2"),Uc=d("a"),Wc=f("dangerouslySetInnerHtml"),zc=g(),Jc=d("p"),Vc=f("React has "),Gc=d("a"),Kc=f("dangerouslySetInnerHTML"),Qc=f(" right? Does it have the same issue?"),Yc=g(),Zc=d("p"),Xc=f("Apparently not. "),np=d("code"),ap=f("dangerouslySetInnerHTML"),tp=f(" is always used inside an HTML element, so the parent element is the boundary of the inner HTML content."),sp=g(),ep=d("pre"),op=g(),cp=d("pre"),pp=g(),rp=d("p"),lp=f("Unless "),ip=d("code"),up=f("dangerouslySetInnerHTML"),hp=f(" is supported on "),dp=d("code"),kp=f("React.Fragment"),fp=f(", then it would not be a problem."),gp=g(),mp=d("section"),vp=d("h2"),yp=d("a"),Ep=f("React Partial Hydration"),bp=g(),wp=d("p"),Tp=f("Partial hydration in React is a mechanism to partially hydrate a server-rendered result while other parts of the pages are still loading the code or data."),Ip=g(),Mp=d("p"),Hp=f("This is helpful when you are hydrating a "),Sp=d("a"),Lp=d("code"),Rp=f("<Suspense>"),xp=f(" component"),Ap=f(". The server-rendered HTML may have rendered based on the code or data, which is yet to be fetched by the component. If React now shows the fallback content during the hydration, the user may see a flash of the actual content, before turning into a loading state until the code or data is ready."),Pp=g(),Cp=d("p"),Op=f("Partial hydration allows React to not hydrate those "),Dp=d("code"),$p=f("<Suspense />"),jp=f(" component until the code or data is ready."),Np=g(),Bp=d("p"),Fp=f("So, how does React knows the boundary of "),qp=d("code"),_p=f("<Suspense />"),Up=f(" from the server-rendered HTML which it could safely skip, before hydrating them when it's ready?"),Wp=g(),zp=d("p"),Jp=f("It's "),Vp=d("a"),Gp=f("the marker comment"),Kp=f(" to the rescue again!"),Qp=g(),Yp=d("blockquote"),Zp=d("p"),Xp=d("strong"),nr=f("Disclaimer"),ar=f("\nThe section above is entirely based on my understanding by reading the "),tr=d("a"),sr=f("Partial Hydration PR"),er=f(", please feel free to correct me if I'm wrong."),or=g(),cr=d("section"),pr=d("h2"),rr=d("a"),lr=f("References"),ir=g(),ur=d("ul"),hr=d("li"),dr=f("Some interesting React commits and PRs that serves as a good entry point to understand hydration:"),kr=d("ul"),fr=d("li"),gr=d("a"),mr=f("Remove most comments from HTML generation output"),vr=g(),yr=d("li"),Er=d("a"),br=f("Warn When The HTML Mismatches in DEV"),wr=g(),Tr=d("li"),Ir=d("a"),Mr=f("Partial Hydration PR"),Hr=g(),Sr=d("li"),Lr=f("Some related Svelte PRs"),Rr=d("ul"),xr=d("li"),Ar=d("a"),Pr=f("Use SSR rendered as initial html for runtime hydration test"),this.h()},l(n){t=E(n,"SECTION",{});var a=y(t);s=E(a,"UL",{class:!0,id:!0,role:!0,"aria-label":!0});var l=y(s);e=E(l,"LI",{});var i=y(e);o=E(i,"A",{href:!0});var d=y(o);c=b(d,"Disclaimer"),d.forEach(u),i.forEach(u),p=E(l,"LI",{});var f=y(p);r=E(f,"A",{href:!0});var g=y(r);h=b(g,"Background"),g.forEach(u),f.forEach(u),k=E(l,"LI",{});var v=y(k);m=E(v,"A",{href:!0});var Cr=y(m);T=b(Cr,"The investigation"),Cr.forEach(u),v.forEach(u),I=E(l,"LI",{});var Or=y(I);M=E(Or,"A",{href:!0});var Dr=y(M);H=b(Dr,"Is this a bug?"),Dr.forEach(u),Or.forEach(u),S=E(l,"LI",{});var $r=y(S);L=E($r,"A",{href:!0});var jr=y(L);R=b(jr,"Apply what I've learned"),jr.forEach(u),$r.forEach(u),x=E(l,"LI",{});var Nr=y(x);A=E(Nr,"A",{href:!0});var Br=y(A);P=b(Br,"dangerouslySetInnerHtml"),Br.forEach(u),Nr.forEach(u),C=E(l,"LI",{});var Fr=y(C);O=E(Fr,"A",{href:!0});var qr=y(O);D=b(qr,"React Partial Hydration"),qr.forEach(u),Fr.forEach(u),$=E(l,"LI",{});var _r=y($);j=E(_r,"A",{href:!0});var Ur=y(j);N=b(Ur,"References"),Ur.forEach(u),_r.forEach(u),l.forEach(u),a.forEach(u),B=w(n),F=E(n,"SECTION",{});var Wr=y(F);q=E(Wr,"H2",{});var zr=y(q);_=E(zr,"A",{href:!0,id:!0});var Jr=y(_);U=b(Jr,"Disclaimer"),Jr.forEach(u),zr.forEach(u),W=w(Wr),z=E(Wr,"P",{});var Vr=y(z);J=b(Vr,"I am not going to talk about what is hydration, to know more about client-side rendering, server-side rendering and hydration, please "),V=E(Vr,"A",{href:!0,rel:!0});var Gr=y(V);G=b(Gr,"read this amazing article"),Gr.forEach(u),K=b(Vr," by "),Q=E(Vr,"A",{href:!0,rel:!0});var Kr=y(Q);Y=b(Kr,"Jason Miller"),Kr.forEach(u),Z=b(Vr," and "),X=E(Vr,"A",{href:!0,rel:!0});var Qr=y(X);nn=b(Qr,"Addy Osmani"),Qr.forEach(u),an=b(Vr,"."),Vr.forEach(u),tn=w(Wr),sn=E(Wr,"P",{});var Yr=y(sn);en=b(Yr,"I am not going to share about how to do rehydration in React as well, you can read about that from "),on=E(Yr,"A",{href:!0,rel:!0});var Zr=y(on);cn=b(Zr,"here"),Zr.forEach(u),pn=b(Yr," and "),rn=E(Yr,"A",{href:!0,rel:!0});var Xr=y(rn);ln=b(Xr,"here"),Xr.forEach(u),un=b(Yr,"."),Yr.forEach(u),hn=w(Wr),dn=E(Wr,"P",{});var nl=y(dn);kn=b(nl,'I am going to share a story, how I "understand" more about the mechanics of rehydration in React, and how I apply it in real life.'),nl.forEach(u),Wr.forEach(u),fn=w(n),gn=E(n,"SECTION",{});var al=y(gn);mn=E(al,"H2",{});var tl=y(mn);vn=E(tl,"A",{href:!0,id:!0});var sl=y(vn);yn=b(sl,"Background"),sl.forEach(u),tl.forEach(u),En=w(al),bn=E(al,"P",{});var el=y(bn);wn=b(el,"Recently, I was bewildered by a React hydration warning:"),el.forEach(u),Tn=w(al),In=E(al,"PRE",{class:!0}),y(In).forEach(u),Mn=w(al),Hn=E(al,"P",{});var ol=y(Hn);Sn=b(ol,"To give you a sense of the situation, this is the component I was trying to rehydrate:"),ol.forEach(u),Ln=w(al),Rn=E(al,"PRE",{class:!0}),y(Rn).forEach(u),xn=w(al),An=E(al,"P",{});var cl=y(An);Pn=b(cl,"Although React warned about the mismatch in the console, the hydrated app still worked fine."),cl.forEach(u),Cn=w(al),On=E(al,"P",{});var pl=y(On);Dn=b(pl,"So I can ignore it. 🙈"),pl.forEach(u),$n=w(al),jn=E(al,"P",{});var rl=y(jn);Nn=b(rl,"Still, my curiosity made me dig deeper, to find out the reason behind it."),rl.forEach(u),al.forEach(u),Bn=w(n),Fn=E(n,"SECTION",{});var ll=y(Fn);qn=E(ll,"H2",{});var il=y(qn);_n=E(il,"A",{href:!0,id:!0});var ul=y(_n);Un=b(ul,"The investigation"),ul.forEach(u),il.forEach(u),Wn=w(ll),zn=E(ll,"P",{});var hl=y(zn);Jn=b(hl,"So, the first thing I looked at, was the server-rendered HTML, which will be hydrated by React later."),hl.forEach(u),Vn=w(ll),Gn=E(ll,"PRE",{class:!0}),y(Gn).forEach(u),Kn=w(ll),Qn=E(ll,"P",{});var dl=y(Qn);Yn=b(dl,"Looks pretty normal right?"),dl.forEach(u),Zn=w(ll),Xn=E(ll,"P",{});var kl=y(Xn);na=b(kl,"Somehow, my gut feeling telling me to look at the DOM with and without hydration next:"),kl.forEach(u),aa=w(ll),ta=E(ll,"PRE",{class:!0}),y(ta).forEach(u),sa=w(ll),ea=E(ll,"PRE",{class:!0}),y(ea).forEach(u),oa=w(ll),ca=E(ll,"P",{});var fl=y(ca);pa=b(fl,"A-ha! Noticed the difference in the DOM?"),fl.forEach(u),ra=w(ll),la=E(ll,"P",{});var gl=y(la);ia=b(gl,"Although they both looked visually the same, but in the DOM created by the initial HTML has only 1 text node, "),ua=E(gl,"CODE",{});var ml=y(ua);ha=b(ml,'"Count: 0"'),ml.forEach(u),da=b(gl,", but the DOM after hydration has 2 text nodes, "),ka=E(gl,"CODE",{});var vl=y(ka);fa=b(vl,'"Count: "'),vl.forEach(u),ga=b(gl," and "),ma=E(gl,"CODE",{});var yl=y(ma);va=b(yl,'"0"'),yl.forEach(u),ya=b(gl,"."),gl.forEach(u),Ea=w(ll),ba=E(ll,"P",{});var El=y(ba);wa=b(El,"Why is that so? The secret lies in the component "),Ta=E(El,"CODE",{});var bl=y(Ta);Ia=b(bl,"App"),bl.forEach(u),Ma=b(El,"."),El.forEach(u),Ha=w(ll),Sa=E(ll,"P",{});var wl=y(Sa);La=b(wl,"The functional component "),Ra=E(wl,"CODE",{});var Tl=y(Ra);xa=b(Tl,"App"),Tl.forEach(u),Aa=b(wl," returns the following React element when "),Pa=E(wl,"CODE",{});var Il=y(Pa);Ca=b(Il,"count"),Il.forEach(u),Oa=b(wl," is "),Da=E(wl,"CODE",{});var Ml=y(Da);$a=b(Ml,"0"),Ml.forEach(u),ja=b(wl,":"),wl.forEach(u),Na=w(ll),Ba=E(ll,"PRE",{class:!0}),y(Ba).forEach(u),Fa=w(ll),qa=E(ll,"P",{});var Hl=y(qa);_a=b(Hl,"which itself is a plain JavaScript object, which is roughly:"),Hl.forEach(u),Ua=w(ll),Wa=E(ll,"PRE",{class:!0}),y(Wa).forEach(u),za=w(ll),Ja=E(ll,"P",{});var Sl=y(Ja);Va=b(Sl,"Noticed the "),Ga=E(Sl,"CODE",{});var Ll=y(Ga);Ka=b(Ll,"div"),Ll.forEach(u),Qa=b(Sl," has 2 children? That's why it rendered 2 text nodes!"),Sl.forEach(u),Ya=w(ll),Za=E(ll,"P",{});var Rl=y(Za);Xa=b(Rl,"So, when React tries to hydrate the "),nt=E(Rl,"CODE",{});var xl=y(nt);at=b(xl,"div"),xl.forEach(u),tt=b(Rl," from SSR, it starts with comparing all the props from the React element and the attributes from the DOM. Then, it compares the element's children."),Rl.forEach(u),st=w(ll),et=E(ll,"P",{});var Al=y(et);ot=b(Al,"Based on the React element, React expects 2 text nodes, but the DOM only has 1. So it tries to match with the 1st text node, and create the 2nd one."),Al.forEach(u),ct=w(ll),pt=E(ll,"P",{});var Pl=y(pt);rt=b(Pl,"It is when the matching happens, where React realizes that it is expecting the text node to contain "),lt=E(Pl,"CODE",{});var Cl=y(lt);it=b(Cl,'"Count: "'),Cl.forEach(u),ut=b(Pl,", but the server content is "),ht=E(Pl,"CODE",{});var Ol=y(ht);dt=b(Ol,'"Count: 0"'),Ol.forEach(u),kt=b(Pl,", thus the error message:"),Pl.forEach(u),ft=w(ll),gt=E(ll,"PRE",{class:!0}),y(gt).forEach(u),mt=w(ll),vt=E(ll,"P",{});var Dl=y(vt);yt=b(Dl,"Then, React patches the text node, by setting the content to the expected "),Et=E(Dl,"CODE",{});var $l=y(Et);bt=b($l,'"Count: "'),$l.forEach(u),wt=b(Dl,", and created another text node, "),Tt=E(Dl,"CODE",{});var jl=y(Tt);It=b(jl,'"0"'),jl.forEach(u),Mt=b(Dl,", so visually there's no change, but in the DOM, React has changed the text content and created a new text node."),Dl.forEach(u),ll.forEach(u),Ht=w(n),St=E(n,"SECTION",{});var Nl=y(St);Lt=E(Nl,"H2",{});var Bl=y(Lt);Rt=E(Bl,"A",{href:!0,id:!0});var Fl=y(Rt);xt=b(Fl,"Is this a bug?"),Fl.forEach(u),Bl.forEach(u),At=w(Nl),Pt=E(Nl,"P",{});var ql=y(Pt);Ct=b(ql,"So, is this a React hydration bug? or is this an expected behavior?"),ql.forEach(u),Ot=w(Nl),Dt=E(Nl,"P",{});var _l=y(Dt);$t=b(_l,"Turns out that, it was my bug 🤮🤮."),_l.forEach(u),jt=w(Nl),Nt=E(Nl,"P",{});var Ul=y(Nt);Bt=b(Ul,"I used "),Ft=E(Ul,"A",{href:!0,rel:!0});var Wl=y(Ft);qt=E(Wl,"CODE",{});var zl=y(qt);_t=b(zl,"ReactDOMServer.renderToStaticMarkup"),zl.forEach(u),Wl.forEach(u),Ut=b(Ul," instead of "),Wt=E(Ul,"A",{href:!0,rel:!0});var Jl=y(Wt);zt=E(Jl,"CODE",{});var Vl=y(zt);Jt=b(Vl,"ReactDOMServer.renderToString"),Vl.forEach(u),Jl.forEach(u),Vt=b(Ul,"."),Ul.forEach(u),Gt=w(Nl),Kt=E(Nl,"P",{});var Gl=y(Kt);Qt=b(Gl,"The doc says clearly,"),Gl.forEach(u),Yt=w(Nl),Zt=E(Nl,"BLOCKQUOTE",{});var Kl=y(Zt);Xt=E(Kl,"P",{});var Ql=y(Xt);ns=b(Ql,"If you plan to use React on the client to make the markup interactive, do not use this method. Instead, use "),as=E(Ql,"CODE",{});var Yl=y(as);ts=b(Yl,"renderToString"),Yl.forEach(u),ss=b(Ql," on the server and "),es=E(Ql,"CODE",{});var Zl=y(es);os=b(Zl,"ReactDOM.hydrate()"),Zl.forEach(u),cs=b(Ql," on the client."),Ql.forEach(u),Kl.forEach(u),ps=w(Nl),rs=E(Nl,"P",{});var Xl=y(rs);ls=b(Xl,"🙈"),Xl.forEach(u),is=w(Nl),us=E(Nl,"P",{});var ni=y(us);hs=b(ni,"So, what is the difference between "),ds=E(ni,"A",{href:!0,rel:!0});var ai=y(ds);ks=E(ai,"CODE",{});var ti=y(ks);fs=b(ti,"ReactDOMServer.renderToStaticMarkup"),ti.forEach(u),ai.forEach(u),gs=b(ni," and "),ms=E(ni,"A",{href:!0,rel:!0});var si=y(ms);vs=E(si,"CODE",{});var ei=y(vs);ys=b(ei,"ReactDOMServer.renderToString"),ei.forEach(u),si.forEach(u),Es=b(ni," ?"),ni.forEach(u),bs=w(Nl),ws=E(Nl,"P",{});var oi=y(ws);Ts=b(oi,"This is what "),Is=E(oi,"A",{href:!0,rel:!0});var ci=y(Is);Ms=E(ci,"CODE",{});var pi=y(Ms);Hs=b(pi,"ReactDOMServer.renderToString"),pi.forEach(u),ci.forEach(u),Ss=b(oi," generates:"),oi.forEach(u),Ls=w(Nl),Rs=E(Nl,"PRE",{class:!0}),y(Rs).forEach(u),xs=w(Nl),As=E(Nl,"P",{});var ri=y(As);Ps=b(ri,"It adds a "),Cs=E(ri,"CODE",{});var li=y(Cs);Os=b(li,"data-reactroot"),li.forEach(u),Ds=b(ri," which is used by React internally. (From what I read from the code, it seemed to be used by React only to warn legacy code to "),$s=E(ri,"A",{href:!0,rel:!0});var ii=y($s);js=b(ii,"switch from "),Ns=E(ii,"CODE",{});var ui=y(Ns);Bs=b(ui,"render()"),ui.forEach(u),Fs=b(ii," to "),qs=E(ii,"CODE",{});var hi=y(qs);_s=b(hi,"hydrate()"),hi.forEach(u),ii.forEach(u),Us=b(ri," before stopping support in React v17, correct me if I'm wrong)."),ri.forEach(u),Ws=w(Nl),zs=E(Nl,"P",{});var di=y(zs);Js=b(di,"Besides, it adds a comment in between "),Vs=E(di,"CODE",{});var ki=y(Vs);Gs=b(ki,'"Count: "'),ki.forEach(u),Ks=b(di," and "),Qs=E(di,"CODE",{});var fi=y(Qs);Ys=b(fi,'"0"'),fi.forEach(u),Zs=b(di,", so the initial DOM looks like this:"),di.forEach(u),Xs=w(Nl),ne=E(Nl,"PRE",{class:!0}),y(ne).forEach(u),ae=w(Nl),te=E(Nl,"P",{});var gi=y(te);se=b(gi,"A "),ee=E(gi,"A",{href:!0,rel:!0});var mi=y(ee);oe=b(mi,"comment node"),mi.forEach(u),ce=b(gi," sits in between 2 text nodes, nicely separate the boundary of the 2 text nodes."),gi.forEach(u),pe=w(Nl),re=E(Nl,"P",{});var vi=y(re);le=b(vi,"As you could expect, this time around, there's no more hydration error."),vi.forEach(u),ie=w(Nl),ue=E(Nl,"P",{});var yi=y(ue);he=b(yi,"The initial DOM provided 2 text nodes as React would expect, and "),de=E(yi,"A",{href:!0,rel:!0});var Ei=y(de);ke=b(Ei,"React would skip comment nodes and only hydrate element nodes and text nodes"),Ei.forEach(u),fe=b(yi,"."),yi.forEach(u),Nl.forEach(u),ge=w(n),me=E(n,"SECTION",{});var bi=y(me);ve=E(bi,"H2",{});var wi=y(ve);ye=E(wi,"A",{href:!0,id:!0});var Ti=y(ye);Ee=b(Ti,"Apply what I've learned"),Ti.forEach(u),wi.forEach(u),be=w(bi),we=E(bi,"P",{});var Ii=y(we);Te=b(Ii,"So, the next obvious place to apply what I've learned is "),Ie=E(Ii,"A",{href:!0,rel:!0});var Mi=y(Ie);Me=b(Mi,"Svelte"),Mi.forEach(u),He=b(Ii,"."),Ii.forEach(u),Se=w(bi),Le=E(bi,"P",{});var Hi=y(Le);Re=b(Hi,"I found out there are 2 places that Svelte can use this technique for better hydration."),Hi.forEach(u),xe=w(bi),Ae=E(bi,"P",{});var Si=y(Ae);Pe=b(Si,'The first is the hydrating text node. I found out that Svelte hydrates neighboring text nodes the same way as I described as "a bug", modifying the 1st text node and creating the 2nd text node. It gets "worse" when you have more neighboring text nodes:'),Si.forEach(u),Ce=w(bi),Oe=E(bi,"PRE",{class:!0}),y(Oe).forEach(u),De=w(bi),$e=E(bi,"P",{});var Li=y($e);je=E(Li,"EM",{});var Ri=y(je);Ne=b(Ri,"5 neighboring text nodes"),Ri.forEach(u),Li.forEach(u),Be=w(bi),Fe=E(bi,"P",{});var xi=y(Fe);qe=b(xi,"The second place I found the technique is useful, is hydrating "),_e=E(xi,"A",{href:!0,rel:!0});var Ai=y(_e);Ue=b(Ai,"HTML tags ("),We=E(Ai,"CODE",{});var Pi=y(We);ze=b(Pi,"{@html string}"),Pi.forEach(u),Je=b(Ai,")"),Ai.forEach(u),Ve=b(xi,"."),xi.forEach(u),Ge=w(bi),Ke=E(bi,"P",{});var Ci=y(Ke);Qe=b(Ci,"HTML tags allows you to render arbitrary HTML into the DOM, just like React's "),Ye=E(Ci,"A",{href:!0,rel:!0});var Oi=y(Ye);Ze=b(Oi,"dangerouslySetInnerHTML"),Oi.forEach(u),Xe=b(Ci,"."),Ci.forEach(u),no=w(bi),ao=E(bi,"PRE",{class:!0}),y(ao).forEach(u),to=w(bi),so=E(bi,"P",{});var Di=y(so);eo=b(Di,"So, why is hydrating HTML tag hard?"),Di.forEach(u),oo=w(bi),co=E(bi,"P",{});var $i=y(co);po=b($i,"HTML tag allow multiple elements to be passed in, which makes it hard to determine the bound of the HTML tag when hydrating."),$i.forEach(u),ro=w(bi),lo=E(bi,"P",{});var ji=y(lo);io=b(ji,"Take this example:"),ji.forEach(u),uo=w(bi),ho=E(bi,"PRE",{class:!0}),y(ho).forEach(u),ko=w(bi),fo=E(bi,"P",{});var Ni=y(fo);go=b(Ni,"The rendered HTML may look something like this:"),Ni.forEach(u),mo=w(bi),vo=E(bi,"PRE",{class:!0}),y(vo).forEach(u),yo=w(bi),Eo=E(bi,"P",{});var Bi=y(Eo);bo=b(Bi,"Now, can you tell me which elements belong to "),wo=E(Bi,"CODE",{});var Fi=y(wo);To=b(Fi,"<Header />"),Fi.forEach(u),Io=b(Bi,", "),Mo=E(Bi,"CODE",{});var qi=y(Mo);Ho=b(qi,"{@html string}"),qi.forEach(u),So=b(Bi," and "),Lo=E(Bi,"CODE",{});var _i=y(Lo);Ro=b(_i,"<Footer />"),_i.forEach(u),xo=b(Bi,"?"),Bi.forEach(u),Ao=w(bi),Po=E(bi,"P",{});var Ui=y(Po);Co=b(Ui,"Let's walk through it step by step."),Ui.forEach(u),Oo=w(bi),Do=E(bi,"P",{});var Wi=y(Do);$o=b(Wi,"Hydrating this component meant that we are going to claim components belong to "),jo=E(Wi,"CODE",{});var zi=y(jo);No=b(zi,"<Header>"),zi.forEach(u),Bo=b(Wi,", "),Fo=E(Wi,"CODE",{});var Ji=y(Fo);qo=b(Ji,"{@html string}"),Ji.forEach(u),_o=b(Wi," then "),Uo=E(Wi,"CODE",{});var Vi=y(Uo);Wo=b(Vi,"<Footer>"),Vi.forEach(u),zo=b(Wi,"."),Wi.forEach(u),Jo=w(bi),Vo=E(bi,"BLOCKQUOTE",{});var Gi=y(Vo);Go=E(Gi,"P",{});var Ki=y(Go);Ko=E(Ki,"STRONG",{});var Qi=y(Ko);Qo=b(Qi,"Claiming"),Qi.forEach(u),Yo=b(Ki," in Svelte means marking the element as part of the component, and hydrate it by providing reactivity to the element."),Ki.forEach(u),Gi.forEach(u),Zo=w(bi),Xo=E(bi,"P",{});var Yi=y(Xo);nc=b(Yi,"Claiming the "),ac=E(Yi,"CODE",{});var Zi=y(ac);tc=b(Zi,"<Header />"),Zi.forEach(u),sc=b(Yi," component, by itself, will claim away "),ec=E(Yi,"CODE",{});var Xi=y(ec);oc=b(Xi,"<header>"),Xi.forEach(u),cc=b(Yi," and "),pc=E(Yi,"CODE",{});var nu=y(pc);rc=b(nu,"<nav>"),nu.forEach(u),lc=b(Yi,", because in "),ic=E(Yi,"CODE",{});var au=y(ic);uc=b(au,"Header.svelte"),au.forEach(u),hc=b(Yi," contains these 2 elements:"),Yi.forEach(u),dc=w(bi),kc=E(bi,"PRE",{class:!0}),y(kc).forEach(u),fc=w(bi),gc=E(bi,"BLOCKQUOTE",{});var tu=y(gc);mc=E(tu,"P",{});var su=y(mc);vc=b(su,"You can learn about Svelte "),yc=E(su,"CODE",{});var eu=y(yc);Ec=b(eu,"<slot>"),eu.forEach(u),bc=w(su),wc=E(su,"A",{href:!0,rel:!0});var ou=y(wc);Tc=b(ou,"here"),ou.forEach(u),su.forEach(u),tu.forEach(u),Ic=w(bi),Mc=E(bi,"P",{});var cu=y(Mc);Hc=b(cu,"Now claiming for "),Sc=E(cu,"CODE",{});var pu=y(Sc);Lc=b(pu,"{@html string}"),pu.forEach(u),Rc=b(cu," is tricky, because you have no idea when it ends and when is the start of the "),xc=E(cu,"CODE",{});var ru=y(xc);Ac=b(ru,"<Footer />"),ru.forEach(u),Pc=b(cu," component"),cu.forEach(u),Cc=w(bi),Oc=E(bi,"P",{});var lu=y(Oc);Dc=b(lu,"If we put a comment as a marker for the end of the HTML tag, it would make things easier:"),lu.forEach(u),$c=w(bi),jc=E(bi,"PRE",{class:!0}),y(jc).forEach(u),Nc=w(bi),Bc=E(bi,"PRE",{class:!0}),y(Bc).forEach(u),bi.forEach(u),Fc=w(n),qc=E(n,"SECTION",{});var iu=y(qc);_c=E(iu,"H2",{});var uu=y(_c);Uc=E(uu,"A",{href:!0,id:!0});var hu=y(Uc);Wc=b(hu,"dangerouslySetInnerHtml"),hu.forEach(u),uu.forEach(u),zc=w(iu),Jc=E(iu,"P",{});var du=y(Jc);Vc=b(du,"React has "),Gc=E(du,"A",{href:!0,rel:!0});var ku=y(Gc);Kc=b(ku,"dangerouslySetInnerHTML"),ku.forEach(u),Qc=b(du," right? Does it have the same issue?"),du.forEach(u),Yc=w(iu),Zc=E(iu,"P",{});var fu=y(Zc);Xc=b(fu,"Apparently not. "),np=E(fu,"CODE",{});var gu=y(np);ap=b(gu,"dangerouslySetInnerHTML"),gu.forEach(u),tp=b(fu," is always used inside an HTML element, so the parent element is the boundary of the inner HTML content."),fu.forEach(u),sp=w(iu),ep=E(iu,"PRE",{class:!0}),y(ep).forEach(u),op=w(iu),cp=E(iu,"PRE",{class:!0}),y(cp).forEach(u),pp=w(iu),rp=E(iu,"P",{});var mu=y(rp);lp=b(mu,"Unless "),ip=E(mu,"CODE",{});var vu=y(ip);up=b(vu,"dangerouslySetInnerHTML"),vu.forEach(u),hp=b(mu," is supported on "),dp=E(mu,"CODE",{});var yu=y(dp);kp=b(yu,"React.Fragment"),yu.forEach(u),fp=b(mu,", then it would not be a problem."),mu.forEach(u),iu.forEach(u),gp=w(n),mp=E(n,"SECTION",{});var Eu=y(mp);vp=E(Eu,"H2",{});var bu=y(vp);yp=E(bu,"A",{href:!0,id:!0});var wu=y(yp);Ep=b(wu,"React Partial Hydration"),wu.forEach(u),bu.forEach(u),bp=w(Eu),wp=E(Eu,"P",{});var Tu=y(wp);Tp=b(Tu,"Partial hydration in React is a mechanism to partially hydrate a server-rendered result while other parts of the pages are still loading the code or data."),Tu.forEach(u),Ip=w(Eu),Mp=E(Eu,"P",{});var Iu=y(Mp);Hp=b(Iu,"This is helpful when you are hydrating a "),Sp=E(Iu,"A",{href:!0,rel:!0});var Mu=y(Sp);Lp=E(Mu,"CODE",{});var Hu=y(Lp);Rp=b(Hu,"<Suspense>"),Hu.forEach(u),xp=b(Mu," component"),Mu.forEach(u),Ap=b(Iu,". The server-rendered HTML may have rendered based on the code or data, which is yet to be fetched by the component. If React now shows the fallback content during the hydration, the user may see a flash of the actual content, before turning into a loading state until the code or data is ready."),Iu.forEach(u),Pp=w(Eu),Cp=E(Eu,"P",{});var Su=y(Cp);Op=b(Su,"Partial hydration allows React to not hydrate those "),Dp=E(Su,"CODE",{});var Lu=y(Dp);$p=b(Lu,"<Suspense />"),Lu.forEach(u),jp=b(Su," component until the code or data is ready."),Su.forEach(u),Np=w(Eu),Bp=E(Eu,"P",{});var Ru=y(Bp);Fp=b(Ru,"So, how does React knows the boundary of "),qp=E(Ru,"CODE",{});var xu=y(qp);_p=b(xu,"<Suspense />"),xu.forEach(u),Up=b(Ru," from the server-rendered HTML which it could safely skip, before hydrating them when it's ready?"),Ru.forEach(u),Wp=w(Eu),zp=E(Eu,"P",{});var Au=y(zp);Jp=b(Au,"It's "),Vp=E(Au,"A",{href:!0,rel:!0});var Pu=y(Vp);Gp=b(Pu,"the marker comment"),Pu.forEach(u),Kp=b(Au," to the rescue again!"),Au.forEach(u),Qp=w(Eu),Yp=E(Eu,"BLOCKQUOTE",{});var Cu=y(Yp);Zp=E(Cu,"P",{});var Ou=y(Zp);Xp=E(Ou,"STRONG",{});var Du=y(Xp);nr=b(Du,"Disclaimer"),Du.forEach(u),ar=b(Ou,"\nThe section above is entirely based on my understanding by reading the "),tr=E(Ou,"A",{href:!0,rel:!0});var $u=y(tr);sr=b($u,"Partial Hydration PR"),$u.forEach(u),er=b(Ou,", please feel free to correct me if I'm wrong."),Ou.forEach(u),Cu.forEach(u),Eu.forEach(u),or=w(n),cr=E(n,"SECTION",{});var ju=y(cr);pr=E(ju,"H2",{});var Nu=y(pr);rr=E(Nu,"A",{href:!0,id:!0});var Bu=y(rr);lr=b(Bu,"References"),Bu.forEach(u),Nu.forEach(u),ir=w(ju),ur=E(ju,"UL",{});var Fu=y(ur);hr=E(Fu,"LI",{});var qu=y(hr);dr=b(qu,"Some interesting React commits and PRs that serves as a good entry point to understand hydration:"),kr=E(qu,"UL",{});var _u=y(kr);fr=E(_u,"LI",{});var Uu=y(fr);gr=E(Uu,"A",{href:!0,rel:!0});var Wu=y(gr);mr=b(Wu,"Remove most comments from HTML generation output"),Wu.forEach(u),Uu.forEach(u),vr=w(_u),yr=E(_u,"LI",{});var zu=y(yr);Er=E(zu,"A",{href:!0,rel:!0});var Ju=y(Er);br=b(Ju,"Warn When The HTML Mismatches in DEV"),Ju.forEach(u),zu.forEach(u),wr=w(_u),Tr=E(_u,"LI",{});var Vu=y(Tr);Ir=E(Vu,"A",{href:!0,rel:!0});var Gu=y(Ir);Mr=b(Gu,"Partial Hydration PR"),Gu.forEach(u),Vu.forEach(u),_u.forEach(u),qu.forEach(u),Hr=w(Fu),Sr=E(Fu,"LI",{});var Ku=y(Sr);Lr=b(Ku,"Some related Svelte PRs"),Rr=E(Ku,"UL",{});var Qu=y(Rr);xr=E(Qu,"LI",{});var Yu=y(xr);Ar=E(Yu,"A",{href:!0,rel:!0});var Zu=y(Ar);Pr=b(Zu,"Use SSR rendered as initial html for runtime hydration test"),Zu.forEach(u),Yu.forEach(u),Qu.forEach(u),Ku.forEach(u),Fu.forEach(u),ju.forEach(u),this.h()},h(){v(o,"href","#disclaimer"),v(r,"href","#background"),v(m,"href","#the-investigation"),v(M,"href","#is-this-a-bug"),v(L,"href","#apply-what-i-ve-learned"),v(A,"href","#dangerouslysetinnerhtml"),v(O,"href","#react-partial-hydration"),v(j,"href","#references"),v(s,"class","sitemap"),v(s,"id","sitemap"),v(s,"role","navigation"),v(s,"aria-label","Table of Contents"),v(_,"href","#disclaimer"),v(_,"id","disclaimer"),v(V,"href","https://developers.google.com/web/updates/2019/02/rendering-on-the-web"),v(V,"rel","nofollow"),v(Q,"href","https://twitter.com/_developit"),v(Q,"rel","nofollow"),v(X,"href","https://twitter.com/addyosmani"),v(X,"rel","nofollow"),v(on,"href","https://hackernoon.com/whats-new-with-server-side-rendering-in-react-16-9b0d78585d67"),v(on,"rel","nofollow"),v(rn,"href","https://www.freecodecamp.org/news/demystifying-reacts-server-side-render-de335d408fe4/"),v(rn,"rel","nofollow"),v(vn,"href","#background"),v(vn,"id","background"),v(In,"class","language-null"),v(Rn,"class","language-js"),v(_n,"href","#the-investigation"),v(_n,"id","the-investigation"),v(Gn,"class","language-html"),v(ta,"class","language-html"),v(ea,"class","language-html"),v(Ba,"class","language-jsx"),v(Wa,"class","language-js"),v(gt,"class","language-null"),v(Rt,"href","#is-this-a-bug"),v(Rt,"id","is-this-a-bug"),v(Ft,"href","https://reactjs.org/docs/react-dom-server.html#rendertostaticmarkup"),v(Ft,"rel","nofollow"),v(Wt,"href","https://reactjs.org/docs/react-dom-server.html#rendertostring"),v(Wt,"rel","nofollow"),v(ds,"href","https://reactjs.org/docs/react-dom-server.html#rendertostaticmarkup"),v(ds,"rel","nofollow"),v(ms,"href","https://reactjs.org/docs/react-dom-server.html#rendertostring"),v(ms,"rel","nofollow"),v(Is,"href","https://reactjs.org/docs/react-dom-server.html#rendertostring"),v(Is,"rel","nofollow"),v(Rs,"class","language-diff"),v($s,"href","https://hackernoon.com/whats-new-with-server-side-rendering-in-react-16-9b0d78585d67"),v($s,"rel","nofollow"),v(ne,"class","language-html"),v(ee,"href","https://developer.mozilla.org/en-US/docs/Web/API/Comment"),v(ee,"rel","nofollow"),v(de,"href","https://github.com/facebook/react/blob/1a6d8179b6dd427fdf7ee50d5ac45ae5a40979eb/packages/react-dom/src/client/ReactDOMHostConfig.js#L703-L709"),v(de,"rel","nofollow"),v(ye,"href","#apply-what-i-ve-learned"),v(ye,"id","apply-what-i-ve-learned"),v(Ie,"href","http://github.com/sveltejs/svelte"),v(Ie,"rel","nofollow"),v(Oe,"class","language-html"),v(_e,"href","https://svelte.dev/tutorial/html-tags"),v(_e,"rel","nofollow"),v(Ye,"href","https://reactjs.org/docs/dom-elements.html#dangerouslysetinnerhtml"),v(Ye,"rel","nofollow"),v(ao,"class","language-html"),v(ho,"class","language-html"),v(vo,"class","language-html"),v(kc,"class","language-html"),v(wc,"href","https://svelte.dev/tutorial/slots"),v(wc,"rel","nofollow"),v(jc,"class","language-html"),v(Bc,"class","language-js"),v(Uc,"href","#dangerouslysetinnerhtml"),v(Uc,"id","dangerouslysetinnerhtml"),v(Gc,"href","https://reactjs.org/docs/dom-elements.html#dangerouslysetinnerhtml"),v(Gc,"rel","nofollow"),v(ep,"class","language-js"),v(cp,"class","language-html"),v(yp,"href","#react-partial-hydration"),v(yp,"id","react-partial-hydration"),v(Sp,"href","https://reactjs.org/docs/react-api.html#reactsuspense"),v(Sp,"rel","nofollow"),v(Vp,"href","https://github.com/facebook/react/blob/1a6d8179b6dd427fdf7ee50d5ac45ae5a40979eb/packages/react-dom/src/client/ReactDOMHostConfig.js#L131-L134"),v(Vp,"rel","nofollow"),v(tr,"href","https://github.com/facebook/react/pull/14717"),v(tr,"rel","nofollow"),v(rr,"href","#references"),v(rr,"id","references"),v(gr,"href","https://github.com/facebook/react/commit/e955008b9bbee93fcaf423d4afaf4d22023e2c3f"),v(gr,"rel","nofollow"),v(Er,"href","https://github.com/facebook/react/pull/10026/files"),v(Er,"rel","nofollow"),v(Ir,"href","https://github.com/facebook/react/pull/14717"),v(Ir,"rel","nofollow"),v(Ar,"href","https://github.com/sveltejs/svelte/pull/4444"),v(Ar,"rel","nofollow")},m(n,a){i(n,t,a),l(t,s),l(s,e),l(e,o),l(o,c),l(s,p),l(p,r),l(r,h),l(s,k),l(k,m),l(m,T),l(s,I),l(I,M),l(M,H),l(s,S),l(S,L),l(L,R),l(s,x),l(x,A),l(A,P),l(s,C),l(C,O),l(O,D),l(s,$),l($,j),l(j,N),i(n,B,a),i(n,F,a),l(F,q),l(q,_),l(_,U),l(F,W),l(F,z),l(z,J),l(z,V),l(V,G),l(z,K),l(z,Q),l(Q,Y),l(z,Z),l(z,X),l(X,nn),l(z,an),l(F,tn),l(F,sn),l(sn,en),l(sn,on),l(on,cn),l(sn,pn),l(sn,rn),l(rn,ln),l(sn,un),l(F,hn),l(F,dn),l(dn,kn),i(n,fn,a),i(n,gn,a),l(gn,mn),l(mn,vn),l(vn,yn),l(gn,En),l(gn,bn),l(bn,wn),l(gn,Tn),l(gn,In),In.innerHTML='\n<code class="language-">Text content did not match. Server: &quot;Count: 0&quot; Client: &quot;Count: &quot;</code>',l(gn,Mn),l(gn,Hn),l(Hn,Sn),l(gn,Ln),l(gn,Rn),Rn.innerHTML='<code class="language-js"><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token operator">&lt;</span>div<span class="token operator">></span>\n      <span class="token operator">&lt;</span>div<span class="token operator">></span>Count<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>count<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">></span>Increment<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>\n    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',l(gn,xn),l(gn,An),l(An,Pn),l(gn,Cn),l(gn,On),l(On,Dn),l(gn,$n),l(gn,jn),l(jn,Nn),i(n,Bn,a),i(n,Fn,a),l(Fn,qn),l(qn,_n),l(_n,Un),l(Fn,Wn),l(Fn,zn),l(zn,Jn),l(Fn,Vn),l(Fn,Gn),Gn.innerHTML='<code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>Count: 0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>Increment<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code>',l(Fn,Kn),l(Fn,Qn),l(Qn,Yn),l(Fn,Zn),l(Fn,Xn),l(Xn,na),l(Fn,aa),l(Fn,ta),ta.innerHTML='<code class="language-html"><span class="token comment">&lt;!-- disabled javascript --\x3e</span>\n└─ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>\n    ├─ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>\n    │   └─ "Count: 0"\n    └─ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>\n        └─ "Increment"</code>',l(Fn,sa),l(Fn,ea),ea.innerHTML='<code class="language-html"><span class="token comment">&lt;!-- enabled javascript --\x3e</span>\n└─ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>\n    ├─ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>\n    │   ├─ "Count: "\n    │   └─ "0"\n    └─ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>\n        └─ "Increment"</code>',l(Fn,oa),l(Fn,ca),l(ca,pa),l(Fn,ra),l(Fn,la),l(la,ia),l(la,ua),l(ua,ha),l(la,da),l(la,ka),l(ka,fa),l(la,ga),l(la,ma),l(ma,va),l(la,ya),l(Fn,Ea),l(Fn,ba),l(ba,wa),l(ba,Ta),l(Ta,Ia),l(ba,Ma),l(Fn,Ha),l(Fn,Sa),l(Sa,La),l(Sa,Ra),l(Ra,xa),l(Sa,Aa),l(Sa,Pa),l(Pa,Ca),l(Sa,Oa),l(Sa,Da),l(Da,$a),l(Sa,ja),l(Fn,Na),l(Fn,Ba),Ba.innerHTML='<code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\n  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">Count: </span><span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\n  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span><span class="token plain-text">Increment</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">\n</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code>',l(Fn,Fa),l(Fn,qa),l(qa,_a),l(Fn,Ua),l(Fn,Wa),Wa.innerHTML='<code class="language-js"><span class="token punctuation">&#123;</span>\n  type<span class="token punctuation">:</span> <span class="token string">\'div\'</span><span class="token punctuation">,</span>\n  props<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>\n    children<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span>\n      type<span class="token punctuation">:</span> <span class="token string">\'div\'</span><span class="token punctuation">,</span>\n      props<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>\n        children<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n          <span class="token string">\'Count: \'</span><span class="token punctuation">,</span>\n          <span class="token number">0</span><span class="token punctuation">,</span>\n        <span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>\n    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>\n      type<span class="token punctuation">:</span> <span class="token string">\'button\'</span><span class="token punctuation">,</span>\n      props<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>\n        <span class="token function-variable function">onClick</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        children<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n          <span class="token string">\'Increment\'</span><span class="token punctuation">,</span>\n        <span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>\n    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>\n<span class="token punctuation">&#125;</span></code>',l(Fn,za),l(Fn,Ja),l(Ja,Va),l(Ja,Ga),l(Ga,Ka),l(Ja,Qa),l(Fn,Ya),l(Fn,Za),l(Za,Xa),l(Za,nt),l(nt,at),l(Za,tt),l(Fn,st),l(Fn,et),l(et,ot),l(Fn,ct),l(Fn,pt),l(pt,rt),l(pt,lt),l(lt,it),l(pt,ut),l(pt,ht),l(ht,dt),l(pt,kt),l(Fn,ft),l(Fn,gt),gt.innerHTML='\n<code class="language-">Text content did not match. Server: &quot;Count: 0&quot; Client: &quot;Count: &quot;</code>',l(Fn,mt),l(Fn,vt),l(vt,yt),l(vt,Et),l(Et,bt),l(vt,wt),l(vt,Tt),l(Tt,It),l(vt,Mt),i(n,Ht,a),i(n,St,a),l(St,Lt),l(Lt,Rt),l(Rt,xt),l(St,At),l(St,Pt),l(Pt,Ct),l(St,Ot),l(St,Dt),l(Dt,$t),l(St,jt),l(St,Nt),l(Nt,Bt),l(Nt,Ft),l(Ft,qt),l(qt,_t),l(Nt,Ut),l(Nt,Wt),l(Wt,zt),l(zt,Jt),l(Nt,Vt),l(St,Gt),l(St,Kt),l(Kt,Qt),l(St,Yt),l(St,Zt),l(Zt,Xt),l(Xt,ns),l(Xt,as),l(as,ts),l(Xt,ss),l(Xt,es),l(es,os),l(Xt,cs),l(St,ps),l(St,rs),l(rs,ls),l(St,is),l(St,us),l(us,hs),l(us,ds),l(ds,ks),l(ks,fs),l(us,gs),l(us,ms),l(ms,vs),l(vs,ys),l(us,Es),l(St,bs),l(St,ws),l(ws,Ts),l(ws,Is),l(Is,Ms),l(Ms,Hs),l(ws,Ss),l(St,Ls),l(St,Rs),Rs.innerHTML='<code class="language-diff"><span class="token deleted-sign deleted">- &lt;div>\n</span><span class="token inserted-sign inserted">+ &lt;div data-reactroot="">\n</span><span class="token deleted-sign deleted">-  &lt;div>Count: 0&lt;/div>\n</span><span class="token inserted-sign inserted">+  &lt;div>Count: &lt;!-- --\x3e0&lt;/div>\n</span><span class="token unchanged">  &lt;button>Increment&lt;/button>\n</span><span class="token deleted-arrow deleted">&lt;/div></span></code>',l(St,xs),l(St,As),l(As,Ps),l(As,Cs),l(Cs,Os),l(As,Ds),l(As,$s),l($s,js),l($s,Ns),l(Ns,Bs),l($s,Fs),l($s,qs),l(qs,_s),l(As,Us),l(St,Ws),l(St,zs),l(zs,Js),l(zs,Vs),l(Vs,Gs),l(zs,Ks),l(zs,Qs),l(Qs,Ys),l(zs,Zs),l(St,Xs),l(St,ne),ne.innerHTML='<code class="language-html"><span class="token comment">&lt;!-- disabled javascript --\x3e</span>\n└─ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>\n    ├─ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>\n    │   ├─ "Count: "\n    │   ├─ <span class="token comment">&lt;!-- --\x3e</span>\n    │   └─ "0"\n    └─ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>\n        └─ "Increment"</code>',l(St,ae),l(St,te),l(te,se),l(te,ee),l(ee,oe),l(te,ce),l(St,pe),l(St,re),l(re,le),l(St,ie),l(St,ue),l(ue,he),l(ue,de),l(de,ke),l(ue,fe),i(n,ge,a),i(n,me,a),l(me,ve),l(ve,ye),l(ye,Ee),l(me,be),l(me,we),l(we,Te),l(we,Ie),l(Ie,Me),l(we,He),l(me,Se),l(me,Le),l(Le,Re),l(me,xe),l(me,Ae),l(Ae,Pe),l(me,Ce),l(me,Oe),Oe.innerHTML='<code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>&#123;a&#125; + &#123;b&#125; = &#123;a + b&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code>',l(me,De),l(me,$e),l($e,je),l(je,Ne),l(me,Be),l(me,Fe),l(Fe,qe),l(Fe,_e),l(_e,Ue),l(_e,We),l(We,ze),l(_e,Je),l(Fe,Ve),l(me,Ge),l(me,Ke),l(Ke,Qe),l(Ke,Ye),l(Ye,Ze),l(Ke,Xe),l(me,no),l(me,ao),ao.innerHTML='<code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n  <span class="token keyword">const</span> string <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">\n    &lt;h1>Introduction&lt;/h1>\n    &lt;div>Hello World&lt;/div>\n  </span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">;</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>\n&#123;@html string&#125;</code>',l(me,to),l(me,so),l(so,eo),l(me,oo),l(me,co),l(co,po),l(me,ro),l(me,lo),l(lo,io),l(me,uo),l(me,ho),ho.innerHTML='<code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n  <span class="token keyword module">import</span> <span class="token maybe-class-name">Header</span> <span class="token keyword module">from</span> <span class="token string">\'./Header.svelte\'</span><span class="token punctuation">;</span>\n  <span class="token keyword module">import</span> <span class="token maybe-class-name">Footer</span> <span class="token keyword module">from</span> <span class="token string">\'./Footer.svelte\'</span><span class="token punctuation">;</span>\n  \n  <span class="token keyword">const</span> string <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">\n    &lt;h1>Introduction&lt;/h1>\n    &lt;div>Hello World&lt;/div>\n  </span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">;</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Header</span><span class="token punctuation">></span></span>This is header<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Header</span><span class="token punctuation">></span></span>\n&#123;@html string&#125;\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Footer</span><span class="token punctuation">></span></span>This is footer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Footer</span><span class="token punctuation">></span></span></code>',l(me,ko),l(me,fo),l(fo,go),l(me,mo),l(me,vo),vo.innerHTML='<code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">></span></span>This is header<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Introduction<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>Hello World<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>footer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>footer-img<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n  This is footer\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code>',l(me,yo),l(me,Eo),l(Eo,bo),l(Eo,wo),l(wo,To),l(Eo,Io),l(Eo,Mo),l(Mo,Ho),l(Eo,So),l(Eo,Lo),l(Lo,Ro),l(Eo,xo),l(me,Ao),l(me,Po),l(Po,Co),l(me,Oo),l(me,Do),l(Do,$o),l(Do,jo),l(jo,No),l(Do,Bo),l(Do,Fo),l(Fo,qo),l(Do,_o),l(Do,Uo),l(Uo,Wo),l(Do,zo),l(me,Jo),l(me,Vo),l(Vo,Go),l(Go,Ko),l(Ko,Qo),l(Go,Yo),l(me,Zo),l(me,Xo),l(Xo,nc),l(Xo,ac),l(ac,tc),l(Xo,sc),l(Xo,ec),l(ec,oc),l(Xo,cc),l(Xo,pc),l(pc,rc),l(Xo,lc),l(Xo,ic),l(ic,uc),l(Xo,hc),l(me,dc),l(me,kc),kc.innerHTML='<code class="language-html"><span class="token comment">&lt;!-- Header.svelte --\x3e</span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">></span></span></code>',l(me,fc),l(me,gc),l(gc,mc),l(mc,vc),l(mc,yc),l(yc,Ec),l(mc,bc),l(mc,wc),l(wc,Tc),l(me,Ic),l(me,Mc),l(Mc,Hc),l(Mc,Sc),l(Sc,Lc),l(Mc,Rc),l(Mc,xc),l(xc,Ac),l(Mc,Pc),l(me,Cc),l(me,Oc),l(Oc,Dc),l(me,$c),l(me,jc),jc.innerHTML='<code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">></span></span>This is header<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Introduction<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>Hello World<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token comment">&lt;!-- HTML Tag Ends Here --\x3e</span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>footer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>footer-img<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n  This is footer\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code>',l(me,Nc),l(me,Bc),Bc.innerHTML='<code class="language-js"><span class="token comment">// claim HTML node until a comment that matches the &#96;commentMarker&#96;</span>\n<span class="token keyword">function</span> <span class="token function">claimUntil</span><span class="token punctuation">(</span><span class="token parameter">nodes<span class="token punctuation">,</span> commentMarker</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n  <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> nodes<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token keyword">const</span> node <span class="token operator">=</span> nodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span><span class="token property-access">nodeType</span> <span class="token operator">===</span> <span class="token number">8</span> <span class="token comment">/* comment node */</span> <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span><span class="token property-access">textContent</span><span class="token punctuation">.</span><span class="token method function property-access">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> commentMarker<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n      <span class="token keyword">break</span><span class="token punctuation">;</span>\n    <span class="token punctuation">&#125;</span>\n  <span class="token punctuation">&#125;</span>\n  <span class="token keyword">return</span> nodes<span class="token punctuation">.</span><span class="token method function property-access">splice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span>\n\n<span class="token keyword">function</span> <span class="token function">claimHtmlTag</span><span class="token punctuation">(</span><span class="token parameter">nodes</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">const</span> htmlTagNodes <span class="token operator">=</span> <span class="token function">claimUntil</span><span class="token punctuation">(</span>nodes<span class="token punctuation">,</span> <span class="token string">\'HTML Tag Ends Here\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HtmlTag</span><span class="token punctuation">(</span>htmlTagNodes<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span> </code>',i(n,Fc,a),i(n,qc,a),l(qc,_c),l(_c,Uc),l(Uc,Wc),l(qc,zc),l(qc,Jc),l(Jc,Vc),l(Jc,Gc),l(Gc,Kc),l(Jc,Qc),l(qc,Yc),l(qc,Zc),l(Zc,Xc),l(Zc,np),l(np,ap),l(Zc,tp),l(qc,sp),l(qc,ep),ep.innerHTML='<code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyComponent</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div dangerouslySetInnerHTML<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>__html<span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">\n    &lt;h1>Introduction&lt;/h1>\n    &lt;div>Hello World&lt;/div>\n  </span><span class="token template-punctuation string">&#96;</span></span>\n  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',l(qc,op),l(qc,cp),cp.innerHTML='<code class="language-html"><span class="token comment">&lt;!-- the parent &#96;&lt;div>&#96; act as a boundary --\x3e</span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Introduction<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>Hello World<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code>',l(qc,pp),l(qc,rp),l(rp,lp),l(rp,ip),l(ip,up),l(rp,hp),l(rp,dp),l(dp,kp),l(rp,fp),i(n,gp,a),i(n,mp,a),l(mp,vp),l(vp,yp),l(yp,Ep),l(mp,bp),l(mp,wp),l(wp,Tp),l(mp,Ip),l(mp,Mp),l(Mp,Hp),l(Mp,Sp),l(Sp,Lp),l(Lp,Rp),l(Sp,xp),l(Mp,Ap),l(mp,Pp),l(mp,Cp),l(Cp,Op),l(Cp,Dp),l(Dp,$p),l(Cp,jp),l(mp,Np),l(mp,Bp),l(Bp,Fp),l(Bp,qp),l(qp,_p),l(Bp,Up),l(mp,Wp),l(mp,zp),l(zp,Jp),l(zp,Vp),l(Vp,Gp),l(zp,Kp),l(mp,Qp),l(mp,Yp),l(Yp,Zp),l(Zp,Xp),l(Xp,nr),l(Zp,ar),l(Zp,tr),l(tr,sr),l(Zp,er),i(n,or,a),i(n,cr,a),l(cr,pr),l(pr,rr),l(rr,lr),l(cr,ir),l(cr,ur),l(ur,hr),l(hr,dr),l(hr,kr),l(kr,fr),l(fr,gr),l(gr,mr),l(kr,vr),l(kr,yr),l(yr,Er),l(Er,br),l(kr,wr),l(kr,Tr),l(Tr,Ir),l(Ir,Mr),l(ur,Hr),l(ur,Sr),l(Sr,Lr),l(Sr,Rr),l(Rr,xr),l(xr,Ar),l(Ar,Pr)},p:n,d(n){n&&u(t),n&&u(B),n&&u(F),n&&u(fn),n&&u(gn),n&&u(Bn),n&&u(Fn),n&&u(Ht),n&&u(St),n&&u(ge),n&&u(me),n&&u(Fc),n&&u(qc),n&&u(gp),n&&u(mp),n&&u(or),n&&u(cr)}}}function hn(n){let t,s;const e=[dn];let o={$$slots:{default:[un]},$$scope:{ctx:n}};for(let n=0;n<e.length;n+=1)o=a(o,e[n]);return t=new ln({props:o}),{c(){U(t.$$.fragment)},l(n){W(t.$$.fragment,n)},m(n,a){z(t,n,a),s=!0},p(n,[a]){const s=0&a?function(n,a){const t={},s={},e={$$scope:1};let o=n.length;for(;o--;){const c=n[o],p=a[o];if(p){for(const n in c)n in p||(s[n]=1);for(const n in p)e[n]||(t[n]=p[n],e[n]=1);n[o]=p}else for(const n in c)e[n]=1}for(const n in s)n in t||(t[n]=void 0);return t}(e,[(o=dn,"object"==typeof o&&null!==o?o:{})]):{};var o;1&a&&(s.$$scope={dirty:a,ctx:n}),t.$set(s)},i(n){s||(q(t.$$.fragment,n),s=!0)},o(n){_(t.$$.fragment,n),s=!1},d(n){J(t,n)}}}const dn={title:"Hydrating text content from Server-Side Rendering",date:"2020-02-28T08:00:00Z",slug:"hydrating-text-content",type:"blog"};class kn extends K{constructor(n){super(),G(this,n,null,hn,c,{})}}setTimeout(()=>{new kn({target:document.querySelector("#app"),hydrate:!0})},3e3);
