function n(){}function a(n,a){for(const s in a)n[s]=a[s];return n}function s(n){return n()}function t(){return Object.create(null)}function e(n){n.forEach(s)}function o(n){return"function"==typeof n}function p(n,a){return n!=n?a==a:n!==a||n&&"object"==typeof n||"function"==typeof n}function c(n,s,t,e){return n[1]&&e?a(t.ctx.slice(),n[1](e(s))):t.ctx}function l(n,a,s,t,e,o,p){const l=function(n,a,s,t){if(n[2]&&t){const e=n[2](t(s));if(void 0===a.dirty)return e;if("object"==typeof e){const n=[],s=Math.max(a.dirty.length,e.length);for(let t=0;t<s;t+=1)n[t]=a.dirty[t]|e[t];return n}return a.dirty|e}return a.dirty}(a,t,e,o);if(l){const e=c(a,s,t,p);n.p(e,l)}}function i(n,a){n.appendChild(a)}function r(n,a,s){n.insertBefore(a,s||null)}function u(n){n.parentNode.removeChild(n)}function k(n,a){for(let s=0;s<n.length;s+=1)n[s]&&n[s].d(a)}function h(n){return document.createElement(n)}function d(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function f(n){return document.createTextNode(n)}function m(){return f(" ")}function g(){return f("")}function v(n,a,s){null==s?n.removeAttribute(a):n.getAttribute(a)!==s&&n.setAttribute(a,s)}function y(n){return Array.from(n.childNodes)}function b(n,a,s,t){for(let t=0;t<n.length;t+=1){const e=n[t];if(e.nodeName===a){let a=0;const o=[];for(;a<e.attributes.length;){const n=e.attributes[a++];s[n.name]||o.push(n.name)}for(let n=0;n<o.length;n++)e.removeAttribute(o[n]);return n.splice(t,1)[0]}}return t?d(a):h(a)}function E(n,a){for(let s=0;s<n.length;s+=1){const t=n[s];if(3===t.nodeType)return t.data=""+a,n.splice(s,1)[0]}return f(a)}function w(n){return E(n," ")}function I(n,a){a=""+a,n.wholeText!==a&&(n.data=a)}function x(n,a){n.value=null==a?"":a}class _{constructor(n=null){this.a=n,this.e=this.n=null}m(n,a,s=null){this.e||(this.e=h(a.nodeName),this.t=a,this.h(n)),this.i(s)}h(n){this.e.innerHTML=n,this.n=Array.from(this.e.childNodes)}i(n){for(let a=0;a<this.n.length;a+=1)r(this.t,this.n[a],n)}p(n){this.d(),this.h(n),this.i(this.a)}d(){this.n.forEach(u)}}let O;function S(n){O=n}function C(n){(function(){if(!O)throw new Error("Function called outside component initialization");return O})().$$.on_mount.push(n)}const j=[],P=[],A=[],T=[],$=Promise.resolve();let D=!1;function L(n){A.push(n)}let H=!1;const R=new Set;function M(){if(!H){H=!0;do{for(let n=0;n<j.length;n+=1){const a=j[n];S(a),N(a.$$)}for(j.length=0;P.length;)P.pop()();for(let n=0;n<A.length;n+=1){const a=A[n];R.has(a)||(R.add(a),a())}A.length=0}while(j.length);for(;T.length;)T.pop()();D=!1,H=!1,R.clear()}}function N(n){if(null!==n.fragment){n.update(),e(n.before_update);const a=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,a),n.after_update.forEach(L)}}const W=new Set;function q(n,a){n&&n.i&&(W.delete(n),n.i(a))}function B(n,a,s,t){if(n&&n.o){if(W.has(n))return;W.add(n),(void 0).c.push(()=>{W.delete(n),t&&(s&&n.d(1),t())}),n.o(a)}}function F(n){n&&n.c()}function z(n,a){n&&n.l(a)}function U(n,a,t){const{fragment:p,on_mount:c,on_destroy:l,after_update:i}=n.$$;p&&p.m(a,t),L(()=>{const a=c.map(s).filter(o);l?l.push(...a):e(a),n.$$.on_mount=[]}),i.forEach(L)}function G(n,a){const s=n.$$;null!==s.fragment&&(e(s.on_destroy),s.fragment&&s.fragment.d(a),s.on_destroy=s.fragment=null,s.ctx=[])}function J(n,a){-1===n.$$.dirty[0]&&(j.push(n),D||(D=!0,$.then(M)),n.$$.dirty.fill(0)),n.$$.dirty[a/31|0]|=1<<a%31}function V(a,s,o,p,c,l,i=[-1]){const r=O;S(a);const k=s.props||{},h=a.$$={fragment:null,ctx:null,props:l,update:n,not_equal:c,bound:t(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(r?r.$$.context:[]),callbacks:t(),dirty:i};let d=!1;if(h.ctx=o?o(a,k,(n,s,...t)=>{const e=t.length?t[0]:s;return h.ctx&&c(h.ctx[n],h.ctx[n]=e)&&(h.bound[n]&&h.bound[n](e),d&&J(a,n)),s}):[],h.update(),d=!0,e(h.before_update),h.fragment=!!p&&p(h.ctx),s.target){if(s.hydrate){const n=y(s.target);h.fragment&&h.fragment.l(n),n.forEach(u)}else h.fragment&&h.fragment.c();s.intro&&q(a.$$.fragment),U(a,s.target,s.anchor),M()}S(r)}class Y{$destroy(){G(this,1),this.$destroy=n}$on(n,a){const s=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return s.push(a),()=>{const n=s.indexOf(a);-1!==n&&s.splice(n,1)}}$set(){}}function Q(a){let s,t,e,o,p,c,l,k,g,I,x,_,O,S,C,j,P,A,T,$,D,L,H,R,M,N,W,q,B,F,z,U,G,J,V;return{c(){s=h("header"),t=h("nav"),e=h("ul"),o=h("li"),p=h("a"),c=f("Tan Li Hau"),l=m(),k=h("li"),g=h("a"),I=f("About"),x=m(),_=h("li"),O=h("a"),S=f("Writings"),C=m(),j=h("li"),P=h("a"),A=f("Talks"),T=m(),$=h("li"),D=h("a"),L=f("Notes"),H=m(),R=h("li"),M=h("a"),N=f("Newsletter"),W=m(),q=h("li"),B=h("a"),F=d("svg"),z=d("path"),U=m(),G=h("a"),J=d("svg"),V=d("path"),this.h()},l(n){s=b(n,"HEADER",{class:!0});var a=y(s);t=b(a,"NAV",{});var i=y(t);e=b(i,"UL",{class:!0});var r=y(e);o=b(r,"LI",{class:!0});var h=y(o);p=b(h,"A",{href:!0,class:!0});var d=y(p);c=E(d,"Tan Li Hau"),d.forEach(u),h.forEach(u),l=w(r),k=b(r,"LI",{class:!0});var f=y(k);g=b(f,"A",{href:!0,class:!0});var m=y(g);I=E(m,"About"),m.forEach(u),f.forEach(u),x=w(r),_=b(r,"LI",{class:!0});var v=y(_);O=b(v,"A",{href:!0,class:!0});var Y=y(O);S=E(Y,"Writings"),Y.forEach(u),v.forEach(u),C=w(r),j=b(r,"LI",{class:!0});var Q=y(j);P=b(Q,"A",{href:!0,class:!0});var K=y(P);A=E(K,"Talks"),K.forEach(u),Q.forEach(u),T=w(r),$=b(r,"LI",{class:!0});var Z=y($);D=b(Z,"A",{href:!0,class:!0});var X=y(D);L=E(X,"Notes"),X.forEach(u),Z.forEach(u),H=w(r),R=b(r,"LI",{class:!0});var nn=y(R);M=b(nn,"A",{href:!0,class:!0});var an=y(M);N=E(an,"Newsletter"),an.forEach(u),nn.forEach(u),W=w(r),q=b(r,"LI",{class:!0});var sn=y(q);B=b(sn,"A",{"aria-label":!0,href:!0,class:!0});var tn=y(B);F=b(tn,"svg",{viewBox:!0,width:!0,height:!0,class:!0},1);var en=y(F);z=b(en,"path",{d:!0},1),y(z).forEach(u),en.forEach(u),tn.forEach(u),U=w(sn),G=b(sn,"A",{"aria-label":!0,href:!0,class:!0});var on=y(G);J=b(on,"svg",{viewBox:!0,width:!0,height:!0,class:!0},1);var pn=y(J);V=b(pn,"path",{d:!0},1),y(V).forEach(u),pn.forEach(u),on.forEach(u),sn.forEach(u),r.forEach(u),i.forEach(u),a.forEach(u),this.h()},h(){v(p,"href","/"),v(p,"class","svelte-f3e4uo"),v(o,"class","svelte-f3e4uo"),v(g,"href","/about"),v(g,"class","svelte-f3e4uo"),v(k,"class","svelte-f3e4uo"),v(O,"href","/blogs"),v(O,"class","svelte-f3e4uo"),v(_,"class","svelte-f3e4uo"),v(P,"href","/talks"),v(P,"class","svelte-f3e4uo"),v(j,"class","svelte-f3e4uo"),v(D,"href","/notes"),v(D,"class","svelte-f3e4uo"),v($,"class","svelte-f3e4uo"),v(M,"href","/newsletter"),v(M,"class","svelte-f3e4uo"),v(R,"class","svelte-f3e4uo"),v(z,"d","M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66\n    10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5\n    4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"),v(F,"viewBox","0 0 24 24"),v(F,"width","1em"),v(F,"height","1em"),v(F,"class","svelte-f3e4uo"),v(B,"aria-label","Twitter account"),v(B,"href","https://twitter.com/lihautan"),v(B,"class","svelte-f3e4uo"),v(V,"d","M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0\n    0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07\n    5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65\n    5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42\n    3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"),v(J,"viewBox","0 0 24 24"),v(J,"width","1em"),v(J,"height","1em"),v(J,"class","svelte-f3e4uo"),v(G,"aria-label","Github account"),v(G,"href","https://github.com/tanhauhau"),v(G,"class","svelte-f3e4uo"),v(q,"class","social svelte-f3e4uo"),v(e,"class","svelte-f3e4uo"),v(s,"class","svelte-f3e4uo")},m(n,a){r(n,s,a),i(s,t),i(t,e),i(e,o),i(o,p),i(p,c),i(e,l),i(e,k),i(k,g),i(g,I),i(e,x),i(e,_),i(_,O),i(O,S),i(e,C),i(e,j),i(j,P),i(P,A),i(e,T),i(e,$),i($,D),i(D,L),i(e,H),i(e,R),i(R,M),i(M,N),i(e,W),i(e,q),i(q,B),i(B,F),i(F,z),i(q,U),i(q,G),i(G,J),i(J,V)},p:n,i:n,o:n,d(n){n&&u(s)}}}class K extends Y{constructor(n){super(),V(this,n,null,Q,p,{})}}function Z(a){let s,t,e,o,p,c,l,k,d,g,I,_,O,S,C,j,P,A,T,$;return{c(){s=h("div"),t=h("h1"),e=f("Subscribe to my newsletter"),o=m(),p=h("h2"),c=f("Get the latest blog posts and project updates delivered right to your inbox"),l=m(),k=h("form"),d=h("div"),g=h("input"),I=m(),_=h("input"),S=m(),C=h("input"),j=m(),P=h("p"),A=f("Powered by Buttondown."),this.h()},l(n){s=b(n,"DIV",{class:!0});var a=y(s);t=b(a,"H1",{});var i=y(t);e=E(i,"Subscribe to my newsletter"),i.forEach(u),o=w(a),p=b(a,"H2",{class:!0});var r=y(p);c=E(r,"Get the latest blog posts and project updates delivered right to your inbox"),r.forEach(u),l=w(a),k=b(a,"FORM",{action:!0,method:!0,target:!0,onsubmit:!0,class:!0});var h=y(k);d=b(h,"DIV",{class:!0});var f=y(d);g=b(f,"INPUT",{type:!0,name:!0,id:!0,"aria-label":!0,placeholder:!0,class:!0}),I=w(f),_=b(f,"INPUT",{type:!0,value:!0,disabled:!0,class:!0}),f.forEach(u),S=w(h),C=b(h,"INPUT",{type:!0,value:!0,name:!0,class:!0}),j=w(h),P=b(h,"P",{class:!0});var m=y(P);A=E(m,"Powered by Buttondown."),m.forEach(u),h.forEach(u),a.forEach(u),this.h()},h(){v(p,"class","svelte-1k1s1co"),v(g,"type","email"),v(g,"name","email"),v(g,"id","bd-email"),v(g,"aria-label","email address"),v(g,"placeholder","youremail@example.com"),v(g,"class","svelte-1k1s1co"),v(_,"type","submit"),_.value="Subscribe",_.disabled=O=!a[0],v(_,"class","svelte-1k1s1co"),v(d,"class","form-item svelte-1k1s1co"),v(C,"type","hidden"),C.value="1",v(C,"name","embed"),v(C,"class","svelte-1k1s1co"),v(P,"class","svelte-1k1s1co"),v(k,"action","https://buttondown.email/api/emails/embed-subscribe/lihautan"),v(k,"method","post"),v(k,"target","popupwindow"),v(k,"onsubmit","window.open('https://buttondown.email/lihautan', 'popupwindow')"),v(k,"class","embeddable-buttondown-form"),v(s,"class","form svelte-1k1s1co")},m(n,u){var h,f,m,v;r(n,s,u),i(s,t),i(t,e),i(s,o),i(s,p),i(p,c),i(s,l),i(s,k),i(k,d),i(d,g),x(g,a[0]),i(d,I),i(d,_),i(k,S),i(k,C),i(k,j),i(k,P),i(P,A),T||(h=g,f="input",m=a[1],h.addEventListener(f,m,v),$=()=>h.removeEventListener(f,m,v),T=!0)},p(n,[a]){1&a&&g.value!==n[0]&&x(g,n[0]),1&a&&O!==(O=!n[0])&&(_.disabled=O)},i:n,o:n,d(n){n&&u(s),T=!1,$()}}}function X(n,a,s){let t;return[t,function(){t=this.value,s(0,t)}]}class nn extends Y{constructor(n){super(),V(this,n,X,Z,p,{})}}function an(n){return C(()=>(setTimeout(()=>{if(window.innerWidth>1080){const n=document.createElement("script");n.async=!0,n.type="text/javascript",n.src="//cdn.carbonads.com/carbon.js?serve=CE7ITK3E&placement=lihautancom",n.id="_carbonads_js",document.body.appendChild(n)}},5e3),()=>{try{const n=document.getElementById("carbonads");n.parentNode.removeChild(n)}catch(n){}})),[]}class sn extends Y{constructor(n){super(),V(this,n,an,null,p,{})}}var tn="https://lihautan.com/contributing-to-svelte-fixing-issue-4392/assets/hero-twitter-b9c07d38.jpg";function en(n,a,s){const t=n.slice();return t[6]=a[s],t}function on(n,a,s){const t=n.slice();return t[6]=a[s],t}function pn(n){let a,s;return{c(){a=h("meta"),this.h()},l(n){a=b(n,"META",{name:!0,content:!0}),this.h()},h(){v(a,"name","keywords"),v(a,"content",s=n[6])},m(n,s){r(n,a,s)},p(n,t){4&t&&s!==(s=n[6])&&v(a,"content",s)},d(n){n&&u(a)}}}function cn(n){let a,s,t=n[6]+"";return{c(){a=h("span"),s=f(t),this.h()},l(n){a=b(n,"SPAN",{class:!0});var e=y(a);s=E(e,t),e.forEach(u),this.h()},h(){v(a,"class","svelte-9tqnza")},m(n,t){r(n,a,t),i(a,s)},p(n,a){4&a&&t!==(t=n[6]+"")&&I(s,t)},d(n){n&&u(a)}}}function ln(n){let a,s,t,e,o,p,d,x,O,S,C,j,P,A,T,$,D,L,H,R,M,N,W,J,V,Y,Q,Z,X,an,ln,rn,un,kn,hn,dn,fn=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"Article",author:n[3],copyrightHolder:n[3],copyrightYear:"2020",creator:n[3],publisher:n[3],description:n[1],headline:n[0],name:n[0],inLanguage:"en"})}<\/script>`,mn=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",description:"Breadcrumbs list",name:"Breadcrumbs",itemListElement:[{"@type":"ListItem",item:{"@id":"https://lihautan.com",name:"Homepage"},name:"Homepage",position:1},{"@type":"ListItem",item:{"@id":"https%3A%2F%2Flihautan.com%2Fcontributing-to-svelte-fixing-issue-4392",name:n[0]},name:n[0],position:2}]})}<\/script>`;document.title=a=n[0]+" | Tan Li Hau";let gn=n[2],vn=[];for(let a=0;a<gn.length;a+=1)vn[a]=pn(on(n,gn,a));W=new K({});let yn=n[2],bn=[];for(let a=0;a<yn.length;a+=1)bn[a]=cn(en(n,yn,a));const En=n[5].default,wn=function(n,a,s,t){if(n){const e=c(n,a,s,t);return n[0](e)}}(En,n,n[4],null);return un=new nn({}),hn=new sn({}),{c(){s=h("meta"),t=h("meta"),e=h("meta"),o=h("meta"),p=h("meta"),d=h("meta"),x=h("meta"),O=h("meta"),S=h("meta"),C=h("meta"),j=h("meta");for(let n=0;n<vn.length;n+=1)vn[n].c();P=h("meta"),A=h("meta"),$=g(),L=g(),H=m(),R=h("a"),M=f("Skip to content"),N=m(),F(W.$$.fragment),J=m(),V=h("main"),Y=h("h1"),Q=f(n[0]),Z=m();for(let n=0;n<bn.length;n+=1)bn[n].c();X=m(),an=h("article"),wn&&wn.c(),ln=m(),rn=h("footer"),F(un.$$.fragment),kn=m(),F(hn.$$.fragment),this.h()},l(a){const c=function(n,a=document.body){return Array.from(a.querySelectorAll(n))}('[data-svelte="svelte-15e3uyc"]',document.head);s=b(c,"META",{name:!0,content:!0}),t=b(c,"META",{name:!0,content:!0}),e=b(c,"META",{name:!0,content:!0}),o=b(c,"META",{name:!0,content:!0}),p=b(c,"META",{name:!0,content:!0}),d=b(c,"META",{name:!0,content:!0}),x=b(c,"META",{name:!0,content:!0}),O=b(c,"META",{name:!0,content:!0}),S=b(c,"META",{name:!0,content:!0}),C=b(c,"META",{name:!0,content:!0}),j=b(c,"META",{name:!0,content:!0});for(let n=0;n<vn.length;n+=1)vn[n].l(c);P=b(c,"META",{itemprop:!0,content:!0}),A=b(c,"META",{itemprop:!0,content:!0}),$=g(),L=g(),c.forEach(u),H=w(a),R=b(a,"A",{href:!0,class:!0});var l=y(R);M=E(l,"Skip to content"),l.forEach(u),N=w(a),z(W.$$.fragment,a),J=w(a),V=b(a,"MAIN",{id:!0,class:!0});var i=y(V);Y=b(i,"H1",{});var r=y(Y);Q=E(r,n[0]),r.forEach(u),Z=w(i);for(let n=0;n<bn.length;n+=1)bn[n].l(i);X=w(i),an=b(i,"ARTICLE",{});var k=y(an);wn&&wn.l(k),k.forEach(u),i.forEach(u),ln=w(a),rn=b(a,"FOOTER",{class:!0});var h=y(rn);z(un.$$.fragment,h),kn=w(h),z(hn.$$.fragment,h),h.forEach(u),this.h()},h(){v(s,"name","description"),v(s,"content",n[1]),v(t,"name","image"),v(t,"content",tn),v(e,"name","og:image"),v(e,"content",tn),v(o,"name","og:title"),v(o,"content",n[0]),v(p,"name","og:description"),v(p,"content",n[1]),v(d,"name","og:type"),v(d,"content","website"),v(x,"name","twitter:card"),v(x,"content","summary_large_image"),v(O,"name","twitter:creator"),v(O,"content","@lihautan"),v(S,"name","twitter:title"),v(S,"content",n[0]),v(C,"name","twitter:description"),v(C,"content",n[1]),v(j,"name","twitter:image"),v(j,"content",tn),v(P,"itemprop","url"),v(P,"content","https%3A%2F%2Flihautan.com%2Fcontributing-to-svelte-fixing-issue-4392"),v(A,"itemprop","image"),v(A,"content",tn),T=new _($),D=new _(L),v(R,"href","#content"),v(R,"class","skip svelte-9tqnza"),v(V,"id","content"),v(V,"class","blog svelte-9tqnza"),v(rn,"class","svelte-9tqnza")},m(n,a){i(document.head,s),i(document.head,t),i(document.head,e),i(document.head,o),i(document.head,p),i(document.head,d),i(document.head,x),i(document.head,O),i(document.head,S),i(document.head,C),i(document.head,j);for(let n=0;n<vn.length;n+=1)vn[n].m(document.head,null);i(document.head,P),i(document.head,A),T.m(fn,document.head),i(document.head,$),D.m(mn,document.head),i(document.head,L),r(n,H,a),r(n,R,a),i(R,M),r(n,N,a),U(W,n,a),r(n,J,a),r(n,V,a),i(V,Y),i(Y,Q),i(V,Z);for(let n=0;n<bn.length;n+=1)bn[n].m(V,null);i(V,X),i(V,an),wn&&wn.m(an,null),r(n,ln,a),r(n,rn,a),U(un,rn,null),i(rn,kn),U(hn,rn,null),dn=!0},p(n,[t]){if((!dn||1&t)&&a!==(a=n[0]+" | Tan Li Hau")&&(document.title=a),(!dn||2&t)&&v(s,"content",n[1]),(!dn||1&t)&&v(o,"content",n[0]),(!dn||2&t)&&v(p,"content",n[1]),(!dn||1&t)&&v(S,"content",n[0]),(!dn||2&t)&&v(C,"content",n[1]),4&t){let a;for(gn=n[2],a=0;a<gn.length;a+=1){const s=on(n,gn,a);vn[a]?vn[a].p(s,t):(vn[a]=pn(s),vn[a].c(),vn[a].m(P.parentNode,P))}for(;a<vn.length;a+=1)vn[a].d(1);vn.length=gn.length}if((!dn||3&t)&&fn!==(fn=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"Article",author:n[3],copyrightHolder:n[3],copyrightYear:"2020",creator:n[3],publisher:n[3],description:n[1],headline:n[0],name:n[0],inLanguage:"en"})}<\/script>`)&&T.p(fn),(!dn||1&t)&&mn!==(mn=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",description:"Breadcrumbs list",name:"Breadcrumbs",itemListElement:[{"@type":"ListItem",item:{"@id":"https://lihautan.com",name:"Homepage"},name:"Homepage",position:1},{"@type":"ListItem",item:{"@id":"https%3A%2F%2Flihautan.com%2Fcontributing-to-svelte-fixing-issue-4392",name:n[0]},name:n[0],position:2}]})}<\/script>`)&&D.p(mn),(!dn||1&t)&&I(Q,n[0]),4&t){let a;for(yn=n[2],a=0;a<yn.length;a+=1){const s=en(n,yn,a);bn[a]?bn[a].p(s,t):(bn[a]=cn(s),bn[a].c(),bn[a].m(V,X))}for(;a<bn.length;a+=1)bn[a].d(1);bn.length=yn.length}wn&&wn.p&&16&t&&l(wn,En,n,n[4],t,null,null)},i(n){dn||(q(W.$$.fragment,n),q(wn,n),q(un.$$.fragment,n),q(hn.$$.fragment,n),dn=!0)},o(n){B(W.$$.fragment,n),B(wn,n),B(un.$$.fragment,n),B(hn.$$.fragment,n),dn=!1},d(n){u(s),u(t),u(e),u(o),u(p),u(d),u(x),u(O),u(S),u(C),u(j),k(vn,n),u(P),u(A),u($),n&&T.d(),u(L),n&&D.d(),n&&u(H),n&&u(R),n&&u(N),G(W,n),n&&u(J),n&&u(V),k(bn,n),wn&&wn.d(n),n&&u(ln),n&&u(rn),G(un),G(hn)}}}function rn(n,a,s){let{title:t=""}=a,{description:e=""}=a,{tags:o=[]}=a;const p={"@type":"Person",name:"Tan Li Hau"};let{$$slots:c={},$$scope:l}=a;return n.$set=n=>{"title"in n&&s(0,t=n.title),"description"in n&&s(1,e=n.description),"tags"in n&&s(2,o=n.tags),"$$scope"in n&&s(4,l=n.$$scope)},[t,e,o,p,l,c]}class un extends Y{constructor(n){super(),V(this,n,rn,ln,p,{title:0,description:1,tags:2})}}function kn(a){let s,t,e,o,p,c,l,k,d,g,I,x,_,O,S,C,j,P,A,T,$,D,L,H,R,M,N,W,q,B,F,z,U,G,J,V,Y,Q,K,Z,X,nn,an,sn,tn,en,on,pn,cn,ln,rn,un,kn,hn,dn,fn,mn,gn,vn,yn,bn,En,wn,In,xn,_n,On,Sn,Cn,jn,Pn,An,Tn,$n,Dn,Ln,Hn,Rn,Mn,Nn,Wn,qn,Bn,Fn,zn,Un,Gn,Jn,Vn,Yn,Qn,Kn,Zn,Xn,na,aa,sa,ta,ea,oa,pa,ca,la,ia,ra,ua,ka,ha,da,fa,ma,ga,va,ya,ba,Ea,wa,Ia,xa,_a,Oa,Sa,Ca,ja,Pa,Aa,Ta,$a,Da,La,Ha,Ra,Ma,Na,Wa,qa,Ba,Fa,za,Ua,Ga,Ja,Va,Ya,Qa,Ka,Za,Xa,ns,as,ss,ts,es,os,ps,cs,ls,is,rs,us,ks,hs,ds,fs,ms,gs,vs,ys,bs,Es,ws,Is,xs,_s,Os,Ss,Cs,js,Ps,As,Ts,$s,Ds,Ls,Hs,Rs,Ms,Ns,Ws,qs,Bs,Fs,zs,Us,Gs,Js,Vs,Ys,Qs,Ks,Zs,Xs,nt,at,st,tt,et,ot,pt,ct,lt,it,rt,ut,kt,ht,dt,ft,mt,gt,vt,yt,bt,Et,wt,It,xt,_t,Ot,St,Ct,jt,Pt,At,Tt,$t,Dt,Lt,Ht,Rt,Mt,Nt,Wt,qt,Bt,Ft,zt,Ut,Gt,Jt,Vt,Yt,Qt,Kt,Zt,Xt,ne,ae,se,te,ee,oe,pe,ce,le,ie,re,ue,ke,he,de,fe,me,ge,ve,ye,be,Ee,we,Ie,xe,_e,Oe,Se,Ce,je,Pe,Ae,Te,$e,De,Le,He,Re,Me,Ne,We,qe,Be,Fe,ze,Ue,Ge,Je,Ve,Ye,Qe,Ke,Ze,Xe,no,ao,so,to,eo,oo,po,co,lo,io,ro,uo,ko,ho,fo,mo,go,vo,yo,bo,Eo,wo,Io,xo,_o,Oo,So,Co,jo,Po,Ao,To,$o,Do,Lo,Ho,Ro,Mo,No,Wo,qo,Bo,Fo,zo,Uo,Go,Jo,Vo,Yo,Qo,Ko,Zo,Xo,np,ap,sp,tp,ep,op,pp,cp,lp,ip,rp,up,kp,hp,dp,fp,mp,gp,vp,yp,bp,Ep,wp,Ip,xp,_p,Op,Sp,Cp,jp,Pp,Ap,Tp,$p,Dp,Lp,Hp,Rp,Mp,Np,Wp,qp,Bp,Fp,zp,Up,Gp,Jp,Vp,Yp,Qp,Kp,Zp,Xp,nc,ac,sc,tc,ec,oc,pc,cc,lc,ic,rc,uc,kc,hc,dc,fc,mc,gc,vc,yc,bc,Ec,wc,Ic,xc,_c,Oc,Sc,Cc,jc,Pc,Ac,Tc,$c,Dc,Lc,Hc,Rc,Mc,Nc,Wc,qc,Bc,Fc,zc,Uc,Gc,Jc,Vc,Yc,Qc,Kc,Zc,Xc,nl,al,sl,tl,el,ol,pl,cl,ll,il,rl,ul,kl,hl,dl,fl,ml,gl,vl,yl,bl,El,wl,Il,xl,_l,Ol,Sl,Cl,jl,Pl,Al,Tl,$l,Dl,Ll,Hl,Rl,Ml,Nl,Wl,ql,Bl,Fl,zl,Ul,Gl,Jl,Vl,Yl,Ql,Kl,Zl,Xl,ni,ai,si,ti,ei,oi,pi,ci,li,ii,ri,ui,ki,hi,di,fi,mi,gi,vi,yi,bi,Ei,wi,Ii,xi,_i,Oi,Si,Ci,ji,Pi,Ai,Ti,$i,Di,Li,Hi,Ri,Mi,Ni,Wi,qi,Bi,Fi,zi,Ui,Gi,Ji,Vi,Yi,Qi,Ki,Zi,Xi,nr,ar,sr,tr,er,or,pr,cr,lr,ir,rr,ur,kr,hr,dr,fr,mr,gr,vr,yr,br,Er,wr,Ir,xr,_r,Or,Sr,Cr,jr,Pr,Ar,Tr,$r,Dr,Lr,Hr,Rr,Mr,Nr,Wr,qr,Br,Fr,zr,Ur,Gr,Jr,Vr,Yr,Qr,Kr,Zr,Xr,nu,au,su,tu,eu,ou,pu,cu,lu,iu,ru,uu,ku,hu,du,fu,mu,gu,vu,yu,bu,Eu,wu,Iu,xu,_u,Ou,Su,Cu,ju,Pu,Au,Tu,$u,Du,Lu,Hu,Ru,Mu,Nu,Wu,qu,Bu,Fu,zu,Uu,Gu,Ju,Vu,Yu,Qu,Ku,Zu,Xu,nk,ak,sk,tk,ek,ok,pk,ck,lk,ik,rk,uk,kk,hk,dk,fk,mk,gk,vk,yk,bk,Ek,wk,Ik,xk,_k,Ok,Sk,Ck,jk,Pk,Ak,Tk,$k,Dk,Lk,Hk,Rk,Mk,Nk,Wk,qk,Bk,Fk,zk,Uk,Gk,Jk,Vk,Yk,Qk,Kk,Zk,Xk,nh,ah,sh,th,eh,oh,ph,ch,lh,ih,rh,uh,kh,hh,dh,fh,mh,gh,vh,yh,bh,Eh,wh,Ih,xh,_h,Oh,Sh,Ch,jh,Ph,Ah,Th,$h,Dh,Lh,Hh,Rh,Mh,Nh,Wh,qh,Bh,Fh,zh,Uh,Gh,Jh,Vh,Yh,Qh,Kh,Zh,Xh,nd,ad,sd,td,ed,od,pd,cd,ld,id,rd,ud,kd,hd,dd,fd,md,gd,vd,yd,bd,Ed,wd,Id,xd,_d,Od,Sd,Cd,jd,Pd,Ad,Td;return{c(){s=h("section"),t=h("ul"),e=h("li"),o=h("a"),p=f("Background"),c=h("li"),l=h("a"),k=f("The story begins"),d=h("li"),g=h("a"),I=f("Verifying the bug"),x=h("li"),_=h("a"),O=f("Investigating the bug"),S=h("li"),C=h("a"),j=f("Fixing the bug"),P=h("li"),A=h("a"),T=f("Submitting the fix"),$=m(),D=h("section"),L=h("h2"),H=h("a"),R=f("Background"),M=m(),N=h("p"),W=f("As Svelte gains more attention, I find that more and more people are interested in contributing to Svelte."),q=m(),B=h("p"),F=f("Of course, contributing to Svelte, does not mean to contribute only in code, it could be:"),z=m(),U=h("ul"),G=h("li"),J=f("answering questions about Svelte, on social media, Stack Overflow, or "),V=h("a"),Y=f("Discord"),Q=m(),K=h("li"),Z=f("improving Svelte docs, or write tutorials and articles about Svelte"),X=m(),nn=h("li"),an=f("organising and speaking in meetups about Svelte"),sn=m(),tn=h("p"),en=f("For those who want to contribute in code, most people are unsure where to start. So I wrote "),on=h("a"),pn=f("The Svelte Compiler Handbook"),cn=f(" as an overview of the Svelte source code."),ln=m(),rn=h("p"),un=f("However, today, I want to try a different tone."),kn=m(),hn=h("p"),dn=f("I am going to tell you an anecdote on how I investigated and fixed a bug in Svelte."),fn=m(),mn=h("p"),gn=f("I documented down my train of thoughts as detailed as possible."),vn=m(),yn=h("p"),bn=f("I hope this gives anyone who is reading, a glimpse on how to work on the Svelte source code."),En=m(),wn=h("section"),In=h("h2"),xn=h("a"),_n=f("The story begins"),On=m(),Sn=h("p"),Cn=f("I was combing through "),jn=h("a"),Pn=f("bugs on GitHub"),An=f(", and found this rather interesting bug:"),Tn=m(),$n=h("hr"),Dn=m(),Ln=h("p"),Hn=h("strong"),Rn=f("Select multiple value does not get set with spread props "),Mn=h("a"),Nn=f("#4392"),Wn=m(),qn=h("p"),Bn=f("Adding any type of spread, even an empty object "),Fn=h("code"),zn=f("{...{}}"),Un=f(", causes the value not to be set:"),Gn=m(),Jn=h("pre"),Vn=m(),Yn=h("p"),Qn=f("To reproduce: "),Kn=h("a"),Zn=f("REPL"),Xn=f("."),na=m(),aa=h("hr"),sa=m(),ta=h("section"),ea=h("h2"),oa=h("a"),pa=f("Verifying the bug"),ca=m(),la=h("p"),ia=f("I clicked into the REPL and tried to understand about the bug."),ra=m(),ua=h("p"),ka=f("I found that if the "),ha=h("code"),da=f("<select multiple>"),fa=f(" has spread attribute "),ma=h("code"),ga=f("{...any}"),va=f(", the "),ya=h("code"),ba=f("value"),Ea=f(" attribute will not be reactive. Changes in the value of "),wa=h("code"),Ia=f("value"),xa=f(" will not be reflected to the "),_a=h("code"),Oa=f("<select>"),Sa=f("."),Ca=m(),ja=h("p"),Pa=f("I noticed the REPL link uses the version "),Aa=h("code"),Ta=f("3.18.1"),$a=f(", it's not the latest version of Svelte. At the point of writing, Svelte is at "),Da=h("strong"),La=f("3.22.3"),Ha=f(". I tried removing the "),Ra=h("code"),Ma=f("?version=3.18.1"),Na=f(" from the query params to verify whether the bug has fixed, and realised that the bug is still there. (Great! Something interesting to investigate into.)"),Wa=m(),qa=h("p"),Ba=f("To understand the current status of the issue, I read through the comments. According to "),Fa=h("a"),za=f("Conduitry"),Ua=f(", the issue is related to "),Ga=h("strong"),Ja=f("Radio/checkbox input with bind:group and spread props makes variable undefined"),Va=m(),Ya=h("a"),Qa=f("#3680"),Ka=f(" and can be fixed together. However, the issue "),Za=h("a"),Xa=f("#3680"),ns=f(" was fixed and closed, yet this issue is still open."),as=m(),ss=h("p"),ts=f("Nevertheless, I read through "),es=h("a"),os=f("the PR"),ps=f(" for the closed issue "),cs=h("a"),ls=f("#3680"),is=f(", roughly understand how it was fixed and hopefully it can give me some inspirations on this issue."),rs=m(),us=h("section"),ks=h("h2"),hs=h("a"),ds=f("Investigating the bug"),fs=m(),ms=h("p"),gs=f("Once I verified that the behavior described in the issue is unexpected and reproducible in the latest version of Svelte, I copied the REPL code into my local machine to investigate."),vs=m(),ys=h("p"),bs=f("I have a "),Es=h("code"),ws=f("test-svelte"),Is=f(" folder ready in my local machine, where I created using "),xs=h("a"),_s=f("Svelte Template"),Os=f(". I have "),Ss=h("code"),Cs=f("npm link"),js=f("ed my local Svelte clone to the "),Ps=h("code"),As=f("test-svelte"),Ts=f(" folder, so I can rebuild "),$s=h("code"),Ds=f("test-svelte"),Ls=f(" anytime with the latest changes done to my Svelte clone."),Hs=m(),Rs=h("pre"),Ms=m(),Ns=h("p"),Ws=f("I have "),qs=h("code"),Bs=f("yarn dev"),Fs=f(" running in the Svelte folder, so any changes I make gets compiled immediately."),zs=m(),Us=h("p"),Gs=f("I prefer to "),Js=h("strong"),Vs=f("build"),Ys=m(),Qs=h("code"),Ks=f("test-svelte"),Zs=f(" and serve it with "),Xs=h("a"),nt=f("http-server"),at=f(" rather than start a dev server "),st=h("code"),tt=f("test-svelte"),et=f(" in watch mode. That allows me to"),ot=m(),pt=h("ul"),ct=h("li"),lt=f("Run the "),it=h("code"),rt=f("http-server"),ut=f(" in the background while tweaking the Svelte code or the "),kt=h("code"),ht=f("test-svelte"),dt=f(" app."),ft=m(),mt=h("li"),gt=f("Not having to restart the dev server whenever I've made changes to the Svelte code"),vt=m(),yt=h("li"),bt=f("Able to inspect and modify "),Et=h("code"),wt=f("bundle.js"),It=f(" without worrying that accidentaly save in the "),xt=h("code"),_t=f("test-svelte"),Ot=f(" app will overwrite the "),St=h("code"),Ct=f("bundle.js"),jt=m(),Pt=h("p"),At=f("Looking at the different "),Tt=h("code"),$t=f("bundle.js"),Dt=f(" generated from with "),Lt=h("code"),Ht=f("{...spread}"),Rt=f(" attributes and without spread attributes"),Mt=m(),Nt=h("pre"),Wt=m(),qt=h("p"),Bt=f("I found the following diffs in the bundled output:"),Ft=m(),zt=h("pre"),Ut=m(),Gt=h("p"),Jt=f("Well, I know I havn't cover how spread attribute works in any of my "),Vt=h("a"),Yt=f('"Compile Svelte in your Head"'),Qt=f(" articles, but the general idea is that, Svelte builds an array of attributes, and then apply it to the element / Component."),Kt=m(),Zt=h("p"),Xt=f("For example, if we write the following in Svlete"),ne=m(),ae=h("pre"),se=m(),te=h("p"),ee=f("It gets compiled to something like this:"),oe=m(),pe=h("pre"),ce=m(),le=h("p"),ie=f("So, this roughly explains the additional code added into the "),re=h("code"),ue=f("bundle.js"),ke=f(" for handling spread attributes."),he=m(),de=h("p"),fe=f("However the code that is removed, is something I am not familiar with."),me=m(),ge=h("pre"),ve=m(),ye=h("p"),be=f("It seems like we are trying to set "),Ee=h("code"),we=f("option.selected"),Ie=f(" after we mount the "),xe=h("code"),_e=f("<select>"),Oe=f(" element. Not sure how important is that to us."),Se=m(),Ce=h("p"),je=f("To verify that the bug is because that the above code snippet is missing when having a spread attribute, I tried adding the code snippet into the "),Pe=h("code"),Ae=f("bundle.js"),Te=f(" manually, and refresh the page."),$e=m(),De=h("pre"),Le=m(),He=h("p"),Re=f("Instead of "),Me=h("code"),Ne=f("~select_value_value.indexOf(...)"),We=f(", I changed it to "),qe=h("code"),Be=f("~ctx[0].indexOf(...)"),Fe=f(", as "),ze=h("code"),Ue=f("select_value_value"),Ge=f(" wasn't created when using spread attribute."),Je=m(),Ve=h("p"),Ye=f("...and it works!"),Qe=m(),Ke=h("p"),Ze=h("picture"),Xe=h("source"),no=h("source"),ao=h("img"),so=m(),to=h("p"),eo=f("So, now we know that the bug is caused by missing setting "),oo=h("code"),po=f("option.selected"),co=f(" on mount, now its time to figure out what the code snippet is not generated when there's a spread attribute."),lo=m(),io=h("p"),ro=f("To quickly find out why something is not generated, I tried to look for where it is generated, figuring out probably whether certain condition was not set correctly to cause the Svelte compiler to omit out the code snippet."),uo=m(),ko=h("p"),ho=f("To find the right place to start looking is an art. Usually I try to global search a small snippet of code that is "),fo=h("strong"),mo=f("most likely static"),go=f(", something that has no variable name, for example:"),vo=m(),yo=h("ul"),bo=h("li"),Eo=h("code"),wo=f(".indexOf(option.__value)"),Io=m(),xo=h("li"),_o=h("code"),Oo=f(".options.length;"),So=m(),Co=h("li"),jo=h("code"),Po=f(".selected = ~"),Ao=m(),To=h("p"),$o=f("The only search result I got when searching for "),Do=h("code"),Lo=f(".indexOf(option.__value)"),Ho=f(" is in "),Ro=h("a"),Mo=f("src/runtime/internal/dom.ts"),No=m(),Wo=h("pre"),qo=m(),Bo=h("p"),Fo=f("Anything within "),zo=h("code"),Uo=f("src/runtime/"),Go=f(" are helper functions that are referenced from the output code, to reduce the output code size. Hmm... probably we should reuse the "),Jo=h("code"),Vo=f("select_options"),Yo=f(" helper function:"),Qo=m(),Ko=h("pre"),Zo=m(),Xo=h("p"),np=f("Anyway, "),ap=h("code"),sp=f("src/runtime/internal/dom.ts"),tp=f(" is not where I am looking for, so I tried searching "),ep=h("code"),op=f(".options.length"),pp=m(),cp=h("pre"),lp=m(),ip=h("p"),rp=f("Yes, this is most likely where it is."),up=m(),kp=h("p"),hp=f("Firstly, let me update the "),dp=h("code"),fp=f("updater"),mp=f(" to use the "),gp=h("code"),vp=f("src/runtime/"),yp=m(),bp=h("code"),Ep=f("select_options"),wp=f(" helper instead:"),Ip=m(),xp=h("pre"),_p=m(),Op=h("p"),Sp=f("The "),Cp=h("code"),jp=f("b`...`"),Pp=f(", is called a "),Ap=h("a"),Tp=f("tagged template"),$p=f(", where the "),Dp=h("code"),Lp=f("b"),Hp=f(" is a function that takes in the template literal and return something. In this case, the "),Rp=h("code"),Mp=f("b"),Np=f(" function returns an "),Wp=h("a"),qp=f("Abstract Syntaxt Tree (AST)"),Bp=f("."),Fp=m(),zp=h("p"),Up=f("The "),Gp=h("code"),Jp=f("b"),Vp=f(" function comes from "),Yp=h("a"),Qp=f("code-red"),Kp=f(", a utility to generate a JavaScript AST node. Beside "),Zp=h("code"),Xp=f("b"),nc=f(", "),ac=h("code"),sc=f("code-red"),tc=f(" provides a few helper functions:"),ec=m(),oc=h("ul"),pc=h("li"),cc=h("code"),lc=f("b"),ic=f(" returns a block node"),rc=m(),uc=h("li"),kc=h("code"),hc=f("x"),dc=f(" returns an expression node"),fc=m(),mc=h("li"),gc=h("code"),vc=f("p"),yc=f(" returns a object property node"),bc=m(),Ec=h("p"),wc=f("These helper functions are useful in generating code in Svelte compiler, particularly because the placeholder itself can takes in another AST node:"),Ic=m(),xc=h("pre"),_c=m(),Oc=h("p"),Sc=h("code"),Cc=f("@"),jc=f(" in front of "),Pc=h("code"),Ac=f("@select_option"),Tc=f(" is a convention in Svelte, where it will "),$c=h("a"),Dc=f("get replaced"),Lc=f(" to refer to helpr functions in "),Hc=h("code"),Rc=f("src/runtime/"),Mc=f(" before writing the generated AST out:"),Nc=m(),Wc=h("pre"),qc=m(),Bc=h("p"),Fc=f("Coming back to figure out why this piece of code is not executed when there's a spread attribute,"),zc=m(),Uc=h("pre"),Gc=m(),Jc=h("p"),Vc=f("I tried adding "),Yc=h("code"),Qc=f("console.log"),Kc=f(" before the if statement, to figure out the value for "),Zc=h("code"),Xc=f("is_legacy_input_type"),nl=f(" and "),al=h("code"),sl=f("is_select_value_attribute"),tl=f(":"),el=m(),ol=h("pre"),pl=m(),cl=h("p"),ll=f("To my surpise, there was no log. "),il=h("code"),rl=f("AttributeWrapper#render"),ul=f(" wasn't executed."),kl=m(),hl=h("p"),dl=f("I tried removing the spread attribute, and verified from the log that the "),fl=h("code"),ml=f("AttributeWrapper#render"),gl=f(" method was indeed executed when there's no spread attribute."),vl=m(),yl=h("p"),bl=f("To figure out the caller of the "),El=h("code"),wl=f("AttributeWrapper#render"),Il=f(" method, I added "),xl=h("code"),_l=f("console.trace"),Ol=f(" at the top of the method:"),Sl=m(),Cl=h("pre"),jl=m(),Pl=h("pre"),Al=m(),Tl=h("p"),$l=f("This brought me to "),Dl=h("a"),Ll=f("src/compiler/compile/render_dom/wrappers/Element/index.ts"),Hl=m(),Rl=h("pre"),Ml=m(),Nl=h("p"),Wl=f("If there's a spread attribute, it will call the "),ql=h("code"),Bl=f("this.node.attributes.some(attr => attr.is_spread)"),Fl=f(" method instead of calling "),zl=h("code"),Ul=f("attribute.render(block)"),Gl=f(", so that's probably why "),Jl=h("code"),Vl=f("AttributeWrapper#render"),Yl=f(" wasn't called."),Ql=m(),Kl=h("p"),Zl=f("I looked into the method "),Xl=h("code"),ni=f("add_spread_attributes"),ai=f(", found out it contain only the code about handling spread attributes as I explained earlier. It didn't have any code related to "),si=h("code"),ti=f("select_options"),ei=f(", so I figured that, maybe "),oi=h("code"),pi=f("<select multiple>"),ci=f(" with spread attribute is an edge case that wasn't handled currently at all."),li=m(),ii=h("p"),ri=f("So, I tried to add a special check for this case at the bottom of the "),ui=h("code"),ki=f("add_spread_attributes"),hi=f(" method:"),di=m(),fi=h("pre"),mi=m(),gi=h("p"),vi=f("As mentioned in the "),yi=h("a"),bi=f("The Svelte Compiler Handbook"),Ei=f(", a "),wi=h("code"),Ii=f("block"),xi=f(" is where it keeps the code to generate the "),_i=h("a"),Oi=h("code"),Si=f("create_fragment"),Ci=f(" function. The return object of the "),ji=h("code"),Pi=f("create_fragment"),Ai=f(" function contains various method as mentioned in "),Ti=h("a"),$i=f("Compile Svelte in your Head"),Di=f(", such as "),Li=h("code"),Hi=f("c()"),Ri=f(", "),Mi=h("code"),Ni=f("m()"),Wi=f(" and "),qi=h("code"),Bi=f("d()"),Fi=f(". To add code into different method, you can push them into the array in "),zi=h("code"),Ui=f("block.chunks"),Gi=f(", for example:"),Ji=m(),Vi=h("pre"),Yi=m(),Qi=h("p"),Ki=f("I tried adding "),Zi=h("code"),Xi=f("@select_options(...)"),nr=f(" into the "),ar=h("code"),sr=f("m()"),tr=f(" method and yup, the "),er=h("code"),or=f("<select>"),pr=f(" element is pre-selected correctly!"),cr=m(),lr=h("section"),ir=h("h2"),rr=h("a"),ur=f("Fixing the bug"),kr=m(),hr=h("p"),dr=f("To ensure the bug is fixed, I need to come up with a test."),fr=m(),mr=h("p"),gr=f("Usually I come up with test cases that try to entail various scenario I can imagine."),vr=m(),yr=h("p"),br=f("In this example, we've manually tested the case where the "),Er=h("code"),wr=f("<select multiple {value} {...{}}>"),Ir=f(", the value is set correctly during initialisation. but have we check the case where:"),xr=m(),_r=h("ul"),Or=h("li"),Sr=f("we update the value of "),Cr=h("code"),jr=f("value"),Pr=f(", will the "),Ar=h("code"),Tr=f("<select>"),$r=f(" get updated accordingly?"),Dr=m(),Lr=h("li"),Hr=f("if the value is overriden by the spreaded attribute, eg "),Rr=h("code"),Mr=f("<select mutliple {value} { ...{value: []} }>"),Nr=f("?"),Wr=m(),qr=h("p"),Br=f("Ideally, the test cases come up should be failed before the fix, and passed after the fix."),Fr=m(),zr=h("p"),Ur=f("So here's the test case I came up:"),Gr=m(),Jr=h("pre"),Vr=m(),Yr=h("p"),Qr=f("I can check and uncheck the checkbox to change the value of "),Kr=h("code"),Zr=f("value"),Xr=f(" to verify the the "),nu=h("code"),au=f("value"),su=f(" is reactive, and "),tu=h("code"),eu=f("<select>"),ou=f(" will get updated accordingly."),pu=m(),cu=h("p"),lu=f("Besides that, I exported "),iu=h("code"),ru=f("spread"),uu=f(", so that I can change the object to something object to contain "),ku=h("code"),hu=f("value"),du=f(", eg: "),fu=h("code"),mu=f("{ value: [] }"),gu=f(", and see how "),vu=h("code"),yu=f("<select>"),bu=f(" will update accordingly. Make sure that our fix not just work with "),Eu=h("code"),wu=f("value"),Iu=f(" attribute, and also when the "),xu=h("code"),_u=f("value"),Ou=f(" is spreaded into "),Su=h("code"),Cu=f("<select>"),ju=f("."),Pu=m(),Au=h("p"),Tu=f("You may think that we are familiar with our fix, we know what it will fix, what it will not fix, do we need think up and write all the edge cases?"),$u=m(),Du=h("p"),Lu=f("Well, I think you should. Future you will thank the present you when he encounter a fail test, that just mean his change may have an unintentional regressional change. If you don't have the test case, the future you will never know what edge case he didn't accounted for."),Hu=m(),Ru=h("p"),Mu=f("Runtime test cases are added into "),Nu=h("code"),Wu=f("test/runtime/samples/"),qu=f(". Each folder represent 1 test case. Inside the folder, the component to be tested is named "),Bu=h("code"),Fu=f("App.svelte"),zu=f(", and the test case is written "),Uu=h("code"),Gu=f("_config.js"),Ju=f("."),Vu=m(),Yu=h("p"),Qu=h("code"),Ku=f("_config.js"),Zu=f(" default exports a object:"),Xu=m(),nk=h("pre"),ak=m(),sk=h("p"),tk=f("An example of test case of unchecking the checkbox, and verify "),ek=h("code"),ok=f("<select>"),pk=f(" value get updated"),ck=m(),lk=h("pre"),ik=m(),rk=h("p"),uk=f("To run only this test, so that we can focus on ensuring the test case pass, we can set "),kk=h("code"),hk=f("solo: true"),dk=f(":"),fk=m(),mk=h("pre"),gk=m(),vk=h("p"),yk=h("strong"),bk=f("Quick tip:"),Ek=f(" running "),wk=h("code"),Ik=f("npm run test"),xk=f(" will build Svelte code first before executing the test. If you are like me, running "),_k=h("code"),Ok=f("npm run dev"),Sk=f(" on the background, Svelte code is build on every code change. So, "),Ck=h("code"),jk=f("npm run quicktest"),Pk=f(" would allow you to skip the "),Ak=h("code"),Tk=f("pretest"),$k=f(" build, and run the test suite immediately."),Dk=m(),Lk=h("p"),Hk=f("With the test, I realised that I didn't handle the case when the "),Rk=h("code"),Mk=f("value"),Nk=f(" is updated."),Wk=m(),qk=h("p"),Bk=f("So I guess what I needed to do is to add the same code in the "),Fk=h("code"),zk=f("p()"),Uk=f(" (update) method too!"),Gk=m(),Jk=h("pre"),Vk=m(),Yk=h("p"),Qk=f("Well, of course in this way, the "),Kk=h("code"),Zk=f("select_options"),Xk=f(" get executed unconditionally whenever any variable is updated."),nh=m(),ah=h("p"),sh=f("I need to make sure that the "),th=h("code"),eh=f("select_options(...)"),oh=f(" inside the "),ph=h("code"),ch=f("p()"),lh=f(" method get executed only when the value of "),ih=h("code"),rh=f("value"),uh=f(" changes, and also probably when "),kh=h("code"),hh=f("spread"),dh=f(" changes too, because it could potentially override the value of "),fh=h("code"),mh=f("value"),gh=f("."),vh=m(),yh=h("p"),bh=f("If you've read "),Eh=h("a"),wh=f("Compile Svelte in your Head - Bitmask in Svelte"),Ih=f(", you know that Svelte uses bitmask to check any variable changes."),xh=m(),_h=h("p"),Oh=f("How do I know what is the bitmask to use in this case, well I dont have to."),Sh=m(),Ch=h("p"),jh=f("I can use "),Ph=h("a"),Ah=h("code"),Th=f("renderer.dirty(dependencies)"),$h=f(" to help me with that:"),Dh=m(),Lh=h("pre"),Hh=m(),Rh=h("p"),Mh=f("Next, I need to figure out what are the dependencies to be included. In this particular case, the dependencies of all attributes have to be taken consideration, because it is hard to tell which one would be eventually applied due to the spread attribute."),Nh=m(),Wh=h("pre"),qh=m(),Bh=h("p"),Fh=f("After a few tweaks, finally I passed all my test cases, and its time to create a pull request!"),zh=m(),Uh=h("section"),Gh=h("h2"),Jh=h("a"),Vh=f("Submitting the fix"),Yh=m(),Qh=h("p"),Kh=f("Before pushing the fix to remote, it is important to make sure that all the lints and typescript definitions are correct. You can run "),Zh=h("code"),Xh=f("npm run lint --fixed"),nd=f(" for linting, and "),ad=h("code"),sd=f("npm run tsd"),td=f(" to generate typescript definition."),ed=m();od=h("p"),pd=f("If you are unsure on how to create a pull request, you can check out "),cd=h("a"),ld=f("How to make your first pull request on GitHub"),id=f("."),rd=m(),ud=h("p"),kd=f("I pushed my branch and created a "),hd=h("a"),dd=f("Pull Request to Svelte"),fd=f(", and now I am waiting for feedback and for it to get merged."),md=m(),gd=h("p"),vd=f("Svelte is not maintained by full-time maintainers, everyone has their full-time job, so please be patient and be nice."),yd=m(),bd=h("hr"),Ed=m(),wd=h("p"),Id=f("If you wish to learn more about Svelte, "),xd=h("a"),_d=f("follow me on Twitter"),Od=f("."),Sd=m(),Cd=h("p"),jd=f("If you have anything unclear about this article, find me on "),Pd=h("a"),Ad=f("Twitter"),Td=f(" too!"),this.h()},l(n){s=b(n,"SECTION",{});var a=y(s);t=b(a,"UL",{class:!0,id:!0,role:!0,"aria-label":!0});var i=y(t);e=b(i,"LI",{});var r=y(e);o=b(r,"A",{href:!0});var h=y(o);p=E(h,"Background"),h.forEach(u),r.forEach(u),c=b(i,"LI",{});var f=y(c);l=b(f,"A",{href:!0});var m=y(l);k=E(m,"The story begins"),m.forEach(u),f.forEach(u),d=b(i,"LI",{});var v=y(d);g=b(v,"A",{href:!0});var $d=y(g);I=E($d,"Verifying the bug"),$d.forEach(u),v.forEach(u),x=b(i,"LI",{});var Dd=y(x);_=b(Dd,"A",{href:!0});var Ld=y(_);O=E(Ld,"Investigating the bug"),Ld.forEach(u),Dd.forEach(u),S=b(i,"LI",{});var Hd=y(S);C=b(Hd,"A",{href:!0});var Rd=y(C);j=E(Rd,"Fixing the bug"),Rd.forEach(u),Hd.forEach(u),P=b(i,"LI",{});var Md=y(P);A=b(Md,"A",{href:!0});var Nd=y(A);T=E(Nd,"Submitting the fix"),Nd.forEach(u),Md.forEach(u),i.forEach(u),a.forEach(u),$=w(n),D=b(n,"SECTION",{});var Wd=y(D);L=b(Wd,"H2",{});var qd=y(L);H=b(qd,"A",{href:!0,id:!0});var Bd=y(H);R=E(Bd,"Background"),Bd.forEach(u),qd.forEach(u),M=w(Wd),N=b(Wd,"P",{});var Fd=y(N);W=E(Fd,"As Svelte gains more attention, I find that more and more people are interested in contributing to Svelte."),Fd.forEach(u),q=w(Wd),B=b(Wd,"P",{});var zd=y(B);F=E(zd,"Of course, contributing to Svelte, does not mean to contribute only in code, it could be:"),zd.forEach(u),z=w(Wd),U=b(Wd,"UL",{});var Ud=y(U);G=b(Ud,"LI",{});var Gd=y(G);J=E(Gd,"answering questions about Svelte, on social media, Stack Overflow, or "),V=b(Gd,"A",{href:!0,rel:!0});var Jd=y(V);Y=E(Jd,"Discord"),Jd.forEach(u),Gd.forEach(u),Q=w(Ud),K=b(Ud,"LI",{});var Vd=y(K);Z=E(Vd,"improving Svelte docs, or write tutorials and articles about Svelte"),Vd.forEach(u),X=w(Ud),nn=b(Ud,"LI",{});var Yd=y(nn);an=E(Yd,"organising and speaking in meetups about Svelte"),Yd.forEach(u),Ud.forEach(u),sn=w(Wd),tn=b(Wd,"P",{});var Qd=y(tn);en=E(Qd,"For those who want to contribute in code, most people are unsure where to start. So I wrote "),on=b(Qd,"A",{href:!0});var Kd=y(on);pn=E(Kd,"The Svelte Compiler Handbook"),Kd.forEach(u),cn=E(Qd," as an overview of the Svelte source code."),Qd.forEach(u),ln=w(Wd),rn=b(Wd,"P",{});var Zd=y(rn);un=E(Zd,"However, today, I want to try a different tone."),Zd.forEach(u),kn=w(Wd),hn=b(Wd,"P",{});var Xd=y(hn);dn=E(Xd,"I am going to tell you an anecdote on how I investigated and fixed a bug in Svelte."),Xd.forEach(u),fn=w(Wd),mn=b(Wd,"P",{});var nf=y(mn);gn=E(nf,"I documented down my train of thoughts as detailed as possible."),nf.forEach(u),vn=w(Wd),yn=b(Wd,"P",{});var af=y(yn);bn=E(af,"I hope this gives anyone who is reading, a glimpse on how to work on the Svelte source code."),af.forEach(u),Wd.forEach(u),En=w(n),wn=b(n,"SECTION",{});var sf=y(wn);In=b(sf,"H2",{});var tf=y(In);xn=b(tf,"A",{href:!0,id:!0});var ef=y(xn);_n=E(ef,"The story begins"),ef.forEach(u),tf.forEach(u),On=w(sf),Sn=b(sf,"P",{});var of=y(Sn);Cn=E(of,"I was combing through "),jn=b(of,"A",{href:!0,rel:!0});var pf=y(jn);Pn=E(pf,"bugs on GitHub"),pf.forEach(u),An=E(of,", and found this rather interesting bug:"),of.forEach(u),Tn=w(sf),$n=b(sf,"HR",{}),Dn=w(sf),Ln=b(sf,"P",{});var cf=y(Ln);Hn=b(cf,"STRONG",{});var lf=y(Hn);Rn=E(lf,"Select multiple value does not get set with spread props "),Mn=b(lf,"A",{href:!0,rel:!0});var rf=y(Mn);Nn=E(rf,"#4392"),rf.forEach(u),lf.forEach(u),cf.forEach(u),Wn=w(sf),qn=b(sf,"P",{});var uf=y(qn);Bn=E(uf,"Adding any type of spread, even an empty object "),Fn=b(uf,"CODE",{});var kf=y(Fn);zn=E(kf,"{...{}}"),kf.forEach(u),Un=E(uf,", causes the value not to be set:"),uf.forEach(u),Gn=w(sf),Jn=b(sf,"PRE",{class:!0}),y(Jn).forEach(u),Vn=w(sf),Yn=b(sf,"P",{});var hf=y(Yn);Qn=E(hf,"To reproduce: "),Kn=b(hf,"A",{href:!0,rel:!0});var df=y(Kn);Zn=E(df,"REPL"),df.forEach(u),Xn=E(hf,"."),hf.forEach(u),na=w(sf),aa=b(sf,"HR",{}),sf.forEach(u),sa=w(n),ta=b(n,"SECTION",{});var ff=y(ta);ea=b(ff,"H2",{});var mf=y(ea);oa=b(mf,"A",{href:!0,id:!0});var gf=y(oa);pa=E(gf,"Verifying the bug"),gf.forEach(u),mf.forEach(u),ca=w(ff),la=b(ff,"P",{});var vf=y(la);ia=E(vf,"I clicked into the REPL and tried to understand about the bug."),vf.forEach(u),ra=w(ff),ua=b(ff,"P",{});var yf=y(ua);ka=E(yf,"I found that if the "),ha=b(yf,"CODE",{});var bf=y(ha);da=E(bf,"<select multiple>"),bf.forEach(u),fa=E(yf," has spread attribute "),ma=b(yf,"CODE",{});var Ef=y(ma);ga=E(Ef,"{...any}"),Ef.forEach(u),va=E(yf,", the "),ya=b(yf,"CODE",{});var wf=y(ya);ba=E(wf,"value"),wf.forEach(u),Ea=E(yf," attribute will not be reactive. Changes in the value of "),wa=b(yf,"CODE",{});var If=y(wa);Ia=E(If,"value"),If.forEach(u),xa=E(yf," will not be reflected to the "),_a=b(yf,"CODE",{});var xf=y(_a);Oa=E(xf,"<select>"),xf.forEach(u),Sa=E(yf,"."),yf.forEach(u),Ca=w(ff),ja=b(ff,"P",{});var _f=y(ja);Pa=E(_f,"I noticed the REPL link uses the version "),Aa=b(_f,"CODE",{});var Of=y(Aa);Ta=E(Of,"3.18.1"),Of.forEach(u),$a=E(_f,", it's not the latest version of Svelte. At the point of writing, Svelte is at "),Da=b(_f,"STRONG",{});var Sf=y(Da);La=E(Sf,"3.22.3"),Sf.forEach(u),Ha=E(_f,". I tried removing the "),Ra=b(_f,"CODE",{});var Cf=y(Ra);Ma=E(Cf,"?version=3.18.1"),Cf.forEach(u),Na=E(_f," from the query params to verify whether the bug has fixed, and realised that the bug is still there. (Great! Something interesting to investigate into.)"),_f.forEach(u),Wa=w(ff),qa=b(ff,"P",{});var jf=y(qa);Ba=E(jf,"To understand the current status of the issue, I read through the comments. According to "),Fa=b(jf,"A",{href:!0,rel:!0});var Pf=y(Fa);za=E(Pf,"Conduitry"),Pf.forEach(u),Ua=E(jf,", the issue is related to "),Ga=b(jf,"STRONG",{});var Af=y(Ga);Ja=E(Af,"Radio/checkbox input with bind:group and spread props makes variable undefined"),Af.forEach(u),Va=w(jf),Ya=b(jf,"A",{href:!0,rel:!0});var Tf=y(Ya);Qa=E(Tf,"#3680"),Tf.forEach(u),Ka=E(jf," and can be fixed together. However, the issue "),Za=b(jf,"A",{href:!0,rel:!0});var $f=y(Za);Xa=E($f,"#3680"),$f.forEach(u),ns=E(jf," was fixed and closed, yet this issue is still open."),jf.forEach(u),as=w(ff),ss=b(ff,"P",{});var Df=y(ss);ts=E(Df,"Nevertheless, I read through "),es=b(Df,"A",{href:!0,rel:!0});var Lf=y(es);os=E(Lf,"the PR"),Lf.forEach(u),ps=E(Df," for the closed issue "),cs=b(Df,"A",{href:!0,rel:!0});var Hf=y(cs);ls=E(Hf,"#3680"),Hf.forEach(u),is=E(Df,", roughly understand how it was fixed and hopefully it can give me some inspirations on this issue."),Df.forEach(u),ff.forEach(u),rs=w(n),us=b(n,"SECTION",{});var Rf=y(us);ks=b(Rf,"H2",{});var Mf=y(ks);hs=b(Mf,"A",{href:!0,id:!0});var Nf=y(hs);ds=E(Nf,"Investigating the bug"),Nf.forEach(u),Mf.forEach(u),fs=w(Rf),ms=b(Rf,"P",{});var Wf=y(ms);gs=E(Wf,"Once I verified that the behavior described in the issue is unexpected and reproducible in the latest version of Svelte, I copied the REPL code into my local machine to investigate."),Wf.forEach(u),vs=w(Rf),ys=b(Rf,"P",{});var qf=y(ys);bs=E(qf,"I have a "),Es=b(qf,"CODE",{});var Bf=y(Es);ws=E(Bf,"test-svelte"),Bf.forEach(u),Is=E(qf," folder ready in my local machine, where I created using "),xs=b(qf,"A",{href:!0,rel:!0});var Ff=y(xs);_s=E(Ff,"Svelte Template"),Ff.forEach(u),Os=E(qf,". I have "),Ss=b(qf,"CODE",{});var zf=y(Ss);Cs=E(zf,"npm link"),zf.forEach(u),js=E(qf,"ed my local Svelte clone to the "),Ps=b(qf,"CODE",{});var Uf=y(Ps);As=E(Uf,"test-svelte"),Uf.forEach(u),Ts=E(qf," folder, so I can rebuild "),$s=b(qf,"CODE",{});var Gf=y($s);Ds=E(Gf,"test-svelte"),Gf.forEach(u),Ls=E(qf," anytime with the latest changes done to my Svelte clone."),qf.forEach(u),Hs=w(Rf),Rs=b(Rf,"PRE",{class:!0}),y(Rs).forEach(u),Ms=w(Rf),Ns=b(Rf,"P",{});var Jf=y(Ns);Ws=E(Jf,"I have "),qs=b(Jf,"CODE",{});var Vf=y(qs);Bs=E(Vf,"yarn dev"),Vf.forEach(u),Fs=E(Jf," running in the Svelte folder, so any changes I make gets compiled immediately."),Jf.forEach(u),zs=w(Rf),Us=b(Rf,"P",{});var Yf=y(Us);Gs=E(Yf,"I prefer to "),Js=b(Yf,"STRONG",{});var Qf=y(Js);Vs=E(Qf,"build"),Qf.forEach(u),Ys=w(Yf),Qs=b(Yf,"CODE",{});var Kf=y(Qs);Ks=E(Kf,"test-svelte"),Kf.forEach(u),Zs=E(Yf," and serve it with "),Xs=b(Yf,"A",{href:!0,rel:!0});var Zf=y(Xs);nt=E(Zf,"http-server"),Zf.forEach(u),at=E(Yf," rather than start a dev server "),st=b(Yf,"CODE",{});var Xf=y(st);tt=E(Xf,"test-svelte"),Xf.forEach(u),et=E(Yf," in watch mode. That allows me to"),Yf.forEach(u),ot=w(Rf),pt=b(Rf,"UL",{});var nm=y(pt);ct=b(nm,"LI",{});var am=y(ct);lt=E(am,"Run the "),it=b(am,"CODE",{});var sm=y(it);rt=E(sm,"http-server"),sm.forEach(u),ut=E(am," in the background while tweaking the Svelte code or the "),kt=b(am,"CODE",{});var tm=y(kt);ht=E(tm,"test-svelte"),tm.forEach(u),dt=E(am," app."),am.forEach(u),ft=w(nm),mt=b(nm,"LI",{});var em=y(mt);gt=E(em,"Not having to restart the dev server whenever I've made changes to the Svelte code"),em.forEach(u),vt=w(nm),yt=b(nm,"LI",{});var om=y(yt);bt=E(om,"Able to inspect and modify "),Et=b(om,"CODE",{});var pm=y(Et);wt=E(pm,"bundle.js"),pm.forEach(u),It=E(om," without worrying that accidentaly save in the "),xt=b(om,"CODE",{});var cm=y(xt);_t=E(cm,"test-svelte"),cm.forEach(u),Ot=E(om," app will overwrite the "),St=b(om,"CODE",{});var lm=y(St);Ct=E(lm,"bundle.js"),lm.forEach(u),om.forEach(u),nm.forEach(u),jt=w(Rf),Pt=b(Rf,"P",{});var im=y(Pt);At=E(im,"Looking at the different "),Tt=b(im,"CODE",{});var rm=y(Tt);$t=E(rm,"bundle.js"),rm.forEach(u),Dt=E(im," generated from with "),Lt=b(im,"CODE",{});var um=y(Lt);Ht=E(um,"{...spread}"),um.forEach(u),Rt=E(im," attributes and without spread attributes"),im.forEach(u),Mt=w(Rf),Nt=b(Rf,"PRE",{class:!0}),y(Nt).forEach(u),Wt=w(Rf),qt=b(Rf,"P",{});var km=y(qt);Bt=E(km,"I found the following diffs in the bundled output:"),km.forEach(u),Ft=w(Rf),zt=b(Rf,"PRE",{class:!0}),y(zt).forEach(u),Ut=w(Rf),Gt=b(Rf,"P",{});var hm=y(Gt);Jt=E(hm,"Well, I know I havn't cover how spread attribute works in any of my "),Vt=b(hm,"A",{href:!0});var dm=y(Vt);Yt=E(dm,'"Compile Svelte in your Head"'),dm.forEach(u),Qt=E(hm," articles, but the general idea is that, Svelte builds an array of attributes, and then apply it to the element / Component."),hm.forEach(u),Kt=w(Rf),Zt=b(Rf,"P",{});var fm=y(Zt);Xt=E(fm,"For example, if we write the following in Svlete"),fm.forEach(u),ne=w(Rf),ae=b(Rf,"PRE",{class:!0}),y(ae).forEach(u),se=w(Rf),te=b(Rf,"P",{});var mm=y(te);ee=E(mm,"It gets compiled to something like this:"),mm.forEach(u),oe=w(Rf),pe=b(Rf,"PRE",{class:!0}),y(pe).forEach(u),ce=w(Rf),le=b(Rf,"P",{});var gm=y(le);ie=E(gm,"So, this roughly explains the additional code added into the "),re=b(gm,"CODE",{});var vm=y(re);ue=E(vm,"bundle.js"),vm.forEach(u),ke=E(gm," for handling spread attributes."),gm.forEach(u),he=w(Rf),de=b(Rf,"P",{});var ym=y(de);fe=E(ym,"However the code that is removed, is something I am not familiar with."),ym.forEach(u),me=w(Rf),ge=b(Rf,"PRE",{class:!0}),y(ge).forEach(u),ve=w(Rf),ye=b(Rf,"P",{});var bm=y(ye);be=E(bm,"It seems like we are trying to set "),Ee=b(bm,"CODE",{});var Em=y(Ee);we=E(Em,"option.selected"),Em.forEach(u),Ie=E(bm," after we mount the "),xe=b(bm,"CODE",{});var wm=y(xe);_e=E(wm,"<select>"),wm.forEach(u),Oe=E(bm," element. Not sure how important is that to us."),bm.forEach(u),Se=w(Rf),Ce=b(Rf,"P",{});var Im=y(Ce);je=E(Im,"To verify that the bug is because that the above code snippet is missing when having a spread attribute, I tried adding the code snippet into the "),Pe=b(Im,"CODE",{});var xm=y(Pe);Ae=E(xm,"bundle.js"),xm.forEach(u),Te=E(Im," manually, and refresh the page."),Im.forEach(u),$e=w(Rf),De=b(Rf,"PRE",{class:!0}),y(De).forEach(u),Le=w(Rf),He=b(Rf,"P",{});var _m=y(He);Re=E(_m,"Instead of "),Me=b(_m,"CODE",{});var Om=y(Me);Ne=E(Om,"~select_value_value.indexOf(...)"),Om.forEach(u),We=E(_m,", I changed it to "),qe=b(_m,"CODE",{});var Sm=y(qe);Be=E(Sm,"~ctx[0].indexOf(...)"),Sm.forEach(u),Fe=E(_m,", as "),ze=b(_m,"CODE",{});var Cm=y(ze);Ue=E(Cm,"select_value_value"),Cm.forEach(u),Ge=E(_m," wasn't created when using spread attribute."),_m.forEach(u),Je=w(Rf),Ve=b(Rf,"P",{});var jm=y(Ve);Ye=E(jm,"...and it works!"),jm.forEach(u),Qe=w(Rf),Ke=b(Rf,"P",{});var Pm=y(Ke);Ze=b(Pm,"PICTURE",{});var Am=y(Ze);Xe=b(Am,"SOURCE",{type:!0,srcset:!0}),no=b(Am,"SOURCE",{type:!0,srcset:!0}),ao=b(Am,"IMG",{title:!0,alt:!0,"data-src":!0,loading:!0}),Am.forEach(u),Pm.forEach(u),so=w(Rf),to=b(Rf,"P",{});var Tm=y(to);eo=E(Tm,"So, now we know that the bug is caused by missing setting "),oo=b(Tm,"CODE",{});var $m=y(oo);po=E($m,"option.selected"),$m.forEach(u),co=E(Tm," on mount, now its time to figure out what the code snippet is not generated when there's a spread attribute."),Tm.forEach(u),lo=w(Rf),io=b(Rf,"P",{});var Dm=y(io);ro=E(Dm,"To quickly find out why something is not generated, I tried to look for where it is generated, figuring out probably whether certain condition was not set correctly to cause the Svelte compiler to omit out the code snippet."),Dm.forEach(u),uo=w(Rf),ko=b(Rf,"P",{});var Lm=y(ko);ho=E(Lm,"To find the right place to start looking is an art. Usually I try to global search a small snippet of code that is "),fo=b(Lm,"STRONG",{});var Hm=y(fo);mo=E(Hm,"most likely static"),Hm.forEach(u),go=E(Lm,", something that has no variable name, for example:"),Lm.forEach(u),vo=w(Rf),yo=b(Rf,"UL",{});var Rm=y(yo);bo=b(Rm,"LI",{});var Mm=y(bo);Eo=b(Mm,"CODE",{});var Nm=y(Eo);wo=E(Nm,".indexOf(option.__value)"),Nm.forEach(u),Mm.forEach(u),Io=w(Rm),xo=b(Rm,"LI",{});var Wm=y(xo);_o=b(Wm,"CODE",{});var qm=y(_o);Oo=E(qm,".options.length;"),qm.forEach(u),Wm.forEach(u),So=w(Rm),Co=b(Rm,"LI",{});var Bm=y(Co);jo=b(Bm,"CODE",{});var Fm=y(jo);Po=E(Fm,".selected = ~"),Fm.forEach(u),Bm.forEach(u),Rm.forEach(u),Ao=w(Rf),To=b(Rf,"P",{});var zm=y(To);$o=E(zm,"The only search result I got when searching for "),Do=b(zm,"CODE",{});var Um=y(Do);Lo=E(Um,".indexOf(option.__value)"),Um.forEach(u),Ho=E(zm," is in "),Ro=b(zm,"A",{href:!0,rel:!0});var Gm=y(Ro);Mo=E(Gm,"src/runtime/internal/dom.ts"),Gm.forEach(u),zm.forEach(u),No=w(Rf),Wo=b(Rf,"PRE",{class:!0}),y(Wo).forEach(u),qo=w(Rf),Bo=b(Rf,"P",{});var Jm=y(Bo);Fo=E(Jm,"Anything within "),zo=b(Jm,"CODE",{});var Vm=y(zo);Uo=E(Vm,"src/runtime/"),Vm.forEach(u),Go=E(Jm," are helper functions that are referenced from the output code, to reduce the output code size. Hmm... probably we should reuse the "),Jo=b(Jm,"CODE",{});var Ym=y(Jo);Vo=E(Ym,"select_options"),Ym.forEach(u),Yo=E(Jm," helper function:"),Jm.forEach(u),Qo=w(Rf),Ko=b(Rf,"PRE",{class:!0}),y(Ko).forEach(u),Zo=w(Rf),Xo=b(Rf,"P",{});var Qm=y(Xo);np=E(Qm,"Anyway, "),ap=b(Qm,"CODE",{});var Km=y(ap);sp=E(Km,"src/runtime/internal/dom.ts"),Km.forEach(u),tp=E(Qm," is not where I am looking for, so I tried searching "),ep=b(Qm,"CODE",{});var Zm=y(ep);op=E(Zm,".options.length"),Zm.forEach(u),Qm.forEach(u),pp=w(Rf),cp=b(Rf,"PRE",{class:!0}),y(cp).forEach(u),lp=w(Rf),ip=b(Rf,"P",{});var Xm=y(ip);rp=E(Xm,"Yes, this is most likely where it is."),Xm.forEach(u),up=w(Rf),kp=b(Rf,"P",{});var ng=y(kp);hp=E(ng,"Firstly, let me update the "),dp=b(ng,"CODE",{});var ag=y(dp);fp=E(ag,"updater"),ag.forEach(u),mp=E(ng," to use the "),gp=b(ng,"CODE",{});var sg=y(gp);vp=E(sg,"src/runtime/"),sg.forEach(u),yp=w(ng),bp=b(ng,"CODE",{});var tg=y(bp);Ep=E(tg,"select_options"),tg.forEach(u),wp=E(ng," helper instead:"),ng.forEach(u),Ip=w(Rf),xp=b(Rf,"PRE",{class:!0}),y(xp).forEach(u),_p=w(Rf),Op=b(Rf,"P",{});var eg=y(Op);Sp=E(eg,"The "),Cp=b(eg,"CODE",{});var og=y(Cp);jp=E(og,"b`...`"),og.forEach(u),Pp=E(eg,", is called a "),Ap=b(eg,"A",{href:!0,rel:!0});var pg=y(Ap);Tp=E(pg,"tagged template"),pg.forEach(u),$p=E(eg,", where the "),Dp=b(eg,"CODE",{});var cg=y(Dp);Lp=E(cg,"b"),cg.forEach(u),Hp=E(eg," is a function that takes in the template literal and return something. In this case, the "),Rp=b(eg,"CODE",{});var lg=y(Rp);Mp=E(lg,"b"),lg.forEach(u),Np=E(eg," function returns an "),Wp=b(eg,"A",{href:!0,rel:!0});var ig=y(Wp);qp=E(ig,"Abstract Syntaxt Tree (AST)"),ig.forEach(u),Bp=E(eg,"."),eg.forEach(u),Fp=w(Rf),zp=b(Rf,"P",{});var rg=y(zp);Up=E(rg,"The "),Gp=b(rg,"CODE",{});var ug=y(Gp);Jp=E(ug,"b"),ug.forEach(u),Vp=E(rg," function comes from "),Yp=b(rg,"A",{href:!0,rel:!0});var kg=y(Yp);Qp=E(kg,"code-red"),kg.forEach(u),Kp=E(rg,", a utility to generate a JavaScript AST node. Beside "),Zp=b(rg,"CODE",{});var hg=y(Zp);Xp=E(hg,"b"),hg.forEach(u),nc=E(rg,", "),ac=b(rg,"CODE",{});var dg=y(ac);sc=E(dg,"code-red"),dg.forEach(u),tc=E(rg," provides a few helper functions:"),rg.forEach(u),ec=w(Rf),oc=b(Rf,"UL",{});var fg=y(oc);pc=b(fg,"LI",{});var mg=y(pc);cc=b(mg,"CODE",{});var gg=y(cc);lc=E(gg,"b"),gg.forEach(u),ic=E(mg," returns a block node"),mg.forEach(u),rc=w(fg),uc=b(fg,"LI",{});var vg=y(uc);kc=b(vg,"CODE",{});var yg=y(kc);hc=E(yg,"x"),yg.forEach(u),dc=E(vg," returns an expression node"),vg.forEach(u),fc=w(fg),mc=b(fg,"LI",{});var bg=y(mc);gc=b(bg,"CODE",{});var Eg=y(gc);vc=E(Eg,"p"),Eg.forEach(u),yc=E(bg," returns a object property node"),bg.forEach(u),fg.forEach(u),bc=w(Rf),Ec=b(Rf,"P",{});var wg=y(Ec);wc=E(wg,"These helper functions are useful in generating code in Svelte compiler, particularly because the placeholder itself can takes in another AST node:"),wg.forEach(u),Ic=w(Rf),xc=b(Rf,"PRE",{class:!0}),y(xc).forEach(u),_c=w(Rf),Oc=b(Rf,"P",{});var Ig=y(Oc);Sc=b(Ig,"CODE",{});var xg=y(Sc);Cc=E(xg,"@"),xg.forEach(u),jc=E(Ig," in front of "),Pc=b(Ig,"CODE",{});var _g=y(Pc);Ac=E(_g,"@select_option"),_g.forEach(u),Tc=E(Ig," is a convention in Svelte, where it will "),$c=b(Ig,"A",{href:!0,rel:!0});var Og=y($c);Dc=E(Og,"get replaced"),Og.forEach(u),Lc=E(Ig," to refer to helpr functions in "),Hc=b(Ig,"CODE",{});var Sg=y(Hc);Rc=E(Sg,"src/runtime/"),Sg.forEach(u),Mc=E(Ig," before writing the generated AST out:"),Ig.forEach(u),Nc=w(Rf),Wc=b(Rf,"PRE",{class:!0}),y(Wc).forEach(u),qc=w(Rf),Bc=b(Rf,"P",{});var Cg=y(Bc);Fc=E(Cg,"Coming back to figure out why this piece of code is not executed when there's a spread attribute,"),Cg.forEach(u),zc=w(Rf),Uc=b(Rf,"PRE",{class:!0}),y(Uc).forEach(u),Gc=w(Rf),Jc=b(Rf,"P",{});var jg=y(Jc);Vc=E(jg,"I tried adding "),Yc=b(jg,"CODE",{});var Pg=y(Yc);Qc=E(Pg,"console.log"),Pg.forEach(u),Kc=E(jg," before the if statement, to figure out the value for "),Zc=b(jg,"CODE",{});var Ag=y(Zc);Xc=E(Ag,"is_legacy_input_type"),Ag.forEach(u),nl=E(jg," and "),al=b(jg,"CODE",{});var Tg=y(al);sl=E(Tg,"is_select_value_attribute"),Tg.forEach(u),tl=E(jg,":"),jg.forEach(u),el=w(Rf),ol=b(Rf,"PRE",{class:!0}),y(ol).forEach(u),pl=w(Rf),cl=b(Rf,"P",{});var $g=y(cl);ll=E($g,"To my surpise, there was no log. "),il=b($g,"CODE",{});var Dg=y(il);rl=E(Dg,"AttributeWrapper#render"),Dg.forEach(u),ul=E($g," wasn't executed."),$g.forEach(u),kl=w(Rf),hl=b(Rf,"P",{});var Lg=y(hl);dl=E(Lg,"I tried removing the spread attribute, and verified from the log that the "),fl=b(Lg,"CODE",{});var Hg=y(fl);ml=E(Hg,"AttributeWrapper#render"),Hg.forEach(u),gl=E(Lg," method was indeed executed when there's no spread attribute."),Lg.forEach(u),vl=w(Rf),yl=b(Rf,"P",{});var Rg=y(yl);bl=E(Rg,"To figure out the caller of the "),El=b(Rg,"CODE",{});var Mg=y(El);wl=E(Mg,"AttributeWrapper#render"),Mg.forEach(u),Il=E(Rg," method, I added "),xl=b(Rg,"CODE",{});var Ng=y(xl);_l=E(Ng,"console.trace"),Ng.forEach(u),Ol=E(Rg," at the top of the method:"),Rg.forEach(u),Sl=w(Rf),Cl=b(Rf,"PRE",{class:!0}),y(Cl).forEach(u),jl=w(Rf),Pl=b(Rf,"PRE",{class:!0}),y(Pl).forEach(u),Al=w(Rf),Tl=b(Rf,"P",{});var Wg=y(Tl);$l=E(Wg,"This brought me to "),Dl=b(Wg,"A",{href:!0,rel:!0});var qg=y(Dl);Ll=E(qg,"src/compiler/compile/render_dom/wrappers/Element/index.ts"),qg.forEach(u),Wg.forEach(u),Hl=w(Rf),Rl=b(Rf,"PRE",{class:!0}),y(Rl).forEach(u),Ml=w(Rf),Nl=b(Rf,"P",{});var Bg=y(Nl);Wl=E(Bg,"If there's a spread attribute, it will call the "),ql=b(Bg,"CODE",{});var Fg=y(ql);Bl=E(Fg,"this.node.attributes.some(attr => attr.is_spread)"),Fg.forEach(u),Fl=E(Bg," method instead of calling "),zl=b(Bg,"CODE",{});var zg=y(zl);Ul=E(zg,"attribute.render(block)"),zg.forEach(u),Gl=E(Bg,", so that's probably why "),Jl=b(Bg,"CODE",{});var Ug=y(Jl);Vl=E(Ug,"AttributeWrapper#render"),Ug.forEach(u),Yl=E(Bg," wasn't called."),Bg.forEach(u),Ql=w(Rf),Kl=b(Rf,"P",{});var Gg=y(Kl);Zl=E(Gg,"I looked into the method "),Xl=b(Gg,"CODE",{});var Jg=y(Xl);ni=E(Jg,"add_spread_attributes"),Jg.forEach(u),ai=E(Gg,", found out it contain only the code about handling spread attributes as I explained earlier. It didn't have any code related to "),si=b(Gg,"CODE",{});var Vg=y(si);ti=E(Vg,"select_options"),Vg.forEach(u),ei=E(Gg,", so I figured that, maybe "),oi=b(Gg,"CODE",{});var Yg=y(oi);pi=E(Yg,"<select multiple>"),Yg.forEach(u),ci=E(Gg," with spread attribute is an edge case that wasn't handled currently at all."),Gg.forEach(u),li=w(Rf),ii=b(Rf,"P",{});var Qg=y(ii);ri=E(Qg,"So, I tried to add a special check for this case at the bottom of the "),ui=b(Qg,"CODE",{});var Kg=y(ui);ki=E(Kg,"add_spread_attributes"),Kg.forEach(u),hi=E(Qg," method:"),Qg.forEach(u),di=w(Rf),fi=b(Rf,"PRE",{class:!0}),y(fi).forEach(u),mi=w(Rf),gi=b(Rf,"P",{});var Zg=y(gi);vi=E(Zg,"As mentioned in the "),yi=b(Zg,"A",{href:!0});var Xg=y(yi);bi=E(Xg,"The Svelte Compiler Handbook"),Xg.forEach(u),Ei=E(Zg,", a "),wi=b(Zg,"CODE",{});var nv=y(wi);Ii=E(nv,"block"),nv.forEach(u),xi=E(Zg," is where it keeps the code to generate the "),_i=b(Zg,"A",{href:!0});var av=y(_i);Oi=b(av,"CODE",{});var sv=y(Oi);Si=E(sv,"create_fragment"),sv.forEach(u),av.forEach(u),Ci=E(Zg," function. The return object of the "),ji=b(Zg,"CODE",{});var tv=y(ji);Pi=E(tv,"create_fragment"),tv.forEach(u),Ai=E(Zg," function contains various method as mentioned in "),Ti=b(Zg,"A",{href:!0});var ev=y(Ti);$i=E(ev,"Compile Svelte in your Head"),ev.forEach(u),Di=E(Zg,", such as "),Li=b(Zg,"CODE",{});var ov=y(Li);Hi=E(ov,"c()"),ov.forEach(u),Ri=E(Zg,", "),Mi=b(Zg,"CODE",{});var pv=y(Mi);Ni=E(pv,"m()"),pv.forEach(u),Wi=E(Zg," and "),qi=b(Zg,"CODE",{});var cv=y(qi);Bi=E(cv,"d()"),cv.forEach(u),Fi=E(Zg,". To add code into different method, you can push them into the array in "),zi=b(Zg,"CODE",{});var lv=y(zi);Ui=E(lv,"block.chunks"),lv.forEach(u),Gi=E(Zg,", for example:"),Zg.forEach(u),Ji=w(Rf),Vi=b(Rf,"PRE",{class:!0}),y(Vi).forEach(u),Yi=w(Rf),Qi=b(Rf,"P",{});var iv=y(Qi);Ki=E(iv,"I tried adding "),Zi=b(iv,"CODE",{});var rv=y(Zi);Xi=E(rv,"@select_options(...)"),rv.forEach(u),nr=E(iv," into the "),ar=b(iv,"CODE",{});var uv=y(ar);sr=E(uv,"m()"),uv.forEach(u),tr=E(iv," method and yup, the "),er=b(iv,"CODE",{});var kv=y(er);or=E(kv,"<select>"),kv.forEach(u),pr=E(iv," element is pre-selected correctly!"),iv.forEach(u),Rf.forEach(u),cr=w(n),lr=b(n,"SECTION",{});var hv=y(lr);ir=b(hv,"H2",{});var dv=y(ir);rr=b(dv,"A",{href:!0,id:!0});var fv=y(rr);ur=E(fv,"Fixing the bug"),fv.forEach(u),dv.forEach(u),kr=w(hv),hr=b(hv,"P",{});var mv=y(hr);dr=E(mv,"To ensure the bug is fixed, I need to come up with a test."),mv.forEach(u),fr=w(hv),mr=b(hv,"P",{});var gv=y(mr);gr=E(gv,"Usually I come up with test cases that try to entail various scenario I can imagine."),gv.forEach(u),vr=w(hv),yr=b(hv,"P",{});var vv=y(yr);br=E(vv,"In this example, we've manually tested the case where the "),Er=b(vv,"CODE",{});var yv=y(Er);wr=E(yv,"<select multiple {value} {...{}}>"),yv.forEach(u),Ir=E(vv,", the value is set correctly during initialisation. but have we check the case where:"),vv.forEach(u),xr=w(hv),_r=b(hv,"UL",{});var bv=y(_r);Or=b(bv,"LI",{});var Ev=y(Or);Sr=E(Ev,"we update the value of "),Cr=b(Ev,"CODE",{});var wv=y(Cr);jr=E(wv,"value"),wv.forEach(u),Pr=E(Ev,", will the "),Ar=b(Ev,"CODE",{});var Iv=y(Ar);Tr=E(Iv,"<select>"),Iv.forEach(u),$r=E(Ev," get updated accordingly?"),Ev.forEach(u),Dr=w(bv),Lr=b(bv,"LI",{});var xv=y(Lr);Hr=E(xv,"if the value is overriden by the spreaded attribute, eg "),Rr=b(xv,"CODE",{});var _v=y(Rr);Mr=E(_v,"<select mutliple {value} { ...{value: []} }>"),_v.forEach(u),Nr=E(xv,"?"),xv.forEach(u),bv.forEach(u),Wr=w(hv),qr=b(hv,"P",{});var Ov=y(qr);Br=E(Ov,"Ideally, the test cases come up should be failed before the fix, and passed after the fix."),Ov.forEach(u),Fr=w(hv),zr=b(hv,"P",{});var Sv=y(zr);Ur=E(Sv,"So here's the test case I came up:"),Sv.forEach(u),Gr=w(hv),Jr=b(hv,"PRE",{class:!0}),y(Jr).forEach(u),Vr=w(hv),Yr=b(hv,"P",{});var Cv=y(Yr);Qr=E(Cv,"I can check and uncheck the checkbox to change the value of "),Kr=b(Cv,"CODE",{});var jv=y(Kr);Zr=E(jv,"value"),jv.forEach(u),Xr=E(Cv," to verify the the "),nu=b(Cv,"CODE",{});var Pv=y(nu);au=E(Pv,"value"),Pv.forEach(u),su=E(Cv," is reactive, and "),tu=b(Cv,"CODE",{});var Av=y(tu);eu=E(Av,"<select>"),Av.forEach(u),ou=E(Cv," will get updated accordingly."),Cv.forEach(u),pu=w(hv),cu=b(hv,"P",{});var Tv=y(cu);lu=E(Tv,"Besides that, I exported "),iu=b(Tv,"CODE",{});var $v=y(iu);ru=E($v,"spread"),$v.forEach(u),uu=E(Tv,", so that I can change the object to something object to contain "),ku=b(Tv,"CODE",{});var Dv=y(ku);hu=E(Dv,"value"),Dv.forEach(u),du=E(Tv,", eg: "),fu=b(Tv,"CODE",{});var Lv=y(fu);mu=E(Lv,"{ value: [] }"),Lv.forEach(u),gu=E(Tv,", and see how "),vu=b(Tv,"CODE",{});var Hv=y(vu);yu=E(Hv,"<select>"),Hv.forEach(u),bu=E(Tv," will update accordingly. Make sure that our fix not just work with "),Eu=b(Tv,"CODE",{});var Rv=y(Eu);wu=E(Rv,"value"),Rv.forEach(u),Iu=E(Tv," attribute, and also when the "),xu=b(Tv,"CODE",{});var Mv=y(xu);_u=E(Mv,"value"),Mv.forEach(u),Ou=E(Tv," is spreaded into "),Su=b(Tv,"CODE",{});var Nv=y(Su);Cu=E(Nv,"<select>"),Nv.forEach(u),ju=E(Tv,"."),Tv.forEach(u),Pu=w(hv),Au=b(hv,"P",{});var Wv=y(Au);Tu=E(Wv,"You may think that we are familiar with our fix, we know what it will fix, what it will not fix, do we need think up and write all the edge cases?"),Wv.forEach(u),$u=w(hv),Du=b(hv,"P",{});var qv=y(Du);Lu=E(qv,"Well, I think you should. Future you will thank the present you when he encounter a fail test, that just mean his change may have an unintentional regressional change. If you don't have the test case, the future you will never know what edge case he didn't accounted for."),qv.forEach(u),Hu=w(hv),Ru=b(hv,"P",{});var Bv=y(Ru);Mu=E(Bv,"Runtime test cases are added into "),Nu=b(Bv,"CODE",{});var Fv=y(Nu);Wu=E(Fv,"test/runtime/samples/"),Fv.forEach(u),qu=E(Bv,". Each folder represent 1 test case. Inside the folder, the component to be tested is named "),Bu=b(Bv,"CODE",{});var zv=y(Bu);Fu=E(zv,"App.svelte"),zv.forEach(u),zu=E(Bv,", and the test case is written "),Uu=b(Bv,"CODE",{});var Uv=y(Uu);Gu=E(Uv,"_config.js"),Uv.forEach(u),Ju=E(Bv,"."),Bv.forEach(u),Vu=w(hv),Yu=b(hv,"P",{});var Gv=y(Yu);Qu=b(Gv,"CODE",{});var Jv=y(Qu);Ku=E(Jv,"_config.js"),Jv.forEach(u),Zu=E(Gv," default exports a object:"),Gv.forEach(u),Xu=w(hv),nk=b(hv,"PRE",{class:!0}),y(nk).forEach(u),ak=w(hv),sk=b(hv,"P",{});var Vv=y(sk);tk=E(Vv,"An example of test case of unchecking the checkbox, and verify "),ek=b(Vv,"CODE",{});var Yv=y(ek);ok=E(Yv,"<select>"),Yv.forEach(u),pk=E(Vv," value get updated"),Vv.forEach(u),ck=w(hv),lk=b(hv,"PRE",{class:!0}),y(lk).forEach(u),ik=w(hv),rk=b(hv,"P",{});var Qv=y(rk);uk=E(Qv,"To run only this test, so that we can focus on ensuring the test case pass, we can set "),kk=b(Qv,"CODE",{});var Kv=y(kk);hk=E(Kv,"solo: true"),Kv.forEach(u),dk=E(Qv,":"),Qv.forEach(u),fk=w(hv),mk=b(hv,"PRE",{class:!0}),y(mk).forEach(u),gk=w(hv),vk=b(hv,"P",{});var Zv=y(vk);yk=b(Zv,"STRONG",{});var Xv=y(yk);bk=E(Xv,"Quick tip:"),Xv.forEach(u),Ek=E(Zv," running "),wk=b(Zv,"CODE",{});var ny=y(wk);Ik=E(ny,"npm run test"),ny.forEach(u),xk=E(Zv," will build Svelte code first before executing the test. If you are like me, running "),_k=b(Zv,"CODE",{});var ay=y(_k);Ok=E(ay,"npm run dev"),ay.forEach(u),Sk=E(Zv," on the background, Svelte code is build on every code change. So, "),Ck=b(Zv,"CODE",{});var sy=y(Ck);jk=E(sy,"npm run quicktest"),sy.forEach(u),Pk=E(Zv," would allow you to skip the "),Ak=b(Zv,"CODE",{});var ty=y(Ak);Tk=E(ty,"pretest"),ty.forEach(u),$k=E(Zv," build, and run the test suite immediately."),Zv.forEach(u),Dk=w(hv),Lk=b(hv,"P",{});var ey=y(Lk);Hk=E(ey,"With the test, I realised that I didn't handle the case when the "),Rk=b(ey,"CODE",{});var oy=y(Rk);Mk=E(oy,"value"),oy.forEach(u),Nk=E(ey," is updated."),ey.forEach(u),Wk=w(hv),qk=b(hv,"P",{});var py=y(qk);Bk=E(py,"So I guess what I needed to do is to add the same code in the "),Fk=b(py,"CODE",{});var cy=y(Fk);zk=E(cy,"p()"),cy.forEach(u),Uk=E(py," (update) method too!"),py.forEach(u),Gk=w(hv),Jk=b(hv,"PRE",{class:!0}),y(Jk).forEach(u),Vk=w(hv),Yk=b(hv,"P",{});var ly=y(Yk);Qk=E(ly,"Well, of course in this way, the "),Kk=b(ly,"CODE",{});var iy=y(Kk);Zk=E(iy,"select_options"),iy.forEach(u),Xk=E(ly," get executed unconditionally whenever any variable is updated."),ly.forEach(u),nh=w(hv),ah=b(hv,"P",{});var ry=y(ah);sh=E(ry,"I need to make sure that the "),th=b(ry,"CODE",{});var uy=y(th);eh=E(uy,"select_options(...)"),uy.forEach(u),oh=E(ry," inside the "),ph=b(ry,"CODE",{});var ky=y(ph);ch=E(ky,"p()"),ky.forEach(u),lh=E(ry," method get executed only when the value of "),ih=b(ry,"CODE",{});var hy=y(ih);rh=E(hy,"value"),hy.forEach(u),uh=E(ry," changes, and also probably when "),kh=b(ry,"CODE",{});var dy=y(kh);hh=E(dy,"spread"),dy.forEach(u),dh=E(ry," changes too, because it could potentially override the value of "),fh=b(ry,"CODE",{});var fy=y(fh);mh=E(fy,"value"),fy.forEach(u),gh=E(ry,"."),ry.forEach(u),vh=w(hv),yh=b(hv,"P",{});var my=y(yh);bh=E(my,"If you've read "),Eh=b(my,"A",{href:!0});var gy=y(Eh);wh=E(gy,"Compile Svelte in your Head - Bitmask in Svelte"),gy.forEach(u),Ih=E(my,", you know that Svelte uses bitmask to check any variable changes."),my.forEach(u),xh=w(hv),_h=b(hv,"P",{});var vy=y(_h);Oh=E(vy,"How do I know what is the bitmask to use in this case, well I dont have to."),vy.forEach(u),Sh=w(hv),Ch=b(hv,"P",{});var yy=y(Ch);jh=E(yy,"I can use "),Ph=b(yy,"A",{href:!0,rel:!0});var by=y(Ph);Ah=b(by,"CODE",{});var Ey=y(Ah);Th=E(Ey,"renderer.dirty(dependencies)"),Ey.forEach(u),by.forEach(u),$h=E(yy," to help me with that:"),yy.forEach(u),Dh=w(hv),Lh=b(hv,"PRE",{class:!0}),y(Lh).forEach(u),Hh=w(hv),Rh=b(hv,"P",{});var wy=y(Rh);Mh=E(wy,"Next, I need to figure out what are the dependencies to be included. In this particular case, the dependencies of all attributes have to be taken consideration, because it is hard to tell which one would be eventually applied due to the spread attribute."),wy.forEach(u),Nh=w(hv),Wh=b(hv,"PRE",{class:!0}),y(Wh).forEach(u),qh=w(hv),Bh=b(hv,"P",{});var Iy=y(Bh);Fh=E(Iy,"After a few tweaks, finally I passed all my test cases, and its time to create a pull request!"),Iy.forEach(u),hv.forEach(u),zh=w(n),Uh=b(n,"SECTION",{});var xy=y(Uh);Gh=b(xy,"H2",{});var _y=y(Gh);Jh=b(_y,"A",{href:!0,id:!0});var Oy=y(Jh);Vh=E(Oy,"Submitting the fix"),Oy.forEach(u),_y.forEach(u),Yh=w(xy),Qh=b(xy,"P",{});var Sy=y(Qh);Kh=E(Sy,"Before pushing the fix to remote, it is important to make sure that all the lints and typescript definitions are correct. You can run "),Zh=b(Sy,"CODE",{});var Cy=y(Zh);Xh=E(Cy,"npm run lint --fixed"),Cy.forEach(u),nd=E(Sy," for linting, and "),ad=b(Sy,"CODE",{});var jy=y(ad);sd=E(jy,"npm run tsd"),jy.forEach(u),td=E(Sy," to generate typescript definition."),Sy.forEach(u),ed=w(xy),od=b(xy,"P",{});var Py=y(od);pd=E(Py,"If you are unsure on how to create a pull request, you can check out "),cd=b(Py,"A",{href:!0,rel:!0});var Ay=y(cd);ld=E(Ay,"How to make your first pull request on GitHub"),Ay.forEach(u),id=E(Py,"."),Py.forEach(u),rd=w(xy),ud=b(xy,"P",{});var Ty=y(ud);kd=E(Ty,"I pushed my branch and created a "),hd=b(Ty,"A",{href:!0,rel:!0});var $y=y(hd);dd=E($y,"Pull Request to Svelte"),$y.forEach(u),fd=E(Ty,", and now I am waiting for feedback and for it to get merged."),Ty.forEach(u),md=w(xy),gd=b(xy,"P",{});var Dy=y(gd);vd=E(Dy,"Svelte is not maintained by full-time maintainers, everyone has their full-time job, so please be patient and be nice."),Dy.forEach(u),yd=w(xy),bd=b(xy,"HR",{}),Ed=w(xy),wd=b(xy,"P",{});var Ly=y(wd);Id=E(Ly,"If you wish to learn more about Svelte, "),xd=b(Ly,"A",{href:!0,rel:!0});var Hy=y(xd);_d=E(Hy,"follow me on Twitter"),Hy.forEach(u),Od=E(Ly,"."),Ly.forEach(u),Sd=w(xy),Cd=b(xy,"P",{});var Ry=y(Cd);jd=E(Ry,"If you have anything unclear about this article, find me on "),Pd=b(Ry,"A",{href:!0,rel:!0});var My=y(Pd);Ad=E(My,"Twitter"),My.forEach(u),Td=E(Ry," too!"),Ry.forEach(u),xy.forEach(u),this.h()},h(){v(o,"href","#background"),v(l,"href","#the-story-begins"),v(g,"href","#verifying-the-bug"),v(_,"href","#investigating-the-bug"),v(C,"href","#fixing-the-bug"),v(A,"href","#submitting-the-fix"),v(t,"class","sitemap"),v(t,"id","sitemap"),v(t,"role","navigation"),v(t,"aria-label","Table of Contents"),v(H,"href","#background"),v(H,"id","background"),v(V,"href","https://svelte.dev/chat"),v(V,"rel","nofollow"),v(on,"href","/the-svelte-compiler-handbook/"),v(xn,"href","#the-story-begins"),v(xn,"id","the-story-begins"),v(jn,"href","https://github.com/sveltejs/svelte/issues?q=is%3Aopen+is%3Aissue+label%3Abug"),v(jn,"rel","nofollow"),v(Mn,"href","https://github.com/sveltejs/svelte/issues/4392"),v(Mn,"rel","nofollow"),v(Jn,"class","language-svelte"),v(Kn,"href","https://svelte.dev/repl/99bd5ebecc464e328972252e287ab716?version=3.18.1"),v(Kn,"rel","nofollow"),v(oa,"href","#verifying-the-bug"),v(oa,"id","verifying-the-bug"),v(Fa,"href","https://github.com/Conduitry"),v(Fa,"rel","nofollow"),v(Ya,"href","https://github.com/sveltejs/svelte/issues/3680"),v(Ya,"rel","nofollow"),v(Za,"href","https://github.com/sveltejs/svelte/issues/3680"),v(Za,"rel","nofollow"),v(es,"href","https://github.com/sveltejs/svelte/pull/4398"),v(es,"rel","nofollow"),v(cs,"href","https://github.com/sveltejs/svelte/issues/3680"),v(cs,"rel","nofollow"),v(hs,"href","#investigating-the-bug"),v(hs,"id","investigating-the-bug"),v(xs,"href","https://github.com/sveltejs/template"),v(xs,"rel","nofollow"),v(Rs,"class","language-null"),v(Xs,"href","https://www.npmjs.com/package/http-server"),v(Xs,"rel","nofollow"),v(Nt,"class","language-svelte"),v(zt,"class","language-diff-js"),v(Vt,"href","/compile-svelte-in-your-head-part-1/"),v(ae,"class","language-svelte"),v(pe,"class","language-js"),v(ge,"class","language-js"),v(De,"class","language-js"),v(Xe,"type","image/webp"),v(Xe,"srcset","aacfcdde0ef957c2.webp"),v(no,"type","image/jpeg"),v(no,"srcset","aacfcdde0ef957c2.png"),v(ao,"title","null"),v(ao,"alt","Fixed"),v(ao,"data-src","aacfcdde0ef957c2.png"),v(ao,"loading","lazy"),v(Ro,"href","https://github.com/sveltejs/svelte/blob/e34f2088434423914bbc91b84a450a7f7477252b/src/runtime/internal/dom.ts#L221-L226"),v(Ro,"rel","nofollow"),v(Wo,"class","language-js"),v(Ko,"class","language-js"),v(cp,"class","language-js"),v(xp,"class","language-js"),v(Ap,"href","https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#Tagged_templates"),v(Ap,"rel","nofollow"),v(Wp,"href","https://en.wikipedia.org/wiki/Abstract_syntax_tree"),v(Wp,"rel","nofollow"),v(Yp,"href","https://www.npmjs.com/package/code-red"),v(Yp,"rel","nofollow"),v(xc,"class","language-js"),v($c,"href","https://github.com/sveltejs/svelte/blob/e34f2088434423914bbc91b84a450a7f7477252b/src/compiler/compile/Component.ts#L245-L264"),v($c,"rel","nofollow"),v(Wc,"class","language-js"),v(Uc,"class","language-js"),v(ol,"class","language-js"),v(Cl,"class","language-js"),v(Pl,"class","language-md"),v(Dl,"href","https://github.com/sveltejs/svelte/blob/e34f2088434423914bbc91b84a450a7f7477252b/src/compiler/compile/render_dom/wrappers/Element/index.ts#L642-L659"),v(Dl,"rel","nofollow"),v(Rl,"class","language-js"),v(fi,"class","language-js"),v(yi,"href","/the-svelte-compiler-handbook/#dom-renderer"),v(_i,"href","/compile-svelte-in-your-head-part-1/#create_fragment"),v(Ti,"href","/compile-svelte-in-your-head-part-1/#create_fragment"),v(Vi,"class","language-js"),v(rr,"href","#fixing-the-bug"),v(rr,"id","fixing-the-bug"),v(Jr,"class","language-svelte"),v(nk,"class","language-js"),v(lk,"class","language-js"),v(mk,"class","language-js"),v(Jk,"class","language-js"),v(Eh,"href","/compile-svelte-in-your-head-part-2/#bitmask-in-svelte"),v(Ph,"href","https://github.com/sveltejs/svelte/blob/e34f2088434423914bbc91b84a450a7f7477252b/src/compiler/compile/render_dom/Renderer.ts#L206"),v(Ph,"rel","nofollow"),v(Lh,"class","language-js"),v(Wh,"class","language-js"),v(Jh,"href","#submitting-the-fix"),v(Jh,"id","submitting-the-fix"),v(cd,"href","https://www.freecodecamp.org/news/how-to-make-your-first-pull-request-on-github-3/"),v(cd,"rel","nofollow"),v(hd,"href","https://github.com/sveltejs/svelte/pull/4894"),v(hd,"rel","nofollow"),v(xd,"href","https://twitter.com/lihautan"),v(xd,"rel","nofollow"),v(Pd,"href","https://twitter.com/lihautan"),v(Pd,"rel","nofollow")},m(n,a){r(n,s,a),i(s,t),i(t,e),i(e,o),i(o,p),i(t,c),i(c,l),i(l,k),i(t,d),i(d,g),i(g,I),i(t,x),i(x,_),i(_,O),i(t,S),i(S,C),i(C,j),i(t,P),i(P,A),i(A,T),r(n,$,a),r(n,D,a),i(D,L),i(L,H),i(H,R),i(D,M),i(D,N),i(N,W),i(D,q),i(D,B),i(B,F),i(D,z),i(D,U),i(U,G),i(G,J),i(G,V),i(V,Y),i(U,Q),i(U,K),i(K,Z),i(U,X),i(U,nn),i(nn,an),i(D,sn),i(D,tn),i(tn,en),i(tn,on),i(on,pn),i(tn,cn),i(D,ln),i(D,rn),i(rn,un),i(D,kn),i(D,hn),i(hn,dn),i(D,fn),i(D,mn),i(mn,gn),i(D,vn),i(D,yn),i(yn,bn),r(n,En,a),r(n,wn,a),i(wn,In),i(In,xn),i(xn,_n),i(wn,On),i(wn,Sn),i(Sn,Cn),i(Sn,jn),i(jn,Pn),i(Sn,An),i(wn,Tn),i(wn,$n),i(wn,Dn),i(wn,Ln),i(Ln,Hn),i(Hn,Rn),i(Hn,Mn),i(Mn,Nn),i(wn,Wn),i(wn,qn),i(qn,Bn),i(qn,Fn),i(Fn,zn),i(qn,Un),i(wn,Gn),i(wn,Jn),Jn.innerHTML='<code class="language-svelte"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n  <span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">\'Hello\'</span><span class="token punctuation">,</span> <span class="token string">\'World\'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">multiple</span> <span class="token language-javascript"><span class="token punctuation">&#123;</span>value<span class="token punctuation">&#125;</span></span> <span class="token language-javascript"><span class="token punctuation">&#123;</span><span class="token operator">...</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">></span></span>Hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">></span></span>World<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code>',i(wn,Vn),i(wn,Yn),i(Yn,Qn),i(Yn,Kn),i(Kn,Zn),i(Yn,Xn),i(wn,na),i(wn,aa),r(n,sa,a),r(n,ta,a),i(ta,ea),i(ea,oa),i(oa,pa),i(ta,ca),i(ta,la),i(la,ia),i(ta,ra),i(ta,ua),i(ua,ka),i(ua,ha),i(ha,da),i(ua,fa),i(ua,ma),i(ma,ga),i(ua,va),i(ua,ya),i(ya,ba),i(ua,Ea),i(ua,wa),i(wa,Ia),i(ua,xa),i(ua,_a),i(_a,Oa),i(ua,Sa),i(ta,Ca),i(ta,ja),i(ja,Pa),i(ja,Aa),i(Aa,Ta),i(ja,$a),i(ja,Da),i(Da,La),i(ja,Ha),i(ja,Ra),i(Ra,Ma),i(ja,Na),i(ta,Wa),i(ta,qa),i(qa,Ba),i(qa,Fa),i(Fa,za),i(qa,Ua),i(qa,Ga),i(Ga,Ja),i(qa,Va),i(qa,Ya),i(Ya,Qa),i(qa,Ka),i(qa,Za),i(Za,Xa),i(qa,ns),i(ta,as),i(ta,ss),i(ss,ts),i(ss,es),i(es,os),i(ss,ps),i(ss,cs),i(cs,ls),i(ss,is),r(n,rs,a),r(n,us,a),i(us,ks),i(ks,hs),i(hs,ds),i(us,fs),i(us,ms),i(ms,gs),i(us,vs),i(us,ys),i(ys,bs),i(ys,Es),i(Es,ws),i(ys,Is),i(ys,xs),i(xs,_s),i(ys,Os),i(ys,Ss),i(Ss,Cs),i(ys,js),i(ys,Ps),i(Ps,As),i(ys,Ts),i(ys,$s),i($s,Ds),i(ys,Ls),i(us,Hs),i(us,Rs),Rs.innerHTML='\n<code class="language-">- /Projects\n  - svelte                &lt;-- cloned from https://github.com/sveltejs/svelte\n  - test-svelte           &lt;-- initialised with Svelte Template\n    - node_modules/svelte &lt;-- symlink to &#96;/Projects/svelte&#96;</code>',i(us,Ms),i(us,Ns),i(Ns,Ws),i(Ns,qs),i(qs,Bs),i(Ns,Fs),i(us,zs),i(us,Us),i(Us,Gs),i(Us,Js),i(Js,Vs),i(Us,Ys),i(Us,Qs),i(Qs,Ks),i(Us,Zs),i(Us,Xs),i(Xs,nt),i(Us,at),i(Us,st),i(st,tt),i(Us,et),i(us,ot),i(us,pt),i(pt,ct),i(ct,lt),i(ct,it),i(it,rt),i(ct,ut),i(ct,kt),i(kt,ht),i(ct,dt),i(pt,ft),i(pt,mt),i(mt,gt),i(pt,vt),i(pt,yt),i(yt,bt),i(yt,Et),i(Et,wt),i(yt,It),i(yt,xt),i(xt,_t),i(yt,Ot),i(yt,St),i(St,Ct),i(us,jt),i(us,Pt),i(Pt,At),i(Pt,Tt),i(Tt,$t),i(Pt,Dt),i(Pt,Lt),i(Lt,Ht),i(Pt,Rt),i(us,Mt),i(us,Nt),Nt.innerHTML='<code class="language-svelte"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n  <span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">\'Hello\'</span><span class="token punctuation">,</span> <span class="token string">\'World\'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>\n\n<span class="token comment">&lt;!-- with spread --\x3e</span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">multiple</span> <span class="token language-javascript"><span class="token punctuation">&#123;</span>value<span class="token punctuation">&#125;</span></span> <span class="token language-javascript"><span class="token punctuation">&#123;</span><span class="token operator">...</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">></span></span>Hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">></span></span>World<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span>\n\n<span class="token comment">&lt;!-- without spread --\x3e</span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">multiple</span> <span class="token language-javascript"><span class="token punctuation">&#123;</span>value<span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">></span></span>Hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">></span></span>World<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code>',i(us,Wt),i(us,qt),i(qt,Bt),i(us,Ft),i(us,zt),zt.innerHTML='<code class="language-diff-js"><span class="token inserted-sign inserted language-js"><span class="token prefix inserted">+</span> <span class="token keyword">let</span> select_levels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span> multiple<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> value<span class="token punctuation">:</span> <span class="token comment">/*value*/</span> ctx<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token prefix inserted">+</span>\t<span class="token keyword">let</span> select_data <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>\n<span class="token prefix inserted">+</span>\t<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> select_levels<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n<span class="token prefix inserted">+</span>\t  select_data <span class="token operator">=</span> <span class="token function">assign</span><span class="token punctuation">(</span>select_data<span class="token punctuation">,</span> select_levels<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token prefix inserted">+</span>\t<span class="token punctuation">&#125;</span>\n</span><span class="token deleted-sign deleted language-js"><span class="token prefix deleted">-</span> <span class="token keyword">let</span> select_value_value<span class="token punctuation">;</span>\n</span>\n<span class="token unchanged language-js"><span class="token prefix unchanged"> </span> <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>\n<span class="token prefix unchanged"> </span>   <span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n<span class="token prefix unchanged"> </span>     <span class="token comment">/* ... */</span>\n<span class="token prefix unchanged"> </span>     <span class="token function">set_attributes</span><span class="token punctuation">(</span>select<span class="token punctuation">,</span> select_data<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token prefix unchanged"> </span>   <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>\n<span class="token prefix unchanged"> </span>   <span class="token function">m</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> anchor</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n<span class="token prefix unchanged"> </span>     <span class="token comment">/* ... */</span>\n</span><span class="token deleted-sign deleted language-js"><span class="token prefix deleted">-</span>     select_value_value <span class="token operator">=</span> <span class="token comment">/*value*/</span> ctx<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n</span>\n<span class="token deleted-sign deleted language-js"><span class="token prefix deleted">-</span>     <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> select<span class="token punctuation">.</span><span class="token property-access">options</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n<span class="token prefix deleted">-</span>       <span class="token keyword">var</span> option <span class="token operator">=</span> select<span class="token punctuation">.</span><span class="token property-access">options</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token prefix deleted">-</span>       option<span class="token punctuation">.</span><span class="token property-access">selected</span> <span class="token operator">=</span> <span class="token operator">~</span>select_value_value<span class="token punctuation">.</span><span class="token method function property-access">indexOf</span><span class="token punctuation">(</span>option<span class="token punctuation">.</span><span class="token property-access">__value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token prefix deleted">-</span>     <span class="token punctuation">&#125;</span>\n</span><span class="token unchanged language-js"><span class="token prefix unchanged"> </span>   <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>\n</span><span class="token deleted-sign deleted language-js"><span class="token prefix deleted">-</span>   p<span class="token punctuation">:</span> noop<span class="token punctuation">,</span>\n</span><span class="token inserted-sign inserted language-js"><span class="token prefix inserted">+</span>    <span class="token function">p</span><span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> <span class="token punctuation">[</span>dirty<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n<span class="token prefix inserted">+</span>      <span class="token function">set_attributes</span><span class="token punctuation">(</span>select<span class="token punctuation">,</span> <span class="token function">get_spread_update</span><span class="token punctuation">(</span>select_levels<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span> multiple<span class="token punctuation">:</span>   <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> dirty <span class="token operator">&amp;</span> <span class="token comment">/*value*/</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">&#123;</span> value<span class="token punctuation">:</span> <span class="token comment">/*value*/</span> ctx<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token prefix inserted">+</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>\n</span><span class="token unchanged language-js"><span class="token prefix unchanged"> </span>   <span class="token comment">/* ... */</span>\n<span class="token prefix unchanged"> </span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></span></code>',i(us,Ut),i(us,Gt),i(Gt,Jt),i(Gt,Vt),i(Vt,Yt),i(Gt,Qt),i(us,Kt),i(us,Zt),i(Zt,Xt),i(us,ne),i(us,ae),ae.innerHTML='<code class="language-svelte"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">foo</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>foo<span class="token punctuation">"</span></span> <span class="token language-javascript"><span class="token punctuation">&#123;</span><span class="token operator">...</span>bar<span class="token punctuation">&#125;</span></span> <span class="token attr-name">baz</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>baz<span class="token punctuation">"</span></span> <span class="token language-javascript"><span class="token punctuation">&#123;</span><span class="token operator">...</span>qux<span class="token punctuation">&#125;</span></span> <span class="token punctuation">/></span></span></code>',i(us,se),i(us,te),i(te,ee),i(us,oe),i(us,pe),pe.innerHTML='<code class="language-js"><span class="token keyword">const</span> levels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span> foo<span class="token punctuation">:</span> <span class="token string">\'foo\'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> bar<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> baz<span class="token punctuation">:</span> <span class="token string">\'baz\'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> qux<span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token comment">// build the attribute maps</span>\n<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>\n<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> levels<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  data <span class="token operator">=</span> <span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">assign</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> levels<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span>\n\n<span class="token comment">// set attribute to element</span>\n<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> attributeName <span class="token keyword">in</span> data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  div<span class="token punctuation">.</span><span class="token method function property-access">setAttribute</span><span class="token punctuation">(</span>attributeName<span class="token punctuation">,</span> data<span class="token punctuation">[</span>attributeName<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span>\n\n<span class="token comment">// if &#96;bar&#96; changed</span>\n<span class="token keyword">const</span> updates <span class="token operator">=</span> <span class="token function">get_spread_update</span><span class="token punctuation">(</span>levels<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token boolean">false</span><span class="token punctuation">,</span> bar<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// updates will return the updates needed to make, in this case, the diff in &#96;bar&#96;, eg: &#123; aa: \'1\' &#125;</span>\n<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> attributeName <span class="token keyword">in</span> updates<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  div<span class="token punctuation">.</span><span class="token method function property-access">setAttribute</span><span class="token punctuation">(</span>attributeName<span class="token punctuation">,</span> updates<span class="token punctuation">[</span>attributeName<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',i(us,ce),i(us,le),i(le,ie),i(le,re),i(re,ue),i(le,ke),i(us,he),i(us,de),i(de,fe),i(us,me),i(us,ge),ge.innerHTML='<code class="language-js"><span class="token comment">// in &#96;mount&#96; method</span>\n<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> select<span class="token punctuation">.</span><span class="token property-access">options</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">var</span> option <span class="token operator">=</span> select<span class="token punctuation">.</span><span class="token property-access">options</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>\n  option<span class="token punctuation">.</span><span class="token property-access">selected</span> <span class="token operator">=</span> <span class="token operator">~</span>select_value_value<span class="token punctuation">.</span><span class="token method function property-access">indexOf</span><span class="token punctuation">(</span>option<span class="token punctuation">.</span><span class="token property-access">__value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',i(us,ve),i(us,ye),i(ye,be),i(ye,Ee),i(Ee,we),i(ye,Ie),i(ye,xe),i(xe,_e),i(ye,Oe),i(us,Se),i(us,Ce),i(Ce,je),i(Ce,Pe),i(Pe,Ae),i(Ce,Te),i(us,$e),i(us,De),De.innerHTML='<code class="language-js">  <span class="token comment">// ...</span>\n  <span class="token function">m</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> anchor</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token function">insert</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> select<span class="token punctuation">,</span> anchor<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">append</span><span class="token punctuation">(</span>select<span class="token punctuation">,</span> option0<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">append</span><span class="token punctuation">(</span>select<span class="token punctuation">,</span> option1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// highlight-start</span>\n    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> select<span class="token punctuation">.</span><span class="token property-access">options</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n      <span class="token keyword">var</span> option <span class="token operator">=</span> select<span class="token punctuation">.</span><span class="token property-access">options</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>\n      option<span class="token punctuation">.</span><span class="token property-access">selected</span> <span class="token operator">=</span> <span class="token operator">~</span>ctx<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token method function property-access">indexOf</span><span class="token punctuation">(</span>option<span class="token punctuation">.</span><span class="token property-access">__value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">&#125;</span>\n    <span class="token comment">// highlight-end</span>\n  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>\n  <span class="token comment">// ...</span></code>',i(us,Le),i(us,He),i(He,Re),i(He,Me),i(Me,Ne),i(He,We),i(He,qe),i(qe,Be),i(He,Fe),i(He,ze),i(ze,Ue),i(He,Ge),i(us,Je),i(us,Ve),i(Ve,Ye),i(us,Qe),i(us,Ke),i(Ke,Ze),i(Ze,Xe),i(Ze,no),i(Ze,ao),i(us,so),i(us,to),i(to,eo),i(to,oo),i(oo,po),i(to,co),i(us,lo),i(us,io),i(io,ro),i(us,uo),i(us,ko),i(ko,ho),i(ko,fo),i(fo,mo),i(ko,go),i(us,vo),i(us,yo),i(yo,bo),i(bo,Eo),i(Eo,wo),i(yo,Io),i(yo,xo),i(xo,_o),i(_o,Oo),i(yo,So),i(yo,Co),i(Co,jo),i(jo,Po),i(us,Ao),i(us,To),i(To,$o),i(To,Do),i(Do,Lo),i(To,Ho),i(To,Ro),i(Ro,Mo),i(us,No),i(us,Wo),Wo.innerHTML='<code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">select_options</span><span class="token punctuation">(</span><span class="token parameter">select<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> select<span class="token punctuation">.</span><span class="token property-access">options</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token keyword">const</span> option <span class="token operator">=</span> select<span class="token punctuation">.</span><span class="token property-access">options</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>\n    option<span class="token punctuation">.</span><span class="token property-access">selected</span> <span class="token operator">=</span> <span class="token operator">~</span>value<span class="token punctuation">.</span><span class="token method function property-access">indexOf</span><span class="token punctuation">(</span>option<span class="token punctuation">.</span><span class="token property-access">__value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span>\n<span class="token punctuation">&#125;</span></code>',i(us,qo),i(us,Bo),i(Bo,Fo),i(Bo,zo),i(zo,Uo),i(Bo,Go),i(Bo,Jo),i(Jo,Vo),i(Bo,Yo),i(us,Qo),i(us,Ko),Ko.innerHTML='<code class="language-js">  <span class="token comment">// ...</span>\n  <span class="token function">m</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> anchor</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token function">insert</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> select<span class="token punctuation">,</span> anchor<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">append</span><span class="token punctuation">(</span>select<span class="token punctuation">,</span> option0<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">append</span><span class="token punctuation">(</span>select<span class="token punctuation">,</span> option1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// highlight-start</span>\n<span class="token operator">-</span>   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> select<span class="token punctuation">.</span><span class="token property-access">options</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n<span class="token operator">-</span>     <span class="token keyword">var</span> option <span class="token operator">=</span> select<span class="token punctuation">.</span><span class="token property-access">options</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token operator">-</span>     option<span class="token punctuation">.</span><span class="token property-access">selected</span> <span class="token operator">=</span> <span class="token operator">~</span>ctx<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token method function property-access">indexOf</span><span class="token punctuation">(</span>option<span class="token punctuation">.</span><span class="token property-access">__value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token operator">-</span>   <span class="token punctuation">&#125;</span>\n<span class="token operator">+</span>   <span class="token function">select_options</span><span class="token punctuation">(</span>select<span class="token punctuation">,</span> select_value_value<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// highlight-end</span>\n  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>\n  <span class="token comment">// ...</span></code>',i(us,Zo),i(us,Xo),i(Xo,np),i(Xo,ap),i(ap,sp),i(Xo,tp),i(Xo,ep),i(ep,op),i(us,pp),i(us,cp),cp.innerHTML='<code class="language-js"><span class="token comment">// filename: src/compiler/compile/render_dom/wrappers/Element/Attribute.ts</span>\n\nupdater <span class="token operator">=</span> b<span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">\n  for (var </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>i<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> = 0; </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>i<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> &lt; </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>element<span class="token punctuation">.</span><span class="token property-access">var</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">.options.length; </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>i<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> += 1) &#123;\n    var </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>option<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>element<span class="token punctuation">.</span><span class="token property-access">var</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">.options[</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>i<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">];\n\n    </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>if_statement<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">\n  &#125;\n</span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">;</span>\nblock<span class="token punctuation">.</span><span class="token property-access">chunks</span><span class="token punctuation">.</span><span class="token property-access">mount</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>b<span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">\n  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>last<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>value<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">;\n  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>updater<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">\n</span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>',i(us,lp),i(us,ip),i(ip,rp),i(us,up),i(us,kp),i(kp,hp),i(kp,dp),i(dp,fp),i(kp,mp),i(kp,gp),i(gp,vp),i(kp,yp),i(kp,bp),i(bp,Ep),i(kp,wp),i(us,Ip),i(us,xp),xp.innerHTML='<code class="language-js"><span class="token comment">// highlight-start</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span>is_multiple_select<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  updater <span class="token operator">=</span> b<span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">@select_options(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>element<span class="token punctuation">.</span><span class="token property-access">var</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>last<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">);</span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>\n  updater <span class="token operator">=</span> b<span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">@select_option(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>element<span class="token punctuation">.</span><span class="token property-access">var</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>last<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">);</span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span>\n<span class="token comment">// highlight-end</span>\n\nblock<span class="token punctuation">.</span><span class="token property-access">chunks</span><span class="token punctuation">.</span><span class="token property-access">mount</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>b<span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">\n  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>last<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>value<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">;\n  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>updater<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">\n</span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>',i(us,_p),i(us,Op),i(Op,Sp),i(Op,Cp),i(Cp,jp),i(Op,Pp),i(Op,Ap),i(Ap,Tp),i(Op,$p),i(Op,Dp),i(Dp,Lp),i(Op,Hp),i(Op,Rp),i(Rp,Mp),i(Op,Np),i(Op,Wp),i(Wp,qp),i(Op,Bp),i(us,Fp),i(us,zp),i(zp,Up),i(zp,Gp),i(Gp,Jp),i(zp,Vp),i(zp,Yp),i(Yp,Qp),i(zp,Kp),i(zp,Zp),i(Zp,Xp),i(zp,nc),i(zp,ac),i(ac,sc),i(zp,tc),i(us,ec),i(us,oc),i(oc,pc),i(pc,cc),i(cc,lc),i(pc,ic),i(oc,rc),i(oc,uc),i(uc,kc),i(kc,hc),i(uc,dc),i(oc,fc),i(oc,mc),i(mc,gc),i(gc,vc),i(mc,yc),i(us,bc),i(us,Ec),i(Ec,wc),i(us,Ic),i(us,xc),xc.innerHTML='<code class="language-js"><span class="token keyword">const</span> node <span class="token operator">=</span> <span class="token punctuation">&#123;</span> type<span class="token punctuation">:</span> <span class="token string">\'Identifier\'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">\'foo\'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> code <span class="token operator">=</span> b<span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">const </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>node<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> = 1;</span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">;</span> <span class="token comment">// returns an AST node for &#96;const foo = 1;&#96;</span></code>',i(us,_c),i(us,Oc),i(Oc,Sc),i(Sc,Cc),i(Oc,jc),i(Oc,Pc),i(Pc,Ac),i(Oc,Tc),i(Oc,$c),i($c,Dc),i(Oc,Lc),i(Oc,Hc),i(Hc,Rc),i(Oc,Mc),i(us,Nc),i(us,Wc),Wc.innerHTML='<code class="language-js"><span class="token keyword">const</span> code <span class="token operator">=</span> b<span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">@foo(bar)</span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">;</span>\n<span class="token comment">// turns into</span>\n\n<span class="token comment">// import &#123; foo &#125; from \'svelte/internal\';</span>\n<span class="token comment">// foo(bar);</span></code>',i(us,qc),i(us,Bc),i(Bc,Fc),i(us,zc),i(us,Uc),Uc.innerHTML='<code class="language-js"><span class="token comment">// highlight-next-line</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span>is_legacy_input_type<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// ...</span>\n  <span class="token comment">// highlight-next-line</span>\n<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>is_select_value_attribute<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>is_multiple_select<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    updater <span class="token operator">=</span> b<span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">@select_options(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>element<span class="token punctuation">.</span><span class="token property-access">var</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>last<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">);</span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>\n    updater <span class="token operator">=</span> b<span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">@select_option(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>element<span class="token punctuation">.</span><span class="token property-access">var</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>last<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">);</span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span>\n\n  block<span class="token punctuation">.</span><span class="token property-access">chunks</span><span class="token punctuation">.</span><span class="token property-access">mount</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>b<span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">\n    </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>last<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>value<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">;\n    </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>updater<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">\n  </span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>is_src<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// ...</span>\n<span class="token punctuation">&#125;</span></code>',i(us,Gc),i(us,Jc),i(Jc,Vc),i(Jc,Yc),i(Yc,Qc),i(Jc,Kc),i(Jc,Zc),i(Zc,Xc),i(Jc,nl),i(Jc,al),i(al,sl),i(Jc,tl),i(us,el),i(us,ol),ol.innerHTML='<code class="language-js"><span class="token comment">// highlight-start</span>\n<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>\n  <span class="token string">\'is_legacy_input_type:\'</span><span class="token punctuation">,</span>\n  is_legacy_input_type<span class="token punctuation">,</span>\n  <span class="token string">\'is_select_value_attribute:\'</span><span class="token punctuation">,</span>\n  is_select_value_attribute\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// highlight-end</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span>is_legacy_input_type<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// ...</span>\n<span class="token punctuation">&#125;</span></code>',i(us,pl),i(us,cl),i(cl,ll),i(cl,il),i(il,rl),i(cl,ul),i(us,kl),i(us,hl),i(hl,dl),i(hl,fl),i(fl,ml),i(hl,gl),i(us,vl),i(us,yl),i(yl,bl),i(yl,El),i(El,wl),i(yl,Il),i(yl,xl),i(xl,_l),i(yl,Ol),i(us,Sl),i(us,Cl),Cl.innerHTML='<code class="language-js"><span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">block<span class="token punctuation">:</span> <span class="token maybe-class-name">Block</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// highlight-next-line</span>\n  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">trace</span><span class="token punctuation">(</span><span class="token string">\'trace\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// ...</span>\n<span class="token punctuation">&#125;</span></code>',i(us,jl),i(us,Pl),Pl.innerHTML='<code class="language-md">Trace: trace\n  <span class="token comment">&lt;!-- highlight-next-line --\x3e</span>\n  at AttributeWrapper.render (/Projects/svelte/compiler.js:8269:11)\n  at /Projects/svelte/compiler.js:10749:14\n  at Array.forEach (<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>anonymous</span><span class="token punctuation">></span></span>)\n  <span class="token comment">&lt;!-- highlight-next-line --\x3e</span>\n  at ElementWrapper.add_attributes (/Projects/svelte/compiler.js:10748:19)\n  at ElementWrapper.render (/Projects/svelte/compiler.js:10472:8)\n  at /Projects/svelte/compiler.js:10454:11\n  at Array.forEach (<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>anonymous</span><span class="token punctuation">></span></span>)\n  at ElementWrapper.render (/Projects/svelte/compiler.js:10453:24)\n  at FragmentWrapper.render (/Projects/svelte/compiler.js:13030:18)\n  at new Renderer (/Projects/svelte/compiler.js:13112:17)</code>',i(us,Al),i(us,Tl),i(Tl,$l),i(Tl,Dl),i(Dl,Ll),i(us,Hl),i(us,Rl),Rl.innerHTML='<code class="language-js"><span class="token function">add_attributes</span><span class="token punctuation">(</span><span class="token parameter">block<span class="token punctuation">:</span> <span class="token maybe-class-name">Block</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// Get all the class dependencies first</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">attributes</span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">attribute</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">&#123;</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>attribute<span class="token punctuation">.</span><span class="token property-access">node</span><span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">===</span> <span class="token string">\'class\'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n      <span class="token keyword">const</span> dependencies <span class="token operator">=</span> attribute<span class="token punctuation">.</span><span class="token property-access">node</span><span class="token punctuation">.</span><span class="token method function property-access">get_dependencies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">class_dependencies</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token spread operator">...</span>dependencies<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">&#125;</span>\n  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">node</span><span class="token punctuation">.</span><span class="token property-access">attributes</span><span class="token punctuation">.</span><span class="token method function property-access">some</span><span class="token punctuation">(</span><span class="token parameter">attr</span> <span class="token arrow operator">=></span> attr<span class="token punctuation">.</span><span class="token property-access">is_spread</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">add_spread_attributes</span><span class="token punctuation">(</span>block<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span>\n\n  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">attributes</span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">attribute</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">&#123;</span>\n    <span class="token comment">// highlight-next-line</span>\n    attribute<span class="token punctuation">.</span><span class="token method function property-access">render</span><span class="token punctuation">(</span>block<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',i(us,Ml),i(us,Nl),i(Nl,Wl),i(Nl,ql),i(ql,Bl),i(Nl,Fl),i(Nl,zl),i(zl,Ul),i(Nl,Gl),i(Nl,Jl),i(Jl,Vl),i(Nl,Yl),i(us,Ql),i(us,Kl),i(Kl,Zl),i(Kl,Xl),i(Xl,ni),i(Kl,ai),i(Kl,si),i(si,ti),i(Kl,ei),i(Kl,oi),i(oi,pi),i(Kl,ci),i(us,li),i(us,ii),i(ii,ri),i(ii,ui),i(ui,ki),i(ii,hi),i(us,di),i(us,fi),fi.innerHTML='<code class="language-js"><span class="token function">add_spread_attributes</span><span class="token punctuation">(</span><span class="token parameter">block<span class="token punctuation">:</span> <span class="token maybe-class-name">Block</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// ...</span>\n  <span class="token comment">// highlight-start</span>\n  <span class="token comment">// for &#96;&lt;select>&#96; element only</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">node</span><span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">===</span> <span class="token string">\'select\'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    block<span class="token punctuation">.</span><span class="token property-access">chunks</span><span class="token punctuation">.</span><span class="token property-access">mount</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>\n      b<span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">@select_options(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">var</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>data<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">.value);</span><span class="token template-punctuation string">&#96;</span></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span>\n  <span class="token comment">// highlight-end</span>\n<span class="token punctuation">&#125;</span></code>',i(us,mi),i(us,gi),i(gi,vi),i(gi,yi),i(yi,bi),i(gi,Ei),i(gi,wi),i(wi,Ii),i(gi,xi),i(gi,_i),i(_i,Oi),i(Oi,Si),i(gi,Ci),i(gi,ji),i(ji,Pi),i(gi,Ai),i(gi,Ti),i(Ti,$i),i(gi,Di),i(gi,Li),i(Li,Hi),i(gi,Ri),i(gi,Mi),i(Mi,Ni),i(gi,Wi),i(gi,qi),i(qi,Bi),i(gi,Fi),i(gi,zi),i(zi,Ui),i(gi,Gi),i(us,Ji),i(us,Vi),Vi.innerHTML='<code class="language-js"><span class="token comment">// push &#96;const foo = 1&#96; to &#96;m()&#96;</span>\nblock<span class="token punctuation">.</span><span class="token property-access">chunks</span><span class="token punctuation">.</span><span class="token property-access">mount</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>b<span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">const foo = 1</span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// push &#96;const bar = 2&#96; to &#96;c()&#96;</span>\nblock<span class="token punctuation">.</span><span class="token property-access">chunks</span><span class="token punctuation">.</span><span class="token property-access">create</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>b<span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">const bar = 2</span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>',i(us,Yi),i(us,Qi),i(Qi,Ki),i(Qi,Zi),i(Zi,Xi),i(Qi,nr),i(Qi,ar),i(ar,sr),i(Qi,tr),i(Qi,er),i(er,or),i(Qi,pr),r(n,cr,a),r(n,lr,a),i(lr,ir),i(ir,rr),i(rr,ur),i(lr,kr),i(lr,hr),i(hr,dr),i(lr,fr),i(lr,mr),i(mr,gr),i(lr,vr),i(lr,yr),i(yr,br),i(yr,Er),i(Er,wr),i(yr,Ir),i(lr,xr),i(lr,_r),i(_r,Or),i(Or,Sr),i(Or,Cr),i(Cr,jr),i(Or,Pr),i(Or,Ar),i(Ar,Tr),i(Or,$r),i(_r,Dr),i(_r,Lr),i(Lr,Hr),i(Lr,Rr),i(Rr,Mr),i(Lr,Nr),i(lr,Wr),i(lr,qr),i(qr,Br),i(lr,Fr),i(lr,zr),i(zr,Ur),i(lr,Gr),i(lr,Jr),Jr.innerHTML='<code class="language-svelte"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n  <span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">\'Hello\'</span><span class="token punctuation">,</span> <span class="token string">\'World\'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token keyword">export</span> <span class="token keyword">let</span> spread <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">multiple</span> <span class="token language-javascript"><span class="token punctuation">&#123;</span>value<span class="token punctuation">&#125;</span></span> <span class="token language-javascript"><span class="token punctuation">&#123;</span><span class="token operator">...</span>spread<span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">></span></span>Hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">></span></span>World<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Hello<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">bind:</span>group=</span><span class="token language-javascript"><span class="token punctuation">&#123;</span>value<span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>World<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">bind:</span>group=</span><span class="token language-javascript"><span class="token punctuation">&#123;</span>value<span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span></code>',i(lr,Vr),i(lr,Yr),i(Yr,Qr),i(Yr,Kr),i(Kr,Zr),i(Yr,Xr),i(Yr,nu),i(nu,au),i(Yr,su),i(Yr,tu),i(tu,eu),i(Yr,ou),i(lr,pu),i(lr,cu),i(cu,lu),i(cu,iu),i(iu,ru),i(cu,uu),i(cu,ku),i(ku,hu),i(cu,du),i(cu,fu),i(fu,mu),i(cu,gu),i(cu,vu),i(vu,yu),i(cu,bu),i(cu,Eu),i(Eu,wu),i(cu,Iu),i(cu,xu),i(xu,_u),i(cu,Ou),i(cu,Su),i(Su,Cu),i(cu,ju),i(lr,Pu),i(lr,Au),i(Au,Tu),i(lr,$u),i(lr,Du),i(Du,Lu),i(lr,Hu),i(lr,Ru),i(Ru,Mu),i(Ru,Nu),i(Nu,Wu),i(Ru,qu),i(Ru,Bu),i(Bu,Fu),i(Ru,zu),i(Ru,Uu),i(Uu,Gu),i(Ru,Ju),i(lr,Vu),i(lr,Yu),i(Yu,Qu),i(Qu,Ku),i(Yu,Zu),i(lr,Xu),i(lr,nk),nk.innerHTML='<code class="language-js"><span class="token comment">// filename: _config.js</span>\n\n<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// initial props to passed to the component</span>\n  props<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span> <span class="token comment">/*...*/</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>\n  <span class="token comment">// initial rendered html</span>\n  html<span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">,</span>\n  <span class="token comment">// test case</span>\n  <span class="token keyword">async</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> assert<span class="token punctuation">,</span> target <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token comment">// you can test the behavior of the component here</span>\n  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>\n<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code>',i(lr,ak),i(lr,sk),i(sk,tk),i(sk,ek),i(ek,ok),i(sk,pk),i(lr,ck),i(lr,lk),lk.innerHTML='<code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">&#123;</span>\n\t<span class="token comment">// ...</span>\n\t<span class="token keyword">async</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> assert<span class="token punctuation">,</span> target<span class="token punctuation">,</span> <span class="token dom variable">window</span> <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token comment">// find the element</span>\n\t\t<span class="token keyword">const</span> <span class="token punctuation">[</span>input1<span class="token punctuation">,</span> input2<span class="token punctuation">]</span> <span class="token operator">=</span> target<span class="token punctuation">.</span><span class="token method function property-access">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t\t<span class="token keyword">const</span> select <span class="token operator">=</span> target<span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token string">"select"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t\t<span class="token keyword">const</span> <span class="token punctuation">[</span>option1<span class="token punctuation">,</span> option2<span class="token punctuation">]</span> <span class="token operator">=</span> select<span class="token punctuation">.</span><span class="token property-access">childNodes</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// uncheck the checkbox</span>\n\t\t<span class="token keyword">const</span> event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">window<span class="token punctuation">.</span>Event</span><span class="token punctuation">(</span><span class="token string">"change"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t\tinput1<span class="token punctuation">.</span><span class="token property-access">checked</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n\t\t<span class="token keyword">await</span> input1<span class="token punctuation">.</span><span class="token method function property-access">dispatchEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// verify the component updated correctly</span>\n\t\t<span class="token keyword">const</span> selections <span class="token operator">=</span> <span class="token known-class-name class-name">Array</span><span class="token punctuation">.</span><span class="token keyword module">from</span><span class="token punctuation">(</span>select<span class="token punctuation">.</span><span class="token property-access">selectedOptions</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t\tassert<span class="token punctuation">.</span><span class="token method function property-access">equal</span><span class="token punctuation">(</span>selections<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t\tassert<span class="token punctuation">.</span><span class="token method function property-access">ok</span><span class="token punctuation">(</span><span class="token operator">!</span>selections<span class="token punctuation">.</span><span class="token method function property-access">includes</span><span class="token punctuation">(</span>option1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t\tassert<span class="token punctuation">.</span><span class="token method function property-access">ok</span><span class="token punctuation">(</span>selections<span class="token punctuation">.</span><span class="token method function property-access">includes</span><span class="token punctuation">(</span>option2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>\n<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code>',i(lr,ik),i(lr,rk),i(rk,uk),i(rk,kk),i(kk,hk),i(rk,dk),i(lr,fk),i(lr,mk),mk.innerHTML='<code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// highlight-next-line</span>\n  solo<span class="token punctuation">:</span> <span class="token boolean">true</span>\n<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code>',i(lr,gk),i(lr,vk),i(vk,yk),i(yk,bk),i(vk,Ek),i(vk,wk),i(wk,Ik),i(vk,xk),i(vk,_k),i(_k,Ok),i(vk,Sk),i(vk,Ck),i(Ck,jk),i(vk,Pk),i(vk,Ak),i(Ak,Tk),i(vk,$k),i(lr,Dk),i(lr,Lk),i(Lk,Hk),i(Lk,Rk),i(Rk,Mk),i(Lk,Nk),i(lr,Wk),i(lr,qk),i(qk,Bk),i(qk,Fk),i(Fk,zk),i(qk,Uk),i(lr,Gk),i(lr,Jk),Jk.innerHTML='<code class="language-js"><span class="token function">add_spread_attributes</span><span class="token punctuation">(</span><span class="token parameter">block<span class="token punctuation">:</span> <span class="token maybe-class-name">Block</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// ...</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">node</span><span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">===</span> <span class="token string">\'select\'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    block<span class="token punctuation">.</span><span class="token property-access">chunks</span><span class="token punctuation">.</span><span class="token property-access">mount</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>\n      b<span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">@select_options(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">var</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>data<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">.value);</span><span class="token template-punctuation string">&#96;</span></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// highlight-start</span>\n    block<span class="token punctuation">.</span><span class="token property-access">chunks</span><span class="token punctuation">.</span><span class="token property-access">update</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>\n      b<span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">@select_options(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">var</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>data<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">.value);</span><span class="token template-punctuation string">&#96;</span></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// highlight-end</span>\n  <span class="token punctuation">&#125;</span>\n<span class="token punctuation">&#125;</span></code>',i(lr,Vk),i(lr,Yk),i(Yk,Qk),i(Yk,Kk),i(Kk,Zk),i(Yk,Xk),i(lr,nh),i(lr,ah),i(ah,sh),i(ah,th),i(th,eh),i(ah,oh),i(ah,ph),i(ph,ch),i(ah,lh),i(ah,ih),i(ih,rh),i(ah,uh),i(ah,kh),i(kh,hh),i(ah,dh),i(ah,fh),i(fh,mh),i(ah,gh),i(lr,vh),i(lr,yh),i(yh,bh),i(yh,Eh),i(Eh,wh),i(yh,Ih),i(lr,xh),i(lr,_h),i(_h,Oh),i(lr,Sh),i(lr,Ch),i(Ch,jh),i(Ch,Ph),i(Ph,Ah),i(Ah,Th);i(Ch,$h),i(lr,Dh),i(lr,Lh),Lh.innerHTML='<code class="language-js"><span class="token function">add_spread_attributes</span><span class="token punctuation">(</span><span class="token parameter">block<span class="token punctuation">:</span> <span class="token maybe-class-name">Block</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// ...</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">node</span><span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">===</span> <span class="token string">\'select\'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token keyword">const</span> dependencies <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token spread operator">...</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    block<span class="token punctuation">.</span><span class="token property-access">chunks</span><span class="token punctuation">.</span><span class="token property-access">mount</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>\n      b<span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">@select_options(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">var</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>data<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">.value);</span><span class="token template-punctuation string">&#96;</span></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// highlight-start</span>\n    block<span class="token punctuation">.</span><span class="token property-access">chunks</span><span class="token punctuation">.</span><span class="token property-access">update</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>\n      <span class="token comment">// block.renderer.dirty(...) will give me &#96;dirty &amp; bitmask&#96;</span>\n      b<span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">if (</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>block<span class="token punctuation">.</span><span class="token property-access">renderer</span><span class="token punctuation">.</span><span class="token method function property-access">dirty</span><span class="token punctuation">(</span>dependencies<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">) @select_options(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">var</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>data<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">.value);</span><span class="token template-punctuation string">&#96;</span></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// highlight-end</span>\n  <span class="token punctuation">&#125;</span>\n<span class="token punctuation">&#125;</span></code>',i(lr,Hh),i(lr,Rh),i(Rh,Mh),i(lr,Nh),i(lr,Wh),Wh.innerHTML='<code class="language-js"><span class="token function">add_spread_attributes</span><span class="token punctuation">(</span><span class="token parameter">block<span class="token punctuation">:</span> <span class="token maybe-class-name">Block</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token comment">// ...</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">node</span><span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">===</span> <span class="token string">\'select\'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token comment">// highlight-start</span>\n    <span class="token keyword">const</span> dependencies <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> attr <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">attributes</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> dep <span class="token keyword">of</span> attr<span class="token punctuation">.</span><span class="token property-access">node</span><span class="token punctuation">.</span><span class="token property-access">dependencies</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n        dependencies<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span>dep<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">&#125;</span>\n    <span class="token punctuation">&#125;</span>\n    <span class="token comment">// highlight-end</span>\n    block<span class="token punctuation">.</span><span class="token property-access">chunks</span><span class="token punctuation">.</span><span class="token property-access">mount</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>\n      b<span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">@select_options(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">var</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>data<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">.value);</span><span class="token template-punctuation string">&#96;</span></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    block<span class="token punctuation">.</span><span class="token property-access">chunks</span><span class="token punctuation">.</span><span class="token property-access">update</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>\n      b<span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">if (</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>block<span class="token punctuation">.</span><span class="token property-access">renderer</span><span class="token punctuation">.</span><span class="token method function property-access">dirty</span><span class="token punctuation">(</span>dependencies<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">) @select_options(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">var</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>data<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">.value);</span><span class="token template-punctuation string">&#96;</span></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span>\n<span class="token punctuation">&#125;</span></code>',i(lr,qh),i(lr,Bh),i(Bh,Fh),r(n,zh,a),r(n,Uh,a),i(Uh,Gh),i(Gh,Jh),i(Jh,Vh),i(Uh,Yh),i(Uh,Qh),i(Qh,Kh),i(Qh,Zh),i(Zh,Xh),i(Qh,nd),i(Qh,ad),i(ad,sd),i(Qh,td),i(Uh,ed),i(Uh,od),i(od,pd),i(od,cd),i(cd,ld),i(od,id),i(Uh,rd),i(Uh,ud),i(ud,kd),i(ud,hd),i(hd,dd),i(ud,fd),i(Uh,md),i(Uh,gd),i(gd,vd),i(Uh,yd),i(Uh,bd),i(Uh,Ed),i(Uh,wd),i(wd,Id),i(wd,xd),i(xd,_d),i(wd,Od),i(Uh,Sd),i(Uh,Cd),i(Cd,jd),i(Cd,Pd),i(Pd,Ad),i(Cd,Td)},p:n,d(n){n&&u(s),n&&u($),n&&u(D),n&&u(En),n&&u(wn),n&&u(sa),n&&u(ta),n&&u(rs),n&&u(us),n&&u(cr),n&&u(lr),n&&u(zh),n&&u(Uh)}}}function hn(n){let s,t;const e=[dn];let o={$$slots:{default:[kn]},$$scope:{ctx:n}};for(let n=0;n<e.length;n+=1)o=a(o,e[n]);return s=new un({props:o}),{c(){F(s.$$.fragment)},l(n){z(s.$$.fragment,n)},m(n,a){U(s,n,a),t=!0},p(n,[a]){const t=0&a?function(n,a){const s={},t={},e={$$scope:1};let o=n.length;for(;o--;){const p=n[o],c=a[o];if(c){for(const n in p)n in c||(t[n]=1);for(const n in c)e[n]||(s[n]=c[n],e[n]=1);n[o]=c}else for(const n in p)e[n]=1}for(const n in t)n in s||(s[n]=void 0);return s}(e,[(o=dn,"object"==typeof o&&null!==o?o:{})]):{};var o;1&a&&(t.$$scope={dirty:a,ctx:n}),s.$set(t)},i(n){t||(q(s.$$.fragment,n),t=!0)},o(n){B(s.$$.fragment,n),t=!1},d(n){G(s,n)}}}const dn={title:"Contributing to Svelte - Fixing issue #4392",date:"2020-05-23T08:00:00Z",tags:["Svelte","JavaScript","Open Source"],series:"Contributing to Svelte",description:"I am going to tell you an anecdote on how I investigated and fixed a bug in Svelte. I documented down my train of thoughts as detailed as possible. I hope this gives anyone who is reading, a glimpse on how to work on the Svelte source code.",slug:"contributing-to-svelte-fixing-issue-4392",type:"blog"};class fn extends Y{constructor(n){super(),V(this,n,null,hn,p,{})}}setTimeout(()=>{new fn({target:document.querySelector("#app"),hydrate:!0});if(document.querySelector(".twitter-tweet")){const n=document.createElement("script");n.async=!0,n.src="https://platform.twitter.com/widgets.js",n.charset="utf-8",document.body.appendChild(n)}if("loading"in HTMLImageElement.prototype){document.querySelectorAll('img[loading="lazy"]').forEach(n=>{n.src=n.dataset.src})}else{const n=document.createElement("script");n.src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js",document.body.appendChild(n)}},3e3);
