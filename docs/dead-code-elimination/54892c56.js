function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function a(){return Object.create(null)}function o(e){e.forEach(n)}function s(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function c(e,n,a,o){return e[1]&&o?t(a.ctx.slice(),e[1](o(n))):a.ctx}function i(e,t,n,a,o,s,r){const i=function(e,t,n,a){if(e[2]&&a){const o=e[2](a(n));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],n=Math.max(t.dirty.length,o.length);for(let a=0;a<n;a+=1)e[a]=t.dirty[a]|o[a];return e}return t.dirty|o}return t.dirty}(t,a,o,s);if(i){const o=c(t,n,a,r);e.p(o,i)}}function l(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function p(e){e.parentNode.removeChild(e)}function f(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function h(e){return document.createElement(e)}function d(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function m(e){return document.createTextNode(e)}function g(){return m(" ")}function v(){return m("")}function b(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function y(e){return Array.from(e.childNodes)}function E(e,t,n,a){for(let a=0;a<e.length;a+=1){const o=e[a];if(o.nodeName===t){let t=0;const s=[];for(;t<o.attributes.length;){const e=o.attributes[t++];n[e.name]||s.push(e.name)}for(let e=0;e<s.length;e++)o.removeAttribute(s[e]);return e.splice(a,1)[0]}}return a?d(t):h(t)}function w(e,t){for(let n=0;n<e.length;n+=1){const a=e[n];if(3===a.nodeType)return a.data=""+t,e.splice(n,1)[0]}return m(t)}function k(e){return w(e," ")}function $(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function A(e,t){e.value=null==t?"":t}class T{constructor(e=null){this.a=e,this.e=this.n=null}m(e,t,n=null){this.e||(this.e=h(t.nodeName),this.t=t,this.h(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)u(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(p)}}let j;function _(e){j=e}function x(e){(function(){if(!j)throw new Error("Function called outside component initialization");return j})().$$.on_mount.push(e)}const O=[],L=[],N=[],P=[],H=Promise.resolve();let S=!1;function C(e){N.push(e)}let M=!1;const I=new Set;function R(){if(!M){M=!0;do{for(let e=0;e<O.length;e+=1){const t=O[e];_(t),D(t.$$)}for(O.length=0;L.length;)L.pop()();for(let e=0;e<N.length;e+=1){const t=N[e];I.has(t)||(I.add(t),t())}N.length=0}while(O.length);for(;P.length;)P.pop()();S=!1,M=!1,I.clear()}}function D(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(C)}}const B=new Set;function F(e,t){e&&e.i&&(B.delete(e),e.i(t))}function z(e,t,n,a){if(e&&e.o){if(B.has(e))return;B.add(e),(void 0).c.push(()=>{B.delete(e),a&&(n&&e.d(1),a())}),e.o(t)}}function U(e){e&&e.c()}function q(e,t){e&&e.l(t)}function G(e,t,a){const{fragment:r,on_mount:c,on_destroy:i,after_update:l}=e.$$;r&&r.m(t,a),C(()=>{const t=c.map(n).filter(s);i?i.push(...t):o(t),e.$$.on_mount=[]}),l.forEach(C)}function W(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function J(e,t){-1===e.$$.dirty[0]&&(O.push(e),S||(S=!0,H.then(R)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function V(t,n,s,r,c,i,l=[-1]){const u=j;_(t);const f=n.props||{},h=t.$$={fragment:null,ctx:null,props:i,update:e,not_equal:c,bound:a(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:a(),dirty:l};let d=!1;if(h.ctx=s?s(t,f,(e,n,...a)=>{const o=a.length?a[0]:n;return h.ctx&&c(h.ctx[e],h.ctx[e]=o)&&(h.bound[e]&&h.bound[e](o),d&&J(t,e)),n}):[],h.update(),d=!0,o(h.before_update),h.fragment=!!r&&r(h.ctx),n.target){if(n.hydrate){const e=y(n.target);h.fragment&&h.fragment.l(e),e.forEach(p)}else h.fragment&&h.fragment.c();n.intro&&F(t.$$.fragment),G(t,n.target,n.anchor),R()}_(u)}class Y{$destroy(){W(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function K(t){let n,a,o,s,r,c,i,f,v,$,A,T,j,_,x,O,L,N,P,H,S,C,M,I,R,D,B,F,z,U,q,G,W,J,V;return{c(){n=h("header"),a=h("nav"),o=h("ul"),s=h("li"),r=h("a"),c=m("Tan Li Hau"),i=g(),f=h("li"),v=h("a"),$=m("About"),A=g(),T=h("li"),j=h("a"),_=m("Writings"),x=g(),O=h("li"),L=h("a"),N=m("Talks"),P=g(),H=h("li"),S=h("a"),C=m("Notes"),M=g(),I=h("li"),R=h("a"),D=m("Newsletter"),B=g(),F=h("li"),z=h("a"),U=d("svg"),q=d("path"),G=g(),W=h("a"),J=d("svg"),V=d("path"),this.h()},l(e){n=E(e,"HEADER",{class:!0});var t=y(n);a=E(t,"NAV",{});var l=y(a);o=E(l,"UL",{class:!0});var u=y(o);s=E(u,"LI",{class:!0});var h=y(s);r=E(h,"A",{href:!0,class:!0});var d=y(r);c=w(d,"Tan Li Hau"),d.forEach(p),h.forEach(p),i=k(u),f=E(u,"LI",{class:!0});var m=y(f);v=E(m,"A",{href:!0,class:!0});var g=y(v);$=w(g,"About"),g.forEach(p),m.forEach(p),A=k(u),T=E(u,"LI",{class:!0});var b=y(T);j=E(b,"A",{href:!0,class:!0});var Y=y(j);_=w(Y,"Writings"),Y.forEach(p),b.forEach(p),x=k(u),O=E(u,"LI",{class:!0});var K=y(O);L=E(K,"A",{href:!0,class:!0});var Z=y(L);N=w(Z,"Talks"),Z.forEach(p),K.forEach(p),P=k(u),H=E(u,"LI",{class:!0});var Q=y(H);S=E(Q,"A",{href:!0,class:!0});var X=y(S);C=w(X,"Notes"),X.forEach(p),Q.forEach(p),M=k(u),I=E(u,"LI",{class:!0});var ee=y(I);R=E(ee,"A",{href:!0,class:!0});var te=y(R);D=w(te,"Newsletter"),te.forEach(p),ee.forEach(p),B=k(u),F=E(u,"LI",{class:!0});var ne=y(F);z=E(ne,"A",{"aria-label":!0,href:!0,class:!0});var ae=y(z);U=E(ae,"svg",{viewBox:!0,width:!0,height:!0,class:!0},1);var oe=y(U);q=E(oe,"path",{d:!0},1),y(q).forEach(p),oe.forEach(p),ae.forEach(p),G=k(ne),W=E(ne,"A",{"aria-label":!0,href:!0,class:!0});var se=y(W);J=E(se,"svg",{viewBox:!0,width:!0,height:!0,class:!0},1);var re=y(J);V=E(re,"path",{d:!0},1),y(V).forEach(p),re.forEach(p),se.forEach(p),ne.forEach(p),u.forEach(p),l.forEach(p),t.forEach(p),this.h()},h(){b(r,"href","/"),b(r,"class","svelte-f3e4uo"),b(s,"class","svelte-f3e4uo"),b(v,"href","/about"),b(v,"class","svelte-f3e4uo"),b(f,"class","svelte-f3e4uo"),b(j,"href","/blogs"),b(j,"class","svelte-f3e4uo"),b(T,"class","svelte-f3e4uo"),b(L,"href","/talks"),b(L,"class","svelte-f3e4uo"),b(O,"class","svelte-f3e4uo"),b(S,"href","/notes"),b(S,"class","svelte-f3e4uo"),b(H,"class","svelte-f3e4uo"),b(R,"href","/newsletter"),b(R,"class","svelte-f3e4uo"),b(I,"class","svelte-f3e4uo"),b(q,"d","M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66\n    10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5\n    4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"),b(U,"viewBox","0 0 24 24"),b(U,"width","1em"),b(U,"height","1em"),b(U,"class","svelte-f3e4uo"),b(z,"aria-label","Twitter account"),b(z,"href","https://twitter.com/lihautan"),b(z,"class","svelte-f3e4uo"),b(V,"d","M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0\n    0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07\n    5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65\n    5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42\n    3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"),b(J,"viewBox","0 0 24 24"),b(J,"width","1em"),b(J,"height","1em"),b(J,"class","svelte-f3e4uo"),b(W,"aria-label","Github account"),b(W,"href","https://github.com/tanhauhau"),b(W,"class","svelte-f3e4uo"),b(F,"class","social svelte-f3e4uo"),b(o,"class","svelte-f3e4uo"),b(n,"class","svelte-f3e4uo")},m(e,t){u(e,n,t),l(n,a),l(a,o),l(o,s),l(s,r),l(r,c),l(o,i),l(o,f),l(f,v),l(v,$),l(o,A),l(o,T),l(T,j),l(j,_),l(o,x),l(o,O),l(O,L),l(L,N),l(o,P),l(o,H),l(H,S),l(S,C),l(o,M),l(o,I),l(I,R),l(R,D),l(o,B),l(o,F),l(F,z),l(z,U),l(U,q),l(F,G),l(F,W),l(W,J),l(J,V)},p:e,i:e,o:e,d(e){e&&p(n)}}}class Z extends Y{constructor(e){super(),V(this,e,null,K,r,{})}}function Q(t){let n,a,o,s,r,c,i,f,d,v,$,T,j,_,x,O,L,N,P,H;return{c(){n=h("div"),a=h("h1"),o=m("Subscribe to my newsletter"),s=g(),r=h("h2"),c=m("Get the latest blog posts and project updates delivered right to your inbox"),i=g(),f=h("form"),d=h("div"),v=h("input"),$=g(),T=h("input"),_=g(),x=h("input"),O=g(),L=h("p"),N=m("Powered by Buttondown."),this.h()},l(e){n=E(e,"DIV",{class:!0});var t=y(n);a=E(t,"H1",{});var l=y(a);o=w(l,"Subscribe to my newsletter"),l.forEach(p),s=k(t),r=E(t,"H2",{class:!0});var u=y(r);c=w(u,"Get the latest blog posts and project updates delivered right to your inbox"),u.forEach(p),i=k(t),f=E(t,"FORM",{action:!0,method:!0,target:!0,onsubmit:!0,class:!0});var h=y(f);d=E(h,"DIV",{class:!0});var m=y(d);v=E(m,"INPUT",{type:!0,name:!0,id:!0,"aria-label":!0,placeholder:!0,class:!0}),$=k(m),T=E(m,"INPUT",{type:!0,value:!0,disabled:!0,class:!0}),m.forEach(p),_=k(h),x=E(h,"INPUT",{type:!0,value:!0,name:!0,class:!0}),O=k(h),L=E(h,"P",{class:!0});var g=y(L);N=w(g,"Powered by Buttondown."),g.forEach(p),h.forEach(p),t.forEach(p),this.h()},h(){b(r,"class","svelte-1k1s1co"),b(v,"type","email"),b(v,"name","email"),b(v,"id","bd-email"),b(v,"aria-label","email address"),b(v,"placeholder","youremail@example.com"),b(v,"class","svelte-1k1s1co"),b(T,"type","submit"),T.value="Subscribe",T.disabled=j=!t[0],b(T,"class","svelte-1k1s1co"),b(d,"class","form-item svelte-1k1s1co"),b(x,"type","hidden"),x.value="1",b(x,"name","embed"),b(x,"class","svelte-1k1s1co"),b(L,"class","svelte-1k1s1co"),b(f,"action","https://buttondown.email/api/emails/embed-subscribe/lihautan"),b(f,"method","post"),b(f,"target","popupwindow"),b(f,"onsubmit","window.open('https://buttondown.email/lihautan', 'popupwindow')"),b(f,"class","embeddable-buttondown-form"),b(n,"class","form svelte-1k1s1co")},m(e,p){var h,m,g,b;u(e,n,p),l(n,a),l(a,o),l(n,s),l(n,r),l(r,c),l(n,i),l(n,f),l(f,d),l(d,v),A(v,t[0]),l(d,$),l(d,T),l(f,_),l(f,x),l(f,O),l(f,L),l(L,N),P||(h=v,m="input",g=t[1],h.addEventListener(m,g,b),H=()=>h.removeEventListener(m,g,b),P=!0)},p(e,[t]){1&t&&v.value!==e[0]&&A(v,e[0]),1&t&&j!==(j=!e[0])&&(T.disabled=j)},i:e,o:e,d(e){e&&p(n),P=!1,H()}}}function X(e,t,n){let a;return[a,function(){a=this.value,n(0,a)}]}class ee extends Y{constructor(e){super(),V(this,e,X,Q,r,{})}}function te(e){return x(()=>(setTimeout(()=>{if(window.innerWidth>1080){const e=document.createElement("script");e.async=!0,e.type="text/javascript",e.src="//cdn.carbonads.com/carbon.js?serve=CE7ITK3E&placement=lihautancom",e.id="_carbonads_js",document.body.appendChild(e)}},5e3),()=>{try{const e=document.getElementById("carbonads");e.parentNode.removeChild(e)}catch(e){}})),[]}class ne extends Y{constructor(e){super(),V(this,e,te,null,r,{})}}function ae(e,t,n){const a=e.slice();return a[6]=t[n],a}function oe(e,t,n){const a=e.slice();return a[6]=t[n],a}function se(e){let t,n;return{c(){t=h("meta"),this.h()},l(e){t=E(e,"META",{name:!0,content:!0}),this.h()},h(){b(t,"name","keywords"),b(t,"content",n=e[6])},m(e,n){u(e,t,n)},p(e,a){4&a&&n!==(n=e[6])&&b(t,"content",n)},d(e){e&&p(t)}}}function re(e){let t,n,a=e[6]+"";return{c(){t=h("span"),n=m(a),this.h()},l(e){t=E(e,"SPAN",{class:!0});var o=y(t);n=w(o,a),o.forEach(p),this.h()},h(){b(t,"class","svelte-9tqnza")},m(e,a){u(e,t,a),l(t,n)},p(e,t){4&t&&a!==(a=e[6]+"")&&$(n,a)},d(e){e&&p(t)}}}function ce(e){let t,n,a,o,s,r,d,A,j,_,x,O,L,N,P,H,S,C,M,I,R,D,B,J,V,Y,K,Q,X,te,ce,ie,le,ue,pe,fe,he=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"Article",author:e[3],copyrightHolder:e[3],copyrightYear:"2020",creator:e[3],publisher:e[3],description:e[1],headline:e[0],name:e[0],inLanguage:"en"})}<\/script>`,de=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",description:"Breadcrumbs list",name:"Breadcrumbs",itemListElement:[{"@type":"ListItem",item:{"@id":"https://lihautan.com",name:"Homepage"},name:"Homepage",position:1},{"@type":"ListItem",item:{"@id":"https%3A%2F%2Flihautan.com%2Fdead-code-elimination",name:e[0]},name:e[0],position:2}]})}<\/script>`;document.title=t=e[0]+" | Tan Li Hau";let me=e[2],ge=[];for(let t=0;t<me.length;t+=1)ge[t]=se(oe(e,me,t));B=new Z({});let ve=e[2],be=[];for(let t=0;t<ve.length;t+=1)be[t]=re(ae(e,ve,t));const ye=e[5].default,Ee=function(e,t,n,a){if(e){const o=c(e,t,n,a);return e[0](o)}}(ye,e,e[4],null);return le=new ee({}),pe=new ne({}),{c(){n=h("meta"),a=h("meta"),o=h("meta"),s=h("meta"),r=h("meta"),d=h("meta"),A=h("meta"),j=h("meta"),_=h("meta"),x=h("meta"),O=h("meta");for(let e=0;e<ge.length;e+=1)ge[e].c();L=h("meta"),N=h("meta"),H=v(),C=v(),M=g(),I=h("a"),R=m("Skip to content"),D=g(),U(B.$$.fragment),J=g(),V=h("main"),Y=h("h1"),K=m(e[0]),Q=g();for(let e=0;e<be.length;e+=1)be[e].c();X=g(),te=h("article"),Ee&&Ee.c(),ce=g(),ie=h("footer"),U(le.$$.fragment),ue=g(),U(pe.$$.fragment),this.h()},l(t){const c=function(e,t=document.body){return Array.from(t.querySelectorAll(e))}('[data-svelte="svelte-15e3uyc"]',document.head);n=E(c,"META",{name:!0,content:!0}),a=E(c,"META",{name:!0,content:!0}),o=E(c,"META",{name:!0,content:!0}),s=E(c,"META",{name:!0,content:!0}),r=E(c,"META",{name:!0,content:!0}),d=E(c,"META",{name:!0,content:!0}),A=E(c,"META",{name:!0,content:!0}),j=E(c,"META",{name:!0,content:!0}),_=E(c,"META",{name:!0,content:!0}),x=E(c,"META",{name:!0,content:!0}),O=E(c,"META",{name:!0,content:!0});for(let e=0;e<ge.length;e+=1)ge[e].l(c);L=E(c,"META",{itemprop:!0,content:!0}),N=E(c,"META",{itemprop:!0,content:!0}),H=v(),C=v(),c.forEach(p),M=k(t),I=E(t,"A",{href:!0,class:!0});var i=y(I);R=w(i,"Skip to content"),i.forEach(p),D=k(t),q(B.$$.fragment,t),J=k(t),V=E(t,"MAIN",{id:!0,class:!0});var l=y(V);Y=E(l,"H1",{});var u=y(Y);K=w(u,e[0]),u.forEach(p),Q=k(l);for(let e=0;e<be.length;e+=1)be[e].l(l);X=k(l),te=E(l,"ARTICLE",{});var f=y(te);Ee&&Ee.l(f),f.forEach(p),l.forEach(p),ce=k(t),ie=E(t,"FOOTER",{class:!0});var h=y(ie);q(le.$$.fragment,h),ue=k(h),q(pe.$$.fragment,h),h.forEach(p),this.h()},h(){b(n,"name","description"),b(n,"content",e[1]),b(a,"name","image"),b(a,"content",null),b(o,"name","og:image"),b(o,"content",null),b(s,"name","og:title"),b(s,"content",e[0]),b(r,"name","og:description"),b(r,"content",e[1]),b(d,"name","og:type"),b(d,"content","website"),b(A,"name","twitter:card"),b(A,"content","summary_large_image"),b(j,"name","twitter:creator"),b(j,"content","@lihautan"),b(_,"name","twitter:title"),b(_,"content",e[0]),b(x,"name","twitter:description"),b(x,"content",e[1]),b(O,"name","twitter:image"),b(O,"content",null),b(L,"itemprop","url"),b(L,"content","https%3A%2F%2Flihautan.com%2Fdead-code-elimination"),b(N,"itemprop","image"),b(N,"content",null),P=new T(H),S=new T(C),b(I,"href","#content"),b(I,"class","skip svelte-9tqnza"),b(V,"id","content"),b(V,"class","blog svelte-9tqnza"),b(ie,"class","svelte-9tqnza")},m(e,t){l(document.head,n),l(document.head,a),l(document.head,o),l(document.head,s),l(document.head,r),l(document.head,d),l(document.head,A),l(document.head,j),l(document.head,_),l(document.head,x),l(document.head,O);for(let e=0;e<ge.length;e+=1)ge[e].m(document.head,null);l(document.head,L),l(document.head,N),P.m(he,document.head),l(document.head,H),S.m(de,document.head),l(document.head,C),u(e,M,t),u(e,I,t),l(I,R),u(e,D,t),G(B,e,t),u(e,J,t),u(e,V,t),l(V,Y),l(Y,K),l(V,Q);for(let e=0;e<be.length;e+=1)be[e].m(V,null);l(V,X),l(V,te),Ee&&Ee.m(te,null),u(e,ce,t),u(e,ie,t),G(le,ie,null),l(ie,ue),G(pe,ie,null),fe=!0},p(e,[a]){if((!fe||1&a)&&t!==(t=e[0]+" | Tan Li Hau")&&(document.title=t),(!fe||2&a)&&b(n,"content",e[1]),(!fe||1&a)&&b(s,"content",e[0]),(!fe||2&a)&&b(r,"content",e[1]),(!fe||1&a)&&b(_,"content",e[0]),(!fe||2&a)&&b(x,"content",e[1]),4&a){let t;for(me=e[2],t=0;t<me.length;t+=1){const n=oe(e,me,t);ge[t]?ge[t].p(n,a):(ge[t]=se(n),ge[t].c(),ge[t].m(L.parentNode,L))}for(;t<ge.length;t+=1)ge[t].d(1);ge.length=me.length}if((!fe||3&a)&&he!==(he=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"Article",author:e[3],copyrightHolder:e[3],copyrightYear:"2020",creator:e[3],publisher:e[3],description:e[1],headline:e[0],name:e[0],inLanguage:"en"})}<\/script>`)&&P.p(he),(!fe||1&a)&&de!==(de=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",description:"Breadcrumbs list",name:"Breadcrumbs",itemListElement:[{"@type":"ListItem",item:{"@id":"https://lihautan.com",name:"Homepage"},name:"Homepage",position:1},{"@type":"ListItem",item:{"@id":"https%3A%2F%2Flihautan.com%2Fdead-code-elimination",name:e[0]},name:e[0],position:2}]})}<\/script>`)&&S.p(de),(!fe||1&a)&&$(K,e[0]),4&a){let t;for(ve=e[2],t=0;t<ve.length;t+=1){const n=ae(e,ve,t);be[t]?be[t].p(n,a):(be[t]=re(n),be[t].c(),be[t].m(V,X))}for(;t<be.length;t+=1)be[t].d(1);be.length=ve.length}Ee&&Ee.p&&16&a&&i(Ee,ye,e,e[4],a,null,null)},i(e){fe||(F(B.$$.fragment,e),F(Ee,e),F(le.$$.fragment,e),F(pe.$$.fragment,e),fe=!0)},o(e){z(B.$$.fragment,e),z(Ee,e),z(le.$$.fragment,e),z(pe.$$.fragment,e),fe=!1},d(e){p(n),p(a),p(o),p(s),p(r),p(d),p(A),p(j),p(_),p(x),p(O),f(ge,e),p(L),p(N),p(H),e&&P.d(),p(C),e&&S.d(),e&&p(M),e&&p(I),e&&p(D),W(B,e),e&&p(J),e&&p(V),f(be,e),Ee&&Ee.d(e),e&&p(ce),e&&p(ie),W(le),W(pe)}}}function ie(e,t,n){let{title:a=""}=t,{description:o=""}=t,{tags:s=[]}=t;const r={"@type":"Person",name:"Tan Li Hau"};let{$$slots:c={},$$scope:i}=t;return e.$set=e=>{"title"in e&&n(0,a=e.title),"description"in e&&n(1,o=e.description),"tags"in e&&n(2,s=e.tags),"$$scope"in e&&n(4,i=e.$$scope)},[a,o,s,r,i,c]}class le extends Y{constructor(e){super(),V(this,e,ie,ce,r,{title:0,description:1,tags:2})}}function ue(t){let n,a,o,s,r,c,i,f,d,v,$,A,T,j,_,x,O,L,N,P,H,S,C,M,I,R,D,B,F,z,U,q,G,W,J,V,Y,K,Z,Q,X,ee,te,ne,ae,oe,se,re,ce,ie,le,ue,pe,fe,he,de,me,ge,ve,be,ye,Ee,we,ke,$e,Ae,Te,je,_e,xe,Oe,Le,Ne,Pe,He,Se,Ce,Me,Ie,Re,De,Be,Fe,ze,Ue,qe,Ge,We,Je,Ve,Ye,Ke,Ze,Qe,Xe,et,tt,nt,at,ot,st,rt,ct,it,lt,ut,pt,ft,ht,dt,mt,gt,vt,bt,yt,Et,wt,kt;return{c(){n=h("p"),a=m("Imagine you have the code below:"),o=g(),s=h("pre"),r=g(),c=h("p"),i=m("after passing this code through "),f=h("a"),d=m("uglify-js"),v=m(", you will get the code below:"),$=g(),A=h("pre"),T=g(),j=h("p"),_=h("strong"),x=m("uglify-js"),O=m(" will do dead code removal, ie: it will remove code that will not affect the program results. Since we defined "),L=h("code"),N=m("a"),P=m(" and "),H=h("code"),S=m("b"),C=m(" in the function "),M=h("code"),I=m("foo"),R=m(" and we are not using "),D=h("code"),B=m("a"),F=m(" and "),z=h("code"),U=m("b"),q=m(" within the "),G=h("code"),W=m("foo"),J=m(", "),V=h("strong"),Y=m("uglify-js"),K=m(" safely removes it from the uglified code."),Z=g(),Q=h("p"),X=m("However, if you can see from the uglified code, "),ee=h("code"),te=m("foobar()"),ne=m(" is preserved. This is because calling "),ae=h("code"),oe=m("foobar"),se=m(" may have side effects on the program, so "),re=h("strong"),ce=m("uglify-js"),ie=m(" preserves foobar(). But since we do not need the return value of "),le=h("code"),ue=m("foobar()"),pe=m(", which is assigned to "),fe=h("code"),he=m("a"),de=m(", "),me=h("code"),ge=m("a"),ve=m(" got removed by uglify-js."),be=g(),ye=h("hr"),Ee=g(),we=h("p"),ke=m("What if we know that "),$e=h("code"),Ae=m("foobar()"),Te=m(" will not caused any side effects?"),je=g(),_e=h("p"),xe=m("How do we tell "),Oe=h("strong"),Le=m("uglify-js"),Ne=m(" that if we are not using the return value from "),Pe=h("code"),He=m("foobar()"),Se=m(", please remove it as well?"),Ce=g(),Me=h("hr"),Ie=g(),Re=h("p"),De=m("Turns out that "),Be=h("strong"),Fe=m("uglify-js"),ze=m(" will treat a function call as “pure” if there is a comment annotation "),Ue=h("code"),qe=m("/*@__PURE__*/"),Ge=m(" or "),We=h("code"),Je=m("/*#__PURE__*/"),Ve=m(" immediately precedes the call."),Ye=g(),Ke=h("p"),Ze=m("For example: "),Qe=h("code"),Xe=m("/* @__PURE__ */ foobar()"),et=m(" !"),tt=g(),nt=h("pre"),at=g(),ot=h("p"),st=m("Note that now "),rt=h("code"),ct=m("foobar()"),it=m(" is being removed!"),lt=g(),ut=h("hr"),pt=g(),ft=h("p"),ht=m("So, how is this useful?"),dt=g(),mt=h("p"),gt=m("As a library author, you can write a babel plugin to mark your function to be pure, so that "),vt=h("strong"),bt=m("uglify-js"),yt=m(" can drop the function call if the return value is not being used in the code. (There is a "),Et=h("a"),wt=m("util from babel"),kt=m(" to do just the job of marking function as pure 😎)"),this.h()},l(e){n=E(e,"P",{});var t=y(n);a=w(t,"Imagine you have the code below:"),t.forEach(p),o=k(e),s=E(e,"PRE",{class:!0}),y(s).forEach(p),r=k(e),c=E(e,"P",{});var l=y(c);i=w(l,"after passing this code through "),f=E(l,"A",{href:!0,rel:!0});var u=y(f);d=w(u,"uglify-js"),u.forEach(p),v=w(l,", you will get the code below:"),l.forEach(p),$=k(e),A=E(e,"PRE",{class:!0}),y(A).forEach(p),T=k(e),j=E(e,"P",{});var h=y(j);_=E(h,"STRONG",{});var m=y(_);x=w(m,"uglify-js"),m.forEach(p),O=w(h," will do dead code removal, ie: it will remove code that will not affect the program results. Since we defined "),L=E(h,"CODE",{});var g=y(L);N=w(g,"a"),g.forEach(p),P=w(h," and "),H=E(h,"CODE",{});var b=y(H);S=w(b,"b"),b.forEach(p),C=w(h," in the function "),M=E(h,"CODE",{});var $t=y(M);I=w($t,"foo"),$t.forEach(p),R=w(h," and we are not using "),D=E(h,"CODE",{});var At=y(D);B=w(At,"a"),At.forEach(p),F=w(h," and "),z=E(h,"CODE",{});var Tt=y(z);U=w(Tt,"b"),Tt.forEach(p),q=w(h," within the "),G=E(h,"CODE",{});var jt=y(G);W=w(jt,"foo"),jt.forEach(p),J=w(h,", "),V=E(h,"STRONG",{});var _t=y(V);Y=w(_t,"uglify-js"),_t.forEach(p),K=w(h," safely removes it from the uglified code."),h.forEach(p),Z=k(e),Q=E(e,"P",{});var xt=y(Q);X=w(xt,"However, if you can see from the uglified code, "),ee=E(xt,"CODE",{});var Ot=y(ee);te=w(Ot,"foobar()"),Ot.forEach(p),ne=w(xt," is preserved. This is because calling "),ae=E(xt,"CODE",{});var Lt=y(ae);oe=w(Lt,"foobar"),Lt.forEach(p),se=w(xt," may have side effects on the program, so "),re=E(xt,"STRONG",{});var Nt=y(re);ce=w(Nt,"uglify-js"),Nt.forEach(p),ie=w(xt," preserves foobar(). But since we do not need the return value of "),le=E(xt,"CODE",{});var Pt=y(le);ue=w(Pt,"foobar()"),Pt.forEach(p),pe=w(xt,", which is assigned to "),fe=E(xt,"CODE",{});var Ht=y(fe);he=w(Ht,"a"),Ht.forEach(p),de=w(xt,", "),me=E(xt,"CODE",{});var St=y(me);ge=w(St,"a"),St.forEach(p),ve=w(xt," got removed by uglify-js."),xt.forEach(p),be=k(e),ye=E(e,"HR",{}),Ee=k(e),we=E(e,"P",{});var Ct=y(we);ke=w(Ct,"What if we know that "),$e=E(Ct,"CODE",{});var Mt=y($e);Ae=w(Mt,"foobar()"),Mt.forEach(p),Te=w(Ct," will not caused any side effects?"),Ct.forEach(p),je=k(e),_e=E(e,"P",{});var It=y(_e);xe=w(It,"How do we tell "),Oe=E(It,"STRONG",{});var Rt=y(Oe);Le=w(Rt,"uglify-js"),Rt.forEach(p),Ne=w(It," that if we are not using the return value from "),Pe=E(It,"CODE",{});var Dt=y(Pe);He=w(Dt,"foobar()"),Dt.forEach(p),Se=w(It,", please remove it as well?"),It.forEach(p),Ce=k(e),Me=E(e,"HR",{}),Ie=k(e),Re=E(e,"P",{});var Bt=y(Re);De=w(Bt,"Turns out that "),Be=E(Bt,"STRONG",{});var Ft=y(Be);Fe=w(Ft,"uglify-js"),Ft.forEach(p),ze=w(Bt," will treat a function call as “pure” if there is a comment annotation "),Ue=E(Bt,"CODE",{});var zt=y(Ue);qe=w(zt,"/*@__PURE__*/"),zt.forEach(p),Ge=w(Bt," or "),We=E(Bt,"CODE",{});var Ut=y(We);Je=w(Ut,"/*#__PURE__*/"),Ut.forEach(p),Ve=w(Bt," immediately precedes the call."),Bt.forEach(p),Ye=k(e),Ke=E(e,"P",{});var qt=y(Ke);Ze=w(qt,"For example: "),Qe=E(qt,"CODE",{});var Gt=y(Qe);Xe=w(Gt,"/* @__PURE__ */ foobar()"),Gt.forEach(p),et=w(qt," !"),qt.forEach(p),tt=k(e),nt=E(e,"PRE",{class:!0}),y(nt).forEach(p),at=k(e),ot=E(e,"P",{});var Wt=y(ot);st=w(Wt,"Note that now "),rt=E(Wt,"CODE",{});var Jt=y(rt);ct=w(Jt,"foobar()"),Jt.forEach(p),it=w(Wt," is being removed!"),Wt.forEach(p),lt=k(e),ut=E(e,"HR",{}),pt=k(e),ft=E(e,"P",{});var Vt=y(ft);ht=w(Vt,"So, how is this useful?"),Vt.forEach(p),dt=k(e),mt=E(e,"P",{});var Yt=y(mt);gt=w(Yt,"As a library author, you can write a babel plugin to mark your function to be pure, so that "),vt=E(Yt,"STRONG",{});var Kt=y(vt);bt=w(Kt,"uglify-js"),Kt.forEach(p),yt=w(Yt," can drop the function call if the return value is not being used in the code. (There is a "),Et=E(Yt,"A",{href:!0,rel:!0});var Zt=y(Et);wt=w(Zt,"util from babel"),Zt.forEach(p),kt=w(Yt," to do just the job of marking function as pure 😎)"),Yt.forEach(p),this.h()},h(){b(s,"class","language-js"),b(f,"href","https://www.npmjs.com/package/uglify-js"),b(f,"rel","nofollow"),b(A,"class","language-js"),b(nt,"class","language-js"),b(Et,"href","https://babeljs.io/docs/en/next/babel-helper-annotate-as-pure.html"),b(Et,"rel","nofollow")},m(e,t){u(e,n,t),l(n,a),u(e,o,t),u(e,s,t),s.innerHTML='<code class="language-js"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n   <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">foobar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>\n   <span class="token keyword">return</span> <span class="token number">10</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',u(e,r,t),u(e,c,t),l(c,i),l(c,f),l(f,d),l(c,v),u(e,$,t),u(e,A,t),A.innerHTML='<code class="language-js"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>\n  <span class="token function">foobar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> <span class="token number">10</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',u(e,T,t),u(e,j,t),l(j,_),l(_,x),l(j,O),l(j,L),l(L,N),l(j,P),l(j,H),l(H,S),l(j,C),l(j,M),l(M,I),l(j,R),l(j,D),l(D,B),l(j,F),l(j,z),l(z,U),l(j,q),l(j,G),l(G,W),l(j,J),l(j,V),l(V,Y),l(j,K),u(e,Z,t),u(e,Q,t),l(Q,X),l(Q,ee),l(ee,te),l(Q,ne),l(Q,ae),l(ae,oe),l(Q,se),l(Q,re),l(re,ce),l(Q,ie),l(Q,le),l(le,ue),l(Q,pe),l(Q,fe),l(fe,he),l(Q,de),l(Q,me),l(me,ge),l(Q,ve),u(e,be,t),u(e,ye,t),u(e,Ee,t),u(e,we,t),l(we,ke),l(we,$e),l($e,Ae),l(we,Te),u(e,je,t),u(e,_e,t),l(_e,xe),l(_e,Oe),l(Oe,Le),l(_e,Ne),l(_e,Pe),l(Pe,He),l(_e,Se),u(e,Ce,t),u(e,Me,t),u(e,Ie,t),u(e,Re,t),l(Re,De),l(Re,Be),l(Be,Fe),l(Re,ze),l(Re,Ue),l(Ue,qe),l(Re,Ge),l(Re,We),l(We,Je),l(Re,Ve),u(e,Ye,t),u(e,Ke,t),l(Ke,Ze),l(Ke,Qe),l(Qe,Xe),l(Ke,et),u(e,tt,t),u(e,nt,t),nt.innerHTML='<code class="language-js"><span class="token comment">// before uglify</span>\n<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n<span class="prism-highlight-code-line">  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token comment">/*@__PURE__*/</span><span class="token function">foobar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n  <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> <span class="token number">10</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span>\n\n<span class="token comment">// after uglify</span>\n<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">10</span><span class="token punctuation">&#125;</span></code>',u(e,at,t),u(e,ot,t),l(ot,st),l(ot,rt),l(rt,ct),l(ot,it),u(e,lt,t),u(e,ut,t),u(e,pt,t),u(e,ft,t),l(ft,ht),u(e,dt,t),u(e,mt,t),l(mt,gt),l(mt,vt),l(vt,bt),l(mt,yt),l(mt,Et),l(Et,wt),l(mt,kt)},p:e,d(e){e&&p(n),e&&p(o),e&&p(s),e&&p(r),e&&p(c),e&&p($),e&&p(A),e&&p(T),e&&p(j),e&&p(Z),e&&p(Q),e&&p(be),e&&p(ye),e&&p(Ee),e&&p(we),e&&p(je),e&&p(_e),e&&p(Ce),e&&p(Me),e&&p(Ie),e&&p(Re),e&&p(Ye),e&&p(Ke),e&&p(tt),e&&p(nt),e&&p(at),e&&p(ot),e&&p(lt),e&&p(ut),e&&p(pt),e&&p(ft),e&&p(dt),e&&p(mt)}}}function pe(e){let n,a;const o=[fe];let s={$$slots:{default:[ue]},$$scope:{ctx:e}};for(let e=0;e<o.length;e+=1)s=t(s,o[e]);return n=new le({props:s}),{c(){U(n.$$.fragment)},l(e){q(n.$$.fragment,e)},m(e,t){G(n,e,t),a=!0},p(e,[t]){const a=0&t?function(e,t){const n={},a={},o={$$scope:1};let s=e.length;for(;s--;){const r=e[s],c=t[s];if(c){for(const e in r)e in c||(a[e]=1);for(const e in c)o[e]||(n[e]=c[e],o[e]=1);e[s]=c}else for(const e in r)o[e]=1}for(const e in a)e in n||(n[e]=void 0);return n}(o,[(s=fe,"object"==typeof s&&null!==s?s:{})]):{};var s;1&t&&(a.$$scope={dirty:t,ctx:e}),n.$set(a)},i(e){a||(F(n.$$.fragment,e),a=!0)},o(e){z(n.$$.fragment,e),a=!1},d(e){W(n,e)}}}const fe={title:"Dead-code elimination",date:"2018-10-24T08:00:00Z",description:"How to hint uglify-js that your function is pure",slug:"dead-code-elimination",type:"blog"};class he extends Y{constructor(e){super(),V(this,e,null,pe,r,{})}}setTimeout(()=>{new he({target:document.querySelector("#app"),hydrate:!0});if(document.querySelector(".twitter-tweet")){const e=document.createElement("script");e.async=!0,e.src="https://platform.twitter.com/widgets.js",e.charset="utf-8",document.body.appendChild(e)}if("loading"in HTMLImageElement.prototype){document.querySelectorAll('img[loading="lazy"]').forEach(e=>{e.src=e.dataset.src})}else{const e=document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js",document.body.appendChild(e)}},3e3);
