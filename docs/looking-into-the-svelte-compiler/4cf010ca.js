function e(){}function t(e,t){for(const a in t)e[a]=t[a];return e}function a(e){return e()}function o(){return Object.create(null)}function r(e){e.forEach(a)}function n(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(e,a,o,r){return e[1]&&r?t(o.ctx.slice(),e[1](r(a))):o.ctx}function c(e,t,a,o,r,n,i){const c=function(e,t,a,o){if(e[2]&&o){const r=e[2](o(a));if(void 0===t.dirty)return r;if("object"==typeof r){const e=[],a=Math.max(t.dirty.length,r.length);for(let o=0;o<a;o+=1)e[o]=t.dirty[o]|r[o];return e}return t.dirty|r}return t.dirty}(t,o,r,n);if(c){const r=s(t,a,o,i);e.p(r,c)}}function h(e,t){e.appendChild(t)}function l(e,t,a){e.insertBefore(t,a||null)}function d(e){e.parentNode.removeChild(e)}function u(e,t){for(let a=0;a<e.length;a+=1)e[a]&&e[a].d(t)}function f(e){return document.createElement(e)}function p(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function m(e){return document.createTextNode(e)}function v(){return m(" ")}function w(){return m("")}function g(e,t,a){null==a?e.removeAttribute(t):e.getAttribute(t)!==a&&e.setAttribute(t,a)}function b(e){return Array.from(e.childNodes)}function y(e,t,a,o){for(let o=0;o<e.length;o+=1){const r=e[o];if(r.nodeName===t){let t=0;const n=[];for(;t<r.attributes.length;){const e=r.attributes[t++];a[e.name]||n.push(e.name)}for(let e=0;e<n.length;e++)r.removeAttribute(n[e]);return e.splice(o,1)[0]}}return o?p(t):f(t)}function E(e,t){for(let a=0;a<e.length;a+=1){const o=e[a];if(3===o.nodeType)return o.data=""+t,e.splice(a,1)[0]}return m(t)}function k(e){return E(e," ")}function S(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function T(e,t){e.value=null==t?"":t}class P{constructor(e=null){this.a=e,this.e=this.n=null}m(e,t,a=null){this.e||(this.e=f(t.nodeName),this.t=t,this.h(e)),this.i(a)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)l(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(d)}}let A;function O(e){A=e}function x(e){(function(){if(!A)throw new Error("Function called outside component initialization");return A})().$$.on_mount.push(e)}const $=[],C=[],I=[],D=[],j=Promise.resolve();let M=!1;function N(e){I.push(e)}let L=!1;const H=new Set;function F(){if(!L){L=!0;do{for(let e=0;e<$.length;e+=1){const t=$[e];O(t),R(t.$$)}for($.length=0;C.length;)C.pop()();for(let e=0;e<I.length;e+=1){const t=I[e];H.has(t)||(H.add(t),t())}I.length=0}while($.length);for(;D.length;)D.pop()();M=!1,L=!1,H.clear()}}function R(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(N)}}const _=new Set;function J(e,t){e&&e.i&&(_.delete(e),e.i(t))}function W(e,t,a,o){if(e&&e.o){if(_.has(e))return;_.add(e),(void 0).c.push(()=>{_.delete(e),o&&(a&&e.d(1),o())}),e.o(t)}}function B(e){e&&e.c()}function U(e,t){e&&e.l(t)}function q(e,t,o){const{fragment:i,on_mount:s,on_destroy:c,after_update:h}=e.$$;i&&i.m(t,o),N(()=>{const t=s.map(a).filter(n);c?c.push(...t):r(t),e.$$.on_mount=[]}),h.forEach(N)}function V(e,t){const a=e.$$;null!==a.fragment&&(r(a.on_destroy),a.fragment&&a.fragment.d(t),a.on_destroy=a.fragment=null,a.ctx=[])}function z(e,t){-1===e.$$.dirty[0]&&($.push(e),M||(M=!0,j.then(F)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function G(t,a,n,i,s,c,h=[-1]){const l=A;O(t);const u=a.props||{},f=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:s,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:o(),dirty:h};let p=!1;if(f.ctx=n?n(t,u,(e,a,...o)=>{const r=o.length?o[0]:a;return f.ctx&&s(f.ctx[e],f.ctx[e]=r)&&(f.bound[e]&&f.bound[e](r),p&&z(t,e)),a}):[],f.update(),p=!0,r(f.before_update),f.fragment=!!i&&i(f.ctx),a.target){if(a.hydrate){const e=b(a.target);f.fragment&&f.fragment.l(e),e.forEach(d)}else f.fragment&&f.fragment.c();a.intro&&J(t.$$.fragment),q(t,a.target,a.anchor),F()}O(l)}class Y{$destroy(){V(this,1),this.$destroy=e}$on(e,t){const a=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return a.push(t),()=>{const e=a.indexOf(t);-1!==e&&a.splice(e,1)}}$set(){}}function K(t){let a,o,r,n,i,s,c,u,w,S,T,P,A,O,x,$,C,I,D,j,M,N,L,H,F,R,_,J,W,B,U,q,V,z,G;return{c(){a=f("header"),o=f("nav"),r=f("ul"),n=f("li"),i=f("a"),s=m("Tan Li Hau"),c=v(),u=f("li"),w=f("a"),S=m("About"),T=v(),P=f("li"),A=f("a"),O=m("Writings"),x=v(),$=f("li"),C=f("a"),I=m("Talks"),D=v(),j=f("li"),M=f("a"),N=m("Notes"),L=v(),H=f("li"),F=f("a"),R=m("Newsletter"),_=v(),J=f("li"),W=f("a"),B=p("svg"),U=p("path"),q=v(),V=f("a"),z=p("svg"),G=p("path"),this.h()},l(e){a=y(e,"HEADER",{class:!0});var t=b(a);o=y(t,"NAV",{});var h=b(o);r=y(h,"UL",{class:!0});var l=b(r);n=y(l,"LI",{class:!0});var f=b(n);i=y(f,"A",{href:!0,class:!0});var p=b(i);s=E(p,"Tan Li Hau"),p.forEach(d),f.forEach(d),c=k(l),u=y(l,"LI",{class:!0});var m=b(u);w=y(m,"A",{href:!0,class:!0});var v=b(w);S=E(v,"About"),v.forEach(d),m.forEach(d),T=k(l),P=y(l,"LI",{class:!0});var g=b(P);A=y(g,"A",{href:!0,class:!0});var Y=b(A);O=E(Y,"Writings"),Y.forEach(d),g.forEach(d),x=k(l),$=y(l,"LI",{class:!0});var K=b($);C=y(K,"A",{href:!0,class:!0});var Z=b(C);I=E(Z,"Talks"),Z.forEach(d),K.forEach(d),D=k(l),j=y(l,"LI",{class:!0});var Q=b(j);M=y(Q,"A",{href:!0,class:!0});var X=b(M);N=E(X,"Notes"),X.forEach(d),Q.forEach(d),L=k(l),H=y(l,"LI",{class:!0});var ee=b(H);F=y(ee,"A",{href:!0,class:!0});var te=b(F);R=E(te,"Newsletter"),te.forEach(d),ee.forEach(d),_=k(l),J=y(l,"LI",{class:!0});var ae=b(J);W=y(ae,"A",{"aria-label":!0,href:!0,class:!0});var oe=b(W);B=y(oe,"svg",{viewBox:!0,width:!0,height:!0,class:!0},1);var re=b(B);U=y(re,"path",{d:!0},1),b(U).forEach(d),re.forEach(d),oe.forEach(d),q=k(ae),V=y(ae,"A",{"aria-label":!0,href:!0,class:!0});var ne=b(V);z=y(ne,"svg",{viewBox:!0,width:!0,height:!0,class:!0},1);var ie=b(z);G=y(ie,"path",{d:!0},1),b(G).forEach(d),ie.forEach(d),ne.forEach(d),ae.forEach(d),l.forEach(d),h.forEach(d),t.forEach(d),this.h()},h(){g(i,"href","/"),g(i,"class","svelte-f3e4uo"),g(n,"class","svelte-f3e4uo"),g(w,"href","/about"),g(w,"class","svelte-f3e4uo"),g(u,"class","svelte-f3e4uo"),g(A,"href","/blogs"),g(A,"class","svelte-f3e4uo"),g(P,"class","svelte-f3e4uo"),g(C,"href","/talks"),g(C,"class","svelte-f3e4uo"),g($,"class","svelte-f3e4uo"),g(M,"href","/notes"),g(M,"class","svelte-f3e4uo"),g(j,"class","svelte-f3e4uo"),g(F,"href","/newsletter"),g(F,"class","svelte-f3e4uo"),g(H,"class","svelte-f3e4uo"),g(U,"d","M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66\n    10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5\n    4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"),g(B,"viewBox","0 0 24 24"),g(B,"width","1em"),g(B,"height","1em"),g(B,"class","svelte-f3e4uo"),g(W,"aria-label","Twitter account"),g(W,"href","https://twitter.com/lihautan"),g(W,"class","svelte-f3e4uo"),g(G,"d","M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0\n    0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07\n    5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65\n    5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42\n    3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"),g(z,"viewBox","0 0 24 24"),g(z,"width","1em"),g(z,"height","1em"),g(z,"class","svelte-f3e4uo"),g(V,"aria-label","Github account"),g(V,"href","https://github.com/tanhauhau"),g(V,"class","svelte-f3e4uo"),g(J,"class","social svelte-f3e4uo"),g(r,"class","svelte-f3e4uo"),g(a,"class","svelte-f3e4uo")},m(e,t){l(e,a,t),h(a,o),h(o,r),h(r,n),h(n,i),h(i,s),h(r,c),h(r,u),h(u,w),h(w,S),h(r,T),h(r,P),h(P,A),h(A,O),h(r,x),h(r,$),h($,C),h(C,I),h(r,D),h(r,j),h(j,M),h(M,N),h(r,L),h(r,H),h(H,F),h(F,R),h(r,_),h(r,J),h(J,W),h(W,B),h(B,U),h(J,q),h(J,V),h(V,z),h(z,G)},p:e,i:e,o:e,d(e){e&&d(a)}}}class Z extends Y{constructor(e){super(),G(this,e,null,K,i,{})}}function Q(t){let a,o,r,n,i,s,c,u,p,w,S,P,A,O,x,$,C,I,D,j;return{c(){a=f("div"),o=f("h1"),r=m("Subscribe to my newsletter"),n=v(),i=f("h2"),s=m("Get the latest blog posts and project updates delivered right to your inbox"),c=v(),u=f("form"),p=f("div"),w=f("input"),S=v(),P=f("input"),O=v(),x=f("input"),$=v(),C=f("p"),I=m("Powered by Buttondown."),this.h()},l(e){a=y(e,"DIV",{class:!0});var t=b(a);o=y(t,"H1",{});var h=b(o);r=E(h,"Subscribe to my newsletter"),h.forEach(d),n=k(t),i=y(t,"H2",{class:!0});var l=b(i);s=E(l,"Get the latest blog posts and project updates delivered right to your inbox"),l.forEach(d),c=k(t),u=y(t,"FORM",{action:!0,method:!0,target:!0,onsubmit:!0,class:!0});var f=b(u);p=y(f,"DIV",{class:!0});var m=b(p);w=y(m,"INPUT",{type:!0,name:!0,id:!0,"aria-label":!0,placeholder:!0,class:!0}),S=k(m),P=y(m,"INPUT",{type:!0,value:!0,disabled:!0,class:!0}),m.forEach(d),O=k(f),x=y(f,"INPUT",{type:!0,value:!0,name:!0,class:!0}),$=k(f),C=y(f,"P",{class:!0});var v=b(C);I=E(v,"Powered by Buttondown."),v.forEach(d),f.forEach(d),t.forEach(d),this.h()},h(){g(i,"class","svelte-1k1s1co"),g(w,"type","email"),g(w,"name","email"),g(w,"id","bd-email"),g(w,"aria-label","email address"),g(w,"placeholder","youremail@example.com"),g(w,"class","svelte-1k1s1co"),g(P,"type","submit"),P.value="Subscribe",P.disabled=A=!t[0],g(P,"class","svelte-1k1s1co"),g(p,"class","form-item svelte-1k1s1co"),g(x,"type","hidden"),x.value="1",g(x,"name","embed"),g(x,"class","svelte-1k1s1co"),g(C,"class","svelte-1k1s1co"),g(u,"action","https://buttondown.email/api/emails/embed-subscribe/lihautan"),g(u,"method","post"),g(u,"target","popupwindow"),g(u,"onsubmit","window.open('https://buttondown.email/lihautan', 'popupwindow')"),g(u,"class","embeddable-buttondown-form"),g(a,"class","form svelte-1k1s1co")},m(e,d){var f,m,v,g;l(e,a,d),h(a,o),h(o,r),h(a,n),h(a,i),h(i,s),h(a,c),h(a,u),h(u,p),h(p,w),T(w,t[0]),h(p,S),h(p,P),h(u,O),h(u,x),h(u,$),h(u,C),h(C,I),D||(f=w,m="input",v=t[1],f.addEventListener(m,v,g),j=()=>f.removeEventListener(m,v,g),D=!0)},p(e,[t]){1&t&&w.value!==e[0]&&T(w,e[0]),1&t&&A!==(A=!e[0])&&(P.disabled=A)},i:e,o:e,d(e){e&&d(a),D=!1,j()}}}function X(e,t,a){let o;return[o,function(){o=this.value,a(0,o)}]}class ee extends Y{constructor(e){super(),G(this,e,X,Q,i,{})}}function te(e){return x(()=>(setTimeout(()=>{if(window.innerWidth>1080){const e=document.createElement("script");e.async=!0,e.type="text/javascript",e.src="//cdn.carbonads.com/carbon.js?serve=CE7ITK3E&placement=lihautancom",e.id="_carbonads_js",document.body.appendChild(e)}},5e3),()=>{try{const e=document.getElementById("carbonads");e.parentNode.removeChild(e)}catch(e){}})),[]}class ae extends Y{constructor(e){super(),G(this,e,te,null,i,{})}}function oe(e,t,a){const o=e.slice();return o[9]=t[a],o}function re(e,t,a){const o=e.slice();return o[9]=t[a],o}function ne(e){let t,a;return{c(){t=f("meta"),this.h()},l(e){t=y(e,"META",{name:!0,content:!0}),this.h()},h(){g(t,"name","keywords"),g(t,"content",a=e[9])},m(e,a){l(e,t,a)},p(e,o){4&o&&a!==(a=e[9])&&g(t,"content",a)},d(e){e&&d(t)}}}function ie(e){let t,a,o=e[9]+"";return{c(){t=f("span"),a=m(o),this.h()},l(e){t=y(e,"SPAN",{class:!0});var r=b(t);a=E(r,o),r.forEach(d),this.h()},h(){g(t,"class","svelte-1hpcn1w")},m(e,o){l(e,t,o),h(t,a)},p(e,t){4&t&&o!==(o=e[9]+"")&&S(a,o)},d(e){e&&d(t)}}}function se(e){let t,a,o=e[3]&&e[4]&&ce(e),r=e[5]&&he(e);return{c(){t=f("div"),o&&o.c(),a=w(),r&&r.c(),this.h()},l(e){t=y(e,"DIV",{class:!0});var n=b(t);o&&o.l(n),a=w(),r&&r.l(n),n.forEach(d),this.h()},h(){g(t,"class","venue svelte-1hpcn1w")},m(e,n){l(e,t,n),o&&o.m(t,null),h(t,a),r&&r.m(t,null)},p(e,n){e[3]&&e[4]?o?o.p(e,n):(o=ce(e),o.c(),o.m(t,a)):o&&(o.d(1),o=null),e[5]?r?r.p(e,n):(r=he(e),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},d(e){e&&d(t),o&&o.d(),r&&r.d()}}}function ce(e){let t,a,o;return{c(){t=m("Talk given at: "),a=f("a"),o=m(e[3]),this.h()},l(r){t=E(r,"Talk given at: "),a=y(r,"A",{href:!0,class:!0});var n=b(a);o=E(n,e[3]),n.forEach(d),this.h()},h(){g(a,"href",e[4]),g(a,"class","svelte-1hpcn1w")},m(e,r){l(e,t,r),l(e,a,r),h(a,o)},p(e,t){8&t&&S(o,e[3]),16&t&&g(a,"href",e[4])},d(e){e&&d(t),e&&d(a)}}}function he(e){let t,a;return{c(){t=f("a"),a=m("(Video)"),this.h()},l(e){t=y(e,"A",{href:!0,class:!0});var o=b(t);a=E(o,"(Video)"),o.forEach(d),this.h()},h(){g(t,"href",e[5]),g(t,"class","svelte-1hpcn1w")},m(e,o){l(e,t,o),h(t,a)},p(e,a){32&a&&g(t,"href",e[5])},d(e){e&&d(t)}}}function le(e){let t,a,o,r,n,i,p,T,A,O,x,$,C,I,D,j,M,N,L,H,F,R,_,z,G,Y,K,Q,X,te,ce,he,le,de,ue,fe,pe,me=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"Article",author:e[6],copyrightHolder:e[6],copyrightYear:"2020",creator:e[6],publisher:e[6],description:e[1],headline:e[0],name:e[0],inLanguage:"en"})}<\/script>`,ve=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",description:"Breadcrumbs list",name:"Breadcrumbs",itemListElement:[{"@type":"ListItem",item:{"@id":"https://lihautan.com",name:"Homepage"},name:"Homepage",position:1},{"@type":"ListItem",item:{"@id":"https%3A%2F%2Flihautan.com%2Flooking-into-the-svelte-compiler",name:e[0]},name:e[0],position:2}]})}<\/script>`;document.title=t=e[0]+" | Tan Li Hau";let we=e[2],ge=[];for(let t=0;t<we.length;t+=1)ge[t]=ne(re(e,we,t));_=new Z({});let be=e[2],ye=[];for(let t=0;t<be.length;t+=1)ye[t]=ie(oe(e,be,t));let Ee=(e[3]&&e[4]||e[5])&&se(e);const ke=e[8].default,Se=function(e,t,a,o){if(e){const r=s(e,t,a,o);return e[0](r)}}(ke,e,e[7],null);return de=new ee({}),fe=new ae({}),{c(){a=f("meta"),o=f("meta"),r=f("meta"),n=f("meta"),i=f("meta"),p=f("meta"),T=f("meta"),A=f("meta"),O=f("meta"),x=f("meta"),$=f("meta");for(let e=0;e<ge.length;e+=1)ge[e].c();C=f("meta"),I=f("meta"),j=w(),N=w(),L=v(),H=f("a"),F=m("Skip to content"),R=v(),B(_.$$.fragment),z=v(),G=f("main"),Y=f("h1"),K=m(e[0]),Q=v();for(let e=0;e<ye.length;e+=1)ye[e].c();X=v(),Ee&&Ee.c(),te=v(),ce=f("article"),Se&&Se.c(),he=v(),le=f("footer"),B(de.$$.fragment),ue=v(),B(fe.$$.fragment),this.h()},l(t){const s=function(e,t=document.body){return Array.from(t.querySelectorAll(e))}('[data-svelte="svelte-15e3uyc"]',document.head);a=y(s,"META",{name:!0,content:!0}),o=y(s,"META",{name:!0,content:!0}),r=y(s,"META",{name:!0,content:!0}),n=y(s,"META",{name:!0,content:!0}),i=y(s,"META",{name:!0,content:!0}),p=y(s,"META",{name:!0,content:!0}),T=y(s,"META",{name:!0,content:!0}),A=y(s,"META",{name:!0,content:!0}),O=y(s,"META",{name:!0,content:!0}),x=y(s,"META",{name:!0,content:!0}),$=y(s,"META",{name:!0,content:!0});for(let e=0;e<ge.length;e+=1)ge[e].l(s);C=y(s,"META",{itemprop:!0,content:!0}),I=y(s,"META",{itemprop:!0,content:!0}),j=w(),N=w(),s.forEach(d),L=k(t),H=y(t,"A",{href:!0,class:!0});var c=b(H);F=E(c,"Skip to content"),c.forEach(d),R=k(t),U(_.$$.fragment,t),z=k(t),G=y(t,"MAIN",{id:!0,class:!0});var h=b(G);Y=y(h,"H1",{});var l=b(Y);K=E(l,e[0]),l.forEach(d),Q=k(h);for(let e=0;e<ye.length;e+=1)ye[e].l(h);X=k(h),Ee&&Ee.l(h),te=k(h),ce=y(h,"ARTICLE",{});var u=b(ce);Se&&Se.l(u),u.forEach(d),h.forEach(d),he=k(t),le=y(t,"FOOTER",{class:!0});var f=b(le);U(de.$$.fragment,f),ue=k(f),U(fe.$$.fragment,f),f.forEach(d),this.h()},h(){g(a,"name","description"),g(a,"content",e[1]),g(o,"name","image"),g(o,"content",null),g(r,"name","og:image"),g(r,"content",null),g(n,"name","og:title"),g(n,"content",e[0]),g(i,"name","og:description"),g(i,"content",e[1]),g(p,"name","og:type"),g(p,"content","website"),g(T,"name","twitter:card"),g(T,"content","summary_large_image"),g(A,"name","twitter:creator"),g(A,"content","@lihautan"),g(O,"name","twitter:title"),g(O,"content",e[0]),g(x,"name","twitter:description"),g(x,"content",e[1]),g($,"name","twitter:image"),g($,"content",null),g(C,"itemprop","url"),g(C,"content","https%3A%2F%2Flihautan.com%2Flooking-into-the-svelte-compiler"),g(I,"itemprop","image"),g(I,"content",null),D=new P(j),M=new P(N),g(H,"href","#content"),g(H,"class","skip svelte-1hpcn1w"),g(G,"id","content"),g(G,"class","blog svelte-1hpcn1w"),g(le,"class","svelte-1hpcn1w")},m(e,t){h(document.head,a),h(document.head,o),h(document.head,r),h(document.head,n),h(document.head,i),h(document.head,p),h(document.head,T),h(document.head,A),h(document.head,O),h(document.head,x),h(document.head,$);for(let e=0;e<ge.length;e+=1)ge[e].m(document.head,null);h(document.head,C),h(document.head,I),D.m(me,document.head),h(document.head,j),M.m(ve,document.head),h(document.head,N),l(e,L,t),l(e,H,t),h(H,F),l(e,R,t),q(_,e,t),l(e,z,t),l(e,G,t),h(G,Y),h(Y,K),h(G,Q);for(let e=0;e<ye.length;e+=1)ye[e].m(G,null);h(G,X),Ee&&Ee.m(G,null),h(G,te),h(G,ce),Se&&Se.m(ce,null),l(e,he,t),l(e,le,t),q(de,le,null),h(le,ue),q(fe,le,null),pe=!0},p(e,[o]){if((!pe||1&o)&&t!==(t=e[0]+" | Tan Li Hau")&&(document.title=t),(!pe||2&o)&&g(a,"content",e[1]),(!pe||1&o)&&g(n,"content",e[0]),(!pe||2&o)&&g(i,"content",e[1]),(!pe||1&o)&&g(O,"content",e[0]),(!pe||2&o)&&g(x,"content",e[1]),4&o){let t;for(we=e[2],t=0;t<we.length;t+=1){const a=re(e,we,t);ge[t]?ge[t].p(a,o):(ge[t]=ne(a),ge[t].c(),ge[t].m(C.parentNode,C))}for(;t<ge.length;t+=1)ge[t].d(1);ge.length=we.length}if((!pe||3&o)&&me!==(me=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"Article",author:e[6],copyrightHolder:e[6],copyrightYear:"2020",creator:e[6],publisher:e[6],description:e[1],headline:e[0],name:e[0],inLanguage:"en"})}<\/script>`)&&D.p(me),(!pe||1&o)&&ve!==(ve=`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",description:"Breadcrumbs list",name:"Breadcrumbs",itemListElement:[{"@type":"ListItem",item:{"@id":"https://lihautan.com",name:"Homepage"},name:"Homepage",position:1},{"@type":"ListItem",item:{"@id":"https%3A%2F%2Flihautan.com%2Flooking-into-the-svelte-compiler",name:e[0]},name:e[0],position:2}]})}<\/script>`)&&M.p(ve),(!pe||1&o)&&S(K,e[0]),4&o){let t;for(be=e[2],t=0;t<be.length;t+=1){const a=oe(e,be,t);ye[t]?ye[t].p(a,o):(ye[t]=ie(a),ye[t].c(),ye[t].m(G,X))}for(;t<ye.length;t+=1)ye[t].d(1);ye.length=be.length}e[3]&&e[4]||e[5]?Ee?Ee.p(e,o):(Ee=se(e),Ee.c(),Ee.m(G,te)):Ee&&(Ee.d(1),Ee=null),Se&&Se.p&&128&o&&c(Se,ke,e,e[7],o,null,null)},i(e){pe||(J(_.$$.fragment,e),J(Se,e),J(de.$$.fragment,e),J(fe.$$.fragment,e),pe=!0)},o(e){W(_.$$.fragment,e),W(Se,e),W(de.$$.fragment,e),W(fe.$$.fragment,e),pe=!1},d(e){d(a),d(o),d(r),d(n),d(i),d(p),d(T),d(A),d(O),d(x),d($),u(ge,e),d(C),d(I),d(j),e&&D.d(),d(N),e&&M.d(),e&&d(L),e&&d(H),e&&d(R),V(_,e),e&&d(z),e&&d(G),u(ye,e),Ee&&Ee.d(),Se&&Se.d(e),e&&d(he),e&&d(le),V(de),V(fe)}}}function de(e,t,a){let{title:o=""}=t,{description:r=""}=t,{tags:n=[]}=t,{occasion:i}=t,{occasionLink:s}=t,{videoLink:c}=t;const h={"@type":"Person",name:"Tan Li Hau"};let{$$slots:l={},$$scope:d}=t;return e.$set=e=>{"title"in e&&a(0,o=e.title),"description"in e&&a(1,r=e.description),"tags"in e&&a(2,n=e.tags),"occasion"in e&&a(3,i=e.occasion),"occasionLink"in e&&a(4,s=e.occasionLink),"videoLink"in e&&a(5,c=e.videoLink),"$$scope"in e&&a(7,d=e.$$scope)},[o,r,n,i,s,c,h,d,l]}class ue extends Y{constructor(e){super(),G(this,e,de,le,i,{title:0,description:1,tags:2,occasion:3,occasionLink:4,videoLink:5})}}function fe(e){let t,a,o,r,n,i,s,c,u,p,w,S,T,P,A,O,x,$,C,I,D,j,M,N,L,H,F,R,_,J,W,B,U,q,V,z,G,Y,K,Z,Q,X,ee,te,ae,oe,re,ne,ie,se,ce,he,le,de,ue,fe,pe,me,ve,we,ge,be,ye,Ee,ke,Se,Te,Pe,Ae,Oe,xe,$e,Ce,Ie,De,je,Me,Ne,Le,He,Fe,Re,_e,Je,We,Be,Ue,qe,Ve,ze,Ge,Ye,Ke,Ze,Qe,Xe,et,tt,at,ot,rt,nt,it,st,ct,ht,lt,dt,ut,ft,pt,mt,vt,wt,gt,bt,yt,Et,kt,St,Tt,Pt,At,Ot,xt,$t,Ct,It,Dt,jt,Mt,Nt,Lt,Ht,Ft,Rt,_t,Jt,Wt,Bt,Ut,qt,Vt,zt,Gt,Yt,Kt,Zt,Qt,Xt,ea,ta,aa,oa,ra,na,ia,sa,ca,ha,la,da,ua,fa,pa,ma,va,wa,ga,ba,ya,Ea,ka,Sa,Ta,Pa,Aa,Oa,xa,$a,Ca,Ia,Da,ja,Ma,Na,La,Ha,Fa,Ra,_a,Ja,Wa,Ba,Ua,qa,Va,za,Ga,Ya,Ka,Za,Qa,Xa,eo,to,ao,oo,ro,no,io,so,co,ho,lo,uo,fo,po,mo,vo,wo,go,bo,yo,Eo,ko,So,To,Po,Ao,Oo,xo,$o,Co,Io,Do,jo,Mo,No,Lo,Ho,Fo,Ro,_o,Jo,Wo,Bo,Uo,qo,Vo,zo,Go,Yo,Ko,Zo,Qo,Xo,er,tr,ar,or,rr,nr,ir,sr,cr,hr,lr,dr,ur,fr,pr,mr,vr,wr,gr,br,yr,Er,kr,Sr,Tr,Pr,Ar,Or,xr,$r,Cr,Ir,Dr,jr,Mr,Nr,Lr,Hr,Fr,Rr,_r,Jr,Wr,Br,Ur,qr,Vr,zr,Gr,Yr,Kr,Zr,Qr,Xr,en,tn,an,on,rn,nn,sn,cn,hn,ln,dn,un,fn,pn,mn,vn,wn,gn,bn,yn,En,kn,Sn,Tn,Pn,An,On,xn,$n,Cn,In,Dn,jn,Mn,Nn,Ln,Hn,Fn,Rn,_n,Jn,Wn,Bn,Un,qn,Vn,zn,Gn,Yn,Kn,Zn,Qn,Xn,ei,ti,ai,oi,ri,ni,ii,si,ci,hi,li,di,ui,fi,pi,mi,vi,wi,gi,bi,yi,Ei,ki,Si,Ti,Pi,Ai,Oi,xi,$i,Ci,Ii,Di,ji,Mi,Ni,Li,Hi,Fi,Ri,_i,Ji,Wi,Bi,Ui,qi,Vi,zi,Gi,Yi,Ki,Zi,Qi,Xi,es,ts,as,os,rs,ns,is,ss,cs,hs,ls,ds,us,fs,ps,ms,vs,ws,gs,bs,ys,Es,ks,Ss,Ts,Ps,As,Os,xs,$s,Cs,Is,Ds,js,Ms,Ns,Ls,Hs,Fs,Rs,_s,Js,Ws,Bs,Us,qs,Vs,zs,Gs,Ys,Ks,Zs,Qs,Xs,ec,tc,ac,oc,rc,nc,ic,sc,cc,hc,lc,dc,uc,fc,pc,mc,vc,wc,gc,bc,yc,Ec,kc,Sc,Tc,Pc,Ac,Oc,xc,$c,Cc,Ic,Dc,jc,Mc,Nc,Lc,Hc,Fc,Rc,_c,Jc,Wc,Bc,Uc,qc,Vc,zc,Gc,Yc,Kc,Zc,Qc,Xc,eh,th,ah,oh,rh,nh,ih,sh,ch,hh,lh,dh,uh,fh,ph,mh,vh,wh,gh,bh,yh,Eh,kh,Sh,Th,Ph,Ah,Oh,xh,$h,Ch,Ih,Dh,jh,Mh,Nh,Lh,Hh,Fh,Rh,_h,Jh,Wh,Bh,Uh,qh,Vh,zh,Gh,Yh,Kh,Zh,Qh,Xh,el,tl,al,ol,rl,nl,il,sl,cl,hl,ll,dl,ul,fl,pl,ml,vl,wl,gl,bl,yl,El,kl,Sl,Tl,Pl,Al,Ol,xl,$l,Cl,Il,Dl,jl,Ml,Nl,Ll,Hl,Fl,Rl,_l,Jl,Wl,Bl,Ul,ql,Vl,zl,Gl,Yl,Kl,Zl,Ql,Xl,ed,td;return{c(){t=f("section"),a=f("ul"),o=f("li"),r=f("a"),n=m("Recorded talk"),i=f("ul"),s=f("li"),c=f("a"),u=m("CityJS Conference 2020"),p=f("li"),w=f("a"),S=m("MMT Tech Meetup - Sept 2020"),T=f("li"),P=f("a"),A=m("Slides"),O=f("li"),x=f("a"),$=m("Script"),C=v(),I=f("section"),D=f("h2"),j=f("a"),M=m("Recorded talk"),N=v(),L=f("section"),H=f("h3"),F=f("a"),R=m("CityJS Conference 2020"),_=v(),J=f("iframe"),B=v(),U=f("section"),q=f("h3"),V=f("a"),z=m("MMT Tech Meetup - Sept 2020"),G=v(),Y=f("iframe"),Z=v(),Q=f("section"),X=f("h2"),ee=f("a"),te=m("Slides"),ae=v(),oe=f("p"),re=m("["),ne=f("a"),ie=m("Link to slides"),se=m("] (Left arrow and right arrow to navigate)"),ce=v(),he=f("section"),le=f("h2"),de=f("a"),ue=m("Script"),fe=v(),pe=f("p"),me=m("Modern web frameworks allow us to describe our "),ve=f("strong"),we=m("UI"),ge=m(" declaratively, as a function of state, of the application."),be=v(),ye=f("p"),Ee=m("The function can be written in a form of template, or template-like syntax, which describes exactly how the view should look like, in all possible states."),ke=v(),Se=f("p"),Te=m("When the state change, the view should change as well."),Pe=v(),Ae=f("p"),Oe=m("We don't need to describe how one view transition to another view. We don't need to describe what elements to be added, removed or modified."),xe=v(),$e=f("p"),Ce=f("strong"),Ie=m("Modern Web Framework do that for us."),De=v(),je=f("p"),Me=m("The "),Ne=f("code"),Le=m("framework_magic"),He=m(" takes in 2 subsequent views and figure out how to transition from 1 to another."),Fe=v(),Re=f("p"),_e=m("Modern web frameworks like React and Vue do that using a technique called a virtual DOM."),Je=v(),We=f("p"),Be=m("To handle all the possible scenarios, this "),Ue=f("code"),qe=m("framework_magic"),Ve=m(" could be very huge in code size, and it is independent of the application it is supporting."),ze=v(),Ge=f("p"),Ye=m("For react is 40kb gzipped and vue2 is 23kb gzipped, vue3 is 10kb."),Ke=v(),Ze=f("p"),Qe=m("and if your application is simple, it could disproportionately small in terms of code size relative to the framework library, which is shown in the gray portion of the chart."),Xe=v(),et=f("p"),tt=m("However, this doesnt have to be, "),at=f("strong"),ot=m("the only way"),rt=m(" of doing things."),nt=v(),it=f("p"),st=m("What if we could shift all of the work done in the "),ct=f("code"),ht=m("framework_magic"),lt=m(" from runtime to build time?"),dt=v(),ut=f("p"),ft=m("We can analyse the code and figure out all the possible states and views, and the possible transitions between them, and generate just enough code to do just that?"),pt=v(),mt=f("p"),vt=m("And that's the core idea of Svelte."),wt=v(),gt=f("p"),bt=m("The Svelte compiler compiles the Svelte code into "),yt=f("strong"),Et=m("optimised"),kt=m(" JavaScript code that "),St=f("strong"),Tt=m("grows linearly"),Pt=m(" along with your application code."),At=v(),Ot=f("p"),xt=m("and today we are going to look into the Svelte compiler."),$t=v(),Ct=f("p"),It=m("Don't worry if you are not familiar with Svelte / compiler, I'll try my best to avoid the jargons and explain the general idea of the process."),Dt=v(),jt=f("p"),Mt=m("My name is Tan Li Hau, I am a software engineer at Shopee. Shopee is a e-commerce platform in South east asia that is based in Singapore."),Nt=v(),Lt=f("p"),Ht=m("I grew up in a lovely town called penang in malaysia, which has the best street food in malaysia, such as char koay teow, stir-fry flat rice noodles; rojak, a eclectic fruit salad with palm sugar, peanuts and chilli dressing, and dont get me started with food. Hopefully you guys can come visit Malaysia after this coronavirus pandemic is over."),Ft=v(),Rt=f("p"),_t=m("last but not the least, Im one of the maintainers of svelte"),Jt=v(),Wt=f("p"),Bt=m("Before we start talking about compilers, for the benefit of those who havn't have a chance to look into Svelte, lets take a look at how a svelte component looks like."),Ut=v(),qt=f("p"),Vt=m("a svelte component is written in a file with a "),zt=f("code"),Gt=m(".svelte"),Yt=m(" extension. Each file describes 1 svelte  component."),Kt=v(),Zt=f("p"),Qt=m("You can add 1 script tag to the component. The script tag allows you to define variable, just like how you would in any javascript code,  and you can reference the variables in your html template, with a curly bracket."),Xt=v(),ea=f("p"),ta=m("To add event listener, you use a "),aa=f("code"),oa=m("on:"),ra=m(" directive, and you can update the variable just like this, and it will automatically updated in your DOM."),na=v(),ia=f("p"),sa=m("You can add a style tag and write some css to style your component. What's cool about it is that, the css is scoped within the component. so when i say button, background: red, only the button written in this component file has the background red. not the child component, not the parent component. just this component."),ca=v(),ha=f("p"),la=f("strong"),da=m("now"),ua=m(", here is one of the most powerful, and somewhat controversial feature of svelte, reactive declarations."),fa=v(),pa=f("p"),ma=m("here you have a "),va=f("code"),wa=m("double = count * 2"),ga=m(", with a dollar + colon sign in front of the statement. this means that the variable "),ba=f("code"),ya=m("double"),Ea=m(" is always 2 times of "),ka=f("code"),Sa=m("count"),Ta=m(", whenever the value of "),Pa=f("code"),Aa=m("count"),Oa=m(" has changed, the value of "),xa=f("code"),$a=m("double"),Ca=m(" will update as well."),Ia=v(),Da=f("p"),ja=m("This definitely feels weird in the beginning, but the more you use it, you'll ask yourself why didn't we have this earlier."),Ma=v(),Na=f("p"),La=m("So, here we have 1 big red button, and a text of multiply equation as a Svelte component."),Ha=v(),Fa=f("p"),Ra=m("I am gonna pause here for a moment, and ask you this question, "),_a=f("strong"),Ja=m("how would you implement this, if you are not allowed to use any framework and you have to write it in Vanilla JavaScript?"),Wa=v(),Ba=f("p"),Ua=f("em"),qa=m("(pause)"),Va=v(),za=f("p"),Ga=m("So, firstly we are going to start with the variable declaration."),Ya=v(),Ka=f("p"),Za=m("Next we create the text with document.createTextNode, and insert it to the parent"),Qa=v(),Xa=f("p"),eo=m("Next we create the button, change the text, add event listener and insert it to the parent."),to=v(),ao=f("p"),oo=m("To update the text when the count is updated, we create an update function, where we update the value of double and update the content of the text."),ro=v(),no=f("p"),io=m("Finally for the style tag, we create a style tag, set the content and insert into the head."),so=v(),co=f("p"),ho=m("To make sure that the button only targets this button that we just created, we add a class to the button."),lo=v(),uo=f("p"),fo=m("Here the class name is random, but it could be generated based on the hash of the style code, so you get consistent class name."),po=v(),mo=f("p"),vo=f("em"),wo=m("(CLICK TO VIEW JS OUTPUT)"),go=v(),bo=f("p"),yo=m("In fact if you take a look at the svelte generated JS output, it is very similar to the code we just wrote."),Eo=v(),ko=f("p"),So=m("So, this is just the code you need to "),To=f("strong"),Po=m("create a button and a text"),Ao=m(". You don't need 40KB Virtual DOM library to recreate the same component."),Oo=v(),xo=f("p"),$o=m("Of course, you don't have to write all of these yourself."),Co=v(),Io=f("p"),Do=m("The Svelte compiler will do it for you. It will analyse the code above, and generate the code below for you."),jo=v(),Mo=f("p"),No=m('And now, if you try to choose "SSR" as the generated output, you can see now Svelte generates a function that returns a string composed using template literals.'),Lo=v(),Ho=f("p"),Fo=m("This is a few orders more performant than generating a tree object and serialising them into a HTML string."),Ro=v(),_o=f("p"),Jo=f("em"),Wo=m("(DONT MOVE)"),Bo=v(),Uo=f("p"),qo=m("So, Let's take a few more examples of the Svelte syntax, and along the way, I hope you ask yourself this question, "),Vo=f("strong"),zo=m('"how do i convert this / write this in plain JavaScript?"'),Go=v(),Yo=f("p"),Ko=m("and don't worry, you can find this repl on the svelte website. and you can compare the input and the js output anyway you want."),Zo=v(),Qo=f("p"),Xo=f("em"),er=m("(OKAY NOW MOVE)"),tr=v(),ar=f("p"),or=m("To express logics within the template, Svelte provides logic block, such as "),rr=f("strong"),nr=f("code"),ir=m("{#if}"),sr=m(", "),cr=f("strong"),hr=f("code"),lr=m("{#await}"),dr=m(", and "),ur=f("strong"),fr=f("code"),pr=m("{#each}"),mr=m("."),vr=v(),wr=f("p"),gr=m("To reduce the boilerplate code for binding a variable to an input, Svelte provides the "),br=f("code"),yr=m("bind:"),Er=m(" directive."),kr=v(),Sr=f("p"),Tr=m("To provide transition for elements coming into or out of the DOM, Svelte provides the "),Pr=f("code"),Ar=m("transition"),Or=m(", "),xr=f("code"),$r=m("in"),Cr=m(" and "),Ir=f("code"),Dr=m("out"),jr=m(" directive."),Mr=v(),Nr=f("p"),Lr=m("To compose Components, Svelte provides slots and templates similar to the Web Component APIs."),Hr=v(),Fr=f("p"),Rr=m("There's so much I would like to share here, but I have to segue into the Svelte compiler, because that's the main topic of today's talk."),_r=v(),Jr=f("p"),Wr=m("Now, finally, let's take a look at the Svelte compiler."),Br=v(),Ur=f("p"),qr=m("So, how does a compiler works?"),Vr=v(),zr=f("p"),Gr=m("A compiler first reads through your code, and break it down into smaller pieces, called tokens."),Yr=v(),Kr=f("p"),Zr=m("The compiler then goes through this list of tokens and arrange them into a tree structure, according to the grammar of the language. The tree structure is what a compiler call “Abstract syntax tree” or AST for short."),Qr=v(),Xr=f("p"),en=m("An AST is a tree representation of the input code."),tn=v(),an=f("p"),on=m("And what the compiler sometimes do, is to analyse and apply transformation to the AST.\nUsing tree traversal algorithms, such as depth first search"),rn=v(),nn=f("p"),sn=m("And finally, the compiler generates a code output based on the final AST."),cn=v(),hn=f("p"),ln=m("In summary, a generic compilation process involves parsing the code to an AST, doing analysis, optimsiation or transformation on the AST, and then generate code out from the AST."),dn=v(),un=f("p"),fn=m("Finally, let's take a look how Svelte compiler works."),pn=v(),mn=f("p"),vn=m("Svelte parses the Svelte code into AST"),wn=v(),gn=f("p"),bn=m("Svelte then analyses the AST, which we will explore in detailed later."),yn=v(),En=f("p"),kn=m("With the analysis, Svelte generates JavaScript code depending on the compile target, whether it's for SSR or it's for the browser.\nFinally, js and css is generated, and can be written into a file or be consumed by your build process."),Sn=v(),Tn=f("p"),Pn=m("So lets start from the beginning, the parsing."),An=v(),On=f("p"),xn=m("Here is a Svelte component that we are going to use throughout this talk."),$n=v(),Cn=f("p"),In=m("Svelte, implements its own parser"),Dn=v(),jn=f("p"),Mn=m("That parses the html syntax, as well as logic blocks, like each, if, and await"),Nn=v(),Ln=f("p"),Hn=m("Because js is a fairly complex language, whenever svelte encounters a script tag, or a curly brackets, it will hand it over to acorn, a lightweight JavaScript parser, to parse the JS content.\nThe same thing goes with css as well. svelte uses css-tree to parse CSS content in between the style tag."),Fn=v(),Rn=f("p"),_n=m("So, through the process, the svelte code is broken down into tokens, and is arranged into the Svelte AST."),Jn=v(),Wn=f("p"),Bn=m("If you interested to see how the Svelte AST looks like, you can check them out at ASTExplorer.net."),Un=v(),qn=f("p"),Vn=m("The next step is to analyse the AST."),zn=v(),Gn=f("p"),Yn=m("Here, our code is already in AST, BUT to help visualise the process, i'm going to show you the original code."),Kn=v(),Zn=f("p"),Qn=m("The first thing Svelte do is to traverse through the script AST."),Xn=v(),ei=f("p"),ti=m("Whenever it encounters a variable, in this case, count, it will record down the variable name."),ai=v(),oi=f("p"),ri=m("here we record values and double."),ni=v(),ii=f("p"),si=m('the "double" here, in this svelte code is a reactive declared variable. but to vanilla JavaScript, we are assigning value to this variable "double", which is not declared anywhere.'),ci=v(),hi=f("p"),li=m('in strict mode, this is a "assignment to undeclared variable" error.'),di=v(),ui=f("p"),fi=m('Svelte marks the variable, "double", as "injected", so the declaration of the variable will be injected later. other examples of injected variables are svelte magic global, such as $$props, or a $ prefix of a store variable.'),pi=v(),mi=f("p"),vi=m('here we encounter "count" again, this time its being referenced, instead of being assinged to a value, and it is used to compute the value of double. so we draw a dependency relationship between count and double.so double is depending on count.'),wi=v(),gi=f("p"),bi=m("lets continue."),yi=v(),Ei=f("p"),ki=m("here we see data. data is not declared at the top level scope, as it is within the curly bracket block scope. so we are not going to record it down."),Si=v(),Ti=f("p"),Pi=m("same thing goes with "),Ai=f("code"),Oi=m("i"),xi=m("."),$i=v(),Ci=f("p"),Ii=m("here we encountered double again, so we mark it as referenced."),Di=v(),ji=f("p"),Mi=m("Math, a js global, we are going to ignore it."),Ni=v(),Li=f("p"),Hi=m("here "),Fi=f("code"),Ri=m("values"),_i=m(" is mutated."),Ji=v(),Wi=f("p"),Bi=m("now we reach the end of the script, the next step is to traverse the template AST."),Ui=v(),qi=f("p"),Vi=m("we start from the "),zi=f("code"),Gi=m("input"),Yi=m(" element, which has a "),Ki=f("code"),Zi=m("bind:value"),Qi=m("."),Xi=v(),es=f("p"),ts=m("Here we are binding the value of the input to the variable "),as=f("code"),os=m("count"),rs=m(". so we mark "),ns=f("code"),is=m("count"),ss=m(" as referenced from template and mutated."),cs=v(),hs=f("p"),ls=m("Now we encountered the each block. Here we are iterating through the variable "),ds=f("code"),us=m("values"),fs=m(" and we are using the variable "),ps=f("code"),ms=m("value"),vs=m(" as each item. So the template within the each block will have a new scope, where "),ws=f("code"),gs=m("value"),bs=m(" is declared. Also, we mark "),ys=f("code"),Es=m("values"),ks=m(" as the dependency of the each block. This means that whenever "),Ss=f("code"),Ts=m("values"),Ps=m(" has changed, we are going to update the each block."),As=v(),Os=f("p"),xs=m("...and, we mark values as referenced too."),$s=v(),Cs=f("p"),Is=m("next, we move into the each block and the div element. Here we mark "),Ds=f("code"),js=m("value"),Ms=m(" as referenced from the template, we encounter "),Ns=f("code"),Ls=m("value"),Hs=m(" again and we've reachead the end of the template."),Fs=v(),Rs=f("p"),_s=m("and Svelte traverse through the script again, this time mainly for optimisation. figuring out which variables are not referenced, and does not need to be reactive."),Js=v(),Ws=f("p"),Bs=m("Similarly, if a reactive declaration's dependency will never change, by seeing whether their dependencies were marked as mutated, we can mark it as static, which is more efficient, and much smaller in code size."),Us=v(),qs=f("p"),Vs=m("Next, Svelte traverse through the style."),zs=v(),Gs=f("p"),Ys=m("for each selector, it will determine whether it will match any elements in the template, and if it does, svelte will add a svelte-hash class name to the selector as well as the matched eelement. Although this will increase the specificity of the selector, but it will make the selector scoped only to the current svelte component."),Ks=v(),Zs=f("p"),Qs=m("At the end of this step, Svelte has figured out all the variables declared, their behavior and their relationship."),Xs=v(),ec=f("p"),tc=m("With this, we are moving on to the rendering phase."),ac=v(),oc=f("p"),rc=m("This step is where svelte will generate the javascript code.\nThere are 2 different compile targets, 1 is DOM, for the client side, and another is ssr, for the server side."),nc=v(),ic=f("p"),sc=m("Lets first take a look at the dom render target."),cc=v(),hc=f("p"),lc=m("Here we have the source code. and here is the outline of how a dom output looks like."),dc=v(),uc=f("p"),fc=m("Here is what I called a fragment block. the create fragment function returns an object, that acts as a recipe to create the elements in the component. each method in the recipe object, represents a stage in the component lifecycle, here we have "),pc=f("code"),mc=m("c"),vc=m(" for "),wc=f("code"),gc=m("create"),bc=m(", "),yc=f("code"),Ec=m("m"),kc=m(" for "),Sc=f("code"),Tc=m("mounting"),Pc=m(", "),Ac=f("code"),Oc=m("p"),xc=m(" for "),$c=f("code"),Cc=m("update"),Ic=m(", and "),Dc=f("code"),jc=m("d"),Mc=m(" for "),Nc=f("code"),Lc=m("destroy"),Hc=m("."),Fc=v(),Rc=f("p"),_c=m("next on, we have the instance function. here's where the state and component logic goes into."),Jc=v(),Wc=f("p"),Bc=m("finally we have the svelte component class. so each svelte component is compiled into a class which is the default export. in the constructor, as you can see, calls the "),Uc=f("code"),qc=m("init"),Vc=m(" function which takes in the "),zc=f("code"),Gc=m("instance"),Yc=m(" and "),Kc=f("code"),Zc=m("create_fragment"),Qc=m(" function. and this is how the 3 different pieces of the svelte compoenent come together."),Xc=v(),eh=f("p"),th=m("Now, svelte walks through the template again, and starts inserting code into output."),ah=v(),oh=f("p"),rh=m("First we have the input element. we insert instructions to create the input element, mounting the element to the target, and remove the element from the target."),nh=v(),ih=f("p"),sh=m("next we have the binding of the input value to the "),ch=f("code"),hh=m("count"),lh=m(" variable. we need an input handler to listen to the input changes, so we can update the value of the "),dh=f("code"),uh=m("count"),fh=m(" variable. here we pull out the variables list, and add "),ph=f("code"),mh=m("input_handler"),vh=m("."),wh=v(),gh=f("p"),bh=m("we set the input value based on the variable count and add event listener for input changes which we should remove event listener when we destroy the component."),yh=v(),Eh=f("p"),kh=m("and in the update phase, if the "),Sh=f("code"),Th=m("count"),Ph=m(" has changed, we need to update the value of the input based on the value of "),Ah=f("code"),Oh=m("count"),xh=m("."),$h=v(),Ch=f("p"),Ih=m("next we move on to the each block."),Dh=v(),jh=f("p"),Mh=m("we create a new fragment block for the each block, which contains the recipe for creating elements for 1 each item. And because in the each block we have a child scope that defines the variable "),Nh=f("code"),Lh=m("value"),Hh=m(", we have a "),Fh=f("code"),Rh=m("get_each_context"),_h=m(" function to emulate that."),Jh=v(),Wh=f("p"),Bh=m('Here we fast forward through the steps, where for each element, we insert code for how we create, mount, update and destroy them. If you are interested to know the details, you can check out my series of blog, called "Compile Svelte in your head".'),Uh=v(),qh=f("p"),Vh=m("Now we look at how Svelte fills up the instance function. In most cases, Svelte just copies over whatever is written within the "),zh=f("code"),Gh=m("<script>"),Yh=m(" tag."),Kh=v(),Zh=f("p"),Qh=m("For reactive declarations, they were added inside the "),Xh=f("code"),el=m("$$.update"),tl=m(" function, and for each statement, we add an if statement to check whether their dependency has changed, based on the dependency relationship we've drawn earlier."),al=v(),ol=f("p"),rl=m("Now we need to declare and add those injected variables."),nl=v(),il=f("p"),sl=m("Finally, we return the list of variables that are "),cl=f("strong"),hl=m("referenced by the template"),ll=m(" only."),dl=v(),ul=f("p"),fl=m("Now, to make the variables actually reactive, we instruments the "),pl=f("code"),ml=m("$$invalidate"),vl=m(" after each assignment statements, so that it will kickstart a next round of update cycle."),wl=v(),gl=f("p"),bl=m("So here you have it, the compile output for the DOM target."),yl=v(),El=f("p"),kl=m("Let's take a quick look at how things going for compiling to the SSR target."),Sl=v(),Tl=f("p"),Pl=m("The structure of the output code for the SSR target is much simpler. it is a function that returns a string."),Al=v(),Ol=f("p"),xl=m("Because there wont be any reactivity needed in the server, we can copy over the code verbatim from the script tag. same thing goes with reactive declarations, of course we need to remember to declare the injected variable, "),$l=f("code"),Cl=m("double"),Il=m("."),Dl=v(),jl=f("p"),Ml=m("as we traverse through the template, we add insert strings or expressions into the output template literal. For the each block, we iterate through the variable "),Nl=f("code"),Ll=m("values"),Hl=m(" and return the child elements as string."),Fl=v(),Rl=f("p"),_l=m("And there you go, the output code of a svelte component for SSR."),Jl=v(),Wl=f("p"),Bl=m("Finally, Svelte outputs the code in JS and CSS, with the code as string as well as the sourcemap."),Ul=v(),ql=f("p"),Vl=m("These can be written into file system directly, or be consumed by your module bundler, such as rollup-svelte-plugin in rollup or svelte-loader for webpack."),zl=v(),Gl=f("p"),Yl=m("So lets review again the svelte compilation pipeline,\nSvelte parses the code into ast, runs a series of steps to analsye the code, tracking the variable references and dependencies. Then svelte generates the code depending on the compile target, whether it's for the client side or server-side.\nAnd the output of the render step is in terms of JS and CSS, which can be written into a file / consumed by your build tools."),Kl=v(),Zl=f("p"),Ql=m("Thank you so much for listening. If you like to learn more about svelte, or if you have any questions about svelte, you can follow me on twitter. I am Li Hau. hope you have fun with the talks throughout the conference."),Xl=v(),ed=f("p"),td=m("See ya."),this.h()},l(e){t=y(e,"SECTION",{});var h=b(t);a=y(h,"UL",{class:!0,id:!0,role:!0,"aria-label":!0});var l=b(a);o=y(l,"LI",{});var f=b(o);r=y(f,"A",{href:!0});var m=b(r);n=E(m,"Recorded talk"),m.forEach(d),f.forEach(d),i=y(l,"UL",{});var v=b(i);s=y(v,"LI",{});var g=b(s);c=y(g,"A",{href:!0});var W=b(c);u=E(W,"CityJS Conference 2020"),W.forEach(d),g.forEach(d),p=y(v,"LI",{});var K=b(p);w=y(K,"A",{href:!0});var ad=b(w);S=E(ad,"MMT Tech Meetup - Sept 2020"),ad.forEach(d),K.forEach(d),v.forEach(d),T=y(l,"LI",{});var od=b(T);P=y(od,"A",{href:!0});var rd=b(P);A=E(rd,"Slides"),rd.forEach(d),od.forEach(d),O=y(l,"LI",{});var nd=b(O);x=y(nd,"A",{href:!0});var id=b(x);$=E(id,"Script"),id.forEach(d),nd.forEach(d),l.forEach(d),h.forEach(d),C=k(e),I=y(e,"SECTION",{});var sd=b(I);D=y(sd,"H2",{});var cd=b(D);j=y(cd,"A",{href:!0,id:!0});var hd=b(j);M=E(hd,"Recorded talk"),hd.forEach(d),cd.forEach(d),sd.forEach(d),N=k(e),L=y(e,"SECTION",{});var ld=b(L);H=y(ld,"H3",{});var dd=b(H);F=y(dd,"A",{href:!0,id:!0});var ud=b(F);R=E(ud,"CityJS Conference 2020"),ud.forEach(d),dd.forEach(d),_=k(ld),J=y(ld,"IFRAME",{width:!0,height:!0,src:!0,frameborder:!0,allow:!0,allowfullscreen:!0}),b(J).forEach(d),ld.forEach(d),B=k(e),U=y(e,"SECTION",{});var fd=b(U);q=y(fd,"H3",{});var pd=b(q);V=y(pd,"A",{href:!0,id:!0});var md=b(V);z=E(md,"MMT Tech Meetup - Sept 2020"),md.forEach(d),pd.forEach(d),G=k(fd),Y=y(fd,"IFRAME",{width:!0,height:!0,src:!0,frameborder:!0,allow:!0,allowfullscreen:!0}),b(Y).forEach(d),fd.forEach(d),Z=k(e),Q=y(e,"SECTION",{});var vd=b(Q);X=y(vd,"H2",{});var wd=b(X);ee=y(wd,"A",{href:!0,id:!0});var gd=b(ee);te=E(gd,"Slides"),gd.forEach(d),wd.forEach(d),ae=k(vd),oe=y(vd,"P",{});var bd=b(oe);re=E(bd,"["),ne=y(bd,"A",{href:!0});var yd=b(ne);ie=E(yd,"Link to slides"),yd.forEach(d),se=E(bd,"] (Left arrow and right arrow to navigate)"),bd.forEach(d),vd.forEach(d),ce=k(e),he=y(e,"SECTION",{});var Ed=b(he);le=y(Ed,"H2",{});var kd=b(le);de=y(kd,"A",{href:!0,id:!0});var Sd=b(de);ue=E(Sd,"Script"),Sd.forEach(d),kd.forEach(d),fe=k(Ed),pe=y(Ed,"P",{});var Td=b(pe);me=E(Td,"Modern web frameworks allow us to describe our "),ve=y(Td,"STRONG",{});var Pd=b(ve);we=E(Pd,"UI"),Pd.forEach(d),ge=E(Td," declaratively, as a function of state, of the application."),Td.forEach(d),be=k(Ed),ye=y(Ed,"P",{});var Ad=b(ye);Ee=E(Ad,"The function can be written in a form of template, or template-like syntax, which describes exactly how the view should look like, in all possible states."),Ad.forEach(d),ke=k(Ed),Se=y(Ed,"P",{});var Od=b(Se);Te=E(Od,"When the state change, the view should change as well."),Od.forEach(d),Pe=k(Ed),Ae=y(Ed,"P",{});var xd=b(Ae);Oe=E(xd,"We don't need to describe how one view transition to another view. We don't need to describe what elements to be added, removed or modified."),xd.forEach(d),xe=k(Ed),$e=y(Ed,"P",{});var $d=b($e);Ce=y($d,"STRONG",{});var Cd=b(Ce);Ie=E(Cd,"Modern Web Framework do that for us."),Cd.forEach(d),$d.forEach(d),De=k(Ed),je=y(Ed,"P",{});var Id=b(je);Me=E(Id,"The "),Ne=y(Id,"CODE",{});var Dd=b(Ne);Le=E(Dd,"framework_magic"),Dd.forEach(d),He=E(Id," takes in 2 subsequent views and figure out how to transition from 1 to another."),Id.forEach(d),Fe=k(Ed),Re=y(Ed,"P",{});var jd=b(Re);_e=E(jd,"Modern web frameworks like React and Vue do that using a technique called a virtual DOM."),jd.forEach(d),Je=k(Ed),We=y(Ed,"P",{});var Md=b(We);Be=E(Md,"To handle all the possible scenarios, this "),Ue=y(Md,"CODE",{});var Nd=b(Ue);qe=E(Nd,"framework_magic"),Nd.forEach(d),Ve=E(Md," could be very huge in code size, and it is independent of the application it is supporting."),Md.forEach(d),ze=k(Ed),Ge=y(Ed,"P",{});var Ld=b(Ge);Ye=E(Ld,"For react is 40kb gzipped and vue2 is 23kb gzipped, vue3 is 10kb."),Ld.forEach(d),Ke=k(Ed),Ze=y(Ed,"P",{});var Hd=b(Ze);Qe=E(Hd,"and if your application is simple, it could disproportionately small in terms of code size relative to the framework library, which is shown in the gray portion of the chart."),Hd.forEach(d),Xe=k(Ed),et=y(Ed,"P",{});var Fd=b(et);tt=E(Fd,"However, this doesnt have to be, "),at=y(Fd,"STRONG",{});var Rd=b(at);ot=E(Rd,"the only way"),Rd.forEach(d),rt=E(Fd," of doing things."),Fd.forEach(d),nt=k(Ed),it=y(Ed,"P",{});var _d=b(it);st=E(_d,"What if we could shift all of the work done in the "),ct=y(_d,"CODE",{});var Jd=b(ct);ht=E(Jd,"framework_magic"),Jd.forEach(d),lt=E(_d," from runtime to build time?"),_d.forEach(d),dt=k(Ed),ut=y(Ed,"P",{});var Wd=b(ut);ft=E(Wd,"We can analyse the code and figure out all the possible states and views, and the possible transitions between them, and generate just enough code to do just that?"),Wd.forEach(d),pt=k(Ed),mt=y(Ed,"P",{});var Bd=b(mt);vt=E(Bd,"And that's the core idea of Svelte."),Bd.forEach(d),wt=k(Ed),gt=y(Ed,"P",{});var Ud=b(gt);bt=E(Ud,"The Svelte compiler compiles the Svelte code into "),yt=y(Ud,"STRONG",{});var qd=b(yt);Et=E(qd,"optimised"),qd.forEach(d),kt=E(Ud," JavaScript code that "),St=y(Ud,"STRONG",{});var Vd=b(St);Tt=E(Vd,"grows linearly"),Vd.forEach(d),Pt=E(Ud," along with your application code."),Ud.forEach(d),At=k(Ed),Ot=y(Ed,"P",{});var zd=b(Ot);xt=E(zd,"and today we are going to look into the Svelte compiler."),zd.forEach(d),$t=k(Ed),Ct=y(Ed,"P",{});var Gd=b(Ct);It=E(Gd,"Don't worry if you are not familiar with Svelte / compiler, I'll try my best to avoid the jargons and explain the general idea of the process."),Gd.forEach(d),Dt=k(Ed),jt=y(Ed,"P",{});var Yd=b(jt);Mt=E(Yd,"My name is Tan Li Hau, I am a software engineer at Shopee. Shopee is a e-commerce platform in South east asia that is based in Singapore."),Yd.forEach(d),Nt=k(Ed),Lt=y(Ed,"P",{});var Kd=b(Lt);Ht=E(Kd,"I grew up in a lovely town called penang in malaysia, which has the best street food in malaysia, such as char koay teow, stir-fry flat rice noodles; rojak, a eclectic fruit salad with palm sugar, peanuts and chilli dressing, and dont get me started with food. Hopefully you guys can come visit Malaysia after this coronavirus pandemic is over."),Kd.forEach(d),Ft=k(Ed),Rt=y(Ed,"P",{});var Zd=b(Rt);_t=E(Zd,"last but not the least, Im one of the maintainers of svelte"),Zd.forEach(d),Jt=k(Ed),Wt=y(Ed,"P",{});var Qd=b(Wt);Bt=E(Qd,"Before we start talking about compilers, for the benefit of those who havn't have a chance to look into Svelte, lets take a look at how a svelte component looks like."),Qd.forEach(d),Ut=k(Ed),qt=y(Ed,"P",{});var Xd=b(qt);Vt=E(Xd,"a svelte component is written in a file with a "),zt=y(Xd,"CODE",{});var eu=b(zt);Gt=E(eu,".svelte"),eu.forEach(d),Yt=E(Xd," extension. Each file describes 1 svelte  component."),Xd.forEach(d),Kt=k(Ed),Zt=y(Ed,"P",{});var tu=b(Zt);Qt=E(tu,"You can add 1 script tag to the component. The script tag allows you to define variable, just like how you would in any javascript code,  and you can reference the variables in your html template, with a curly bracket."),tu.forEach(d),Xt=k(Ed),ea=y(Ed,"P",{});var au=b(ea);ta=E(au,"To add event listener, you use a "),aa=y(au,"CODE",{});var ou=b(aa);oa=E(ou,"on:"),ou.forEach(d),ra=E(au," directive, and you can update the variable just like this, and it will automatically updated in your DOM."),au.forEach(d),na=k(Ed),ia=y(Ed,"P",{});var ru=b(ia);sa=E(ru,"You can add a style tag and write some css to style your component. What's cool about it is that, the css is scoped within the component. so when i say button, background: red, only the button written in this component file has the background red. not the child component, not the parent component. just this component."),ru.forEach(d),ca=k(Ed),ha=y(Ed,"P",{});var nu=b(ha);la=y(nu,"STRONG",{});var iu=b(la);da=E(iu,"now"),iu.forEach(d),ua=E(nu,", here is one of the most powerful, and somewhat controversial feature of svelte, reactive declarations."),nu.forEach(d),fa=k(Ed),pa=y(Ed,"P",{});var su=b(pa);ma=E(su,"here you have a "),va=y(su,"CODE",{});var cu=b(va);wa=E(cu,"double = count * 2"),cu.forEach(d),ga=E(su,", with a dollar + colon sign in front of the statement. this means that the variable "),ba=y(su,"CODE",{});var hu=b(ba);ya=E(hu,"double"),hu.forEach(d),Ea=E(su," is always 2 times of "),ka=y(su,"CODE",{});var lu=b(ka);Sa=E(lu,"count"),lu.forEach(d),Ta=E(su,", whenever the value of "),Pa=y(su,"CODE",{});var du=b(Pa);Aa=E(du,"count"),du.forEach(d),Oa=E(su," has changed, the value of "),xa=y(su,"CODE",{});var uu=b(xa);$a=E(uu,"double"),uu.forEach(d),Ca=E(su," will update as well."),su.forEach(d),Ia=k(Ed),Da=y(Ed,"P",{});var fu=b(Da);ja=E(fu,"This definitely feels weird in the beginning, but the more you use it, you'll ask yourself why didn't we have this earlier."),fu.forEach(d),Ma=k(Ed),Na=y(Ed,"P",{});var pu=b(Na);La=E(pu,"So, here we have 1 big red button, and a text of multiply equation as a Svelte component."),pu.forEach(d),Ha=k(Ed),Fa=y(Ed,"P",{});var mu=b(Fa);Ra=E(mu,"I am gonna pause here for a moment, and ask you this question, "),_a=y(mu,"STRONG",{});var vu=b(_a);Ja=E(vu,"how would you implement this, if you are not allowed to use any framework and you have to write it in Vanilla JavaScript?"),vu.forEach(d),mu.forEach(d),Wa=k(Ed),Ba=y(Ed,"P",{});var wu=b(Ba);Ua=y(wu,"EM",{});var gu=b(Ua);qa=E(gu,"(pause)"),gu.forEach(d),wu.forEach(d),Va=k(Ed),za=y(Ed,"P",{});var bu=b(za);Ga=E(bu,"So, firstly we are going to start with the variable declaration."),bu.forEach(d),Ya=k(Ed),Ka=y(Ed,"P",{});var yu=b(Ka);Za=E(yu,"Next we create the text with document.createTextNode, and insert it to the parent"),yu.forEach(d),Qa=k(Ed),Xa=y(Ed,"P",{});var Eu=b(Xa);eo=E(Eu,"Next we create the button, change the text, add event listener and insert it to the parent."),Eu.forEach(d),to=k(Ed),ao=y(Ed,"P",{});var ku=b(ao);oo=E(ku,"To update the text when the count is updated, we create an update function, where we update the value of double and update the content of the text."),ku.forEach(d),ro=k(Ed),no=y(Ed,"P",{});var Su=b(no);io=E(Su,"Finally for the style tag, we create a style tag, set the content and insert into the head."),Su.forEach(d),so=k(Ed),co=y(Ed,"P",{});var Tu=b(co);ho=E(Tu,"To make sure that the button only targets this button that we just created, we add a class to the button."),Tu.forEach(d),lo=k(Ed),uo=y(Ed,"P",{});var Pu=b(uo);fo=E(Pu,"Here the class name is random, but it could be generated based on the hash of the style code, so you get consistent class name."),Pu.forEach(d),po=k(Ed),mo=y(Ed,"P",{});var Au=b(mo);vo=y(Au,"EM",{});var Ou=b(vo);wo=E(Ou,"(CLICK TO VIEW JS OUTPUT)"),Ou.forEach(d),Au.forEach(d),go=k(Ed),bo=y(Ed,"P",{});var xu=b(bo);yo=E(xu,"In fact if you take a look at the svelte generated JS output, it is very similar to the code we just wrote."),xu.forEach(d),Eo=k(Ed),ko=y(Ed,"P",{});var $u=b(ko);So=E($u,"So, this is just the code you need to "),To=y($u,"STRONG",{});var Cu=b(To);Po=E(Cu,"create a button and a text"),Cu.forEach(d),Ao=E($u,". You don't need 40KB Virtual DOM library to recreate the same component."),$u.forEach(d),Oo=k(Ed),xo=y(Ed,"P",{});var Iu=b(xo);$o=E(Iu,"Of course, you don't have to write all of these yourself."),Iu.forEach(d),Co=k(Ed),Io=y(Ed,"P",{});var Du=b(Io);Do=E(Du,"The Svelte compiler will do it for you. It will analyse the code above, and generate the code below for you."),Du.forEach(d),jo=k(Ed),Mo=y(Ed,"P",{});var ju=b(Mo);No=E(ju,'And now, if you try to choose "SSR" as the generated output, you can see now Svelte generates a function that returns a string composed using template literals.'),ju.forEach(d),Lo=k(Ed),Ho=y(Ed,"P",{});var Mu=b(Ho);Fo=E(Mu,"This is a few orders more performant than generating a tree object and serialising them into a HTML string."),Mu.forEach(d),Ro=k(Ed),_o=y(Ed,"P",{});var Nu=b(_o);Jo=y(Nu,"EM",{});var Lu=b(Jo);Wo=E(Lu,"(DONT MOVE)"),Lu.forEach(d),Nu.forEach(d),Bo=k(Ed),Uo=y(Ed,"P",{});var Hu=b(Uo);qo=E(Hu,"So, Let's take a few more examples of the Svelte syntax, and along the way, I hope you ask yourself this question, "),Vo=y(Hu,"STRONG",{});var Fu=b(Vo);zo=E(Fu,'"how do i convert this / write this in plain JavaScript?"'),Fu.forEach(d),Hu.forEach(d),Go=k(Ed),Yo=y(Ed,"P",{});var Ru=b(Yo);Ko=E(Ru,"and don't worry, you can find this repl on the svelte website. and you can compare the input and the js output anyway you want."),Ru.forEach(d),Zo=k(Ed),Qo=y(Ed,"P",{});var _u=b(Qo);Xo=y(_u,"EM",{});var Ju=b(Xo);er=E(Ju,"(OKAY NOW MOVE)"),Ju.forEach(d),_u.forEach(d),tr=k(Ed),ar=y(Ed,"P",{});var Wu=b(ar);or=E(Wu,"To express logics within the template, Svelte provides logic block, such as "),rr=y(Wu,"STRONG",{});var Bu=b(rr);nr=y(Bu,"CODE",{});var Uu=b(nr);ir=E(Uu,"{#if}"),Uu.forEach(d),Bu.forEach(d),sr=E(Wu,", "),cr=y(Wu,"STRONG",{});var qu=b(cr);hr=y(qu,"CODE",{});var Vu=b(hr);lr=E(Vu,"{#await}"),Vu.forEach(d),qu.forEach(d),dr=E(Wu,", and "),ur=y(Wu,"STRONG",{});var zu=b(ur);fr=y(zu,"CODE",{});var Gu=b(fr);pr=E(Gu,"{#each}"),Gu.forEach(d),zu.forEach(d),mr=E(Wu,"."),Wu.forEach(d),vr=k(Ed),wr=y(Ed,"P",{});var Yu=b(wr);gr=E(Yu,"To reduce the boilerplate code for binding a variable to an input, Svelte provides the "),br=y(Yu,"CODE",{});var Ku=b(br);yr=E(Ku,"bind:"),Ku.forEach(d),Er=E(Yu," directive."),Yu.forEach(d),kr=k(Ed),Sr=y(Ed,"P",{});var Zu=b(Sr);Tr=E(Zu,"To provide transition for elements coming into or out of the DOM, Svelte provides the "),Pr=y(Zu,"CODE",{});var Qu=b(Pr);Ar=E(Qu,"transition"),Qu.forEach(d),Or=E(Zu,", "),xr=y(Zu,"CODE",{});var Xu=b(xr);$r=E(Xu,"in"),Xu.forEach(d),Cr=E(Zu," and "),Ir=y(Zu,"CODE",{});var ef=b(Ir);Dr=E(ef,"out"),ef.forEach(d),jr=E(Zu," directive."),Zu.forEach(d),Mr=k(Ed),Nr=y(Ed,"P",{});var tf=b(Nr);Lr=E(tf,"To compose Components, Svelte provides slots and templates similar to the Web Component APIs."),tf.forEach(d),Hr=k(Ed),Fr=y(Ed,"P",{});var af=b(Fr);Rr=E(af,"There's so much I would like to share here, but I have to segue into the Svelte compiler, because that's the main topic of today's talk."),af.forEach(d),_r=k(Ed),Jr=y(Ed,"P",{});var of=b(Jr);Wr=E(of,"Now, finally, let's take a look at the Svelte compiler."),of.forEach(d),Br=k(Ed),Ur=y(Ed,"P",{});var rf=b(Ur);qr=E(rf,"So, how does a compiler works?"),rf.forEach(d),Vr=k(Ed),zr=y(Ed,"P",{});var nf=b(zr);Gr=E(nf,"A compiler first reads through your code, and break it down into smaller pieces, called tokens."),nf.forEach(d),Yr=k(Ed),Kr=y(Ed,"P",{});var sf=b(Kr);Zr=E(sf,"The compiler then goes through this list of tokens and arrange them into a tree structure, according to the grammar of the language. The tree structure is what a compiler call “Abstract syntax tree” or AST for short."),sf.forEach(d),Qr=k(Ed),Xr=y(Ed,"P",{});var cf=b(Xr);en=E(cf,"An AST is a tree representation of the input code."),cf.forEach(d),tn=k(Ed),an=y(Ed,"P",{});var hf=b(an);on=E(hf,"And what the compiler sometimes do, is to analyse and apply transformation to the AST.\nUsing tree traversal algorithms, such as depth first search"),hf.forEach(d),rn=k(Ed),nn=y(Ed,"P",{});var lf=b(nn);sn=E(lf,"And finally, the compiler generates a code output based on the final AST."),lf.forEach(d),cn=k(Ed),hn=y(Ed,"P",{});var df=b(hn);ln=E(df,"In summary, a generic compilation process involves parsing the code to an AST, doing analysis, optimsiation or transformation on the AST, and then generate code out from the AST."),df.forEach(d),dn=k(Ed),un=y(Ed,"P",{});var uf=b(un);fn=E(uf,"Finally, let's take a look how Svelte compiler works."),uf.forEach(d),pn=k(Ed),mn=y(Ed,"P",{});var ff=b(mn);vn=E(ff,"Svelte parses the Svelte code into AST"),ff.forEach(d),wn=k(Ed),gn=y(Ed,"P",{});var pf=b(gn);bn=E(pf,"Svelte then analyses the AST, which we will explore in detailed later."),pf.forEach(d),yn=k(Ed),En=y(Ed,"P",{});var mf=b(En);kn=E(mf,"With the analysis, Svelte generates JavaScript code depending on the compile target, whether it's for SSR or it's for the browser.\nFinally, js and css is generated, and can be written into a file or be consumed by your build process."),mf.forEach(d),Sn=k(Ed),Tn=y(Ed,"P",{});var vf=b(Tn);Pn=E(vf,"So lets start from the beginning, the parsing."),vf.forEach(d),An=k(Ed),On=y(Ed,"P",{});var wf=b(On);xn=E(wf,"Here is a Svelte component that we are going to use throughout this talk."),wf.forEach(d),$n=k(Ed),Cn=y(Ed,"P",{});var gf=b(Cn);In=E(gf,"Svelte, implements its own parser"),gf.forEach(d),Dn=k(Ed),jn=y(Ed,"P",{});var bf=b(jn);Mn=E(bf,"That parses the html syntax, as well as logic blocks, like each, if, and await"),bf.forEach(d),Nn=k(Ed),Ln=y(Ed,"P",{});var yf=b(Ln);Hn=E(yf,"Because js is a fairly complex language, whenever svelte encounters a script tag, or a curly brackets, it will hand it over to acorn, a lightweight JavaScript parser, to parse the JS content.\nThe same thing goes with css as well. svelte uses css-tree to parse CSS content in between the style tag."),yf.forEach(d),Fn=k(Ed),Rn=y(Ed,"P",{});var Ef=b(Rn);_n=E(Ef,"So, through the process, the svelte code is broken down into tokens, and is arranged into the Svelte AST."),Ef.forEach(d),Jn=k(Ed),Wn=y(Ed,"P",{});var kf=b(Wn);Bn=E(kf,"If you interested to see how the Svelte AST looks like, you can check them out at ASTExplorer.net."),kf.forEach(d),Un=k(Ed),qn=y(Ed,"P",{});var Sf=b(qn);Vn=E(Sf,"The next step is to analyse the AST."),Sf.forEach(d),zn=k(Ed),Gn=y(Ed,"P",{});var Tf=b(Gn);Yn=E(Tf,"Here, our code is already in AST, BUT to help visualise the process, i'm going to show you the original code."),Tf.forEach(d),Kn=k(Ed),Zn=y(Ed,"P",{});var Pf=b(Zn);Qn=E(Pf,"The first thing Svelte do is to traverse through the script AST."),Pf.forEach(d),Xn=k(Ed),ei=y(Ed,"P",{});var Af=b(ei);ti=E(Af,"Whenever it encounters a variable, in this case, count, it will record down the variable name."),Af.forEach(d),ai=k(Ed),oi=y(Ed,"P",{});var Of=b(oi);ri=E(Of,"here we record values and double."),Of.forEach(d),ni=k(Ed),ii=y(Ed,"P",{});var xf=b(ii);si=E(xf,'the "double" here, in this svelte code is a reactive declared variable. but to vanilla JavaScript, we are assigning value to this variable "double", which is not declared anywhere.'),xf.forEach(d),ci=k(Ed),hi=y(Ed,"P",{});var $f=b(hi);li=E($f,'in strict mode, this is a "assignment to undeclared variable" error.'),$f.forEach(d),di=k(Ed),ui=y(Ed,"P",{});var Cf=b(ui);fi=E(Cf,'Svelte marks the variable, "double", as "injected", so the declaration of the variable will be injected later. other examples of injected variables are svelte magic global, such as $$props, or a $ prefix of a store variable.'),Cf.forEach(d),pi=k(Ed),mi=y(Ed,"P",{});var If=b(mi);vi=E(If,'here we encounter "count" again, this time its being referenced, instead of being assinged to a value, and it is used to compute the value of double. so we draw a dependency relationship between count and double.so double is depending on count.'),If.forEach(d),wi=k(Ed),gi=y(Ed,"P",{});var Df=b(gi);bi=E(Df,"lets continue."),Df.forEach(d),yi=k(Ed),Ei=y(Ed,"P",{});var jf=b(Ei);ki=E(jf,"here we see data. data is not declared at the top level scope, as it is within the curly bracket block scope. so we are not going to record it down."),jf.forEach(d),Si=k(Ed),Ti=y(Ed,"P",{});var Mf=b(Ti);Pi=E(Mf,"same thing goes with "),Ai=y(Mf,"CODE",{});var Nf=b(Ai);Oi=E(Nf,"i"),Nf.forEach(d),xi=E(Mf,"."),Mf.forEach(d),$i=k(Ed),Ci=y(Ed,"P",{});var Lf=b(Ci);Ii=E(Lf,"here we encountered double again, so we mark it as referenced."),Lf.forEach(d),Di=k(Ed),ji=y(Ed,"P",{});var Hf=b(ji);Mi=E(Hf,"Math, a js global, we are going to ignore it."),Hf.forEach(d),Ni=k(Ed),Li=y(Ed,"P",{});var Ff=b(Li);Hi=E(Ff,"here "),Fi=y(Ff,"CODE",{});var Rf=b(Fi);Ri=E(Rf,"values"),Rf.forEach(d),_i=E(Ff," is mutated."),Ff.forEach(d),Ji=k(Ed),Wi=y(Ed,"P",{});var _f=b(Wi);Bi=E(_f,"now we reach the end of the script, the next step is to traverse the template AST."),_f.forEach(d),Ui=k(Ed),qi=y(Ed,"P",{});var Jf=b(qi);Vi=E(Jf,"we start from the "),zi=y(Jf,"CODE",{});var Wf=b(zi);Gi=E(Wf,"input"),Wf.forEach(d),Yi=E(Jf," element, which has a "),Ki=y(Jf,"CODE",{});var Bf=b(Ki);Zi=E(Bf,"bind:value"),Bf.forEach(d),Qi=E(Jf,"."),Jf.forEach(d),Xi=k(Ed),es=y(Ed,"P",{});var Uf=b(es);ts=E(Uf,"Here we are binding the value of the input to the variable "),as=y(Uf,"CODE",{});var qf=b(as);os=E(qf,"count"),qf.forEach(d),rs=E(Uf,". so we mark "),ns=y(Uf,"CODE",{});var Vf=b(ns);is=E(Vf,"count"),Vf.forEach(d),ss=E(Uf," as referenced from template and mutated."),Uf.forEach(d),cs=k(Ed),hs=y(Ed,"P",{});var zf=b(hs);ls=E(zf,"Now we encountered the each block. Here we are iterating through the variable "),ds=y(zf,"CODE",{});var Gf=b(ds);us=E(Gf,"values"),Gf.forEach(d),fs=E(zf," and we are using the variable "),ps=y(zf,"CODE",{});var Yf=b(ps);ms=E(Yf,"value"),Yf.forEach(d),vs=E(zf," as each item. So the template within the each block will have a new scope, where "),ws=y(zf,"CODE",{});var Kf=b(ws);gs=E(Kf,"value"),Kf.forEach(d),bs=E(zf," is declared. Also, we mark "),ys=y(zf,"CODE",{});var Zf=b(ys);Es=E(Zf,"values"),Zf.forEach(d),ks=E(zf," as the dependency of the each block. This means that whenever "),Ss=y(zf,"CODE",{});var Qf=b(Ss);Ts=E(Qf,"values"),Qf.forEach(d),Ps=E(zf," has changed, we are going to update the each block."),zf.forEach(d),As=k(Ed),Os=y(Ed,"P",{});var Xf=b(Os);xs=E(Xf,"...and, we mark values as referenced too."),Xf.forEach(d),$s=k(Ed),Cs=y(Ed,"P",{});var ep=b(Cs);Is=E(ep,"next, we move into the each block and the div element. Here we mark "),Ds=y(ep,"CODE",{});var tp=b(Ds);js=E(tp,"value"),tp.forEach(d),Ms=E(ep," as referenced from the template, we encounter "),Ns=y(ep,"CODE",{});var ap=b(Ns);Ls=E(ap,"value"),ap.forEach(d),Hs=E(ep," again and we've reachead the end of the template."),ep.forEach(d),Fs=k(Ed),Rs=y(Ed,"P",{});var op=b(Rs);_s=E(op,"and Svelte traverse through the script again, this time mainly for optimisation. figuring out which variables are not referenced, and does not need to be reactive."),op.forEach(d),Js=k(Ed),Ws=y(Ed,"P",{});var rp=b(Ws);Bs=E(rp,"Similarly, if a reactive declaration's dependency will never change, by seeing whether their dependencies were marked as mutated, we can mark it as static, which is more efficient, and much smaller in code size."),rp.forEach(d),Us=k(Ed),qs=y(Ed,"P",{});var np=b(qs);Vs=E(np,"Next, Svelte traverse through the style."),np.forEach(d),zs=k(Ed),Gs=y(Ed,"P",{});var ip=b(Gs);Ys=E(ip,"for each selector, it will determine whether it will match any elements in the template, and if it does, svelte will add a svelte-hash class name to the selector as well as the matched eelement. Although this will increase the specificity of the selector, but it will make the selector scoped only to the current svelte component."),ip.forEach(d),Ks=k(Ed),Zs=y(Ed,"P",{});var sp=b(Zs);Qs=E(sp,"At the end of this step, Svelte has figured out all the variables declared, their behavior and their relationship."),sp.forEach(d),Xs=k(Ed),ec=y(Ed,"P",{});var cp=b(ec);tc=E(cp,"With this, we are moving on to the rendering phase."),cp.forEach(d),ac=k(Ed),oc=y(Ed,"P",{});var hp=b(oc);rc=E(hp,"This step is where svelte will generate the javascript code.\nThere are 2 different compile targets, 1 is DOM, for the client side, and another is ssr, for the server side."),hp.forEach(d),nc=k(Ed),ic=y(Ed,"P",{});var lp=b(ic);sc=E(lp,"Lets first take a look at the dom render target."),lp.forEach(d),cc=k(Ed),hc=y(Ed,"P",{});var dp=b(hc);lc=E(dp,"Here we have the source code. and here is the outline of how a dom output looks like."),dp.forEach(d),dc=k(Ed),uc=y(Ed,"P",{});var up=b(uc);fc=E(up,"Here is what I called a fragment block. the create fragment function returns an object, that acts as a recipe to create the elements in the component. each method in the recipe object, represents a stage in the component lifecycle, here we have "),pc=y(up,"CODE",{});var fp=b(pc);mc=E(fp,"c"),fp.forEach(d),vc=E(up," for "),wc=y(up,"CODE",{});var pp=b(wc);gc=E(pp,"create"),pp.forEach(d),bc=E(up,", "),yc=y(up,"CODE",{});var mp=b(yc);Ec=E(mp,"m"),mp.forEach(d),kc=E(up," for "),Sc=y(up,"CODE",{});var vp=b(Sc);Tc=E(vp,"mounting"),vp.forEach(d),Pc=E(up,", "),Ac=y(up,"CODE",{});var wp=b(Ac);Oc=E(wp,"p"),wp.forEach(d),xc=E(up," for "),$c=y(up,"CODE",{});var gp=b($c);Cc=E(gp,"update"),gp.forEach(d),Ic=E(up,", and "),Dc=y(up,"CODE",{});var bp=b(Dc);jc=E(bp,"d"),bp.forEach(d),Mc=E(up," for "),Nc=y(up,"CODE",{});var yp=b(Nc);Lc=E(yp,"destroy"),yp.forEach(d),Hc=E(up,"."),up.forEach(d),Fc=k(Ed),Rc=y(Ed,"P",{});var Ep=b(Rc);_c=E(Ep,"next on, we have the instance function. here's where the state and component logic goes into."),Ep.forEach(d),Jc=k(Ed),Wc=y(Ed,"P",{});var kp=b(Wc);Bc=E(kp,"finally we have the svelte component class. so each svelte component is compiled into a class which is the default export. in the constructor, as you can see, calls the "),Uc=y(kp,"CODE",{});var Sp=b(Uc);qc=E(Sp,"init"),Sp.forEach(d),Vc=E(kp," function which takes in the "),zc=y(kp,"CODE",{});var Tp=b(zc);Gc=E(Tp,"instance"),Tp.forEach(d),Yc=E(kp," and "),Kc=y(kp,"CODE",{});var Pp=b(Kc);Zc=E(Pp,"create_fragment"),Pp.forEach(d),Qc=E(kp," function. and this is how the 3 different pieces of the svelte compoenent come together."),kp.forEach(d),Xc=k(Ed),eh=y(Ed,"P",{});var Ap=b(eh);th=E(Ap,"Now, svelte walks through the template again, and starts inserting code into output."),Ap.forEach(d),ah=k(Ed),oh=y(Ed,"P",{});var Op=b(oh);rh=E(Op,"First we have the input element. we insert instructions to create the input element, mounting the element to the target, and remove the element from the target."),Op.forEach(d),nh=k(Ed),ih=y(Ed,"P",{});var xp=b(ih);sh=E(xp,"next we have the binding of the input value to the "),ch=y(xp,"CODE",{});var $p=b(ch);hh=E($p,"count"),$p.forEach(d),lh=E(xp," variable. we need an input handler to listen to the input changes, so we can update the value of the "),dh=y(xp,"CODE",{});var Cp=b(dh);uh=E(Cp,"count"),Cp.forEach(d),fh=E(xp," variable. here we pull out the variables list, and add "),ph=y(xp,"CODE",{});var Ip=b(ph);mh=E(Ip,"input_handler"),Ip.forEach(d),vh=E(xp,"."),xp.forEach(d),wh=k(Ed),gh=y(Ed,"P",{});var Dp=b(gh);bh=E(Dp,"we set the input value based on the variable count and add event listener for input changes which we should remove event listener when we destroy the component."),Dp.forEach(d),yh=k(Ed),Eh=y(Ed,"P",{});var jp=b(Eh);kh=E(jp,"and in the update phase, if the "),Sh=y(jp,"CODE",{});var Mp=b(Sh);Th=E(Mp,"count"),Mp.forEach(d),Ph=E(jp," has changed, we need to update the value of the input based on the value of "),Ah=y(jp,"CODE",{});var Np=b(Ah);Oh=E(Np,"count"),Np.forEach(d),xh=E(jp,"."),jp.forEach(d),$h=k(Ed),Ch=y(Ed,"P",{});var Lp=b(Ch);Ih=E(Lp,"next we move on to the each block."),Lp.forEach(d),Dh=k(Ed),jh=y(Ed,"P",{});var Hp=b(jh);Mh=E(Hp,"we create a new fragment block for the each block, which contains the recipe for creating elements for 1 each item. And because in the each block we have a child scope that defines the variable "),Nh=y(Hp,"CODE",{});var Fp=b(Nh);Lh=E(Fp,"value"),Fp.forEach(d),Hh=E(Hp,", we have a "),Fh=y(Hp,"CODE",{});var Rp=b(Fh);Rh=E(Rp,"get_each_context"),Rp.forEach(d),_h=E(Hp," function to emulate that."),Hp.forEach(d),Jh=k(Ed),Wh=y(Ed,"P",{});var _p=b(Wh);Bh=E(_p,'Here we fast forward through the steps, where for each element, we insert code for how we create, mount, update and destroy them. If you are interested to know the details, you can check out my series of blog, called "Compile Svelte in your head".'),_p.forEach(d),Uh=k(Ed),qh=y(Ed,"P",{});var Jp=b(qh);Vh=E(Jp,"Now we look at how Svelte fills up the instance function. In most cases, Svelte just copies over whatever is written within the "),zh=y(Jp,"CODE",{});var Wp=b(zh);Gh=E(Wp,"<script>"),Wp.forEach(d),Yh=E(Jp," tag."),Jp.forEach(d),Kh=k(Ed),Zh=y(Ed,"P",{});var Bp=b(Zh);Qh=E(Bp,"For reactive declarations, they were added inside the "),Xh=y(Bp,"CODE",{});var Up=b(Xh);el=E(Up,"$$.update"),Up.forEach(d),tl=E(Bp," function, and for each statement, we add an if statement to check whether their dependency has changed, based on the dependency relationship we've drawn earlier."),Bp.forEach(d),al=k(Ed),ol=y(Ed,"P",{});var qp=b(ol);rl=E(qp,"Now we need to declare and add those injected variables."),qp.forEach(d),nl=k(Ed),il=y(Ed,"P",{});var Vp=b(il);sl=E(Vp,"Finally, we return the list of variables that are "),cl=y(Vp,"STRONG",{});var zp=b(cl);hl=E(zp,"referenced by the template"),zp.forEach(d),ll=E(Vp," only."),Vp.forEach(d),dl=k(Ed),ul=y(Ed,"P",{});var Gp=b(ul);fl=E(Gp,"Now, to make the variables actually reactive, we instruments the "),pl=y(Gp,"CODE",{});var Yp=b(pl);ml=E(Yp,"$$invalidate"),Yp.forEach(d),vl=E(Gp," after each assignment statements, so that it will kickstart a next round of update cycle."),Gp.forEach(d),wl=k(Ed),gl=y(Ed,"P",{});var Kp=b(gl);bl=E(Kp,"So here you have it, the compile output for the DOM target."),Kp.forEach(d),yl=k(Ed),El=y(Ed,"P",{});var Zp=b(El);kl=E(Zp,"Let's take a quick look at how things going for compiling to the SSR target."),Zp.forEach(d),Sl=k(Ed),Tl=y(Ed,"P",{});var Qp=b(Tl);Pl=E(Qp,"The structure of the output code for the SSR target is much simpler. it is a function that returns a string."),Qp.forEach(d),Al=k(Ed),Ol=y(Ed,"P",{});var Xp=b(Ol);xl=E(Xp,"Because there wont be any reactivity needed in the server, we can copy over the code verbatim from the script tag. same thing goes with reactive declarations, of course we need to remember to declare the injected variable, "),$l=y(Xp,"CODE",{});var em=b($l);Cl=E(em,"double"),em.forEach(d),Il=E(Xp,"."),Xp.forEach(d),Dl=k(Ed),jl=y(Ed,"P",{});var tm=b(jl);Ml=E(tm,"as we traverse through the template, we add insert strings or expressions into the output template literal. For the each block, we iterate through the variable "),Nl=y(tm,"CODE",{});var am=b(Nl);Ll=E(am,"values"),am.forEach(d),Hl=E(tm," and return the child elements as string."),tm.forEach(d),Fl=k(Ed),Rl=y(Ed,"P",{});var om=b(Rl);_l=E(om,"And there you go, the output code of a svelte component for SSR."),om.forEach(d),Jl=k(Ed),Wl=y(Ed,"P",{});var rm=b(Wl);Bl=E(rm,"Finally, Svelte outputs the code in JS and CSS, with the code as string as well as the sourcemap."),rm.forEach(d),Ul=k(Ed),ql=y(Ed,"P",{});var nm=b(ql);Vl=E(nm,"These can be written into file system directly, or be consumed by your module bundler, such as rollup-svelte-plugin in rollup or svelte-loader for webpack."),nm.forEach(d),zl=k(Ed),Gl=y(Ed,"P",{});var im=b(Gl);Yl=E(im,"So lets review again the svelte compilation pipeline,\nSvelte parses the code into ast, runs a series of steps to analsye the code, tracking the variable references and dependencies. Then svelte generates the code depending on the compile target, whether it's for the client side or server-side.\nAnd the output of the render step is in terms of JS and CSS, which can be written into a file / consumed by your build tools."),im.forEach(d),Kl=k(Ed),Zl=y(Ed,"P",{});var sm=b(Zl);Ql=E(sm,"Thank you so much for listening. If you like to learn more about svelte, or if you have any questions about svelte, you can follow me on twitter. I am Li Hau. hope you have fun with the talks throughout the conference."),sm.forEach(d),Xl=k(Ed),ed=y(Ed,"P",{});var cm=b(ed);td=E(cm,"See ya."),cm.forEach(d),Ed.forEach(d),this.h()},h(){g(r,"href","#recorded-talk"),g(c,"href","#cityjs-conference"),g(w,"href","#mmt-tech-meetup-sept"),g(P,"href","#slides"),g(x,"href","#script"),g(a,"class","sitemap"),g(a,"id","sitemap"),g(a,"role","navigation"),g(a,"aria-label","Table of Contents"),g(j,"href","#recorded-talk"),g(j,"id","recorded-talk"),g(F,"href","#cityjs-conference"),g(F,"id","cityjs-conference"),g(J,"width","560"),g(J,"height","315"),J.src!==(W="https://www.youtube.com/embed/sP7dtZm_Wx0?start=6618")&&g(J,"src","https://www.youtube.com/embed/sP7dtZm_Wx0?start=6618"),g(J,"frameborder","0"),g(J,"allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),J.allowFullscreen=!0,g(V,"href","#mmt-tech-meetup-sept"),g(V,"id","mmt-tech-meetup-sept"),g(Y,"width","560"),g(Y,"height","315"),Y.src!==(K="https://www.youtube.com/embed/tT1altUaaJU")&&g(Y,"src","https://www.youtube.com/embed/tT1altUaaJU"),g(Y,"frameborder","0"),g(Y,"allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),Y.allowFullscreen=!0,g(ee,"href","#slides"),g(ee,"id","slides"),g(ne,"href","/slides/svelte-compiler/"),g(de,"href","#script"),g(de,"id","script")},m(e,d){l(e,t,d),h(t,a),h(a,o),h(o,r),h(r,n),h(a,i),h(i,s),h(s,c),h(c,u),h(i,p),h(p,w),h(w,S),h(a,T),h(T,P),h(P,A),h(a,O),h(O,x),h(x,$),l(e,C,d),l(e,I,d),h(I,D),h(D,j),h(j,M),l(e,N,d),l(e,L,d),h(L,H),h(H,F),h(F,R),h(L,_),h(L,J),l(e,B,d),l(e,U,d),h(U,q),h(q,V),h(V,z),h(U,G),h(U,Y),l(e,Z,d),l(e,Q,d),h(Q,X),h(X,ee),h(ee,te),h(Q,ae),h(Q,oe),h(oe,re),h(oe,ne),h(ne,ie),h(oe,se),l(e,ce,d),l(e,he,d),h(he,le),h(le,de),h(de,ue),h(he,fe),h(he,pe),h(pe,me),h(pe,ve),h(ve,we),h(pe,ge),h(he,be),h(he,ye),h(ye,Ee),h(he,ke),h(he,Se),h(Se,Te),h(he,Pe),h(he,Ae),h(Ae,Oe),h(he,xe),h(he,$e),h($e,Ce),h(Ce,Ie),h(he,De),h(he,je),h(je,Me),h(je,Ne),h(Ne,Le),h(je,He),h(he,Fe),h(he,Re),h(Re,_e),h(he,Je),h(he,We),h(We,Be),h(We,Ue),h(Ue,qe),h(We,Ve),h(he,ze),h(he,Ge),h(Ge,Ye),h(he,Ke),h(he,Ze),h(Ze,Qe),h(he,Xe),h(he,et),h(et,tt),h(et,at),h(at,ot),h(et,rt),h(he,nt),h(he,it),h(it,st),h(it,ct),h(ct,ht),h(it,lt),h(he,dt),h(he,ut),h(ut,ft),h(he,pt),h(he,mt),h(mt,vt),h(he,wt),h(he,gt),h(gt,bt),h(gt,yt),h(yt,Et),h(gt,kt),h(gt,St),h(St,Tt),h(gt,Pt),h(he,At),h(he,Ot),h(Ot,xt),h(he,$t),h(he,Ct),h(Ct,It),h(he,Dt),h(he,jt),h(jt,Mt),h(he,Nt),h(he,Lt),h(Lt,Ht),h(he,Ft),h(he,Rt),h(Rt,_t),h(he,Jt),h(he,Wt),h(Wt,Bt),h(he,Ut),h(he,qt),h(qt,Vt),h(qt,zt),h(zt,Gt),h(qt,Yt),h(he,Kt),h(he,Zt),h(Zt,Qt),h(he,Xt),h(he,ea),h(ea,ta),h(ea,aa),h(aa,oa),h(ea,ra),h(he,na),h(he,ia),h(ia,sa),h(he,ca),h(he,ha),h(ha,la),h(la,da),h(ha,ua),h(he,fa),h(he,pa),h(pa,ma),h(pa,va),h(va,wa),h(pa,ga),h(pa,ba),h(ba,ya),h(pa,Ea),h(pa,ka),h(ka,Sa),h(pa,Ta),h(pa,Pa),h(Pa,Aa),h(pa,Oa),h(pa,xa),h(xa,$a),h(pa,Ca),h(he,Ia),h(he,Da),h(Da,ja),h(he,Ma),h(he,Na),h(Na,La),h(he,Ha),h(he,Fa),h(Fa,Ra),h(Fa,_a),h(_a,Ja),h(he,Wa),h(he,Ba),h(Ba,Ua),h(Ua,qa),h(he,Va),h(he,za),h(za,Ga),h(he,Ya),h(he,Ka),h(Ka,Za),h(he,Qa),h(he,Xa),h(Xa,eo),h(he,to),h(he,ao),h(ao,oo),h(he,ro),h(he,no),h(no,io),h(he,so),h(he,co),h(co,ho),h(he,lo),h(he,uo),h(uo,fo),h(he,po),h(he,mo),h(mo,vo),h(vo,wo),h(he,go),h(he,bo),h(bo,yo),h(he,Eo),h(he,ko),h(ko,So),h(ko,To),h(To,Po),h(ko,Ao),h(he,Oo),h(he,xo),h(xo,$o),h(he,Co),h(he,Io),h(Io,Do),h(he,jo),h(he,Mo),h(Mo,No),h(he,Lo),h(he,Ho),h(Ho,Fo),h(he,Ro),h(he,_o),h(_o,Jo),h(Jo,Wo),h(he,Bo),h(he,Uo),h(Uo,qo),h(Uo,Vo),h(Vo,zo),h(he,Go),h(he,Yo),h(Yo,Ko),h(he,Zo),h(he,Qo),h(Qo,Xo),h(Xo,er),h(he,tr),h(he,ar),h(ar,or),h(ar,rr),h(rr,nr),h(nr,ir),h(ar,sr),h(ar,cr),h(cr,hr),h(hr,lr),h(ar,dr),h(ar,ur),h(ur,fr),h(fr,pr),h(ar,mr),h(he,vr),h(he,wr),h(wr,gr),h(wr,br),h(br,yr),h(wr,Er),h(he,kr),h(he,Sr),h(Sr,Tr),h(Sr,Pr),h(Pr,Ar),h(Sr,Or),h(Sr,xr),h(xr,$r),h(Sr,Cr),h(Sr,Ir),h(Ir,Dr),h(Sr,jr),h(he,Mr),h(he,Nr),h(Nr,Lr),h(he,Hr),h(he,Fr),h(Fr,Rr),h(he,_r),h(he,Jr),h(Jr,Wr),h(he,Br),h(he,Ur),h(Ur,qr),h(he,Vr),h(he,zr),h(zr,Gr),h(he,Yr),h(he,Kr),h(Kr,Zr),h(he,Qr),h(he,Xr),h(Xr,en),h(he,tn),h(he,an),h(an,on),h(he,rn),h(he,nn),h(nn,sn),h(he,cn),h(he,hn),h(hn,ln),h(he,dn),h(he,un),h(un,fn),h(he,pn),h(he,mn),h(mn,vn),h(he,wn),h(he,gn),h(gn,bn),h(he,yn),h(he,En),h(En,kn),h(he,Sn),h(he,Tn),h(Tn,Pn),h(he,An),h(he,On),h(On,xn),h(he,$n),h(he,Cn),h(Cn,In),h(he,Dn),h(he,jn),h(jn,Mn),h(he,Nn),h(he,Ln),h(Ln,Hn),h(he,Fn),h(he,Rn),h(Rn,_n),h(he,Jn),h(he,Wn),h(Wn,Bn),h(he,Un),h(he,qn),h(qn,Vn),h(he,zn),h(he,Gn),h(Gn,Yn),h(he,Kn),h(he,Zn),h(Zn,Qn),h(he,Xn),h(he,ei),h(ei,ti),h(he,ai),h(he,oi),h(oi,ri),h(he,ni),h(he,ii),h(ii,si),h(he,ci),h(he,hi),h(hi,li),h(he,di),h(he,ui),h(ui,fi),h(he,pi),h(he,mi),h(mi,vi),h(he,wi),h(he,gi),h(gi,bi),h(he,yi),h(he,Ei),h(Ei,ki),h(he,Si),h(he,Ti),h(Ti,Pi),h(Ti,Ai),h(Ai,Oi),h(Ti,xi),h(he,$i),h(he,Ci),h(Ci,Ii),h(he,Di),h(he,ji),h(ji,Mi),h(he,Ni),h(he,Li),h(Li,Hi),h(Li,Fi),h(Fi,Ri),h(Li,_i),h(he,Ji),h(he,Wi),h(Wi,Bi),h(he,Ui),h(he,qi),h(qi,Vi),h(qi,zi),h(zi,Gi),h(qi,Yi),h(qi,Ki),h(Ki,Zi),h(qi,Qi),h(he,Xi),h(he,es),h(es,ts),h(es,as),h(as,os),h(es,rs),h(es,ns),h(ns,is),h(es,ss),h(he,cs),h(he,hs),h(hs,ls),h(hs,ds),h(ds,us),h(hs,fs),h(hs,ps),h(ps,ms),h(hs,vs),h(hs,ws),h(ws,gs),h(hs,bs),h(hs,ys),h(ys,Es),h(hs,ks),h(hs,Ss),h(Ss,Ts),h(hs,Ps),h(he,As),h(he,Os),h(Os,xs),h(he,$s),h(he,Cs),h(Cs,Is),h(Cs,Ds),h(Ds,js),h(Cs,Ms),h(Cs,Ns),h(Ns,Ls),h(Cs,Hs),h(he,Fs),h(he,Rs),h(Rs,_s),h(he,Js),h(he,Ws),h(Ws,Bs),h(he,Us),h(he,qs),h(qs,Vs),h(he,zs),h(he,Gs),h(Gs,Ys),h(he,Ks),h(he,Zs),h(Zs,Qs),h(he,Xs),h(he,ec),h(ec,tc),h(he,ac),h(he,oc),h(oc,rc),h(he,nc),h(he,ic),h(ic,sc),h(he,cc),h(he,hc),h(hc,lc),h(he,dc),h(he,uc),h(uc,fc),h(uc,pc),h(pc,mc),h(uc,vc),h(uc,wc),h(wc,gc),h(uc,bc),h(uc,yc),h(yc,Ec),h(uc,kc),h(uc,Sc),h(Sc,Tc),h(uc,Pc),h(uc,Ac),h(Ac,Oc),h(uc,xc),h(uc,$c),h($c,Cc),h(uc,Ic),h(uc,Dc),h(Dc,jc),h(uc,Mc),h(uc,Nc),h(Nc,Lc),h(uc,Hc),h(he,Fc),h(he,Rc),h(Rc,_c),h(he,Jc),h(he,Wc),h(Wc,Bc),h(Wc,Uc),h(Uc,qc),h(Wc,Vc),h(Wc,zc),h(zc,Gc),h(Wc,Yc),h(Wc,Kc),h(Kc,Zc),h(Wc,Qc),h(he,Xc),h(he,eh),h(eh,th),h(he,ah),h(he,oh),h(oh,rh),h(he,nh),h(he,ih),h(ih,sh),h(ih,ch),h(ch,hh),h(ih,lh),h(ih,dh),h(dh,uh),h(ih,fh),h(ih,ph),h(ph,mh),h(ih,vh),h(he,wh),h(he,gh),h(gh,bh),h(he,yh),h(he,Eh),h(Eh,kh),h(Eh,Sh),h(Sh,Th),h(Eh,Ph),h(Eh,Ah),h(Ah,Oh),h(Eh,xh),h(he,$h),h(he,Ch),h(Ch,Ih),h(he,Dh),h(he,jh),h(jh,Mh),h(jh,Nh),h(Nh,Lh),h(jh,Hh),h(jh,Fh),h(Fh,Rh),h(jh,_h),h(he,Jh),h(he,Wh),h(Wh,Bh),h(he,Uh),h(he,qh),h(qh,Vh),h(qh,zh),h(zh,Gh),h(qh,Yh),h(he,Kh),h(he,Zh),h(Zh,Qh),h(Zh,Xh),h(Xh,el),h(Zh,tl),h(he,al),h(he,ol),h(ol,rl),h(he,nl),h(he,il),h(il,sl),h(il,cl),h(cl,hl),h(il,ll),h(he,dl),h(he,ul),h(ul,fl),h(ul,pl),h(pl,ml),h(ul,vl),h(he,wl),h(he,gl),h(gl,bl),h(he,yl),h(he,El),h(El,kl),h(he,Sl),h(he,Tl),h(Tl,Pl),h(he,Al),h(he,Ol),h(Ol,xl),h(Ol,$l),h($l,Cl),h(Ol,Il),h(he,Dl),h(he,jl),h(jl,Ml),h(jl,Nl),h(Nl,Ll),h(jl,Hl),h(he,Fl),h(he,Rl),h(Rl,_l),h(he,Jl),h(he,Wl),h(Wl,Bl),h(he,Ul),h(he,ql),h(ql,Vl),h(he,zl),h(he,Gl),h(Gl,Yl),h(he,Kl),h(he,Zl),h(Zl,Ql),h(he,Xl),h(he,ed),h(ed,td)},d(e){e&&d(t),e&&d(C),e&&d(I),e&&d(N),e&&d(L),e&&d(B),e&&d(U),e&&d(Z),e&&d(Q),e&&d(ce),e&&d(he)}}}function pe(e){let a,o;const r=[me];let n={$$slots:{default:[fe]},$$scope:{ctx:e}};for(let e=0;e<r.length;e+=1)n=t(n,r[e]);return a=new ue({props:n}),{c(){B(a.$$.fragment)},l(e){U(a.$$.fragment,e)},m(e,t){q(a,e,t),o=!0},p(e,[t]){const o=0&t?function(e,t){const a={},o={},r={$$scope:1};let n=e.length;for(;n--;){const i=e[n],s=t[n];if(s){for(const e in i)e in s||(o[e]=1);for(const e in s)r[e]||(a[e]=s[e],r[e]=1);e[n]=s}else for(const e in i)r[e]=1}for(const e in o)e in a||(a[e]=void 0);return a}(r,[(n=me,"object"==typeof n&&null!==n?n:{})]):{};var n;1&t&&(o.$$scope={dirty:t,ctx:e}),a.$set(o)},i(e){o||(J(a.$$.fragment,e),o=!0)},o(e){W(a.$$.fragment,e),o=!1},d(e){V(a,e)}}}const me={title:"Looking into the Svelte Compiler",occasion:"CityJS Conf 2020",date:"2020-09-14",layout:"talk",slug:"looking-into-the-svelte-compiler",type:"talk"};class ve extends Y{constructor(e){super(),G(this,e,null,pe,i,{})}}setTimeout(()=>{new ve({target:document.querySelector("#app"),hydrate:!0});if(document.querySelector(".twitter-tweet")){const e=document.createElement("script");e.async=!0,e.src="https://platform.twitter.com/widgets.js",e.charset="utf-8",document.body.appendChild(e)}if("loading"in HTMLImageElement.prototype){document.querySelectorAll('img[loading="lazy"]').forEach(e=>{e.src=e.dataset.src})}else{const e=document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js",document.body.appendChild(e)}},3e3);
