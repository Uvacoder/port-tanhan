function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function o(){return Object.create(null)}function a(t){t.forEach(n)}function r(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,n,o,a){return t[1]&&a?e(o.ctx.slice(),t[1](a(n))):o.ctx}function l(t,e,n,o,a,r,s){const l=function(t,e,n,o){if(t[2]&&o){const a=t[2](o(n));if(void 0===e.dirty)return a;if("object"==typeof a){const t=[],n=Math.max(e.dirty.length,a.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|a[o];return t}return e.dirty|a}return e.dirty}(e,o,a,r);if(l){const a=c(e,n,o,s);t.p(a,l)}}function i(t,e){t.appendChild(e)}function h(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function u(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function p(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function m(t){return document.createTextNode(t)}function g(){return m(" ")}function v(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function $(t){return Array.from(t.childNodes)}function w(t,e,n,o){for(let o=0;o<t.length;o+=1){const a=t[o];if(a.nodeName===e){let e=0;const r=[];for(;e<a.attributes.length;){const t=a.attributes[e++];n[t.name]||r.push(t.name)}for(let t=0;t<r.length;t++)a.removeAttribute(r[t]);return t.splice(o,1)[0]}}return o?p(e):d(e)}function E(t,e){for(let n=0;n<t.length;n+=1){const o=t[n];if(3===o.nodeType)return o.data=""+e,t.splice(n,1)[0]}return m(e)}function y(t){return E(t," ")}function b(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}let x;function A(t){x=t}const k=[],T=[],z=[],N=[],R=Promise.resolve();let S=!1;function L(t){z.push(t)}let _=!1;const I=new Set;function M(){if(!_){_=!0;do{for(let t=0;t<k.length;t+=1){const e=k[t];A(e),j(e.$$)}for(k.length=0;T.length;)T.pop()();for(let t=0;t<z.length;t+=1){const e=z[t];I.has(e)||(I.add(e),e())}z.length=0}while(k.length);for(;N.length;)N.pop()();S=!1,_=!1,I.clear()}}function j(t){if(null!==t.fragment){t.update(),a(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(L)}}const q=new Set;function C(t,e){t&&t.i&&(q.delete(t),t.i(e))}function H(t,e,n,o){if(t&&t.o){if(q.has(t))return;q.add(t),(void 0).c.push(()=>{q.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}function P(t){t&&t.c()}function B(t,e){t&&t.l(e)}function F(t,e,o){const{fragment:s,on_mount:c,on_destroy:l,after_update:i}=t.$$;s&&s.m(e,o),L(()=>{const e=c.map(n).filter(r);l?l.push(...e):a(e),t.$$.on_mount=[]}),i.forEach(L)}function O(t,e){const n=t.$$;null!==n.fragment&&(a(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function V(t,e){-1===t.$$.dirty[0]&&(k.push(t),S||(S=!0,R.then(M)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function W(e,n,r,s,c,l,i=[-1]){const h=x;A(e);const u=n.props||{},d=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:c,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:[]),callbacks:o(),dirty:i};let p=!1;if(d.ctx=r?r(e,u,(t,n,...o)=>{const a=o.length?o[0]:n;return d.ctx&&c(d.ctx[t],d.ctx[t]=a)&&(d.bound[t]&&d.bound[t](a),p&&V(e,t)),n}):[],d.update(),p=!0,a(d.before_update),d.fragment=!!s&&s(d.ctx),n.target){if(n.hydrate){const t=$(n.target);d.fragment&&d.fragment.l(t),t.forEach(f)}else d.fragment&&d.fragment.c();n.intro&&C(e.$$.fragment),F(e,n.target,n.anchor),M()}A(h)}class D{$destroy(){O(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function G(e){let n,o,a,r,s,c,l,u,b,x,A,k,T,z,N,R,S,L,_,I,M,j,q,C,H,P,B,F,O,V,W,D,G,K,U;return{c(){n=d("header"),o=d("nav"),a=d("ul"),r=d("li"),s=d("a"),c=m("Tan Li Hau"),l=g(),u=d("li"),b=d("a"),x=m("About"),A=g(),k=d("li"),T=d("a"),z=m("Writings"),N=g(),R=d("li"),S=d("a"),L=m("Talks"),_=g(),I=d("li"),M=d("a"),j=m("Notes"),q=g(),C=d("li"),H=d("a"),P=m("Newsletter"),B=g(),F=d("li"),O=d("a"),V=p("svg"),W=p("path"),D=g(),G=d("a"),K=p("svg"),U=p("path"),this.h()},l(t){n=w(t,"HEADER",{class:!0});var e=$(n);o=w(e,"NAV",{});var i=$(o);a=w(i,"UL",{class:!0});var h=$(a);r=w(h,"LI",{class:!0});var d=$(r);s=w(d,"A",{href:!0,class:!0});var p=$(s);c=E(p,"Tan Li Hau"),p.forEach(f),d.forEach(f),l=y(h),u=w(h,"LI",{class:!0});var m=$(u);b=w(m,"A",{href:!0,class:!0});var g=$(b);x=E(g,"About"),g.forEach(f),m.forEach(f),A=y(h),k=w(h,"LI",{class:!0});var v=$(k);T=w(v,"A",{href:!0,class:!0});var J=$(T);z=E(J,"Writings"),J.forEach(f),v.forEach(f),N=y(h),R=w(h,"LI",{class:!0});var Q=$(R);S=w(Q,"A",{href:!0,class:!0});var X=$(S);L=E(X,"Talks"),X.forEach(f),Q.forEach(f),_=y(h),I=w(h,"LI",{class:!0});var Y=$(I);M=w(Y,"A",{href:!0,class:!0});var Z=$(M);j=E(Z,"Notes"),Z.forEach(f),Y.forEach(f),q=y(h),C=w(h,"LI",{class:!0});var tt=$(C);H=w(tt,"A",{href:!0,class:!0});var et=$(H);P=E(et,"Newsletter"),et.forEach(f),tt.forEach(f),B=y(h),F=w(h,"LI",{class:!0});var nt=$(F);O=w(nt,"A",{"aria-label":!0,href:!0,class:!0});var ot=$(O);V=w(ot,"svg",{viewBox:!0,width:!0,height:!0,class:!0},1);var at=$(V);W=w(at,"path",{d:!0},1),$(W).forEach(f),at.forEach(f),ot.forEach(f),D=y(nt),G=w(nt,"A",{"aria-label":!0,href:!0,class:!0});var rt=$(G);K=w(rt,"svg",{viewBox:!0,width:!0,height:!0,class:!0},1);var st=$(K);U=w(st,"path",{d:!0},1),$(U).forEach(f),st.forEach(f),rt.forEach(f),nt.forEach(f),h.forEach(f),i.forEach(f),e.forEach(f),this.h()},h(){v(s,"href","/"),v(s,"class","svelte-f3e4uo"),v(r,"class","svelte-f3e4uo"),v(b,"href","/about"),v(b,"class","svelte-f3e4uo"),v(u,"class","svelte-f3e4uo"),v(T,"href","/blogs"),v(T,"class","svelte-f3e4uo"),v(k,"class","svelte-f3e4uo"),v(S,"href","/talks"),v(S,"class","svelte-f3e4uo"),v(R,"class","svelte-f3e4uo"),v(M,"href","/notes"),v(M,"class","svelte-f3e4uo"),v(I,"class","svelte-f3e4uo"),v(H,"href","/newsletter"),v(H,"class","svelte-f3e4uo"),v(C,"class","svelte-f3e4uo"),v(W,"d","M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66\n    10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5\n    4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"),v(V,"viewBox","0 0 24 24"),v(V,"width","1em"),v(V,"height","1em"),v(V,"class","svelte-f3e4uo"),v(O,"aria-label","Twitter account"),v(O,"href","https://twitter.com/lihautan"),v(O,"class","svelte-f3e4uo"),v(U,"d","M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0\n    0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07\n    5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65\n    5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42\n    3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"),v(K,"viewBox","0 0 24 24"),v(K,"width","1em"),v(K,"height","1em"),v(K,"class","svelte-f3e4uo"),v(G,"aria-label","Github account"),v(G,"href","https://github.com/tanhauhau"),v(G,"class","svelte-f3e4uo"),v(F,"class","social svelte-f3e4uo"),v(a,"class","svelte-f3e4uo"),v(n,"class","svelte-f3e4uo")},m(t,e){h(t,n,e),i(n,o),i(o,a),i(a,r),i(r,s),i(s,c),i(a,l),i(a,u),i(u,b),i(b,x),i(a,A),i(a,k),i(k,T),i(T,z),i(a,N),i(a,R),i(R,S),i(S,L),i(a,_),i(a,I),i(I,M),i(M,j),i(a,q),i(a,C),i(C,H),i(H,P),i(a,B),i(a,F),i(F,O),i(O,V),i(V,W),i(F,D),i(F,G),i(G,K),i(K,U)},p:t,i:t,o:t,d(t){t&&f(n)}}}class K extends D{constructor(t){super(),W(this,t,null,G,s,{})}}function U(t,e,n){const o=t.slice();return o[6]=e[n],o}function J(t,e,n){const o=t.slice();return o[6]=e[n],o}function Q(t){let e,n;return{c(){e=d("meta"),this.h()},l(t){e=w(t,"META",{name:!0,content:!0}),this.h()},h(){v(e,"name","keywords"),v(e,"content",n=t[6])},m(t,n){h(t,e,n)},p(t,o){4&o&&n!==(n=t[6])&&v(e,"content",n)},d(t){t&&f(e)}}}function X(t){let e,n,o=t[6]+"";return{c(){e=d("span"),n=m(o),this.h()},l(t){e=w(t,"SPAN",{class:!0});var a=$(e);n=E(a,o),a.forEach(f),this.h()},h(){v(e,"class","svelte-186dllz")},m(t,o){h(t,e,o),i(e,n)},p(t,e){4&e&&o!==(o=t[6]+"")&&b(n,o)},d(t){t&&f(e)}}}function Y(t){let e,n,o,a,r,s,p,x,A,k,T,z,N,R,S,L,_,I;document.title=e="Note: "+t[1]+" | Tan Li Hau";let M=t[2],j=[];for(let e=0;e<M.length;e+=1)j[e]=Q(J(t,M,e));k=new K({});let q=t[2],V=[];for(let e=0;e<q.length;e+=1)V[e]=X(U(t,q,e));const W=t[4].default,D=function(t,e,n,o){if(t){const a=c(t,e,n,o);return t[0](a)}}(W,t,t[3],null);return{c(){n=d("link"),o=d("meta"),a=d("meta");for(let t=0;t<j.length;t+=1)j[t].c();r=d("meta"),s=g(),p=d("a"),x=m("Skip to content"),A=g(),P(k.$$.fragment),T=g(),z=d("main"),N=d("h1"),R=m(t[1]),S=g();for(let t=0;t<V.length;t+=1)V[t].c();L=g(),_=d("article"),D&&D.c(),this.h()},l(e){const c=function(t,e=document.body){return Array.from(e.querySelectorAll(t))}('[data-svelte="svelte-ywf7m8"]',document.head);n=w(c,"LINK",{href:!0,rel:!0}),o=w(c,"META",{name:!0,content:!0}),a=w(c,"META",{name:!0,content:!0});for(let t=0;t<j.length;t+=1)j[t].l(c);r=w(c,"META",{itemprop:!0,content:!0}),c.forEach(f),s=y(e),p=w(e,"A",{href:!0,class:!0});var l=$(p);x=E(l,"Skip to content"),l.forEach(f),A=y(e),B(k.$$.fragment,e),T=y(e),z=w(e,"MAIN",{id:!0,class:!0});var i=$(z);N=w(i,"H1",{});var h=$(N);R=E(h,t[1]),h.forEach(f),S=y(i);for(let t=0;t<V.length;t+=1)V[t].l(i);L=y(i),_=w(i,"ARTICLE",{class:!0});var u=$(_);D&&D.l(u),u.forEach(f),i.forEach(f),this.h()},h(){v(n,"href","https://lihautan.com/notes/react-tearing/assets/blog-base-967d71e9.css"),v(n,"rel","stylesheet"),v(o,"name","og:title"),v(o,"content",t[0]),v(a,"name","og:type"),v(a,"content","website"),v(r,"itemprop","url"),v(r,"content","https%3A%2F%2Flihautan.com%2Fnotes%2Freact-tearing"),v(p,"href","#content"),v(p,"class","skip svelte-186dllz"),v(_,"class","svelte-186dllz"),v(z,"id","content"),v(z,"class","blog svelte-186dllz")},m(t,e){i(document.head,n),i(document.head,o),i(document.head,a);for(let t=0;t<j.length;t+=1)j[t].m(document.head,null);i(document.head,r),h(t,s,e),h(t,p,e),i(p,x),h(t,A,e),F(k,t,e),h(t,T,e),h(t,z,e),i(z,N),i(N,R),i(z,S);for(let t=0;t<V.length;t+=1)V[t].m(z,null);i(z,L),i(z,_),D&&D.m(_,null),I=!0},p(t,[n]){if((!I||2&n)&&e!==(e="Note: "+t[1]+" | Tan Li Hau")&&(document.title=e),(!I||1&n)&&v(o,"content",t[0]),4&n){let e;for(M=t[2],e=0;e<M.length;e+=1){const o=J(t,M,e);j[e]?j[e].p(o,n):(j[e]=Q(o),j[e].c(),j[e].m(r.parentNode,r))}for(;e<j.length;e+=1)j[e].d(1);j.length=M.length}if((!I||2&n)&&b(R,t[1]),4&n){let e;for(q=t[2],e=0;e<q.length;e+=1){const o=U(t,q,e);V[e]?V[e].p(o,n):(V[e]=X(o),V[e].c(),V[e].m(z,L))}for(;e<V.length;e+=1)V[e].d(1);V.length=q.length}D&&D.p&&8&n&&l(D,W,t,t[3],n,null,null)},i(t){I||(C(k.$$.fragment,t),C(D,t),I=!0)},o(t){H(k.$$.fragment,t),H(D,t),I=!1},d(t){f(n),f(o),f(a),u(j,t),f(r),t&&f(s),t&&f(p),t&&f(A),O(k,t),t&&f(T),t&&f(z),u(V,t),D&&D.d(t)}}}function Z(t,e,n){let{name:o}=e,{title:a}=e,{tags:r=[]}=e,{$$slots:s={},$$scope:c}=e;return t.$set=t=>{"name"in t&&n(0,o=t.name),"title"in t&&n(1,a=t.title),"tags"in t&&n(2,r=t.tags),"$$scope"in t&&n(3,c=t.$$scope)},[o,a,r,c,s]}class tt extends D{constructor(t){super(),W(this,t,Z,Y,s,{name:0,title:1,tags:2})}}function et(t){let e,n,o,a,r,s,c,l,u,p,b,x,A,k,T,z,N,R,S,L;return{c(){e=d("p"),n=m("Saw an issue about "),o=d("a"),a=m("fixing tearing issue in React"),r=g(),s=d("p"),c=m("A good explanation of tearing is here: "),l=d("a"),u=m("https://stackoverflow.com/questions/54891675/what-is-tearing-in-the-context-of-the-react-redux"),p=g(),b=d("p"),x=m("In short, tearing is an potential issue when React concurrent mode interacts with external state management tools."),A=g(),k=d("p"),T=m("React Concurrent mode allows React to render asynchronously. Rendering phase is no longer happening at one go, but split up into multiple small chunks.\nAnd the tearing issue arise if the external state changes in the middle of rendering phase, causing part of the application rendered\nwith the old data, and part with the latest data."),z=g(),N=d("p"),R=m("This somehow reminds me of the zombie child, stale props issue of redux: "),S=d("a"),L=m("https://kaihao.dev/posts/Stale-props-and-zombie-children-in-Redux"),this.h()},l(t){e=w(t,"P",{});var i=$(e);n=E(i,"Saw an issue about "),o=w(i,"A",{href:!0,rel:!0});var h=$(o);a=E(h,"fixing tearing issue in React"),h.forEach(f),i.forEach(f),r=y(t),s=w(t,"P",{});var d=$(s);c=E(d,"A good explanation of tearing is here: "),l=w(d,"A",{href:!0,rel:!0});var m=$(l);u=E(m,"https://stackoverflow.com/questions/54891675/what-is-tearing-in-the-context-of-the-react-redux"),m.forEach(f),d.forEach(f),p=y(t),b=w(t,"P",{});var g=$(b);x=E(g,"In short, tearing is an potential issue when React concurrent mode interacts with external state management tools."),g.forEach(f),A=y(t),k=w(t,"P",{});var v=$(k);T=E(v,"React Concurrent mode allows React to render asynchronously. Rendering phase is no longer happening at one go, but split up into multiple small chunks.\nAnd the tearing issue arise if the external state changes in the middle of rendering phase, causing part of the application rendered\nwith the old data, and part with the latest data."),v.forEach(f),z=y(t),N=w(t,"P",{});var _=$(N);R=E(_,"This somehow reminds me of the zombie child, stale props issue of redux: "),S=w(_,"A",{href:!0,rel:!0});var I=$(S);L=E(I,"https://kaihao.dev/posts/Stale-props-and-zombie-children-in-Redux"),I.forEach(f),_.forEach(f),this.h()},h(){v(o,"href","https://github.com/facebook/react/pull/16623"),v(o,"rel","nofollow"),v(l,"href","https://stackoverflow.com/questions/54891675/what-is-tearing-in-the-context-of-the-react-redux"),v(l,"rel","nofollow"),v(S,"href","https://kaihao.dev/posts/Stale-props-and-zombie-children-in-Redux"),v(S,"rel","nofollow")},m(t,f){h(t,e,f),i(e,n),i(e,o),i(o,a),h(t,r,f),h(t,s,f),i(s,c),i(s,l),i(l,u),h(t,p,f),h(t,b,f),i(b,x),h(t,A,f),h(t,k,f),i(k,T),h(t,z,f),h(t,N,f),i(N,R),i(N,S),i(S,L)},d(t){t&&f(e),t&&f(r),t&&f(s),t&&f(p),t&&f(b),t&&f(A),t&&f(k),t&&f(z),t&&f(N)}}}function nt(t){let n,o;const a=[ot];let r={$$slots:{default:[et]},$$scope:{ctx:t}};for(let t=0;t<a.length;t+=1)r=e(r,a[t]);return n=new tt({props:r}),{c(){P(n.$$.fragment)},l(t){B(n.$$.fragment,t)},m(t,e){F(n,t,e),o=!0},p(t,[e]){const o=0&e?function(t,e){const n={},o={},a={$$scope:1};let r=t.length;for(;r--;){const s=t[r],c=e[r];if(c){for(const t in s)t in c||(o[t]=1);for(const t in c)a[t]||(n[t]=c[t],a[t]=1);t[r]=c}else for(const t in s)a[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}(a,[(r=ot,"object"==typeof r&&null!==r?r:{})]):{};var r;1&e&&(o.$$scope={dirty:e,ctx:t}),n.$set(o)},i(t){o||(C(n.$$.fragment,t),o=!0)},o(t){H(n.$$.fragment,t),o=!1},d(t){O(n,t)}}}const ot={title:"React Tearing",tags:["tearing","rendering","zombie child"],slug:"notes/react-tearing",type:"notes",name:"react-tearing",layout:"note"};class at extends D{constructor(t){super(),W(this,t,null,nt,s,{})}}setTimeout(()=>{new at({target:document.querySelector("#app"),hydrate:!0});if(document.querySelector(".twitter-tweet")){const t=document.createElement("script");t.async=!0,t.src="https://platform.twitter.com/widgets.js",t.charset="utf-8",document.body.appendChild(t)}if("loading"in HTMLImageElement.prototype){document.querySelectorAll('img[loading="lazy"]').forEach(t=>{t.src=t.dataset.src})}else{const t=document.createElement("script");t.src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js",document.body.appendChild(t)}},3e3);
