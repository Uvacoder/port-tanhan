{"data":{"site":{"siteMetadata":{"title":"Tan Li Hau","author":"Tan Li Hau"}},"markdownRemark":{"id":"4653a207-3a04-5778-86f4-3d48f749757b","excerpt":"","html":"<h1>Motivation</h1>\n<p>A while ago, I posted an article about <a href=\"https://lihautan.com/understand-the-frontend-tools/\">understanding frontend tools</a>. I mentioned that the way I make sense of all the tools and frameworks out there in the JavaScript world, is to try writing a web application with plain JavaScript, and start asking questions.</p>\n<p>One of the question is:</p>\n<blockquote>\n<p><strong>How do we make our JavaScript code modular</strong>, having each piece of code <strong>independent</strong> of each other, without having to worry other parts of code affecting it, yet able to <strong>share functionality</strong> among different modules.</p>\n</blockquote>\n<p>So I will attempt to answer the question by first exploring how things are done in a “Vanilla” way, and my two cents about the inherent problem with it and how each tooling come about solving those problems.</p>\n<h1>The Vanilla way</h1>\n<p>Imagine the following scenario:</p>\n<p>You are writing a web application. You created a script, <code class=\"language-text\">app.js</code>, and you added a <code class=\"language-text\">&lt;script&gt;</code> tag into your <code class=\"language-text\">index.html</code>.</p>\n<p class=\"filename\">index.html</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/app.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script language-javascript\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Then you decided to add jQuery, because you heard that jQuery is amazing.</p>\n<p><strong>So how would you add jQuery into your application?</strong></p>\n<p>There’s a few ways to go about, but the easiest would be:</p>\n<ul>\n<li>heading to <a href=\"https://jquery.com/\">jQuery’s website</a></li>\n<li>click download</li>\n<li>dragged the downloaded file to your project folder</li>\n<li>and add another script tag before your <code class=\"language-text\">app.js</code>.</li>\n</ul>\n<p>\n  <a class=\"gatsby-resp-image-link\" href=\"/static/c4929b81633a5a8b085650e8cf509a93/15912/jquery.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n  \n  <figure class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 25.160771704180064%; position: relative; bottom: 0; left: 0; background-image: url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABY0lEQVQY0yXMy04TYRiH8YkxlZ0I0TsAeppvZjrfnJhxrK0UmPRMW5qWUjwsCAlRChsS4xJq0taCoAmJF+XCxLjwVh4munjy5pd/8iqLg2ueHnxlaW/GctyTwfyfl/eveDa84nF/zqPdGYn2hAfNMQu7Ux62p//dGKPULlDql3FjEp0JStp+gbA8qu0encFrnLBIUpOUKk2OPpzh5TdYEZL1whbN3pBVY51mlGd2XOb6fJ/bT++4+fiGb+d9ypshimqYqOkUZ6cjPo8vCQOfVHKNXrfL6egEx5KxV+m0dhi9Pyaj6py0XH5+qfPre58/P97y+27I37suhzUXJaNLTMsmv12hWK7hBCG6bvByM6IQVTFtByEEfr5IWIrQc5LAs+lUN2hEBUqhTdGXvAoklqmjZI34YS6H43rYjotl2xiGget5+MFzpGWhaVq8u3i+jyklqtBQNSO+OpmsIJ1V40RswT3bo7ngbq71cQAAAABJRU5ErkJggg==&#x27;); background-size: cover; display: block;\">\n      <img class=\"gatsby-resp-image-image\" style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\" alt=\"jquery page\" title=\"Downloading jQuery from jQuery.com\" src=\"/static/c4929b81633a5a8b085650e8cf509a93/623ee/jquery.png\" srcset=\"/static/c4929b81633a5a8b085650e8cf509a93/816c5/jquery.png 148w, /static/c4929b81633a5a8b085650e8cf509a93/c766b/jquery.png 295w, /static/c4929b81633a5a8b085650e8cf509a93/623ee/jquery.png 590w, /static/c4929b81633a5a8b085650e8cf509a93/e5345/jquery.png 885w, /static/c4929b81633a5a8b085650e8cf509a93/7a439/jquery.png 1180w, /static/c4929b81633a5a8b085650e8cf509a93/84fe0/jquery.png 1770w, /static/c4929b81633a5a8b085650e8cf509a93/15912/jquery.png 2488w\" sizes=\"(max-width: 590px) 100vw, 590px\">\n    </span>\n  <figcaption>Downloading jQuery from jQuery.com</figcaption></figure>\n  \n  </a>\n    </p>\n<p class=\"filename\">index.html</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/jquery.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script language-javascript\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></span>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/app.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script language-javascript\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<div class=\"caption\">Adding <code class=\"language-text\">jquery</code> into html</div>\n<p>Although jQuery is awesome, but adding it takes <strong>a lot of steps and effort</strong>. And to upgrade jQuery, you would have to redo all the step.</p>\n<blockquote>\n<p><strong>Installing a library</strong> is a hassle back then.</p>\n</blockquote>\n<p>Let’s say we add another file, <code class=\"language-text\">utils.js</code> for all our utility functions.</p>\n<p class=\"filename\">index.html</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/jquery.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script language-javascript\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/utils.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script language-javascript\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></span>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/app.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script language-javascript\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p class=\"filename\">utils.js</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> pi <span class=\"token operator\">=</span> <span class=\"token number\">3.142</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">area</span><span class=\"token punctuation\">(</span>radius<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> pi <span class=\"token operator\">*</span> radius <span class=\"token operator\">*</span> radius<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Although you meant to just share the function <code class=\"language-text\">area</code> from <code class=\"language-text\">utils.js</code>, in <code class=\"language-text\">app.js</code>, you would notice that both <code class=\"language-text\">pi</code> and <code class=\"language-text\">area</code> are available.</p>\n<p class=\"filename\">app.js</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">area</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 78.55</span>\n\n<span class=\"token comment\">// pi is available too!</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>pi<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 3.142</span></code></pre></div>\n<p>That is because when you declare a variable or a function within a script, it will be available to the <strong>global scope</strong>.</p>\n<p>The only way to hide it, is to use Immediately Invoked Function Expression (IIFE).</p>\n<p class=\"filename\">utils.js</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> utils <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// you hide `pi` within the function scope</span>\n  <span class=\"token keyword\">var</span> pi <span class=\"token operator\">=</span> <span class=\"token number\">3.142</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">area</span><span class=\"token punctuation\">(</span>radius<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> pi <span class=\"token operator\">*</span> radius <span class=\"token operator\">*</span> radius<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> area <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p class=\"filename\">app.js</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>utils<span class=\"token punctuation\">.</span><span class=\"token function\">area</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 78.55</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>pi<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Reference error, `pi` is not defined</span></code></pre></div>\n<!-- TODO: module pattern -->\n<p>This is called the <strong>module pattern</strong>. The only way to control what to exposed to the global scope.</p>\n<blockquote>\n<p><strong>Scoping the variables</strong> within the module is hard, and you can only do it via the <strong>module pattern</strong>.</p>\n</blockquote>\n<p>If you have noticed, we access <code class=\"language-text\">utils</code> freely, because it is defined in the global scope. If you have another module / library that named <code class=\"language-text\">utils</code>, they would have conflicted against each other.</p>\n<p>We want to <em>“import”</em> the modules freely, and renamed it anyway we want, without worrying naming conflicts amongst modules / libraries.</p>\n<blockquote>\n<p><strong>Importing</strong> without naming conflicts is what we want.</p>\n</blockquote>\n<p>So I hereby summarize, the “module” problem in JavaScript,</p>\n<ul>\n<li><strong>Installability</strong> - the ability to install easily</li>\n<li><strong>Scopability</strong> - the ability of having clearly defined scoped within modules</li>\n<li><strong>Importability</strong> - the ability to import modules freely without worry</li>\n</ul>\n<p>Well, I am not sure some of these word existed, I think I might have made up some of them to make it rhyme.</p>\n<p>The problems above are no longer a concern any more in the 2019 world, yet it is still interesting to see what the JavaScript community has created to solve these problems.</p>\n<h1>Installability</h1>\n<blockquote>\n<p>The “how easy is it to install” problem.</p>\n</blockquote>","frontmatter":{"date":"April 12, 2019","title":"History of Web Development: JavaScript Modules","occasion":"React Knowledgeable Week 25","occasionLink":"https://github.com/Shopee/react-knowledgeable/issues/89","venue":"Shopee SG","venueLink":"https://www.google.com/maps/place/Shopee+SG/@1.291278,103.7846628,15z/data=!4m2!3m1!1s0x0:0x7ddf2e854cf6e4e4?ved=2ahUKEwi5jbz6z_vgAhVBP48KHWSEAmMQ_BIwFXoECAEQCA","description":null,"slides":"https://slides.com/tanhauhau/js-module","video":null}}},"pageContext":{"slug":"/javascript-modules/","type":"talk","noteDate":null,"noteTitle":null,"previous":{"fileAbsolutePath":"/Users/lhtan/Projects/lihautan/content/talk/css-code-splitting/index.md","fields":{"slug":"/css-code-splitting/","type":"talk","noteDate":null,"noteTitle":null},"frontmatter":{"title":"CSS Code Splitting"}},"next":{"fileAbsolutePath":"/Users/lhtan/Projects/lihautan/content/blog/errors-encountered-upgrading-flow-0.85/index.md","fields":{"slug":"/errors-encountered-upgrading-flow-0.85/","type":"blog","noteDate":null,"noteTitle":null},"frontmatter":{"title":"Errors encountered upgrading Flow v0.85"}}}}