{"componentChunkName":"component---src-templates-blog-post-js","path":"/hydrating-text-content/","result":{"data":{"site":{"siteMetadata":{"title":"Tan Li Hau","author":"Tan Li Hau"}},"markdownRemark":{"id":"f8c064e3-663a-59de-a0ed-28eeaaa08349","excerpt":"","html":"<p>Recently, I was bewildered by React hydration warning:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Text content did not match. Server: &quot;Count: 0&quot; Client: &quot;Count: &quot;</code></pre></div>\n<p>To give you a sense of the situation, this is the component I was trying to rehydrate:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>Count<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>Increment<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Although React warned about the mismatch in the console, the hydrated app still worked fine. So I should probably ignore it. <span class=\"emoji\">ðŸ™ˆ</span></p>\n<p>Still, my curiosity made me dig deeper, to find out the reason behind it.</p>\n<p>So, what happened?</p>\n<p>Letâ€™s start with what is hydration?</p>\n<p>what is server side rendering?</p>\n<p><a href=\"https://developers.google.com/web/updates/2019/02/rendering-on-the-web\">https://developers.google.com/web/updates/2019/02/rendering-on-the-web</a></p>\n<p>The component, <code class=\"language-text\">App</code> in this example, returns</p>\n<p>React PR for cleaning up comments from ssr output: <a href=\"https://github.com/facebook/react/commit/e955008b9bbee93fcaf423d4afaf4d22023e2c3f\">https://github.com/facebook/react/commit/e955008b9bbee93fcaf423d4afaf4d22023e2c3f</a></p>\n<ul>\n<li>Better warning: <a href=\"https://github.com/facebook/react/pull/10026/files\">https://github.com/facebook/react/pull/10026/files</a></li>\n</ul>","fields":{"slug":"/hydrating-text-content/","wip":true},"frontmatter":{"title":"Hydrating text content from Server-Side Rendering","date":null,"lastUpdated":null,"description":null,"tags":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/hydrating-text-content/","type":"blog","noteDate":null,"noteTitle":null,"wip":true,"heroImageUrl":null,"heroTwitterImageUrl":null,"previous":null,"next":null}}}